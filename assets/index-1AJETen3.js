(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Cy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var gD={exports:{}},by={},vD={exports:{}},cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am=Symbol.for("react.element"),z4=Symbol.for("react.portal"),G4=Symbol.for("react.fragment"),H4=Symbol.for("react.strict_mode"),V4=Symbol.for("react.profiler"),W4=Symbol.for("react.provider"),X4=Symbol.for("react.context"),j4=Symbol.for("react.forward_ref"),Y4=Symbol.for("react.suspense"),J4=Symbol.for("react.memo"),K4=Symbol.for("react.lazy"),Ib=Symbol.iterator;function Z4(i){return i===null||typeof i!="object"?null:(i=Ib&&i[Ib]||i["@@iterator"],typeof i=="function"?i:null)}var yD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_D=Object.assign,xD={};function xf(i,t,n){this.props=i,this.context=t,this.refs=xD,this.updater=n||yD}xf.prototype.isReactComponent={};xf.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};xf.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function SD(){}SD.prototype=xf.prototype;function mM(i,t,n){this.props=i,this.context=t,this.refs=xD,this.updater=n||yD}var gM=mM.prototype=new SD;gM.constructor=mM;_D(gM,xf.prototype);gM.isPureReactComponent=!0;var Db=Array.isArray,AD=Object.prototype.hasOwnProperty,vM={current:null},ED={key:!0,ref:!0,__self:!0,__source:!0};function MD(i,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)AD.call(t,r)&&!ED.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(i&&i.defaultProps)for(r in l=i.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:am,type:i,key:o,ref:a,props:s,_owner:vM.current}}function Q4(i,t){return{$$typeof:am,type:i.type,key:t,ref:i.ref,props:i.props,_owner:i._owner}}function yM(i){return typeof i=="object"&&i!==null&&i.$$typeof===am}function q4(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(n){return t[n]})}var Lb=/\/+/g;function Ix(i,t){return typeof i=="object"&&i!==null&&i.key!=null?q4(""+i.key):t.toString(36)}function i0(i,t,n,r,s){var o=typeof i;(o==="undefined"||o==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case am:case z4:a=!0}}if(a)return a=i,s=s(a),i=r===""?"."+Ix(a,0):r,Db(s)?(n="",i!=null&&(n=i.replace(Lb,"$&/")+"/"),i0(s,t,n,"",function(u){return u})):s!=null&&(yM(s)&&(s=Q4(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Lb,"$&/")+"/")+i)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Db(i))for(var l=0;l<i.length;l++){o=i[l];var c=r+Ix(o,l);a+=i0(o,t,n,c,s)}else if(c=Z4(i),typeof c=="function")for(i=c.call(i),l=0;!(o=i.next()).done;)o=o.value,c=r+Ix(o,l++),a+=i0(o,t,n,c,s);else if(o==="object")throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Cg(i,t,n){if(i==null)return i;var r=[],s=0;return i0(i,r,"","",function(o){return t.call(n,o,s++)}),r}function $4(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(n){(i._status===0||i._status===-1)&&(i._status=1,i._result=n)},function(n){(i._status===0||i._status===-1)&&(i._status=2,i._result=n)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var Nr={current:null},r0={transition:null},ez={ReactCurrentDispatcher:Nr,ReactCurrentBatchConfig:r0,ReactCurrentOwner:vM};cn.Children={map:Cg,forEach:function(i,t,n){Cg(i,function(){t.apply(this,arguments)},n)},count:function(i){var t=0;return Cg(i,function(){t++}),t},toArray:function(i){return Cg(i,function(t){return t})||[]},only:function(i){if(!yM(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};cn.Component=xf;cn.Fragment=G4;cn.Profiler=V4;cn.PureComponent=mM;cn.StrictMode=H4;cn.Suspense=Y4;cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ez;cn.cloneElement=function(i,t,n){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var r=_D({},i.props),s=i.key,o=i.ref,a=i._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=vM.current),t.key!==void 0&&(s=""+t.key),i.type&&i.type.defaultProps)var l=i.type.defaultProps;for(c in t)AD.call(t,c)&&!ED.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:am,type:i.type,key:s,ref:o,props:r,_owner:a}};cn.createContext=function(i){return i={$$typeof:X4,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:W4,_context:i},i.Consumer=i};cn.createElement=MD;cn.createFactory=function(i){var t=MD.bind(null,i);return t.type=i,t};cn.createRef=function(){return{current:null}};cn.forwardRef=function(i){return{$$typeof:j4,render:i}};cn.isValidElement=yM;cn.lazy=function(i){return{$$typeof:K4,_payload:{_status:-1,_result:i},_init:$4}};cn.memo=function(i,t){return{$$typeof:J4,type:i,compare:t===void 0?null:t}};cn.startTransition=function(i){var t=r0.transition;r0.transition={};try{i()}finally{r0.transition=t}};cn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};cn.useCallback=function(i,t){return Nr.current.useCallback(i,t)};cn.useContext=function(i){return Nr.current.useContext(i)};cn.useDebugValue=function(){};cn.useDeferredValue=function(i){return Nr.current.useDeferredValue(i)};cn.useEffect=function(i,t){return Nr.current.useEffect(i,t)};cn.useId=function(){return Nr.current.useId()};cn.useImperativeHandle=function(i,t,n){return Nr.current.useImperativeHandle(i,t,n)};cn.useInsertionEffect=function(i,t){return Nr.current.useInsertionEffect(i,t)};cn.useLayoutEffect=function(i,t){return Nr.current.useLayoutEffect(i,t)};cn.useMemo=function(i,t){return Nr.current.useMemo(i,t)};cn.useReducer=function(i,t,n){return Nr.current.useReducer(i,t,n)};cn.useRef=function(i){return Nr.current.useRef(i)};cn.useState=function(i){return Nr.current.useState(i)};cn.useSyncExternalStore=function(i,t,n){return Nr.current.useSyncExternalStore(i,t,n)};cn.useTransition=function(){return Nr.current.useTransition()};cn.version="18.2.0";vD.exports=cn;var ee=vD.exports;const Rn=Cy(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tz=ee,nz=Symbol.for("react.element"),iz=Symbol.for("react.fragment"),rz=Object.prototype.hasOwnProperty,sz=tz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oz={key:!0,ref:!0,__self:!0,__source:!0};function wD(i,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)rz.call(t,r)&&!oz.hasOwnProperty(r)&&(s[r]=t[r]);if(i&&i.defaultProps)for(r in t=i.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:nz,type:i,key:o,ref:a,props:s,_owner:sz.current}}by.Fragment=iz;by.jsx=wD;by.jsxs=wD;gD.exports=by;var Me=gD.exports,XS={},TD={exports:{}},ys={},CD={exports:{}},bD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(H,X){var K=H.length;H.push(X);e:for(;0<K;){var k=K-1>>>1,Z=H[k];if(0<s(Z,X))H[k]=X,H[K]=Z,K=k;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],K=H.pop();if(K!==X){H[0]=K;e:for(var k=0,Z=H.length,Q=Z>>>1;k<Q;){var se=2*(k+1)-1,le=H[se],fe=se+1,ue=H[fe];if(0>s(le,K))fe<Z&&0>s(ue,le)?(H[k]=ue,H[fe]=K,k=fe):(H[k]=le,H[se]=K,k=se);else if(fe<Z&&0>s(ue,K))H[k]=ue,H[fe]=K,k=fe;else break e}}return X}function s(H,X){var K=H.sortIndex-X.sortIndex;return K!==0?K:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=H)r(u),X.sortIndex=X.expirationTime,t(c,X);else break;X=n(u)}}function M(H){if(_=!1,A(H),!v)if(n(c)!==null)v=!0,q(C);else{var X=n(u);X!==null&&he(M,X.startTime-H)}}function C(H,X){v=!1,_&&(_=!1,y(I),I=-1),g=!0;var K=p;try{for(A(X),f=n(c);f!==null&&(!(f.expirationTime>X)||H&&!O());){var k=f.callback;if(typeof k=="function"){f.callback=null,p=f.priorityLevel;var Z=k(f.expirationTime<=X);X=i.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),A(X)}else r(c);f=n(c)}if(f!==null)var Q=!0;else{var se=n(u);se!==null&&he(M,se.startTime-X),Q=!1}return Q}finally{f=null,p=K,g=!1}}var T=!1,R=null,I=-1,P=5,B=-1;function O(){return!(i.unstable_now()-B<P)}function N(){if(R!==null){var H=i.unstable_now();B=H;var X=!0;try{X=R(!0,H)}finally{X?ne():(T=!1,R=null)}}else T=!1}var ne;if(typeof S=="function")ne=function(){S(N)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,j=z.port2;z.port1.onmessage=N,ne=function(){j.postMessage(null)}}else ne=function(){x(N,0)};function q(H){R=H,T||(T=!0,ne())}function he(H,X){I=x(function(){H(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,q(C))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return n(c)},i.unstable_next=function(H){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var K=p;p=X;try{return H()}finally{p=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return X()}finally{p=K}},i.unstable_scheduleCallback=function(H,X,K){var k=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?k+K:k):K=k,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=K+Z,H={id:h++,callback:X,priorityLevel:H,startTime:K,expirationTime:Z,sortIndex:-1},K>k?(H.sortIndex=K,t(u,H),n(c)===null&&H===n(u)&&(_?(y(I),I=-1):_=!0,he(M,K-k))):(H.sortIndex=Z,t(c,H),v||g||(v=!0,q(C))),H},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(H){var X=p;return function(){var K=p;p=X;try{return H.apply(this,arguments)}finally{p=K}}}})(bD);CD.exports=bD;var az=CD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD=ee,gs=az;function Je(i){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+i,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PD=new Set,xp={};function du(i,t){$h(i,t),$h(i+"Capture",t)}function $h(i,t){for(xp[i]=t,i=0;i<t.length;i++)PD.add(t[i])}var Ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jS=Object.prototype.hasOwnProperty,lz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ub={},Fb={};function cz(i){return jS.call(Fb,i)?!0:jS.call(Ub,i)?!1:lz.test(i)?Fb[i]=!0:(Ub[i]=!0,!1)}function uz(i,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function hz(i,t,n,r){if(t===null||typeof t>"u"||uz(i,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kr(i,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=i,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){ar[i]=new kr(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var t=i[0];ar[t]=new kr(t,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){ar[i]=new kr(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){ar[i]=new kr(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){ar[i]=new kr(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){ar[i]=new kr(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){ar[i]=new kr(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){ar[i]=new kr(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){ar[i]=new kr(i,5,!1,i.toLowerCase(),null,!1,!1)});var _M=/[\-:]([a-z])/g;function xM(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var t=i.replace(_M,xM);ar[t]=new kr(t,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var t=i.replace(_M,xM);ar[t]=new kr(t,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var t=i.replace(_M,xM);ar[t]=new kr(t,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){ar[i]=new kr(i,1,!1,i.toLowerCase(),null,!1,!1)});ar.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){ar[i]=new kr(i,1,!1,i.toLowerCase(),null,!0,!0)});function SM(i,t,n,r){var s=ar.hasOwnProperty(t)?ar[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hz(t,n,s,r)&&(n=null),r||s===null?cz(t)&&(n===null?i.removeAttribute(t):i.setAttribute(t,""+n)):s.mustUseProperty?i[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?i.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?i.setAttributeNS(r,t,n):i.setAttribute(t,n))))}var La=RD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bg=Symbol.for("react.element"),_h=Symbol.for("react.portal"),xh=Symbol.for("react.fragment"),AM=Symbol.for("react.strict_mode"),YS=Symbol.for("react.profiler"),BD=Symbol.for("react.provider"),ID=Symbol.for("react.context"),EM=Symbol.for("react.forward_ref"),JS=Symbol.for("react.suspense"),KS=Symbol.for("react.suspense_list"),MM=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),DD=Symbol.for("react.offscreen"),Ob=Symbol.iterator;function id(i){return i===null||typeof i!="object"?null:(i=Ob&&i[Ob]||i["@@iterator"],typeof i=="function"?i:null)}var ri=Object.assign,Dx;function kd(i){if(Dx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dx=t&&t[1]||""}return`
`+Dx+i}var Lx=!1;function Ux(i,t){if(!i||Lx)return"";Lx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(i,[],t)}else{try{t.call()}catch(u){r=u}i.call(t.prototype)}else{try{throw Error()}catch(u){r=u}i()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return i.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",i.displayName)),c}while(1<=a&&0<=l);break}}}finally{Lx=!1,Error.prepareStackTrace=n}return(i=i?i.displayName||i.name:"")?kd(i):""}function fz(i){switch(i.tag){case 5:return kd(i.type);case 16:return kd("Lazy");case 13:return kd("Suspense");case 19:return kd("SuspenseList");case 0:case 2:case 15:return i=Ux(i.type,!1),i;case 11:return i=Ux(i.type.render,!1),i;case 1:return i=Ux(i.type,!0),i;default:return""}}function ZS(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case xh:return"Fragment";case _h:return"Portal";case YS:return"Profiler";case AM:return"StrictMode";case JS:return"Suspense";case KS:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ID:return(i.displayName||"Context")+".Consumer";case BD:return(i._context.displayName||"Context")+".Provider";case EM:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case MM:return t=i.displayName||null,t!==null?t:ZS(i.type)||"Memo";case al:t=i._payload,i=i._init;try{return ZS(i(t))}catch{}}return null}function dz(i){var t=i.type;switch(i.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=t.render,i=i.displayName||i.name||"",t.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ZS(t);case 8:return t===AM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pl(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function LD(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pz(i){var t=LD(i)?"checked":"value",n=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),r=""+i[t];if(!i.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(i,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function Rg(i){i._valueTracker||(i._valueTracker=pz(i))}function UD(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return i&&(r=LD(i)?i.checked?"true":"false":i.value),i=r,i!==n?(t.setValue(i),!0):!1}function I0(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function QS(i,t){var n=t.checked;return ri({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??i._wrapperState.initialChecked})}function Nb(i,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pl(t.value!=null?t.value:n),i._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function FD(i,t){t=t.checked,t!=null&&SM(i,"checked",t,!1)}function qS(i,t){FD(i,t);var n=Pl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&i.value===""||i.value!=n)&&(i.value=""+n):i.value!==""+n&&(i.value=""+n);else if(r==="submit"||r==="reset"){i.removeAttribute("value");return}t.hasOwnProperty("value")?$S(i,t.type,n):t.hasOwnProperty("defaultValue")&&$S(i,t.type,Pl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(i.defaultChecked=!!t.defaultChecked)}function kb(i,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+i._wrapperState.initialValue,n||t===i.value||(i.value=t),i.defaultValue=t}n=i.name,n!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,n!==""&&(i.name=n)}function $S(i,t,n){(t!=="number"||I0(i.ownerDocument)!==i)&&(n==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+n&&(i.defaultValue=""+n))}var zd=Array.isArray;function Hh(i,t,n,r){if(i=i.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<i.length;n++)s=t.hasOwnProperty("$"+i[n].value),i[n].selected!==s&&(i[n].selected=s),s&&r&&(i[n].defaultSelected=!0)}else{for(n=""+Pl(n),t=null,s=0;s<i.length;s++){if(i[s].value===n){i[s].selected=!0,r&&(i[s].defaultSelected=!0);return}t!==null||i[s].disabled||(t=i[s])}t!==null&&(t.selected=!0)}}function eA(i,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return ri({},t,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function zb(i,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Je(92));if(zd(n)){if(1<n.length)throw Error(Je(93));n=n[0]}t=n}t==null&&(t=""),n=t}i._wrapperState={initialValue:Pl(n)}}function OD(i,t){var n=Pl(t.value),r=Pl(t.defaultValue);n!=null&&(n=""+n,n!==i.value&&(i.value=n),t.defaultValue==null&&i.defaultValue!==n&&(i.defaultValue=n)),r!=null&&(i.defaultValue=""+r)}function Gb(i){var t=i.textContent;t===i._wrapperState.initialValue&&t!==""&&t!==null&&(i.value=t)}function ND(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tA(i,t){return i==null||i==="http://www.w3.org/1999/xhtml"?ND(t):i==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Pg,kD=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return i(t,n,r,s)})}:i}(function(i,t){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=t;else{for(Pg=Pg||document.createElement("div"),Pg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pg.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;t.firstChild;)i.appendChild(t.firstChild)}});function Sp(i,t){if(t){var n=i.firstChild;if(n&&n===i.lastChild&&n.nodeType===3){n.nodeValue=t;return}}i.textContent=t}var Jd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mz=["Webkit","ms","Moz","O"];Object.keys(Jd).forEach(function(i){mz.forEach(function(t){t=t+i.charAt(0).toUpperCase()+i.substring(1),Jd[t]=Jd[i]})});function zD(i,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jd.hasOwnProperty(i)&&Jd[i]?(""+t).trim():t+"px"}function GD(i,t){i=i.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zD(n,t[n],r);n==="float"&&(n="cssFloat"),r?i.setProperty(n,s):i[n]=s}}var gz=ri({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nA(i,t){if(t){if(gz[i]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,i));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function iA(i,t){if(i.indexOf("-")===-1)return typeof t.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rA=null;function wM(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var sA=null,Vh=null,Wh=null;function Hb(i){if(i=um(i)){if(typeof sA!="function")throw Error(Je(280));var t=i.stateNode;t&&(t=Dy(t),sA(i.stateNode,i.type,t))}}function HD(i){Vh?Wh?Wh.push(i):Wh=[i]:Vh=i}function VD(){if(Vh){var i=Vh,t=Wh;if(Wh=Vh=null,Hb(i),t)for(i=0;i<t.length;i++)Hb(t[i])}}function WD(i,t){return i(t)}function XD(){}var Fx=!1;function jD(i,t,n){if(Fx)return i(t,n);Fx=!0;try{return WD(i,t,n)}finally{Fx=!1,(Vh!==null||Wh!==null)&&(XD(),VD())}}function Ap(i,t){var n=i.stateNode;if(n===null)return null;var r=Dy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(i=i.type,r=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!r;break e;default:i=!1}if(i)return null;if(n&&typeof n!="function")throw Error(Je(231,t,typeof n));return n}var oA=!1;if(Ca)try{var rd={};Object.defineProperty(rd,"passive",{get:function(){oA=!0}}),window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{oA=!1}function vz(i,t,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Kd=!1,D0=null,L0=!1,aA=null,yz={onError:function(i){Kd=!0,D0=i}};function _z(i,t,n,r,s,o,a,l,c){Kd=!1,D0=null,vz.apply(yz,arguments)}function xz(i,t,n,r,s,o,a,l,c){if(_z.apply(this,arguments),Kd){if(Kd){var u=D0;Kd=!1,D0=null}else throw Error(Je(198));L0||(L0=!0,aA=u)}}function pu(i){var t=i,n=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(n=t.return),i=t.return;while(i)}return t.tag===3?n:null}function YD(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function Vb(i){if(pu(i)!==i)throw Error(Je(188))}function Sz(i){var t=i.alternate;if(!t){if(t=pu(i),t===null)throw Error(Je(188));return t!==i?null:i}for(var n=i,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Vb(s),i;if(o===r)return Vb(s),t;o=o.sibling}throw Error(Je(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(Je(189))}}if(n.alternate!==r)throw Error(Je(190))}if(n.tag!==3)throw Error(Je(188));return n.stateNode.current===n?i:t}function JD(i){return i=Sz(i),i!==null?KD(i):null}function KD(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var t=KD(i);if(t!==null)return t;i=i.sibling}return null}var ZD=gs.unstable_scheduleCallback,Wb=gs.unstable_cancelCallback,Az=gs.unstable_shouldYield,Ez=gs.unstable_requestPaint,yi=gs.unstable_now,Mz=gs.unstable_getCurrentPriorityLevel,TM=gs.unstable_ImmediatePriority,QD=gs.unstable_UserBlockingPriority,U0=gs.unstable_NormalPriority,wz=gs.unstable_LowPriority,qD=gs.unstable_IdlePriority,Ry=null,Uo=null;function Tz(i){if(Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(Ry,i,void 0,(i.current.flags&128)===128)}catch{}}var po=Math.clz32?Math.clz32:Rz,Cz=Math.log,bz=Math.LN2;function Rz(i){return i>>>=0,i===0?32:31-(Cz(i)/bz|0)|0}var Bg=64,Ig=4194304;function Gd(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function F0(i,t){var n=i.pendingLanes;if(n===0)return 0;var r=0,s=i.suspendedLanes,o=i.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Gd(l):(o&=a,o!==0&&(r=Gd(o)))}else a=n&~s,a!==0?r=Gd(a):o!==0&&(r=Gd(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=i.entangledLanes,t!==0)for(i=i.entanglements,t&=r;0<t;)n=31-po(t),s=1<<n,r|=i[n],t&=~s;return r}function Pz(i,t){switch(i){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bz(i,t){for(var n=i.suspendedLanes,r=i.pingedLanes,s=i.expirationTimes,o=i.pendingLanes;0<o;){var a=31-po(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Pz(l,t)):c<=t&&(i.expiredLanes|=l),o&=~l}}function lA(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function $D(){var i=Bg;return Bg<<=1,!(Bg&4194240)&&(Bg=64),i}function Ox(i){for(var t=[],n=0;31>n;n++)t.push(i);return t}function lm(i,t,n){i.pendingLanes|=t,t!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,t=31-po(t),i[t]=n}function Iz(i,t){var n=i.pendingLanes&~t;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=t,i.mutableReadLanes&=t,i.entangledLanes&=t,t=i.entanglements;var r=i.eventTimes;for(i=i.expirationTimes;0<n;){var s=31-po(n),o=1<<s;t[s]=0,r[s]=-1,i[s]=-1,n&=~o}}function CM(i,t){var n=i.entangledLanes|=t;for(i=i.entanglements;n;){var r=31-po(n),s=1<<r;s&t|i[r]&t&&(i[r]|=t),n&=~s}}var Mn=0;function eL(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var tL,bM,nL,iL,rL,cA=!1,Dg=[],xl=null,Sl=null,Al=null,Ep=new Map,Mp=new Map,hl=[],Dz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xb(i,t){switch(i){case"focusin":case"focusout":xl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Ep.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mp.delete(t.pointerId)}}function sd(i,t,n,r,s,o){return i===null||i.nativeEvent!==o?(i={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=um(t),t!==null&&bM(t)),i):(i.eventSystemFlags|=r,t=i.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),i)}function Lz(i,t,n,r,s){switch(t){case"focusin":return xl=sd(xl,i,t,n,r,s),!0;case"dragenter":return Sl=sd(Sl,i,t,n,r,s),!0;case"mouseover":return Al=sd(Al,i,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Ep.set(o,sd(Ep.get(o)||null,i,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Mp.set(o,sd(Mp.get(o)||null,i,t,n,r,s)),!0}return!1}function sL(i){var t=Lc(i.target);if(t!==null){var n=pu(t);if(n!==null){if(t=n.tag,t===13){if(t=YD(n),t!==null){i.blockedOn=t,rL(i.priority,function(){nL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){i.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}i.blockedOn=null}function s0(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var n=uA(i.domEventName,i.eventSystemFlags,t[0],i.nativeEvent);if(n===null){n=i.nativeEvent;var r=new n.constructor(n.type,n);rA=r,n.target.dispatchEvent(r),rA=null}else return t=um(n),t!==null&&bM(t),i.blockedOn=n,!1;t.shift()}return!0}function jb(i,t,n){s0(i)&&n.delete(t)}function Uz(){cA=!1,xl!==null&&s0(xl)&&(xl=null),Sl!==null&&s0(Sl)&&(Sl=null),Al!==null&&s0(Al)&&(Al=null),Ep.forEach(jb),Mp.forEach(jb)}function od(i,t){i.blockedOn===t&&(i.blockedOn=null,cA||(cA=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,Uz)))}function wp(i){function t(s){return od(s,i)}if(0<Dg.length){od(Dg[0],i);for(var n=1;n<Dg.length;n++){var r=Dg[n];r.blockedOn===i&&(r.blockedOn=null)}}for(xl!==null&&od(xl,i),Sl!==null&&od(Sl,i),Al!==null&&od(Al,i),Ep.forEach(t),Mp.forEach(t),n=0;n<hl.length;n++)r=hl[n],r.blockedOn===i&&(r.blockedOn=null);for(;0<hl.length&&(n=hl[0],n.blockedOn===null);)sL(n),n.blockedOn===null&&hl.shift()}var Xh=La.ReactCurrentBatchConfig,O0=!0;function Fz(i,t,n,r){var s=Mn,o=Xh.transition;Xh.transition=null;try{Mn=1,RM(i,t,n,r)}finally{Mn=s,Xh.transition=o}}function Oz(i,t,n,r){var s=Mn,o=Xh.transition;Xh.transition=null;try{Mn=4,RM(i,t,n,r)}finally{Mn=s,Xh.transition=o}}function RM(i,t,n,r){if(O0){var s=uA(i,t,n,r);if(s===null)Yx(i,t,r,N0,n),Xb(i,r);else if(Lz(s,i,t,n,r))r.stopPropagation();else if(Xb(i,r),t&4&&-1<Dz.indexOf(i)){for(;s!==null;){var o=um(s);if(o!==null&&tL(o),o=uA(i,t,n,r),o===null&&Yx(i,t,r,N0,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Yx(i,t,r,null,n)}}var N0=null;function uA(i,t,n,r){if(N0=null,i=wM(r),i=Lc(i),i!==null)if(t=pu(i),t===null)i=null;else if(n=t.tag,n===13){if(i=YD(t),i!==null)return i;i=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null);return N0=i,null}function oL(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mz()){case TM:return 1;case QD:return 4;case U0:case wz:return 16;case qD:return 536870912;default:return 16}default:return 16}}var pl=null,PM=null,o0=null;function aL(){if(o0)return o0;var i,t=PM,n=t.length,r,s="value"in pl?pl.value:pl.textContent,o=s.length;for(i=0;i<n&&t[i]===s[i];i++);var a=n-i;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return o0=s.slice(i,1<r?1-r:void 0)}function a0(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function Lg(){return!0}function Yb(){return!1}function _s(i){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in i)i.hasOwnProperty(l)&&(n=i[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Lg:Yb,this.isPropagationStopped=Yb,this}return ri(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lg)},persist:function(){},isPersistent:Lg}),t}var Sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},BM=_s(Sf),cm=ri({},Sf,{view:0,detail:0}),Nz=_s(cm),Nx,kx,ad,Py=ri({},cm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IM,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ad&&(ad&&i.type==="mousemove"?(Nx=i.screenX-ad.screenX,kx=i.screenY-ad.screenY):kx=Nx=0,ad=i),Nx)},movementY:function(i){return"movementY"in i?i.movementY:kx}}),Jb=_s(Py),kz=ri({},Py,{dataTransfer:0}),zz=_s(kz),Gz=ri({},cm,{relatedTarget:0}),zx=_s(Gz),Hz=ri({},Sf,{animationName:0,elapsedTime:0,pseudoElement:0}),Vz=_s(Hz),Wz=ri({},Sf,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Xz=_s(Wz),jz=ri({},Sf,{data:0}),Kb=_s(jz),Yz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zz(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=Kz[i])?!!t[i]:!1}function IM(){return Zz}var Qz=ri({},cm,{key:function(i){if(i.key){var t=Yz[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=a0(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Jz[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IM,charCode:function(i){return i.type==="keypress"?a0(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?a0(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),qz=_s(Qz),$z=ri({},Py,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zb=_s($z),eG=ri({},cm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IM}),tG=_s(eG),nG=ri({},Sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),iG=_s(nG),rG=ri({},Py,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),sG=_s(rG),oG=[9,13,27,32],DM=Ca&&"CompositionEvent"in window,Zd=null;Ca&&"documentMode"in document&&(Zd=document.documentMode);var aG=Ca&&"TextEvent"in window&&!Zd,lL=Ca&&(!DM||Zd&&8<Zd&&11>=Zd),Qb=" ",qb=!1;function cL(i,t){switch(i){case"keyup":return oG.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uL(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sh=!1;function lG(i,t){switch(i){case"compositionend":return uL(t);case"keypress":return t.which!==32?null:(qb=!0,Qb);case"textInput":return i=t.data,i===Qb&&qb?null:i;default:return null}}function cG(i,t){if(Sh)return i==="compositionend"||!DM&&cL(i,t)?(i=aL(),o0=PM=pl=null,Sh=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lL&&t.locale!=="ko"?null:t.data;default:return null}}var uG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $b(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!uG[i.type]:t==="textarea"}function hL(i,t,n,r){HD(r),t=k0(t,"onChange"),0<t.length&&(n=new BM("onChange","change",null,n,r),i.push({event:n,listeners:t}))}var Qd=null,Tp=null;function hG(i){AL(i,0)}function By(i){var t=Mh(i);if(UD(t))return i}function fG(i,t){if(i==="change")return t}var fL=!1;if(Ca){var Gx;if(Ca){var Hx="oninput"in document;if(!Hx){var e2=document.createElement("div");e2.setAttribute("oninput","return;"),Hx=typeof e2.oninput=="function"}Gx=Hx}else Gx=!1;fL=Gx&&(!document.documentMode||9<document.documentMode)}function t2(){Qd&&(Qd.detachEvent("onpropertychange",dL),Tp=Qd=null)}function dL(i){if(i.propertyName==="value"&&By(Tp)){var t=[];hL(t,Tp,i,wM(i)),jD(hG,t)}}function dG(i,t,n){i==="focusin"?(t2(),Qd=t,Tp=n,Qd.attachEvent("onpropertychange",dL)):i==="focusout"&&t2()}function pG(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return By(Tp)}function mG(i,t){if(i==="click")return By(t)}function gG(i,t){if(i==="input"||i==="change")return By(t)}function vG(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var vo=typeof Object.is=="function"?Object.is:vG;function Cp(i,t){if(vo(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var n=Object.keys(i),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jS.call(t,s)||!vo(i[s],t[s]))return!1}return!0}function n2(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function i2(i,t){var n=n2(i);i=0;for(var r;n;){if(n.nodeType===3){if(r=i+n.textContent.length,i<=t&&r>=t)return{node:n,offset:t-i};i=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n2(n)}}function pL(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?pL(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function mL(){for(var i=window,t=I0();t instanceof i.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)i=t.contentWindow;else break;t=I0(i.document)}return t}function LM(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function yG(i){var t=mL(),n=i.focusedElem,r=i.selectionRange;if(t!==n&&n&&n.ownerDocument&&pL(n.ownerDocument.documentElement,n)){if(r!==null&&LM(n)){if(t=r.start,i=r.end,i===void 0&&(i=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(i,n.value.length);else if(i=(t=n.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!i.extend&&o>r&&(s=r,r=o,o=s),s=i2(n,o);var a=i2(n,r);s&&a&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),i.removeAllRanges(),o>r?(i.addRange(t),i.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),i.addRange(t)))}}for(t=[],i=n;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)i=t[n],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var _G=Ca&&"documentMode"in document&&11>=document.documentMode,Ah=null,hA=null,qd=null,fA=!1;function r2(i,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fA||Ah==null||Ah!==I0(r)||(r=Ah,"selectionStart"in r&&LM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qd&&Cp(qd,r)||(qd=r,r=k0(hA,"onSelect"),0<r.length&&(t=new BM("onSelect","select",null,t,n),i.push({event:t,listeners:r}),t.target=Ah)))}function Ug(i,t){var n={};return n[i.toLowerCase()]=t.toLowerCase(),n["Webkit"+i]="webkit"+t,n["Moz"+i]="moz"+t,n}var Eh={animationend:Ug("Animation","AnimationEnd"),animationiteration:Ug("Animation","AnimationIteration"),animationstart:Ug("Animation","AnimationStart"),transitionend:Ug("Transition","TransitionEnd")},Vx={},gL={};Ca&&(gL=document.createElement("div").style,"AnimationEvent"in window||(delete Eh.animationend.animation,delete Eh.animationiteration.animation,delete Eh.animationstart.animation),"TransitionEvent"in window||delete Eh.transitionend.transition);function Iy(i){if(Vx[i])return Vx[i];if(!Eh[i])return i;var t=Eh[i],n;for(n in t)if(t.hasOwnProperty(n)&&n in gL)return Vx[i]=t[n];return i}var vL=Iy("animationend"),yL=Iy("animationiteration"),_L=Iy("animationstart"),xL=Iy("transitionend"),SL=new Map,s2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(i,t){SL.set(i,t),du(t,[i])}for(var Wx=0;Wx<s2.length;Wx++){var Xx=s2[Wx],xG=Xx.toLowerCase(),SG=Xx[0].toUpperCase()+Xx.slice(1);Nl(xG,"on"+SG)}Nl(vL,"onAnimationEnd");Nl(yL,"onAnimationIteration");Nl(_L,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(xL,"onTransitionEnd");$h("onMouseEnter",["mouseout","mouseover"]);$h("onMouseLeave",["mouseout","mouseover"]);$h("onPointerEnter",["pointerout","pointerover"]);$h("onPointerLeave",["pointerout","pointerover"]);du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));du("onBeforeInput",["compositionend","keypress","textInput","paste"]);du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hd));function o2(i,t,n){var r=i.type||"unknown-event";i.currentTarget=n,xz(r,t,void 0,i),i.currentTarget=null}function AL(i,t){t=(t&4)!==0;for(var n=0;n<i.length;n++){var r=i[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;o2(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;o2(s,l,u),o=c}}}if(L0)throw i=aA,L0=!1,aA=null,i}function kn(i,t){var n=t[vA];n===void 0&&(n=t[vA]=new Set);var r=i+"__bubble";n.has(r)||(EL(t,i,2,!1),n.add(r))}function jx(i,t,n){var r=0;t&&(r|=4),EL(n,i,r,t)}var Fg="_reactListening"+Math.random().toString(36).slice(2);function bp(i){if(!i[Fg]){i[Fg]=!0,PD.forEach(function(n){n!=="selectionchange"&&(AG.has(n)||jx(n,!1,i),jx(n,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[Fg]||(t[Fg]=!0,jx("selectionchange",!1,t))}}function EL(i,t,n,r){switch(oL(t)){case 1:var s=Fz;break;case 4:s=Oz;break;default:s=RM}n=s.bind(null,t,n,i),s=void 0,!oA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?i.addEventListener(t,n,{capture:!0,passive:s}):i.addEventListener(t,n,!0):s!==void 0?i.addEventListener(t,n,{passive:s}):i.addEventListener(t,n,!1)}function Yx(i,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Lc(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}jD(function(){var u=o,h=wM(n),f=[];e:{var p=SL.get(i);if(p!==void 0){var g=BM,v=i;switch(i){case"keypress":if(a0(n)===0)break e;case"keydown":case"keyup":g=qz;break;case"focusin":v="focus",g=zx;break;case"focusout":v="blur",g=zx;break;case"beforeblur":case"afterblur":g=zx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Jb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=zz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=tG;break;case vL:case yL:case _L:g=Vz;break;case xL:g=iG;break;case"scroll":g=Nz;break;case"wheel":g=sG;break;case"copy":case"cut":case"paste":g=Xz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Zb}var _=(t&4)!==0,x=!_&&i==="scroll",y=_?p!==null?p+"Capture":null:p;_=[];for(var S=u,A;S!==null;){A=S;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,y!==null&&(M=Ap(S,y),M!=null&&_.push(Rp(S,M,A)))),x)break;S=S.return}0<_.length&&(p=new g(p,v,null,n,h),f.push({event:p,listeners:_}))}}if(!(t&7)){e:{if(p=i==="mouseover"||i==="pointerover",g=i==="mouseout"||i==="pointerout",p&&n!==rA&&(v=n.relatedTarget||n.fromElement)&&(Lc(v)||v[ba]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Lc(v):null,v!==null&&(x=pu(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(_=Jb,M="onMouseLeave",y="onMouseEnter",S="mouse",(i==="pointerout"||i==="pointerover")&&(_=Zb,M="onPointerLeave",y="onPointerEnter",S="pointer"),x=g==null?p:Mh(g),A=v==null?p:Mh(v),p=new _(M,S+"leave",g,n,h),p.target=x,p.relatedTarget=A,M=null,Lc(h)===u&&(_=new _(y,S+"enter",v,n,h),_.target=A,_.relatedTarget=x,M=_),x=M,g&&v)t:{for(_=g,y=v,S=0,A=_;A;A=ku(A))S++;for(A=0,M=y;M;M=ku(M))A++;for(;0<S-A;)_=ku(_),S--;for(;0<A-S;)y=ku(y),A--;for(;S--;){if(_===y||y!==null&&_===y.alternate)break t;_=ku(_),y=ku(y)}_=null}else _=null;g!==null&&a2(f,p,g,_,!1),v!==null&&x!==null&&a2(f,x,v,_,!0)}}e:{if(p=u?Mh(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var C=fG;else if($b(p))if(fL)C=gG;else{C=pG;var T=dG}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=mG);if(C&&(C=C(i,u))){hL(f,C,n,h);break e}T&&T(i,p,u),i==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&$S(p,"number",p.value)}switch(T=u?Mh(u):window,i){case"focusin":($b(T)||T.contentEditable==="true")&&(Ah=T,hA=u,qd=null);break;case"focusout":qd=hA=Ah=null;break;case"mousedown":fA=!0;break;case"contextmenu":case"mouseup":case"dragend":fA=!1,r2(f,n,h);break;case"selectionchange":if(_G)break;case"keydown":case"keyup":r2(f,n,h)}var R;if(DM)e:{switch(i){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Sh?cL(i,n)&&(I="onCompositionEnd"):i==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(lL&&n.locale!=="ko"&&(Sh||I!=="onCompositionStart"?I==="onCompositionEnd"&&Sh&&(R=aL()):(pl=h,PM="value"in pl?pl.value:pl.textContent,Sh=!0)),T=k0(u,I),0<T.length&&(I=new Kb(I,i,null,n,h),f.push({event:I,listeners:T}),R?I.data=R:(R=uL(n),R!==null&&(I.data=R)))),(R=aG?lG(i,n):cG(i,n))&&(u=k0(u,"onBeforeInput"),0<u.length&&(h=new Kb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=R))}AL(f,t)})}function Rp(i,t,n){return{instance:i,listener:t,currentTarget:n}}function k0(i,t){for(var n=t+"Capture",r=[];i!==null;){var s=i,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ap(i,n),o!=null&&r.unshift(Rp(i,o,s)),o=Ap(i,t),o!=null&&r.push(Rp(i,o,s))),i=i.return}return r}function ku(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function a2(i,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ap(n,o),c!=null&&a.unshift(Rp(n,c,l))):s||(c=Ap(n,o),c!=null&&a.push(Rp(n,c,l)))),n=n.return}a.length!==0&&i.push({event:t,listeners:a})}var EG=/\r\n?/g,MG=/\u0000|\uFFFD/g;function l2(i){return(typeof i=="string"?i:""+i).replace(EG,`
`).replace(MG,"")}function Og(i,t,n){if(t=l2(t),l2(i)!==t&&n)throw Error(Je(425))}function z0(){}var dA=null,pA=null;function mA(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gA=typeof setTimeout=="function"?setTimeout:void 0,wG=typeof clearTimeout=="function"?clearTimeout:void 0,c2=typeof Promise=="function"?Promise:void 0,TG=typeof queueMicrotask=="function"?queueMicrotask:typeof c2<"u"?function(i){return c2.resolve(null).then(i).catch(CG)}:gA;function CG(i){setTimeout(function(){throw i})}function Jx(i,t){var n=t,r=0;do{var s=n.nextSibling;if(i.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){i.removeChild(s),wp(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wp(t)}function El(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return i}function u2(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var n=i.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return i;t--}else n==="/$"&&t++}i=i.previousSibling}return null}var Af=Math.random().toString(36).slice(2),Io="__reactFiber$"+Af,Pp="__reactProps$"+Af,ba="__reactContainer$"+Af,vA="__reactEvents$"+Af,bG="__reactListeners$"+Af,RG="__reactHandles$"+Af;function Lc(i){var t=i[Io];if(t)return t;for(var n=i.parentNode;n;){if(t=n[ba]||n[Io]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(i=u2(i);i!==null;){if(n=i[Io])return n;i=u2(i)}return t}i=n,n=i.parentNode}return null}function um(i){return i=i[Io]||i[ba],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Mh(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Je(33))}function Dy(i){return i[Pp]||null}var yA=[],wh=-1;function kl(i){return{current:i}}function Hn(i){0>wh||(i.current=yA[wh],yA[wh]=null,wh--)}function Fn(i,t){wh++,yA[wh]=i.current,i.current=t}var Bl={},Ar=kl(Bl),Qr=kl(!1),$c=Bl;function ef(i,t){var n=i.type.contextTypes;if(!n)return Bl;var r=i.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=t,i.__reactInternalMemoizedMaskedChildContext=s),s}function qr(i){return i=i.childContextTypes,i!=null}function G0(){Hn(Qr),Hn(Ar)}function h2(i,t,n){if(Ar.current!==Bl)throw Error(Je(168));Fn(Ar,t),Fn(Qr,n)}function ML(i,t,n){var r=i.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Je(108,dz(i)||"Unknown",s));return ri({},n,r)}function H0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Bl,$c=Ar.current,Fn(Ar,i),Fn(Qr,Qr.current),!0}function f2(i,t,n){var r=i.stateNode;if(!r)throw Error(Je(169));n?(i=ML(i,t,$c),r.__reactInternalMemoizedMergedChildContext=i,Hn(Qr),Hn(Ar),Fn(Ar,i)):Hn(Qr),Fn(Qr,n)}var pa=null,Ly=!1,Kx=!1;function wL(i){pa===null?pa=[i]:pa.push(i)}function PG(i){Ly=!0,wL(i)}function zl(){if(!Kx&&pa!==null){Kx=!0;var i=0,t=Mn;try{var n=pa;for(Mn=1;i<n.length;i++){var r=n[i];do r=r(!0);while(r!==null)}pa=null,Ly=!1}catch(s){throw pa!==null&&(pa=pa.slice(i+1)),ZD(TM,zl),s}finally{Mn=t,Kx=!1}}return null}var Th=[],Ch=0,V0=null,W0=0,Us=[],Fs=0,eu=null,va=1,ya="";function Mc(i,t){Th[Ch++]=W0,Th[Ch++]=V0,V0=i,W0=t}function TL(i,t,n){Us[Fs++]=va,Us[Fs++]=ya,Us[Fs++]=eu,eu=i;var r=va;i=ya;var s=32-po(r)-1;r&=~(1<<s),n+=1;var o=32-po(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,va=1<<32-po(t)+s|n<<s|r,ya=o+i}else va=1<<o|n<<s|r,ya=i}function UM(i){i.return!==null&&(Mc(i,1),TL(i,1,0))}function FM(i){for(;i===V0;)V0=Th[--Ch],Th[Ch]=null,W0=Th[--Ch],Th[Ch]=null;for(;i===eu;)eu=Us[--Fs],Us[Fs]=null,ya=Us[--Fs],Us[Fs]=null,va=Us[--Fs],Us[Fs]=null}var ds=null,fs=null,Yn=!1,oo=null;function CL(i,t){var n=zs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=i,t=i.deletions,t===null?(i.deletions=[n],i.flags|=16):t.push(n)}function d2(i,t){switch(i.tag){case 5:var n=i.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(i.stateNode=t,ds=i,fs=El(t.firstChild),!0):!1;case 6:return t=i.pendingProps===""||t.nodeType!==3?null:t,t!==null?(i.stateNode=t,ds=i,fs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=eu!==null?{id:va,overflow:ya}:null,i.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zs(18,null,null,0),n.stateNode=t,n.return=i,i.child=n,ds=i,fs=null,!0):!1;default:return!1}}function _A(i){return(i.mode&1)!==0&&(i.flags&128)===0}function xA(i){if(Yn){var t=fs;if(t){var n=t;if(!d2(i,t)){if(_A(i))throw Error(Je(418));t=El(n.nextSibling);var r=ds;t&&d2(i,t)?CL(r,n):(i.flags=i.flags&-4097|2,Yn=!1,ds=i)}}else{if(_A(i))throw Error(Je(418));i.flags=i.flags&-4097|2,Yn=!1,ds=i}}}function p2(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ds=i}function Ng(i){if(i!==ds)return!1;if(!Yn)return p2(i),Yn=!0,!1;var t;if((t=i.tag!==3)&&!(t=i.tag!==5)&&(t=i.type,t=t!=="head"&&t!=="body"&&!mA(i.type,i.memoizedProps)),t&&(t=fs)){if(_A(i))throw bL(),Error(Je(418));for(;t;)CL(i,t),t=El(t.nextSibling)}if(p2(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Je(317));e:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8){var n=i.data;if(n==="/$"){if(t===0){fs=El(i.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}i=i.nextSibling}fs=null}}else fs=ds?El(i.stateNode.nextSibling):null;return!0}function bL(){for(var i=fs;i;)i=El(i.nextSibling)}function tf(){fs=ds=null,Yn=!1}function OM(i){oo===null?oo=[i]:oo.push(i)}var BG=La.ReactCurrentBatchConfig;function io(i,t){if(i&&i.defaultProps){t=ri({},t),i=i.defaultProps;for(var n in i)t[n]===void 0&&(t[n]=i[n]);return t}return t}var X0=kl(null),j0=null,bh=null,NM=null;function kM(){NM=bh=j0=null}function zM(i){var t=X0.current;Hn(X0),i._currentValue=t}function SA(i,t,n){for(;i!==null;){var r=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),i===n)break;i=i.return}}function jh(i,t){j0=i,NM=bh=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&t&&(Zr=!0),i.firstContext=null)}function Vs(i){var t=i._currentValue;if(NM!==i)if(i={context:i,memoizedValue:t,next:null},bh===null){if(j0===null)throw Error(Je(308));bh=i,j0.dependencies={lanes:0,firstContext:i}}else bh=bh.next=i;return t}var Uc=null;function GM(i){Uc===null?Uc=[i]:Uc.push(i)}function RL(i,t,n,r){var s=t.interleaved;return s===null?(n.next=n,GM(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ra(i,r)}function Ra(i,t){i.lanes|=t;var n=i.alternate;for(n!==null&&(n.lanes|=t),n=i,i=i.return;i!==null;)i.childLanes|=t,n=i.alternate,n!==null&&(n.childLanes|=t),n=i,i=i.return;return n.tag===3?n.stateNode:null}var ll=!1;function HM(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PL(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Sa(i,t){return{eventTime:i,lane:t,tag:0,payload:null,callback:null,next:null}}function Ml(i,t,n){var r=i.updateQueue;if(r===null)return null;if(r=r.shared,hn&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ra(i,n)}return s=r.interleaved,s===null?(t.next=t,GM(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ra(i,n)}function l0(i,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=i.pendingLanes,n|=r,t.lanes=n,CM(i,n)}}function m2(i,t){var n=i.updateQueue,r=i.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},i.updateQueue=n;return}i=n.lastBaseUpdate,i===null?n.firstBaseUpdate=t:i.next=t,n.lastBaseUpdate=t}function Y0(i,t,n,r){var s=i.updateQueue;ll=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var h=i.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,h=u=c=null,l=o;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=i,_=l;switch(p=t,g=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(g,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break e;f=ri({},f,p);break e;case 2:ll=!0}}l.callback!==null&&l.lane!==0&&(i.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);nu|=a,i.lanes=a,i.memoizedState=f}}function g2(i,t,n){if(i=t.effects,t.effects=null,i!==null)for(t=0;t<i.length;t++){var r=i[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Je(191,s));s.call(r)}}}var BL=new RD.Component().refs;function AA(i,t,n,r){t=i.memoizedState,n=n(r,t),n=n==null?t:ri({},t,n),i.memoizedState=n,i.lanes===0&&(i.updateQueue.baseState=n)}var Uy={isMounted:function(i){return(i=i._reactInternals)?pu(i)===i:!1},enqueueSetState:function(i,t,n){i=i._reactInternals;var r=Fr(),s=Tl(i),o=Sa(r,s);o.payload=t,n!=null&&(o.callback=n),t=Ml(i,o,s),t!==null&&(mo(t,i,s,r),l0(t,i,s))},enqueueReplaceState:function(i,t,n){i=i._reactInternals;var r=Fr(),s=Tl(i),o=Sa(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ml(i,o,s),t!==null&&(mo(t,i,s,r),l0(t,i,s))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var n=Fr(),r=Tl(i),s=Sa(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ml(i,s,r),t!==null&&(mo(t,i,r,n),l0(t,i,r))}};function v2(i,t,n,r,s,o,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Cp(n,r)||!Cp(s,o):!0}function IL(i,t,n){var r=!1,s=Bl,o=t.contextType;return typeof o=="object"&&o!==null?o=Vs(o):(s=qr(t)?$c:Ar.current,r=t.contextTypes,o=(r=r!=null)?ef(i,s):Bl),t=new t(n,o),i.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uy,i.stateNode=t,t._reactInternals=i,r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=o),t}function y2(i,t,n,r){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==i&&Uy.enqueueReplaceState(t,t.state,null)}function EA(i,t,n,r){var s=i.stateNode;s.props=n,s.state=i.memoizedState,s.refs=BL,HM(i);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Vs(o):(o=qr(t)?$c:Ar.current,s.context=ef(i,o)),s.state=i.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(AA(i,t,o,n),s.state=i.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Uy.enqueueReplaceState(s,s.state,null),Y0(i,n,s,r),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function ld(i,t,n){if(i=n.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Je(309));var r=n.stateNode}if(!r)throw Error(Je(147,i));var s=r,o=""+i;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;l===BL&&(l=s.refs={}),a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof i!="string")throw Error(Je(284));if(!n._owner)throw Error(Je(290,i))}return i}function kg(i,t){throw i=Object.prototype.toString.call(t),Error(Je(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}function _2(i){var t=i._init;return t(i._payload)}function DL(i){function t(y,S){if(i){var A=y.deletions;A===null?(y.deletions=[S],y.flags|=16):A.push(S)}}function n(y,S){if(!i)return null;for(;S!==null;)t(y,S),S=S.sibling;return null}function r(y,S){for(y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function s(y,S){return y=Cl(y,S),y.index=0,y.sibling=null,y}function o(y,S,A){return y.index=A,i?(A=y.alternate,A!==null?(A=A.index,A<S?(y.flags|=2,S):A):(y.flags|=2,S)):(y.flags|=1048576,S)}function a(y){return i&&y.alternate===null&&(y.flags|=2),y}function l(y,S,A,M){return S===null||S.tag!==6?(S=n1(A,y.mode,M),S.return=y,S):(S=s(S,A),S.return=y,S)}function c(y,S,A,M){var C=A.type;return C===xh?h(y,S,A.props.children,M,A.key):S!==null&&(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===al&&_2(C)===S.type)?(M=s(S,A.props),M.ref=ld(y,S,A),M.return=y,M):(M=p0(A.type,A.key,A.props,null,y.mode,M),M.ref=ld(y,S,A),M.return=y,M)}function u(y,S,A,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=i1(A,y.mode,M),S.return=y,S):(S=s(S,A.children||[]),S.return=y,S)}function h(y,S,A,M,C){return S===null||S.tag!==7?(S=Xc(A,y.mode,M,C),S.return=y,S):(S=s(S,A),S.return=y,S)}function f(y,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=n1(""+S,y.mode,A),S.return=y,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case bg:return A=p0(S.type,S.key,S.props,null,y.mode,A),A.ref=ld(y,null,S),A.return=y,A;case _h:return S=i1(S,y.mode,A),S.return=y,S;case al:var M=S._init;return f(y,M(S._payload),A)}if(zd(S)||id(S))return S=Xc(S,y.mode,A,null),S.return=y,S;kg(y,S)}return null}function p(y,S,A,M){var C=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return C!==null?null:l(y,S,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case bg:return A.key===C?c(y,S,A,M):null;case _h:return A.key===C?u(y,S,A,M):null;case al:return C=A._init,p(y,S,C(A._payload),M)}if(zd(A)||id(A))return C!==null?null:h(y,S,A,M,null);kg(y,A)}return null}function g(y,S,A,M,C){if(typeof M=="string"&&M!==""||typeof M=="number")return y=y.get(A)||null,l(S,y,""+M,C);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case bg:return y=y.get(M.key===null?A:M.key)||null,c(S,y,M,C);case _h:return y=y.get(M.key===null?A:M.key)||null,u(S,y,M,C);case al:var T=M._init;return g(y,S,A,T(M._payload),C)}if(zd(M)||id(M))return y=y.get(A)||null,h(S,y,M,C,null);kg(S,M)}return null}function v(y,S,A,M){for(var C=null,T=null,R=S,I=S=0,P=null;R!==null&&I<A.length;I++){R.index>I?(P=R,R=null):P=R.sibling;var B=p(y,R,A[I],M);if(B===null){R===null&&(R=P);break}i&&R&&B.alternate===null&&t(y,R),S=o(B,S,I),T===null?C=B:T.sibling=B,T=B,R=P}if(I===A.length)return n(y,R),Yn&&Mc(y,I),C;if(R===null){for(;I<A.length;I++)R=f(y,A[I],M),R!==null&&(S=o(R,S,I),T===null?C=R:T.sibling=R,T=R);return Yn&&Mc(y,I),C}for(R=r(y,R);I<A.length;I++)P=g(R,y,I,A[I],M),P!==null&&(i&&P.alternate!==null&&R.delete(P.key===null?I:P.key),S=o(P,S,I),T===null?C=P:T.sibling=P,T=P);return i&&R.forEach(function(O){return t(y,O)}),Yn&&Mc(y,I),C}function _(y,S,A,M){var C=id(A);if(typeof C!="function")throw Error(Je(150));if(A=C.call(A),A==null)throw Error(Je(151));for(var T=C=null,R=S,I=S=0,P=null,B=A.next();R!==null&&!B.done;I++,B=A.next()){R.index>I?(P=R,R=null):P=R.sibling;var O=p(y,R,B.value,M);if(O===null){R===null&&(R=P);break}i&&R&&O.alternate===null&&t(y,R),S=o(O,S,I),T===null?C=O:T.sibling=O,T=O,R=P}if(B.done)return n(y,R),Yn&&Mc(y,I),C;if(R===null){for(;!B.done;I++,B=A.next())B=f(y,B.value,M),B!==null&&(S=o(B,S,I),T===null?C=B:T.sibling=B,T=B);return Yn&&Mc(y,I),C}for(R=r(y,R);!B.done;I++,B=A.next())B=g(R,y,I,B.value,M),B!==null&&(i&&B.alternate!==null&&R.delete(B.key===null?I:B.key),S=o(B,S,I),T===null?C=B:T.sibling=B,T=B);return i&&R.forEach(function(N){return t(y,N)}),Yn&&Mc(y,I),C}function x(y,S,A,M){if(typeof A=="object"&&A!==null&&A.type===xh&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case bg:e:{for(var C=A.key,T=S;T!==null;){if(T.key===C){if(C=A.type,C===xh){if(T.tag===7){n(y,T.sibling),S=s(T,A.props.children),S.return=y,y=S;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===al&&_2(C)===T.type){n(y,T.sibling),S=s(T,A.props),S.ref=ld(y,T,A),S.return=y,y=S;break e}n(y,T);break}else t(y,T);T=T.sibling}A.type===xh?(S=Xc(A.props.children,y.mode,M,A.key),S.return=y,y=S):(M=p0(A.type,A.key,A.props,null,y.mode,M),M.ref=ld(y,S,A),M.return=y,y=M)}return a(y);case _h:e:{for(T=A.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){n(y,S.sibling),S=s(S,A.children||[]),S.return=y,y=S;break e}else{n(y,S);break}else t(y,S);S=S.sibling}S=i1(A,y.mode,M),S.return=y,y=S}return a(y);case al:return T=A._init,x(y,S,T(A._payload),M)}if(zd(A))return v(y,S,A,M);if(id(A))return _(y,S,A,M);kg(y,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(n(y,S.sibling),S=s(S,A),S.return=y,y=S):(n(y,S),S=n1(A,y.mode,M),S.return=y,y=S),a(y)):n(y,S)}return x}var nf=DL(!0),LL=DL(!1),hm={},Fo=kl(hm),Bp=kl(hm),Ip=kl(hm);function Fc(i){if(i===hm)throw Error(Je(174));return i}function VM(i,t){switch(Fn(Ip,t),Fn(Bp,i),Fn(Fo,hm),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tA(null,"");break;default:i=i===8?t.parentNode:t,t=i.namespaceURI||null,i=i.tagName,t=tA(t,i)}Hn(Fo),Fn(Fo,t)}function rf(){Hn(Fo),Hn(Bp),Hn(Ip)}function UL(i){Fc(Ip.current);var t=Fc(Fo.current),n=tA(t,i.type);t!==n&&(Fn(Bp,i),Fn(Fo,n))}function WM(i){Bp.current===i&&(Hn(Fo),Hn(Bp))}var $n=kl(0);function J0(i){for(var t=i;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zx=[];function XM(){for(var i=0;i<Zx.length;i++)Zx[i]._workInProgressVersionPrimary=null;Zx.length=0}var c0=La.ReactCurrentDispatcher,Qx=La.ReactCurrentBatchConfig,tu=0,ii=null,Di=null,Xi=null,K0=!1,$d=!1,Dp=0,IG=0;function dr(){throw Error(Je(321))}function jM(i,t){if(t===null)return!1;for(var n=0;n<t.length&&n<i.length;n++)if(!vo(i[n],t[n]))return!1;return!0}function YM(i,t,n,r,s,o){if(tu=o,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,c0.current=i===null||i.memoizedState===null?FG:OG,i=n(r,s),$d){o=0;do{if($d=!1,Dp=0,25<=o)throw Error(Je(301));o+=1,Xi=Di=null,t.updateQueue=null,c0.current=NG,i=n(r,s)}while($d)}if(c0.current=Z0,t=Di!==null&&Di.next!==null,tu=0,Xi=Di=ii=null,K0=!1,t)throw Error(Je(300));return i}function JM(){var i=Dp!==0;return Dp=0,i}function Ro(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?ii.memoizedState=Xi=i:Xi=Xi.next=i,Xi}function Ws(){if(Di===null){var i=ii.alternate;i=i!==null?i.memoizedState:null}else i=Di.next;var t=Xi===null?ii.memoizedState:Xi.next;if(t!==null)Xi=t,Di=i;else{if(i===null)throw Error(Je(310));Di=i,i={memoizedState:Di.memoizedState,baseState:Di.baseState,baseQueue:Di.baseQueue,queue:Di.queue,next:null},Xi===null?ii.memoizedState=Xi=i:Xi=Xi.next=i}return Xi}function Lp(i,t){return typeof t=="function"?t(i):t}function qx(i){var t=Ws(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=i;var r=Di,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((tu&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:i(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,ii.lanes|=h,nu|=h}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,vo(r,t.memoizedState)||(Zr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(i=n.interleaved,i!==null){s=i;do o=s.lane,ii.lanes|=o,nu|=o,s=s.next;while(s!==i)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $x(i){var t=Ws(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=i;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=i(o,a.action),a=a.next;while(a!==s);vo(o,t.memoizedState)||(Zr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function FL(){}function OL(i,t){var n=ii,r=Ws(),s=t(),o=!vo(r.memoizedState,s);if(o&&(r.memoizedState=s,Zr=!0),r=r.queue,KM(zL.bind(null,n,r,i),[i]),r.getSnapshot!==t||o||Xi!==null&&Xi.memoizedState.tag&1){if(n.flags|=2048,Up(9,kL.bind(null,n,r,s,t),void 0,null),Zi===null)throw Error(Je(349));tu&30||NL(n,t,s)}return s}function NL(i,t,n){i.flags|=16384,i={getSnapshot:t,value:n},t=ii.updateQueue,t===null?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[i]):(n=t.stores,n===null?t.stores=[i]:n.push(i))}function kL(i,t,n,r){t.value=n,t.getSnapshot=r,GL(t)&&HL(i)}function zL(i,t,n){return n(function(){GL(t)&&HL(i)})}function GL(i){var t=i.getSnapshot;i=i.value;try{var n=t();return!vo(i,n)}catch{return!0}}function HL(i){var t=Ra(i,1);t!==null&&mo(t,i,1,-1)}function x2(i){var t=Ro();return typeof i=="function"&&(i=i()),t.memoizedState=t.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:i},t.queue=i,i=i.dispatch=UG.bind(null,ii,i),[t.memoizedState,i]}function Up(i,t,n,r){return i={tag:i,create:t,destroy:n,deps:r,next:null},t=ii.updateQueue,t===null?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=i.next=i):(n=t.lastEffect,n===null?t.lastEffect=i.next=i:(r=n.next,n.next=i,i.next=r,t.lastEffect=i)),i}function VL(){return Ws().memoizedState}function u0(i,t,n,r){var s=Ro();ii.flags|=i,s.memoizedState=Up(1|t,n,void 0,r===void 0?null:r)}function Fy(i,t,n,r){var s=Ws();r=r===void 0?null:r;var o=void 0;if(Di!==null){var a=Di.memoizedState;if(o=a.destroy,r!==null&&jM(r,a.deps)){s.memoizedState=Up(t,n,o,r);return}}ii.flags|=i,s.memoizedState=Up(1|t,n,o,r)}function S2(i,t){return u0(8390656,8,i,t)}function KM(i,t){return Fy(2048,8,i,t)}function WL(i,t){return Fy(4,2,i,t)}function XL(i,t){return Fy(4,4,i,t)}function jL(i,t){if(typeof t=="function")return i=i(),t(i),function(){t(null)};if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function YL(i,t,n){return n=n!=null?n.concat([i]):null,Fy(4,4,jL.bind(null,t,i),n)}function ZM(){}function JL(i,t){var n=Ws();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jM(t,r[1])?r[0]:(n.memoizedState=[i,t],i)}function KL(i,t){var n=Ws();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jM(t,r[1])?r[0]:(i=i(),n.memoizedState=[i,t],i)}function ZL(i,t,n){return tu&21?(vo(n,t)||(n=$D(),ii.lanes|=n,nu|=n,i.baseState=!0),t):(i.baseState&&(i.baseState=!1,Zr=!0),i.memoizedState=n)}function DG(i,t){var n=Mn;Mn=n!==0&&4>n?n:4,i(!0);var r=Qx.transition;Qx.transition={};try{i(!1),t()}finally{Mn=n,Qx.transition=r}}function QL(){return Ws().memoizedState}function LG(i,t,n){var r=Tl(i);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qL(i))$L(t,n);else if(n=RL(i,t,n,r),n!==null){var s=Fr();mo(n,i,r,s),eU(n,t,r)}}function UG(i,t,n){var r=Tl(i),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qL(i))$L(t,s);else{var o=i.alternate;if(i.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,vo(l,a)){var c=t.interleaved;c===null?(s.next=s,GM(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=RL(i,t,s,r),n!==null&&(s=Fr(),mo(n,i,r,s),eU(n,t,r))}}function qL(i){var t=i.alternate;return i===ii||t!==null&&t===ii}function $L(i,t){$d=K0=!0;var n=i.pending;n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t}function eU(i,t,n){if(n&4194240){var r=t.lanes;r&=i.pendingLanes,n|=r,t.lanes=n,CM(i,n)}}var Z0={readContext:Vs,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},FG={readContext:Vs,useCallback:function(i,t){return Ro().memoizedState=[i,t===void 0?null:t],i},useContext:Vs,useEffect:S2,useImperativeHandle:function(i,t,n){return n=n!=null?n.concat([i]):null,u0(4194308,4,jL.bind(null,t,i),n)},useLayoutEffect:function(i,t){return u0(4194308,4,i,t)},useInsertionEffect:function(i,t){return u0(4,2,i,t)},useMemo:function(i,t){var n=Ro();return t=t===void 0?null:t,i=i(),n.memoizedState=[i,t],i},useReducer:function(i,t,n){var r=Ro();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:t},r.queue=i,i=i.dispatch=LG.bind(null,ii,i),[r.memoizedState,i]},useRef:function(i){var t=Ro();return i={current:i},t.memoizedState=i},useState:x2,useDebugValue:ZM,useDeferredValue:function(i){return Ro().memoizedState=i},useTransition:function(){var i=x2(!1),t=i[0];return i=DG.bind(null,i[1]),Ro().memoizedState=i,[t,i]},useMutableSource:function(){},useSyncExternalStore:function(i,t,n){var r=ii,s=Ro();if(Yn){if(n===void 0)throw Error(Je(407));n=n()}else{if(n=t(),Zi===null)throw Error(Je(349));tu&30||NL(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,S2(zL.bind(null,r,o,i),[i]),r.flags|=2048,Up(9,kL.bind(null,r,o,n,t),void 0,null),n},useId:function(){var i=Ro(),t=Zi.identifierPrefix;if(Yn){var n=ya,r=va;n=(r&~(1<<32-po(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=IG++,t=":"+t+"r"+n.toString(32)+":";return i.memoizedState=t},unstable_isNewReconciler:!1},OG={readContext:Vs,useCallback:JL,useContext:Vs,useEffect:KM,useImperativeHandle:YL,useInsertionEffect:WL,useLayoutEffect:XL,useMemo:KL,useReducer:qx,useRef:VL,useState:function(){return qx(Lp)},useDebugValue:ZM,useDeferredValue:function(i){var t=Ws();return ZL(t,Di.memoizedState,i)},useTransition:function(){var i=qx(Lp)[0],t=Ws().memoizedState;return[i,t]},useMutableSource:FL,useSyncExternalStore:OL,useId:QL,unstable_isNewReconciler:!1},NG={readContext:Vs,useCallback:JL,useContext:Vs,useEffect:KM,useImperativeHandle:YL,useInsertionEffect:WL,useLayoutEffect:XL,useMemo:KL,useReducer:$x,useRef:VL,useState:function(){return $x(Lp)},useDebugValue:ZM,useDeferredValue:function(i){var t=Ws();return Di===null?t.memoizedState=i:ZL(t,Di.memoizedState,i)},useTransition:function(){var i=$x(Lp)[0],t=Ws().memoizedState;return[i,t]},useMutableSource:FL,useSyncExternalStore:OL,useId:QL,unstable_isNewReconciler:!1};function sf(i,t){try{var n="",r=t;do n+=fz(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:i,source:t,stack:s,digest:null}}function e1(i,t,n){return{value:i,source:null,stack:n??null,digest:t??null}}function MA(i,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kG=typeof WeakMap=="function"?WeakMap:Map;function tU(i,t,n){n=Sa(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){q0||(q0=!0,LA=r),MA(i,t)},n}function nU(i,t,n){n=Sa(-1,n),n.tag=3;var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){MA(i,t)}}var o=i.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){MA(i,t),typeof r!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function A2(i,t,n){var r=i.pingCache;if(r===null){r=i.pingCache=new kG;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),i=$G.bind(null,i,t,n),t.then(i,i))}function E2(i){do{var t;if((t=i.tag===13)&&(t=i.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return i;i=i.return}while(i!==null);return null}function M2(i,t,n,r,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===t?i.flags|=65536:(i.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Sa(-1,1),t.tag=2,Ml(n,t,1))),n.lanes|=1),i)}var zG=La.ReactCurrentOwner,Zr=!1;function Lr(i,t,n,r){t.child=i===null?LL(t,null,n,r):nf(t,i.child,n,r)}function w2(i,t,n,r,s){n=n.render;var o=t.ref;return jh(t,s),r=YM(i,t,n,r,o,s),n=JM(),i!==null&&!Zr?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,Pa(i,t,s)):(Yn&&n&&UM(t),t.flags|=1,Lr(i,t,r,s),t.child)}function T2(i,t,n,r,s){if(i===null){var o=n.type;return typeof o=="function"&&!rw(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,iU(i,t,o,r,s)):(i=p0(n.type,null,r,t,t.mode,s),i.ref=t.ref,i.return=t,t.child=i)}if(o=i.child,!(i.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cp,n(a,r)&&i.ref===t.ref)return Pa(i,t,s)}return t.flags|=1,i=Cl(o,r),i.ref=t.ref,i.return=t,t.child=i}function iU(i,t,n,r,s){if(i!==null){var o=i.memoizedProps;if(Cp(o,r)&&i.ref===t.ref)if(Zr=!1,t.pendingProps=r=o,(i.lanes&s)!==0)i.flags&131072&&(Zr=!0);else return t.lanes=i.lanes,Pa(i,t,s)}return wA(i,t,n,r,s)}function rU(i,t,n){var r=t.pendingProps,s=r.children,o=i!==null?i.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(Ph,us),us|=n;else{if(!(n&1073741824))return i=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:i,cachePool:null,transitions:null},t.updateQueue=null,Fn(Ph,us),us|=i,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Fn(Ph,us),us|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Fn(Ph,us),us|=r;return Lr(i,t,s,n),t.child}function sU(i,t){var n=t.ref;(i===null&&n!==null||i!==null&&i.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wA(i,t,n,r,s){var o=qr(n)?$c:Ar.current;return o=ef(t,o),jh(t,s),n=YM(i,t,n,r,o,s),r=JM(),i!==null&&!Zr?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,Pa(i,t,s)):(Yn&&r&&UM(t),t.flags|=1,Lr(i,t,n,s),t.child)}function C2(i,t,n,r,s){if(qr(n)){var o=!0;H0(t)}else o=!1;if(jh(t,s),t.stateNode===null)h0(i,t),IL(t,n,r),EA(t,n,r,s),r=!0;else if(i===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vs(u):(u=qr(n)?$c:Ar.current,u=ef(t,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&y2(t,a,r,u),ll=!1;var p=t.memoizedState;a.state=p,Y0(t,r,a,s),c=t.memoizedState,l!==r||p!==c||Qr.current||ll?(typeof h=="function"&&(AA(t,n,h,r),c=t.memoizedState),(l=ll||v2(t,n,l,r,p,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,PL(i,t),l=t.memoizedProps,u=t.type===t.elementType?l:io(t.type,l),a.props=u,f=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vs(c):(c=qr(n)?$c:Ar.current,c=ef(t,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&y2(t,a,r,c),ll=!1,p=t.memoizedState,a.state=p,Y0(t,r,a,s);var v=t.memoizedState;l!==f||p!==v||Qr.current||ll?(typeof g=="function"&&(AA(t,n,g,r),v=t.memoizedState),(u=ll||v2(t,n,u,r,p,v,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===i.memoizedProps&&p===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&p===i.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===i.memoizedProps&&p===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&p===i.memoizedState||(t.flags|=1024),r=!1)}return TA(i,t,n,r,o,s)}function TA(i,t,n,r,s,o){sU(i,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&f2(t,n,!1),Pa(i,t,o);r=t.stateNode,zG.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,i!==null&&a?(t.child=nf(t,i.child,null,o),t.child=nf(t,null,l,o)):Lr(i,t,l,o),t.memoizedState=r.state,s&&f2(t,n,!0),t.child}function oU(i){var t=i.stateNode;t.pendingContext?h2(i,t.pendingContext,t.pendingContext!==t.context):t.context&&h2(i,t.context,!1),VM(i,t.containerInfo)}function b2(i,t,n,r,s){return tf(),OM(s),t.flags|=256,Lr(i,t,n,r),t.child}var CA={dehydrated:null,treeContext:null,retryLane:0};function bA(i){return{baseLanes:i,cachePool:null,transitions:null}}function aU(i,t,n){var r=t.pendingProps,s=$n.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=i!==null&&i.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),Fn($n,s&1),i===null)return xA(t),i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(t.mode&1?i.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,i=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ky(a,r,0,null),i=Xc(i,r,n,null),o.return=t,i.return=t,o.sibling=i,t.child=o,t.child.memoizedState=bA(n),t.memoizedState=CA,i):QM(t,a));if(s=i.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return GG(i,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=i.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Cl(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Cl(l,o):(o=Xc(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=i.child.memoizedState,a=a===null?bA(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=i.childLanes&~n,t.memoizedState=CA,r}return o=i.child,i=o.sibling,r=Cl(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,i!==null&&(n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)),t.child=r,t.memoizedState=null,r}function QM(i,t){return t=ky({mode:"visible",children:t},i.mode,0,null),t.return=i,i.child=t}function zg(i,t,n,r){return r!==null&&OM(r),nf(t,i.child,null,n),i=QM(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function GG(i,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=e1(Error(Je(422))),zg(i,t,a,r)):t.memoizedState!==null?(t.child=i.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=ky({mode:"visible",children:r.children},s,0,null),o=Xc(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&nf(t,i.child,null,a),t.child.memoizedState=bA(a),t.memoizedState=CA,o);if(!(t.mode&1))return zg(i,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(Je(419)),r=e1(o,r,void 0),zg(i,t,a,r)}if(l=(a&i.childLanes)!==0,Zr||l){if(r=Zi,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ra(i,s),mo(r,i,s,-1))}return iw(),r=e1(Error(Je(421))),zg(i,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=i.child,t=eH.bind(null,i),s._reactRetry=t,null):(i=o.treeContext,fs=El(s.nextSibling),ds=t,Yn=!0,oo=null,i!==null&&(Us[Fs++]=va,Us[Fs++]=ya,Us[Fs++]=eu,va=i.id,ya=i.overflow,eu=t),t=QM(t,r.children),t.flags|=4096,t)}function R2(i,t,n){i.lanes|=t;var r=i.alternate;r!==null&&(r.lanes|=t),SA(i.return,t,n)}function t1(i,t,n,r,s){var o=i.memoizedState;o===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function lU(i,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Lr(i,t,r.children,n),r=$n.current,r&2)r=r&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&R2(i,n,t);else if(i.tag===19)R2(i,n,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}r&=1}if(Fn($n,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)i=n.alternate,i!==null&&J0(i)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),t1(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(i=s.alternate,i!==null&&J0(i)===null){t.child=s;break}i=s.sibling,s.sibling=n,n=s,s=i}t1(t,!0,n,null,o);break;case"together":t1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function h0(i,t){!(t.mode&1)&&i!==null&&(i.alternate=null,t.alternate=null,t.flags|=2)}function Pa(i,t,n){if(i!==null&&(t.dependencies=i.dependencies),nu|=t.lanes,!(n&t.childLanes))return null;if(i!==null&&t.child!==i.child)throw Error(Je(153));if(t.child!==null){for(i=t.child,n=Cl(i,i.pendingProps),t.child=n,n.return=t;i.sibling!==null;)i=i.sibling,n=n.sibling=Cl(i,i.pendingProps),n.return=t;n.sibling=null}return t.child}function HG(i,t,n){switch(t.tag){case 3:oU(t),tf();break;case 5:UL(t);break;case 1:qr(t.type)&&H0(t);break;case 4:VM(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Fn(X0,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fn($n,$n.current&1),t.flags|=128,null):n&t.child.childLanes?aU(i,t,n):(Fn($n,$n.current&1),i=Pa(i,t,n),i!==null?i.sibling:null);Fn($n,$n.current&1);break;case 19:if(r=(n&t.childLanes)!==0,i.flags&128){if(r)return lU(i,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fn($n,$n.current),r)break;return null;case 22:case 23:return t.lanes=0,rU(i,t,n)}return Pa(i,t,n)}var cU,RA,uU,hU;cU=function(i,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)i.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};RA=function(){};uU=function(i,t,n,r){var s=i.memoizedProps;if(s!==r){i=t.stateNode,Fc(Fo.current);var o=null;switch(n){case"input":s=QS(i,s),r=QS(i,r),o=[];break;case"select":s=ri({},s,{value:void 0}),r=ri({},r,{value:void 0}),o=[];break;case"textarea":s=eA(i,s),r=eA(i,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(i.onclick=z0)}nA(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xp.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&kn("scroll",i),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};hU=function(i,t,n,r){n!==r&&(t.flags|=4)};function cd(i,t){if(!Yn)switch(i.tailMode){case"hidden":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?i.tail=null:n.sibling=null;break;case"collapsed":n=i.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:r.sibling=null}}function pr(i){var t=i.alternate!==null&&i.alternate.child===i.child,n=0,r=0;if(t)for(var s=i.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=r,i.childLanes=n,t}function VG(i,t,n){var r=t.pendingProps;switch(FM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(t),null;case 1:return qr(t.type)&&G0(),pr(t),null;case 3:return r=t.stateNode,rf(),Hn(Qr),Hn(Ar),XM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(Ng(t)?t.flags|=4:i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,oo!==null&&(OA(oo),oo=null))),RA(i,t),pr(t),null;case 5:WM(t);var s=Fc(Ip.current);if(n=t.type,i!==null&&t.stateNode!=null)uU(i,t,n,r,s),i.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Je(166));return pr(t),null}if(i=Fc(Fo.current),Ng(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Io]=t,r[Pp]=o,i=(t.mode&1)!==0,n){case"dialog":kn("cancel",r),kn("close",r);break;case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(s=0;s<Hd.length;s++)kn(Hd[s],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"details":kn("toggle",r);break;case"input":Nb(r,o),kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},kn("invalid",r);break;case"textarea":zb(r,o),kn("invalid",r)}nA(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Og(r.textContent,l,i),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Og(r.textContent,l,i),s=["children",""+l]):xp.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&kn("scroll",r)}switch(n){case"input":Rg(r),kb(r,o,!0);break;case"textarea":Rg(r),Gb(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=z0)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ND(n)),i==="http://www.w3.org/1999/xhtml"?n==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof r.is=="string"?i=a.createElement(n,{is:r.is}):(i=a.createElement(n),n==="select"&&(a=i,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):i=a.createElementNS(i,n),i[Io]=t,i[Pp]=r,cU(i,t,!1,!1),t.stateNode=i;e:{switch(a=iA(n,r),n){case"dialog":kn("cancel",i),kn("close",i),s=r;break;case"iframe":case"object":case"embed":kn("load",i),s=r;break;case"video":case"audio":for(s=0;s<Hd.length;s++)kn(Hd[s],i);s=r;break;case"source":kn("error",i),s=r;break;case"img":case"image":case"link":kn("error",i),kn("load",i),s=r;break;case"details":kn("toggle",i),s=r;break;case"input":Nb(i,r),s=QS(i,r),kn("invalid",i);break;case"option":s=r;break;case"select":i._wrapperState={wasMultiple:!!r.multiple},s=ri({},r,{value:void 0}),kn("invalid",i);break;case"textarea":zb(i,r),s=eA(i,r),kn("invalid",i);break;default:s=r}nA(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?GD(i,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&kD(i,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sp(i,c):typeof c=="number"&&Sp(i,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xp.hasOwnProperty(o)?c!=null&&o==="onScroll"&&kn("scroll",i):c!=null&&SM(i,o,c,a))}switch(n){case"input":Rg(i),kb(i,r,!1);break;case"textarea":Rg(i),Gb(i);break;case"option":r.value!=null&&i.setAttribute("value",""+Pl(r.value));break;case"select":i.multiple=!!r.multiple,o=r.value,o!=null?Hh(i,!!r.multiple,o,!1):r.defaultValue!=null&&Hh(i,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=z0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pr(t),null;case 6:if(i&&t.stateNode!=null)hU(i,t,i.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Je(166));if(n=Fc(Ip.current),Fc(Fo.current),Ng(t)){if(r=t.stateNode,n=t.memoizedProps,r[Io]=t,(o=r.nodeValue!==n)&&(i=ds,i!==null))switch(i.tag){case 3:Og(r.nodeValue,n,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Og(r.nodeValue,n,(i.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Io]=t,t.stateNode=r}return pr(t),null;case 13:if(Hn($n),r=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Yn&&fs!==null&&t.mode&1&&!(t.flags&128))bL(),tf(),t.flags|=98560,o=!1;else if(o=Ng(t),r!==null&&r.dehydrated!==null){if(i===null){if(!o)throw Error(Je(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Je(317));o[Io]=t}else tf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pr(t),o=!1}else oo!==null&&(OA(oo),oo=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(i!==null&&i.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(i===null||$n.current&1?Fi===0&&(Fi=3):iw())),t.updateQueue!==null&&(t.flags|=4),pr(t),null);case 4:return rf(),RA(i,t),i===null&&bp(t.stateNode.containerInfo),pr(t),null;case 10:return zM(t.type._context),pr(t),null;case 17:return qr(t.type)&&G0(),pr(t),null;case 19:if(Hn($n),o=t.memoizedState,o===null)return pr(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)cd(o,!1);else{if(Fi!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(a=J0(i),a!==null){for(t.flags|=128,cd(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,i=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=i,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,i=a.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Fn($n,$n.current&1|2),t.child}i=i.sibling}o.tail!==null&&yi()>of&&(t.flags|=128,r=!0,cd(o,!1),t.lanes=4194304)}else{if(!r)if(i=J0(a),i!==null){if(t.flags|=128,r=!0,n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),cd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Yn)return pr(t),null}else 2*yi()-o.renderingStartTime>of&&n!==1073741824&&(t.flags|=128,r=!0,cd(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=yi(),t.sibling=null,n=$n.current,Fn($n,r?n&1|2:n&1),t):(pr(t),null);case 22:case 23:return nw(),r=t.memoizedState!==null,i!==null&&i.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?us&1073741824&&(pr(t),t.subtreeFlags&6&&(t.flags|=8192)):pr(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function WG(i,t){switch(FM(t),t.tag){case 1:return qr(t.type)&&G0(),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return rf(),Hn(Qr),Hn(Ar),XM(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 5:return WM(t),null;case 13:if(Hn($n),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));tf()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return Hn($n),null;case 4:return rf(),null;case 10:return zM(t.type._context),null;case 22:case 23:return nw(),null;case 24:return null;default:return null}}var Gg=!1,_r=!1,XG=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Rh(i,t){var n=i.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ai(i,t,r)}else n.current=null}function PA(i,t,n){try{n()}catch(r){ai(i,t,r)}}var P2=!1;function jG(i,t){if(dA=O0,i=mL(),LM(i)){if("selectionStart"in i)var n={start:i.selectionStart,end:i.selectionEnd};else e:{n=(n=i.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,f=i,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===i)break t;if(p===n&&++u===s&&(l=a),p===o&&++h===r&&(c=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pA={focusedElem:i,selectionRange:n},O0=!1,gt=t;gt!==null;)if(t=gt,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,gt=i;else for(;gt!==null;){t=gt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,x=v.memoizedState,y=t.stateNode,S=y.getSnapshotBeforeUpdate(t.elementType===t.type?_:io(t.type,_),x);y.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(M){ai(t,t.return,M)}if(i=t.sibling,i!==null){i.return=t.return,gt=i;break}gt=t.return}return v=P2,P2=!1,v}function ep(i,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&i)===i){var o=s.destroy;s.destroy=void 0,o!==void 0&&PA(t,n,o)}s=s.next}while(s!==r)}}function Oy(i,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&i)===i){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function BA(i){var t=i.ref;if(t!==null){var n=i.stateNode;switch(i.tag){case 5:i=n;break;default:i=n}typeof t=="function"?t(i):t.current=i}}function fU(i){var t=i.alternate;t!==null&&(i.alternate=null,fU(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&(delete t[Io],delete t[Pp],delete t[vA],delete t[bG],delete t[RG])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function dU(i){return i.tag===5||i.tag===3||i.tag===4}function B2(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dU(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function IA(i,t,n){var r=i.tag;if(r===5||r===6)i=i.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(i,t):n.insertBefore(i,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(i,n)):(t=n,t.appendChild(i)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=z0));else if(r!==4&&(i=i.child,i!==null))for(IA(i,t,n),i=i.sibling;i!==null;)IA(i,t,n),i=i.sibling}function DA(i,t,n){var r=i.tag;if(r===5||r===6)i=i.stateNode,t?n.insertBefore(i,t):n.appendChild(i);else if(r!==4&&(i=i.child,i!==null))for(DA(i,t,n),i=i.sibling;i!==null;)DA(i,t,n),i=i.sibling}var nr=null,so=!1;function ja(i,t,n){for(n=n.child;n!==null;)pU(i,t,n),n=n.sibling}function pU(i,t,n){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(Ry,n)}catch{}switch(n.tag){case 5:_r||Rh(n,t);case 6:var r=nr,s=so;nr=null,ja(i,t,n),nr=r,so=s,nr!==null&&(so?(i=nr,n=n.stateNode,i.nodeType===8?i.parentNode.removeChild(n):i.removeChild(n)):nr.removeChild(n.stateNode));break;case 18:nr!==null&&(so?(i=nr,n=n.stateNode,i.nodeType===8?Jx(i.parentNode,n):i.nodeType===1&&Jx(i,n),wp(i)):Jx(nr,n.stateNode));break;case 4:r=nr,s=so,nr=n.stateNode.containerInfo,so=!0,ja(i,t,n),nr=r,so=s;break;case 0:case 11:case 14:case 15:if(!_r&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&PA(n,t,a),s=s.next}while(s!==r)}ja(i,t,n);break;case 1:if(!_r&&(Rh(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ai(n,t,l)}ja(i,t,n);break;case 21:ja(i,t,n);break;case 22:n.mode&1?(_r=(r=_r)||n.memoizedState!==null,ja(i,t,n),_r=r):ja(i,t,n);break;default:ja(i,t,n)}}function I2(i){var t=i.updateQueue;if(t!==null){i.updateQueue=null;var n=i.stateNode;n===null&&(n=i.stateNode=new XG),t.forEach(function(r){var s=tH.bind(null,i,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qs(i,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=i,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:nr=l.stateNode,so=!1;break e;case 3:nr=l.stateNode.containerInfo,so=!0;break e;case 4:nr=l.stateNode.containerInfo,so=!0;break e}l=l.return}if(nr===null)throw Error(Je(160));pU(o,a,s),nr=null,so=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ai(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mU(t,i),t=t.sibling}function mU(i,t){var n=i.alternate,r=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Qs(t,i),To(i),r&4){try{ep(3,i,i.return),Oy(3,i)}catch(_){ai(i,i.return,_)}try{ep(5,i,i.return)}catch(_){ai(i,i.return,_)}}break;case 1:Qs(t,i),To(i),r&512&&n!==null&&Rh(n,n.return);break;case 5:if(Qs(t,i),To(i),r&512&&n!==null&&Rh(n,n.return),i.flags&32){var s=i.stateNode;try{Sp(s,"")}catch(_){ai(i,i.return,_)}}if(r&4&&(s=i.stateNode,s!=null)){var o=i.memoizedProps,a=n!==null?n.memoizedProps:o,l=i.type,c=i.updateQueue;if(i.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&FD(s,o),iA(l,a);var u=iA(l,o);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?GD(s,f):h==="dangerouslySetInnerHTML"?kD(s,f):h==="children"?Sp(s,f):SM(s,h,f,u)}switch(l){case"input":qS(s,o);break;case"textarea":OD(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Hh(s,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?Hh(s,!!o.multiple,o.defaultValue,!0):Hh(s,!!o.multiple,o.multiple?[]:"",!1))}s[Pp]=o}catch(_){ai(i,i.return,_)}}break;case 6:if(Qs(t,i),To(i),r&4){if(i.stateNode===null)throw Error(Je(162));s=i.stateNode,o=i.memoizedProps;try{s.nodeValue=o}catch(_){ai(i,i.return,_)}}break;case 3:if(Qs(t,i),To(i),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wp(t.containerInfo)}catch(_){ai(i,i.return,_)}break;case 4:Qs(t,i),To(i);break;case 13:Qs(t,i),To(i),s=i.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(ew=yi())),r&4&&I2(i);break;case 22:if(h=n!==null&&n.memoizedState!==null,i.mode&1?(_r=(u=_r)||h,Qs(t,i),_r=u):Qs(t,i),To(i),r&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!h&&i.mode&1)for(gt=i,h=i.child;h!==null;){for(f=gt=h;gt!==null;){switch(p=gt,g=p.child,p.tag){case 0:case 11:case 14:case 15:ep(4,p,p.return);break;case 1:Rh(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(_){ai(r,n,_)}}break;case 5:Rh(p,p.return);break;case 22:if(p.memoizedState!==null){L2(f);continue}}g!==null?(g.return=p,gt=g):L2(f)}h=h.sibling}e:for(h=null,f=i;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zD("display",a))}catch(_){ai(i,i.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){ai(i,i.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===i)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qs(t,i),To(i),r&4&&I2(i);break;case 21:break;default:Qs(t,i),To(i)}}function To(i){var t=i.flags;if(t&2){try{e:{for(var n=i.return;n!==null;){if(dU(n)){var r=n;break e}n=n.return}throw Error(Je(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Sp(s,""),r.flags&=-33);var o=B2(i);DA(i,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=B2(i);IA(i,l,a);break;default:throw Error(Je(161))}}catch(c){ai(i,i.return,c)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function YG(i,t,n){gt=i,gU(i)}function gU(i,t,n){for(var r=(i.mode&1)!==0;gt!==null;){var s=gt,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Gg;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||_r;l=Gg;var u=_r;if(Gg=a,(_r=c)&&!u)for(gt=s;gt!==null;)a=gt,c=a.child,a.tag===22&&a.memoizedState!==null?U2(s):c!==null?(c.return=a,gt=c):U2(s);for(;o!==null;)gt=o,gU(o),o=o.sibling;gt=s,Gg=l,_r=u}D2(i)}else s.subtreeFlags&8772&&o!==null?(o.return=s,gt=o):D2(i)}}function D2(i){for(;gt!==null;){var t=gt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_r||Oy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_r)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:io(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&g2(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}g2(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&wp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}_r||t.flags&512&&BA(t)}catch(p){ai(t,t.return,p)}}if(t===i){gt=null;break}if(n=t.sibling,n!==null){n.return=t.return,gt=n;break}gt=t.return}}function L2(i){for(;gt!==null;){var t=gt;if(t===i){gt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,gt=n;break}gt=t.return}}function U2(i){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Oy(4,t)}catch(c){ai(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ai(t,s,c)}}var o=t.return;try{BA(t)}catch(c){ai(t,o,c)}break;case 5:var a=t.return;try{BA(t)}catch(c){ai(t,a,c)}}}catch(c){ai(t,t.return,c)}if(t===i){gt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,gt=l;break}gt=t.return}}var JG=Math.ceil,Q0=La.ReactCurrentDispatcher,qM=La.ReactCurrentOwner,Hs=La.ReactCurrentBatchConfig,hn=0,Zi=null,Ti=null,rr=0,us=0,Ph=kl(0),Fi=0,Fp=null,nu=0,Ny=0,$M=0,tp=null,Yr=null,ew=0,of=1/0,fa=null,q0=!1,LA=null,wl=null,Hg=!1,ml=null,$0=0,np=0,UA=null,f0=-1,d0=0;function Fr(){return hn&6?yi():f0!==-1?f0:f0=yi()}function Tl(i){return i.mode&1?hn&2&&rr!==0?rr&-rr:BG.transition!==null?(d0===0&&(d0=$D()),d0):(i=Mn,i!==0||(i=window.event,i=i===void 0?16:oL(i.type)),i):1}function mo(i,t,n,r){if(50<np)throw np=0,UA=null,Error(Je(185));lm(i,n,r),(!(hn&2)||i!==Zi)&&(i===Zi&&(!(hn&2)&&(Ny|=n),Fi===4&&fl(i,rr)),$r(i,r),n===1&&hn===0&&!(t.mode&1)&&(of=yi()+500,Ly&&zl()))}function $r(i,t){var n=i.callbackNode;Bz(i,t);var r=F0(i,i===Zi?rr:0);if(r===0)n!==null&&Wb(n),i.callbackNode=null,i.callbackPriority=0;else if(t=r&-r,i.callbackPriority!==t){if(n!=null&&Wb(n),t===1)i.tag===0?PG(F2.bind(null,i)):wL(F2.bind(null,i)),TG(function(){!(hn&6)&&zl()}),n=null;else{switch(eL(r)){case 1:n=TM;break;case 4:n=QD;break;case 16:n=U0;break;case 536870912:n=qD;break;default:n=U0}n=MU(n,vU.bind(null,i))}i.callbackPriority=t,i.callbackNode=n}}function vU(i,t){if(f0=-1,d0=0,hn&6)throw Error(Je(327));var n=i.callbackNode;if(Yh()&&i.callbackNode!==n)return null;var r=F0(i,i===Zi?rr:0);if(r===0)return null;if(r&30||r&i.expiredLanes||t)t=ey(i,r);else{t=r;var s=hn;hn|=2;var o=_U();(Zi!==i||rr!==t)&&(fa=null,of=yi()+500,Wc(i,t));do try{QG();break}catch(l){yU(i,l)}while(!0);kM(),Q0.current=o,hn=s,Ti!==null?t=0:(Zi=null,rr=0,t=Fi)}if(t!==0){if(t===2&&(s=lA(i),s!==0&&(r=s,t=FA(i,s))),t===1)throw n=Fp,Wc(i,0),fl(i,r),$r(i,yi()),n;if(t===6)fl(i,r);else{if(s=i.current.alternate,!(r&30)&&!KG(s)&&(t=ey(i,r),t===2&&(o=lA(i),o!==0&&(r=o,t=FA(i,o))),t===1))throw n=Fp,Wc(i,0),fl(i,r),$r(i,yi()),n;switch(i.finishedWork=s,i.finishedLanes=r,t){case 0:case 1:throw Error(Je(345));case 2:wc(i,Yr,fa);break;case 3:if(fl(i,r),(r&130023424)===r&&(t=ew+500-yi(),10<t)){if(F0(i,0)!==0)break;if(s=i.suspendedLanes,(s&r)!==r){Fr(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=gA(wc.bind(null,i,Yr,fa),t);break}wc(i,Yr,fa);break;case 4:if(fl(i,r),(r&4194240)===r)break;for(t=i.eventTimes,s=-1;0<r;){var a=31-po(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=yi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JG(r/1960))-r,10<r){i.timeoutHandle=gA(wc.bind(null,i,Yr,fa),r);break}wc(i,Yr,fa);break;case 5:wc(i,Yr,fa);break;default:throw Error(Je(329))}}}return $r(i,yi()),i.callbackNode===n?vU.bind(null,i):null}function FA(i,t){var n=tp;return i.current.memoizedState.isDehydrated&&(Wc(i,t).flags|=256),i=ey(i,t),i!==2&&(t=Yr,Yr=n,t!==null&&OA(t)),i}function OA(i){Yr===null?Yr=i:Yr.push.apply(Yr,i)}function KG(i){for(var t=i;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!vo(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fl(i,t){for(t&=~$M,t&=~Ny,i.suspendedLanes|=t,i.pingedLanes&=~t,i=i.expirationTimes;0<t;){var n=31-po(t),r=1<<n;i[n]=-1,t&=~r}}function F2(i){if(hn&6)throw Error(Je(327));Yh();var t=F0(i,0);if(!(t&1))return $r(i,yi()),null;var n=ey(i,t);if(i.tag!==0&&n===2){var r=lA(i);r!==0&&(t=r,n=FA(i,r))}if(n===1)throw n=Fp,Wc(i,0),fl(i,t),$r(i,yi()),n;if(n===6)throw Error(Je(345));return i.finishedWork=i.current.alternate,i.finishedLanes=t,wc(i,Yr,fa),$r(i,yi()),null}function tw(i,t){var n=hn;hn|=1;try{return i(t)}finally{hn=n,hn===0&&(of=yi()+500,Ly&&zl())}}function iu(i){ml!==null&&ml.tag===0&&!(hn&6)&&Yh();var t=hn;hn|=1;var n=Hs.transition,r=Mn;try{if(Hs.transition=null,Mn=1,i)return i()}finally{Mn=r,Hs.transition=n,hn=t,!(hn&6)&&zl()}}function nw(){us=Ph.current,Hn(Ph)}function Wc(i,t){i.finishedWork=null,i.finishedLanes=0;var n=i.timeoutHandle;if(n!==-1&&(i.timeoutHandle=-1,wG(n)),Ti!==null)for(n=Ti.return;n!==null;){var r=n;switch(FM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&G0();break;case 3:rf(),Hn(Qr),Hn(Ar),XM();break;case 5:WM(r);break;case 4:rf();break;case 13:Hn($n);break;case 19:Hn($n);break;case 10:zM(r.type._context);break;case 22:case 23:nw()}n=n.return}if(Zi=i,Ti=i=Cl(i.current,null),rr=us=t,Fi=0,Fp=null,$M=Ny=nu=0,Yr=tp=null,Uc!==null){for(t=0;t<Uc.length;t++)if(n=Uc[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Uc=null}return i}function yU(i,t){do{var n=Ti;try{if(kM(),c0.current=Z0,K0){for(var r=ii.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}K0=!1}if(tu=0,Xi=Di=ii=null,$d=!1,Dp=0,qM.current=null,n===null||n.return===null){Fi=1,Fp=t,Ti=null;break}e:{var o=i,a=n.return,l=n,c=t;if(t=rr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=E2(a);if(g!==null){g.flags&=-257,M2(g,a,l,o,t),g.mode&1&&A2(o,u,t),t=g,c=u;var v=t.updateQueue;if(v===null){var _=new Set;_.add(c),t.updateQueue=_}else v.add(c);break e}else{if(!(t&1)){A2(o,u,t),iw();break e}c=Error(Je(426))}}else if(Yn&&l.mode&1){var x=E2(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),M2(x,a,l,o,t),OM(sf(c,l));break e}}o=c=sf(c,l),Fi!==4&&(Fi=2),tp===null?tp=[o]:tp.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=tU(o,c,t);m2(o,y);break e;case 1:l=c;var S=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(wl===null||!wl.has(A)))){o.flags|=65536,t&=-t,o.lanes|=t;var M=nU(o,l,t);m2(o,M);break e}}o=o.return}while(o!==null)}SU(n)}catch(C){t=C,Ti===n&&n!==null&&(Ti=n=n.return);continue}break}while(!0)}function _U(){var i=Q0.current;return Q0.current=Z0,i===null?Z0:i}function iw(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),Zi===null||!(nu&268435455)&&!(Ny&268435455)||fl(Zi,rr)}function ey(i,t){var n=hn;hn|=2;var r=_U();(Zi!==i||rr!==t)&&(fa=null,Wc(i,t));do try{ZG();break}catch(s){yU(i,s)}while(!0);if(kM(),hn=n,Q0.current=r,Ti!==null)throw Error(Je(261));return Zi=null,rr=0,Fi}function ZG(){for(;Ti!==null;)xU(Ti)}function QG(){for(;Ti!==null&&!Az();)xU(Ti)}function xU(i){var t=EU(i.alternate,i,us);i.memoizedProps=i.pendingProps,t===null?SU(i):Ti=t,qM.current=null}function SU(i){var t=i;do{var n=t.alternate;if(i=t.return,t.flags&32768){if(n=WG(n,t),n!==null){n.flags&=32767,Ti=n;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Fi=6,Ti=null;return}}else if(n=VG(n,t,us),n!==null){Ti=n;return}if(t=t.sibling,t!==null){Ti=t;return}Ti=t=i}while(t!==null);Fi===0&&(Fi=5)}function wc(i,t,n){var r=Mn,s=Hs.transition;try{Hs.transition=null,Mn=1,qG(i,t,n,r)}finally{Hs.transition=s,Mn=r}return null}function qG(i,t,n,r){do Yh();while(ml!==null);if(hn&6)throw Error(Je(327));n=i.finishedWork;var s=i.finishedLanes;if(n===null)return null;if(i.finishedWork=null,i.finishedLanes=0,n===i.current)throw Error(Je(177));i.callbackNode=null,i.callbackPriority=0;var o=n.lanes|n.childLanes;if(Iz(i,o),i===Zi&&(Ti=Zi=null,rr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hg||(Hg=!0,MU(U0,function(){return Yh(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Hs.transition,Hs.transition=null;var a=Mn;Mn=1;var l=hn;hn|=4,qM.current=null,jG(i,n),mU(n,i),yG(pA),O0=!!dA,pA=dA=null,i.current=n,YG(n),Ez(),hn=l,Mn=a,Hs.transition=o}else i.current=n;if(Hg&&(Hg=!1,ml=i,$0=s),o=i.pendingLanes,o===0&&(wl=null),Tz(n.stateNode),$r(i,yi()),t!==null)for(r=i.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(q0)throw q0=!1,i=LA,LA=null,i;return $0&1&&i.tag!==0&&Yh(),o=i.pendingLanes,o&1?i===UA?np++:(np=0,UA=i):np=0,zl(),null}function Yh(){if(ml!==null){var i=eL($0),t=Hs.transition,n=Mn;try{if(Hs.transition=null,Mn=16>i?16:i,ml===null)var r=!1;else{if(i=ml,ml=null,$0=0,hn&6)throw Error(Je(331));var s=hn;for(hn|=4,gt=i.current;gt!==null;){var o=gt,a=o.child;if(gt.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(gt=u;gt!==null;){var h=gt;switch(h.tag){case 0:case 11:case 15:ep(8,h,o)}var f=h.child;if(f!==null)f.return=h,gt=f;else for(;gt!==null;){h=gt;var p=h.sibling,g=h.return;if(fU(h),h===u){gt=null;break}if(p!==null){p.return=g,gt=p;break}gt=g}}}var v=o.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}gt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,gt=a;else e:for(;gt!==null;){if(o=gt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ep(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,gt=y;break e}gt=o.return}}var S=i.current;for(gt=S;gt!==null;){a=gt;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,gt=A;else e:for(a=S;gt!==null;){if(l=gt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Oy(9,l)}}catch(C){ai(l,l.return,C)}if(l===a){gt=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,gt=M;break e}gt=l.return}}if(hn=s,zl(),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(Ry,i)}catch{}r=!0}return r}finally{Mn=n,Hs.transition=t}}return!1}function O2(i,t,n){t=sf(n,t),t=tU(i,t,1),i=Ml(i,t,1),t=Fr(),i!==null&&(lm(i,1,t),$r(i,t))}function ai(i,t,n){if(i.tag===3)O2(i,i,n);else for(;t!==null;){if(t.tag===3){O2(t,i,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wl===null||!wl.has(r))){i=sf(n,i),i=nU(t,i,1),t=Ml(t,i,1),i=Fr(),t!==null&&(lm(t,1,i),$r(t,i));break}}t=t.return}}function $G(i,t,n){var r=i.pingCache;r!==null&&r.delete(t),t=Fr(),i.pingedLanes|=i.suspendedLanes&n,Zi===i&&(rr&n)===n&&(Fi===4||Fi===3&&(rr&130023424)===rr&&500>yi()-ew?Wc(i,0):$M|=n),$r(i,t)}function AU(i,t){t===0&&(i.mode&1?(t=Ig,Ig<<=1,!(Ig&130023424)&&(Ig=4194304)):t=1);var n=Fr();i=Ra(i,t),i!==null&&(lm(i,t,n),$r(i,n))}function eH(i){var t=i.memoizedState,n=0;t!==null&&(n=t.retryLane),AU(i,n)}function tH(i,t){var n=0;switch(i.tag){case 13:var r=i.stateNode,s=i.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=i.stateNode;break;default:throw Error(Je(314))}r!==null&&r.delete(t),AU(i,n)}var EU;EU=function(i,t,n){if(i!==null)if(i.memoizedProps!==t.pendingProps||Qr.current)Zr=!0;else{if(!(i.lanes&n)&&!(t.flags&128))return Zr=!1,HG(i,t,n);Zr=!!(i.flags&131072)}else Zr=!1,Yn&&t.flags&1048576&&TL(t,W0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;h0(i,t),i=t.pendingProps;var s=ef(t,Ar.current);jh(t,n),s=YM(null,t,r,i,s,n);var o=JM();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qr(r)?(o=!0,H0(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,HM(t),s.updater=Uy,t.stateNode=s,s._reactInternals=t,EA(t,r,i,n),t=TA(null,t,r,!0,o,n)):(t.tag=0,Yn&&o&&UM(t),Lr(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(h0(i,t),i=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=iH(r),i=io(r,i),s){case 0:t=wA(null,t,r,i,n);break e;case 1:t=C2(null,t,r,i,n);break e;case 11:t=w2(null,t,r,i,n);break e;case 14:t=T2(null,t,r,io(r.type,i),n);break e}throw Error(Je(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:io(r,s),wA(i,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:io(r,s),C2(i,t,r,s,n);case 3:e:{if(oU(t),i===null)throw Error(Je(387));r=t.pendingProps,o=t.memoizedState,s=o.element,PL(i,t),Y0(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=sf(Error(Je(423)),t),t=b2(i,t,r,n,s);break e}else if(r!==s){s=sf(Error(Je(424)),t),t=b2(i,t,r,n,s);break e}else for(fs=El(t.stateNode.containerInfo.firstChild),ds=t,Yn=!0,oo=null,n=LL(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tf(),r===s){t=Pa(i,t,n);break e}Lr(i,t,r,n)}t=t.child}return t;case 5:return UL(t),i===null&&xA(t),r=t.type,s=t.pendingProps,o=i!==null?i.memoizedProps:null,a=s.children,mA(r,s)?a=null:o!==null&&mA(r,o)&&(t.flags|=32),sU(i,t),Lr(i,t,a,n),t.child;case 6:return i===null&&xA(t),null;case 13:return aU(i,t,n);case 4:return VM(t,t.stateNode.containerInfo),r=t.pendingProps,i===null?t.child=nf(t,null,r,n):Lr(i,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:io(r,s),w2(i,t,r,s,n);case 7:return Lr(i,t,t.pendingProps,n),t.child;case 8:return Lr(i,t,t.pendingProps.children,n),t.child;case 12:return Lr(i,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Fn(X0,r._currentValue),r._currentValue=a,o!==null)if(vo(o.value,a)){if(o.children===s.children&&!Qr.current){t=Pa(i,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Sa(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),SA(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Je(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),SA(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Lr(i,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,jh(t,n),s=Vs(s),r=r(s),t.flags|=1,Lr(i,t,r,n),t.child;case 14:return r=t.type,s=io(r,t.pendingProps),s=io(r.type,s),T2(i,t,r,s,n);case 15:return iU(i,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:io(r,s),h0(i,t),t.tag=1,qr(r)?(i=!0,H0(t)):i=!1,jh(t,n),IL(t,r,s),EA(t,r,s,n),TA(null,t,r,!0,i,n);case 19:return lU(i,t,n);case 22:return rU(i,t,n)}throw Error(Je(156,t.tag))};function MU(i,t){return ZD(i,t)}function nH(i,t,n,r){this.tag=i,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(i,t,n,r){return new nH(i,t,n,r)}function rw(i){return i=i.prototype,!(!i||!i.isReactComponent)}function iH(i){if(typeof i=="function")return rw(i)?1:0;if(i!=null){if(i=i.$$typeof,i===EM)return 11;if(i===MM)return 14}return 2}function Cl(i,t){var n=i.alternate;return n===null?(n=zs(i.tag,t,i.key,i.mode),n.elementType=i.elementType,n.type=i.type,n.stateNode=i.stateNode,n.alternate=i,i.alternate=n):(n.pendingProps=t,n.type=i.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=i.flags&14680064,n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,t=i.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=i.sibling,n.index=i.index,n.ref=i.ref,n}function p0(i,t,n,r,s,o){var a=2;if(r=i,typeof i=="function")rw(i)&&(a=1);else if(typeof i=="string")a=5;else e:switch(i){case xh:return Xc(n.children,s,o,t);case AM:a=8,s|=8;break;case YS:return i=zs(12,n,t,s|2),i.elementType=YS,i.lanes=o,i;case JS:return i=zs(13,n,t,s),i.elementType=JS,i.lanes=o,i;case KS:return i=zs(19,n,t,s),i.elementType=KS,i.lanes=o,i;case DD:return ky(n,s,o,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case BD:a=10;break e;case ID:a=9;break e;case EM:a=11;break e;case MM:a=14;break e;case al:a=16,r=null;break e}throw Error(Je(130,i==null?i:typeof i,""))}return t=zs(a,n,t,s),t.elementType=i,t.type=r,t.lanes=o,t}function Xc(i,t,n,r){return i=zs(7,i,r,t),i.lanes=n,i}function ky(i,t,n,r){return i=zs(22,i,r,t),i.elementType=DD,i.lanes=n,i.stateNode={isHidden:!1},i}function n1(i,t,n){return i=zs(6,i,null,t),i.lanes=n,i}function i1(i,t,n){return t=zs(4,i.children!==null?i.children:[],i.key,t),t.lanes=n,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function rH(i,t,n,r,s){this.tag=t,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ox(0),this.expirationTimes=Ox(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ox(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sw(i,t,n,r,s,o,a,l,c){return i=new rH(i,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=zs(3,null,null,t),i.current=o,o.stateNode=i,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HM(o),i}function sH(i,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_h,key:r==null?null:""+r,children:i,containerInfo:t,implementation:n}}function wU(i){if(!i)return Bl;i=i._reactInternals;e:{if(pu(i)!==i||i.tag!==1)throw Error(Je(170));var t=i;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(i.tag===1){var n=i.type;if(qr(n))return ML(i,n,t)}return t}function TU(i,t,n,r,s,o,a,l,c){return i=sw(n,r,!0,i,s,o,a,l,c),i.context=wU(null),n=i.current,r=Fr(),s=Tl(n),o=Sa(r,s),o.callback=t??null,Ml(n,o,s),i.current.lanes=s,lm(i,s,r),$r(i,r),i}function zy(i,t,n,r){var s=t.current,o=Fr(),a=Tl(s);return n=wU(n),t.context===null?t.context=n:t.pendingContext=n,t=Sa(o,a),t.payload={element:i},r=r===void 0?null:r,r!==null&&(t.callback=r),i=Ml(s,t,a),i!==null&&(mo(i,s,a,o),l0(i,s,a)),a}function ty(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function N2(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var n=i.retryLane;i.retryLane=n!==0&&n<t?n:t}}function ow(i,t){N2(i,t),(i=i.alternate)&&N2(i,t)}function oH(){return null}var CU=typeof reportError=="function"?reportError:function(i){console.error(i)};function aw(i){this._internalRoot=i}Gy.prototype.render=aw.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(Je(409));zy(i,t,null,null)};Gy.prototype.unmount=aw.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;iu(function(){zy(null,i,null,null)}),t[ba]=null}};function Gy(i){this._internalRoot=i}Gy.prototype.unstable_scheduleHydration=function(i){if(i){var t=iL();i={blockedOn:null,target:i,priority:t};for(var n=0;n<hl.length&&t!==0&&t<hl[n].priority;n++);hl.splice(n,0,i),n===0&&sL(i)}};function lw(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Hy(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function k2(){}function aH(i,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=ty(a);o.call(u)}}var a=TU(t,r,i,0,null,!1,!1,"",k2);return i._reactRootContainer=a,i[ba]=a.current,bp(i.nodeType===8?i.parentNode:i),iu(),a}for(;s=i.lastChild;)i.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ty(c);l.call(u)}}var c=sw(i,0,!1,null,null,!1,!1,"",k2);return i._reactRootContainer=c,i[ba]=c.current,bp(i.nodeType===8?i.parentNode:i),iu(function(){zy(t,c,n,r)}),c}function Vy(i,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=ty(a);l.call(c)}}zy(t,a,i,s)}else a=aH(n,t,i,s,r);return ty(a)}tL=function(i){switch(i.tag){case 3:var t=i.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gd(t.pendingLanes);n!==0&&(CM(t,n|1),$r(t,yi()),!(hn&6)&&(of=yi()+500,zl()))}break;case 13:iu(function(){var r=Ra(i,1);if(r!==null){var s=Fr();mo(r,i,1,s)}}),ow(i,1)}};bM=function(i){if(i.tag===13){var t=Ra(i,134217728);if(t!==null){var n=Fr();mo(t,i,134217728,n)}ow(i,134217728)}};nL=function(i){if(i.tag===13){var t=Tl(i),n=Ra(i,t);if(n!==null){var r=Fr();mo(n,i,t,r)}ow(i,t)}};iL=function(){return Mn};rL=function(i,t){var n=Mn;try{return Mn=i,t()}finally{Mn=n}};sA=function(i,t,n){switch(t){case"input":if(qS(i,n),t=n.name,n.type==="radio"&&t!=null){for(n=i;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==i&&r.form===i.form){var s=Dy(r);if(!s)throw Error(Je(90));UD(r),qS(r,s)}}}break;case"textarea":OD(i,n);break;case"select":t=n.value,t!=null&&Hh(i,!!n.multiple,t,!1)}};WD=tw;XD=iu;var lH={usingClientEntryPoint:!1,Events:[um,Mh,Dy,HD,VD,tw]},ud={findFiberByHostInstance:Lc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},cH={bundleType:ud.bundleType,version:ud.version,rendererPackageName:ud.rendererPackageName,rendererConfig:ud.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:La.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=JD(i),i===null?null:i.stateNode},findFiberByHostInstance:ud.findFiberByHostInstance||oH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vg.isDisabled&&Vg.supportsFiber)try{Ry=Vg.inject(cH),Uo=Vg}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lH;ys.createPortal=function(i,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lw(t))throw Error(Je(200));return sH(i,t,null,n)};ys.createRoot=function(i,t){if(!lw(i))throw Error(Je(299));var n=!1,r="",s=CU;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sw(i,1,!1,null,null,n,!1,r,s),i[ba]=t.current,bp(i.nodeType===8?i.parentNode:i),new aw(t)};ys.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(Je(188)):(i=Object.keys(i).join(","),Error(Je(268,i)));return i=JD(t),i=i===null?null:i.stateNode,i};ys.flushSync=function(i){return iu(i)};ys.hydrate=function(i,t,n){if(!Hy(t))throw Error(Je(200));return Vy(null,i,t,!0,n)};ys.hydrateRoot=function(i,t,n){if(!lw(i))throw Error(Je(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=CU;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=TU(t,null,i,1,n??null,s,!1,o,a),i[ba]=t.current,bp(i),r)for(i=0;i<r.length;i++)n=r[i],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Gy(t)};ys.render=function(i,t,n){if(!Hy(t))throw Error(Je(200));return Vy(null,i,t,!1,n)};ys.unmountComponentAtNode=function(i){if(!Hy(i))throw Error(Je(40));return i._reactRootContainer?(iu(function(){Vy(null,null,i,!1,function(){i._reactRootContainer=null,i[ba]=null})}),!0):!1};ys.unstable_batchedUpdates=tw;ys.unstable_renderSubtreeIntoContainer=function(i,t,n,r){if(!Hy(n))throw Error(Je(200));if(i==null||i._reactInternals===void 0)throw Error(Je(38));return Vy(i,t,n,!1,r)};ys.version="18.2.0-next-9e3b772b8-20220608";function bU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bU)}catch(i){console.error(i)}}bU(),TD.exports=ys;var uH=TD.exports,RU,z2=uH;RU=XS.createRoot=z2.createRoot,XS.hydrateRoot=z2.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Jo="160",hH={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PU=0,NA=1,BU=2,dH=3,IU=0,Wy=1,ip=2,ro=3,Xs=0,Ci=1,Li=2,pH=2,sr=0,jc=1,kA=2,zA=3,GA=4,DU=5,dl=100,LU=101,UU=102,HA=103,VA=104,FU=200,OU=201,NU=202,kU=203,ny=204,iy=205,zU=206,GU=207,HU=208,VU=209,WU=210,XU=211,jU=212,YU=213,JU=214,KU=0,ZU=1,QU=2,Op=3,qU=4,$U=5,e3=6,t3=7,fm=0,n3=1,i3=2,Oo=0,r3=1,s3=2,o3=3,cw=4,a3=5,l3=6,WA="attached",c3="detached",Xy=300,Go=301,Il=302,ru=303,Np=304,Ef=306,Ho=1e3,Ui=1001,af=1002,Un=1003,kp=1004,mH=1004,Jh=1005,gH=1005,ln=1006,jy=1007,vH=1007,Vo=1008,yH=1008,or=1009,u3=1010,h3=1011,dm=1012,uw=1013,Do=1014,Yi=1015,Ji=1016,hw=1017,fw=1018,Aa=1020,f3=1021,xr=1023,d3=1024,p3=1025,Ea=1026,Dl=1027,dw=1028,pw=1029,m3=1030,mw=1031,gw=1033,m0=33776,g0=33777,v0=33778,y0=33779,XA=35840,jA=35841,YA=35842,JA=35843,vw=36196,KA=37492,ZA=37496,QA=37808,qA=37809,$A=37810,eE=37811,tE=37812,nE=37813,iE=37814,rE=37815,sE=37816,oE=37817,aE=37818,lE=37819,cE=37820,uE=37821,_0=36492,hE=36494,fE=36495,g3=36283,dE=36284,pE=36285,mE=36286,v3=2200,y3=2201,_3=2202,lf=2300,su=2301,x0=2302,Oc=2400,Nc=2401,zp=2402,Yy=2500,yw=2501,x3=0,_w=1,ry=2,pm=3e3,No=3001,Gl=3200,xw=3201,Hl=0,S3=1,hs="",wi="srgb",Wo="srgb-linear",Jy="display-p3",mm="display-p3-linear",Gp="linear",Ln="srgb",Hp="rec709",Vp="p3",_H=0,Tc=7680,xH=7681,SH=7682,AH=7683,EH=34055,MH=34056,wH=5386,TH=512,CH=513,bH=514,RH=515,PH=516,BH=517,IH=518,gE=519,A3=512,E3=513,M3=514,Sw=515,w3=516,T3=517,C3=518,b3=519,Wp=35044,DH=35048,LH=35040,UH=35045,FH=35049,OH=35041,NH=35046,kH=35050,zH=35042,GH="100",vE="300 es",sy=1035,co=2e3,cf=2001;let js=class{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const s=r.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,t);t.target=null}}};const mr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let G2=1234567;const Yc=Math.PI/180,uf=180/Math.PI;function ps(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(mr[i&255]+mr[i>>8&255]+mr[i>>16&255]+mr[i>>24&255]+"-"+mr[t&255]+mr[t>>8&255]+"-"+mr[t>>16&15|64]+mr[t>>24&255]+"-"+mr[n&63|128]+mr[n>>8&255]+"-"+mr[n>>16&255]+mr[n>>24&255]+mr[r&255]+mr[r>>8&255]+mr[r>>16&255]+mr[r>>24&255]).toLowerCase()}function li(i,t,n){return Math.max(t,Math.min(n,i))}function Aw(i,t){return(i%t+t)%t}function HH(i,t,n,r,s){return r+(i-t)*(s-r)/(n-t)}function VH(i,t,n){return i!==t?(n-i)/(t-i):0}function rp(i,t,n){return(1-n)*i+n*t}function WH(i,t,n,r){return rp(i,t,1-Math.exp(-n*r))}function XH(i,t=1){return t-Math.abs(Aw(i,t*2)-t)}function jH(i,t,n){return i<=t?0:i>=n?1:(i=(i-t)/(n-t),i*i*(3-2*i))}function YH(i,t,n){return i<=t?0:i>=n?1:(i=(i-t)/(n-t),i*i*i*(i*(i*6-15)+10))}function JH(i,t){return i+Math.floor(Math.random()*(t-i+1))}function KH(i,t){return i+Math.random()*(t-i)}function ZH(i){return i*(.5-Math.random())}function QH(i){i!==void 0&&(G2=i);let t=G2+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function qH(i){return i*Yc}function $H(i){return i*uf}function yE(i){return(i&i-1)===0&&i!==0}function eV(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function oy(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function tV(i,t,n,r,s){const o=Math.cos,a=Math.sin,l=o(n/2),c=a(n/2),u=o((t+r)/2),h=a((t+r)/2),f=o((t-r)/2),p=a((t-r)/2),g=o((r-t)/2),v=a((r-t)/2);switch(s){case"XYX":i.set(l*h,c*f,c*p,l*u);break;case"YZY":i.set(c*p,l*h,c*f,l*u);break;case"ZXZ":i.set(c*f,c*p,l*h,l*u);break;case"XZX":i.set(l*h,c*v,c*g,l*u);break;case"YXY":i.set(c*g,l*h,c*v,l*u);break;case"ZYZ":i.set(c*v,c*g,l*h,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Kr(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Zt(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const ir={DEG2RAD:Yc,RAD2DEG:uf,generateUUID:ps,clamp:li,euclideanModulo:Aw,mapLinear:HH,inverseLerp:VH,lerp:rp,damp:WH,pingpong:XH,smoothstep:jH,smootherstep:YH,randInt:JH,randFloat:KH,randFloatSpread:ZH,seededRandom:QH,degToRad:qH,radToDeg:$H,isPowerOfTwo:yE,ceilPowerOfTwo:eV,floorPowerOfTwo:oy,setQuaternionFromProperEuler:tV,normalize:Zt,denormalize:Kr};class De{constructor(t=0,n=0){De.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,r=this.y,s=t.elements;return this.x=s[0]*n+s[3]*r+s[6],this.y=s[1]*n+s[4]*r+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(li(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y;return n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const r=Math.cos(n),s=Math.sin(n),o=this.x-t.x,a=this.y-t.y;return this.x=o*r-a*s+t.x,this.y=o*s+a*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yt{constructor(t,n,r,s,o,a,l,c,u){Yt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,r,s,o,a,l,c,u)}set(t,n,r,s,o,a,l,c,u){const h=this.elements;return h[0]=t,h[1]=s,h[2]=l,h[3]=n,h[4]=o,h[5]=c,h[6]=r,h[7]=a,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(t,n,r){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,s=n.elements,o=this.elements,a=r[0],l=r[3],c=r[6],u=r[1],h=r[4],f=r[7],p=r[2],g=r[5],v=r[8],_=s[0],x=s[3],y=s[6],S=s[1],A=s[4],M=s[7],C=s[2],T=s[5],R=s[8];return o[0]=a*_+l*S+c*C,o[3]=a*x+l*A+c*T,o[6]=a*y+l*M+c*R,o[1]=u*_+h*S+f*C,o[4]=u*x+h*A+f*T,o[7]=u*y+h*M+f*R,o[2]=p*_+g*S+v*C,o[5]=p*x+g*A+v*T,o[8]=p*y+g*M+v*R,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8];return n*a*h-n*l*u-r*o*h+r*l*c+s*o*u-s*a*c}invert(){const t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=h*a-l*u,p=l*c-h*o,g=u*o-a*c,v=n*f+r*p+s*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return t[0]=f*_,t[1]=(s*u-h*r)*_,t[2]=(l*r-s*a)*_,t[3]=p*_,t[4]=(h*n-s*c)*_,t[5]=(s*o-l*n)*_,t[6]=g*_,t[7]=(r*c-u*n)*_,t[8]=(a*n-r*o)*_,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,r,s,o,a,l){const c=Math.cos(o),u=Math.sin(o);return this.set(r*c,r*u,-r*(c*a+u*l)+a+t,-s*u,s*c,-s*(-u*a+c*l)+l+n,0,0,1),this}scale(t,n){return this.premultiply(r1.makeScale(t,n)),this}rotate(t){return this.premultiply(r1.makeRotation(-t)),this}translate(t,n){return this.premultiply(r1.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,r=t.elements;for(let s=0;s<9;s++)if(n[s]!==r[s])return!1;return!0}fromArray(t,n=0){for(let r=0;r<9;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const r1=new Yt;function R3(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const nV={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Bh(i,t){return new nV[i](t)}function Xp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function P3(){const i=Xp("canvas");return i.style.display="block",i}const H2={};function sp(i){i in H2||(H2[i]=!0,console.warn(i))}const V2=new Yt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),W2=new Yt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Wg={[Wo]:{transfer:Gp,primaries:Hp,toReference:i=>i,fromReference:i=>i},[wi]:{transfer:Ln,primaries:Hp,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[mm]:{transfer:Gp,primaries:Vp,toReference:i=>i.applyMatrix3(W2),fromReference:i=>i.applyMatrix3(V2)},[Jy]:{transfer:Ln,primaries:Vp,toReference:i=>i.convertSRGBToLinear().applyMatrix3(W2),fromReference:i=>i.applyMatrix3(V2).convertLinearToSRGB()}},iV=new Set([Wo,mm]),En={enabled:!0,_workingColorSpace:Wo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!iV.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,t,n){if(this.enabled===!1||t===n||!t||!n)return i;const r=Wg[t].toReference,s=Wg[n].fromReference;return s(r(i))},fromWorkingColorSpace:function(i,t){return this.convert(i,this._workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this._workingColorSpace)},getPrimaries:function(i){return Wg[i].primaries},getTransfer:function(i){return i===hs?Gp:Wg[i].transfer}};function Kh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function s1(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let zu;class Ew{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{zu===void 0&&(zu=Xp("canvas")),zu.width=t.width,zu.height=t.height;const r=zu.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=zu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=Xp("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height),o=s.data;for(let a=0;a<o.length;a++)o[a]=Kh(o[a]/255)*255;return r.putImageData(s,0,0),n}else if(t.data){const n=t.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Kh(n[r]/255)*255):n[r]=Kh(n[r]);return{data:n,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let rV=0;class kc{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:rV++}),this.uuid=ps(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let a=0,l=s.length;a<l;a++)s[a].isDataTexture?o.push(o1(s[a].image)):o.push(o1(s[a]))}else o=o1(s);r.url=o}return n||(t.images[this.uuid]=r),r}}function o1(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Ew.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let sV=0;class Sn extends js{constructor(t=Sn.DEFAULT_IMAGE,n=Sn.DEFAULT_MAPPING,r=Ui,s=Ui,o=ln,a=Vo,l=xr,c=or,u=Sn.DEFAULT_ANISOTROPY,h=hs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:sV++}),this.uuid=ps(),this.name="",this.source=new kc(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(sp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===No?wi:hs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Xy)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ho:t.x=t.x-Math.floor(t.x);break;case Ui:t.x=t.x<0?0:1;break;case af:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Ho:t.y=t.y-Math.floor(t.y);break;case Ui:t.y=t.y<0?0:1;break;case af:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return sp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===wi?No:pm}set encoding(t){sp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===No?wi:hs}}Sn.DEFAULT_IMAGE=null;Sn.DEFAULT_MAPPING=Xy;Sn.DEFAULT_ANISOTROPY=1;class qt{constructor(t=0,n=0,r=0,s=1){qt.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,r,s){return this.x=t,this.y=n,this.z=r,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,r=this.y,s=this.z,o=this.w,a=t.elements;return this.x=a[0]*n+a[4]*r+a[8]*s+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*s+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*s+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*s+a[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,r,s,o;const c=t.elements,u=c[0],h=c[4],f=c[8],p=c[1],g=c[5],v=c[9],_=c[2],x=c[6],y=c[10];if(Math.abs(h-p)<.01&&Math.abs(f-_)<.01&&Math.abs(v-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(f+_)<.1&&Math.abs(v+x)<.1&&Math.abs(u+g+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const A=(u+1)/2,M=(g+1)/2,C=(y+1)/2,T=(h+p)/4,R=(f+_)/4,I=(v+x)/4;return A>M&&A>C?A<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(A),s=T/r,o=R/r):M>C?M<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(M),r=T/s,o=I/s):C<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(C),r=R/o,s=I/o),this.set(r,s,o,n),this}let S=Math.sqrt((x-v)*(x-v)+(f-_)*(f-_)+(p-h)*(p-h));return Math.abs(S)<.001&&(S=1),this.x=(x-v)/S,this.y=(f-_)/S,this.z=(p-h)/S,this.w=Math.acos((u+g+y-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this.w=t.w+(n.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class B3 extends js{constructor(t=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new qt(0,0,t,n),this.scissorTest=!1,this.viewport=new qt(0,0,t,n);const s={width:t,height:n,depth:1};r.encoding!==void 0&&(sp("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===No?wi:hs),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ln,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Sn(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(t,n,r=1){(this.width!==t||this.height!==n||this.depth!==r)&&(this.width=t,this.height=n,this.depth=r,this.texture.image.width=t,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new kc(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Kn extends B3{constructor(t=1,n=1,r={}){super(t,n,r),this.isWebGLRenderTarget=!0}}class Ky extends Sn{constructor(t=null,n=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:r,depth:s},this.magFilter=Un,this.minFilter=Un,this.wrapR=Ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oV extends Kn{constructor(t=1,n=1,r=1,s={}){super(t,n,s),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Ky(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class Mw extends Sn{constructor(t=null,n=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:r,depth:s},this.magFilter=Un,this.minFilter=Un,this.wrapR=Ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aV extends Kn{constructor(t=1,n=1,r=1,s={}){super(t,n,s),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Mw(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class lV extends Kn{constructor(t=1,n=1,r=1,s={}){super(t,n,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=o.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(t,n,r=1){if(this.width!==t||this.height!==n||this.depth!==r){this.width=t,this.height=n,this.depth=r;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=t,this.texture[s].image.height=n,this.texture[s].image.depth=r;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let n=0,r=t.texture.length;n<r;n++)this.texture[n]=t.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class xi{constructor(t=0,n=0,r=0,s=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=s}static slerpFlat(t,n,r,s,o,a,l){let c=r[s+0],u=r[s+1],h=r[s+2],f=r[s+3];const p=o[a+0],g=o[a+1],v=o[a+2],_=o[a+3];if(l===0){t[n+0]=c,t[n+1]=u,t[n+2]=h,t[n+3]=f;return}if(l===1){t[n+0]=p,t[n+1]=g,t[n+2]=v,t[n+3]=_;return}if(f!==_||c!==p||u!==g||h!==v){let x=1-l;const y=c*p+u*g+h*v+f*_,S=y>=0?1:-1,A=1-y*y;if(A>Number.EPSILON){const C=Math.sqrt(A),T=Math.atan2(C,y*S);x=Math.sin(x*T)/C,l=Math.sin(l*T)/C}const M=l*S;if(c=c*x+p*M,u=u*x+g*M,h=h*x+v*M,f=f*x+_*M,x===1-l){const C=1/Math.sqrt(c*c+u*u+h*h+f*f);c*=C,u*=C,h*=C,f*=C}}t[n]=c,t[n+1]=u,t[n+2]=h,t[n+3]=f}static multiplyQuaternionsFlat(t,n,r,s,o,a){const l=r[s],c=r[s+1],u=r[s+2],h=r[s+3],f=o[a],p=o[a+1],g=o[a+2],v=o[a+3];return t[n]=l*v+h*f+c*g-u*p,t[n+1]=c*v+h*p+u*f-l*g,t[n+2]=u*v+h*g+l*p-c*f,t[n+3]=h*v-l*f-c*p-u*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,r,s){return this._x=t,this._y=n,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const r=t._x,s=t._y,o=t._z,a=t._order,l=Math.cos,c=Math.sin,u=l(r/2),h=l(s/2),f=l(o/2),p=c(r/2),g=c(s/2),v=c(o/2);switch(a){case"XYZ":this._x=p*h*f+u*g*v,this._y=u*g*f-p*h*v,this._z=u*h*v+p*g*f,this._w=u*h*f-p*g*v;break;case"YXZ":this._x=p*h*f+u*g*v,this._y=u*g*f-p*h*v,this._z=u*h*v-p*g*f,this._w=u*h*f+p*g*v;break;case"ZXY":this._x=p*h*f-u*g*v,this._y=u*g*f+p*h*v,this._z=u*h*v+p*g*f,this._w=u*h*f-p*g*v;break;case"ZYX":this._x=p*h*f-u*g*v,this._y=u*g*f+p*h*v,this._z=u*h*v-p*g*f,this._w=u*h*f+p*g*v;break;case"YZX":this._x=p*h*f+u*g*v,this._y=u*g*f+p*h*v,this._z=u*h*v-p*g*f,this._w=u*h*f-p*g*v;break;case"XZY":this._x=p*h*f-u*g*v,this._y=u*g*f-p*h*v,this._z=u*h*v+p*g*f,this._w=u*h*f+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const r=n/2,s=Math.sin(r);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,r=n[0],s=n[4],o=n[8],a=n[1],l=n[5],c=n[9],u=n[2],h=n[6],f=n[10],p=r+l+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(h-c)*g,this._y=(o-u)*g,this._z=(a-s)*g}else if(r>l&&r>f){const g=2*Math.sqrt(1+r-l-f);this._w=(h-c)/g,this._x=.25*g,this._y=(s+a)/g,this._z=(o+u)/g}else if(l>f){const g=2*Math.sqrt(1+l-r-f);this._w=(o-u)/g,this._x=(s+a)/g,this._y=.25*g,this._z=(c+h)/g}else{const g=2*Math.sqrt(1+f-r-l);this._w=(a-s)/g,this._x=(o+u)/g,this._y=(c+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(li(this.dot(t),-1,1)))}rotateTowards(t,n){const r=this.angleTo(t);if(r===0)return this;const s=Math.min(1,n/r);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const r=t._x,s=t._y,o=t._z,a=t._w,l=n._x,c=n._y,u=n._z,h=n._w;return this._x=r*h+a*l+s*u-o*c,this._y=s*h+a*c+o*l-r*u,this._z=o*h+a*u+r*c-s*l,this._w=a*h-r*l-s*c-o*u,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const r=this._x,s=this._y,o=this._z,a=this._w;let l=a*t._w+r*t._x+s*t._y+o*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=a,this._x=r,this._y=s,this._z=o,this;const c=1-l*l;if(c<=Number.EPSILON){const g=1-n;return this._w=g*a+n*this._w,this._x=g*r+n*this._x,this._y=g*s+n*this._y,this._z=g*o+n*this._z,this.normalize(),this}const u=Math.sqrt(c),h=Math.atan2(u,l),f=Math.sin((1-n)*h)/u,p=Math.sin(n*h)/u;return this._w=a*f+this._w*p,this._x=r*f+this._x*p,this._y=s*f+this._y*p,this._z=o*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,n,r){return this.copy(t).slerp(n,r)}random(){const t=Math.random(),n=Math.sqrt(1-t),r=Math.sqrt(t),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(s),r*Math.sin(o),r*Math.cos(o),n*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(t=0,n=0,r=0){Y.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}set(t,n,r){return r===void 0&&(r=this.z),this.x=t,this.y=n,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(X2.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(X2.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,r=this.y,s=this.z,o=t.elements;return this.x=o[0]*n+o[3]*r+o[6]*s,this.y=o[1]*n+o[4]*r+o[7]*s,this.z=o[2]*n+o[5]*r+o[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,r=this.y,s=this.z,o=t.elements,a=1/(o[3]*n+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*s+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*s+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*s+o[14])*a,this}applyQuaternion(t){const n=this.x,r=this.y,s=this.z,o=t.x,a=t.y,l=t.z,c=t.w,u=2*(a*s-l*r),h=2*(l*n-o*s),f=2*(o*r-a*n);return this.x=n+c*u+a*f-l*h,this.y=r+c*h+l*u-o*f,this.z=s+c*f+o*h-a*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,r=this.y,s=this.z,o=t.elements;return this.x=o[0]*n+o[4]*r+o[8]*s,this.y=o[1]*n+o[5]*r+o[9]*s,this.z=o[2]*n+o[6]*r+o[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const r=t.x,s=t.y,o=t.z,a=n.x,l=n.y,c=n.z;return this.x=s*c-o*l,this.y=o*a-r*c,this.z=r*l-s*a,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const r=t.dot(this)/n;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return a1.copy(this).projectOnVector(t),this.sub(a1)}reflect(t){return this.sub(a1.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(li(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y,s=this.z-t.z;return n*n+r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,r){const s=Math.sin(n)*t;return this.x=s*Math.sin(r),this.y=Math.cos(n)*t,this.z=s*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=s,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const a1=new Y,X2=new xi;class Qi{constructor(t=new Y(1/0,1/0,1/0),n=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n+=3)this.expandByPoint(qs.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,r=t.count;n<r;n++)this.expandByPoint(qs.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=qs.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let a=0,l=o.count;a<l;a++)t.isMesh===!0?t.getVertexPosition(a,qs):qs.fromBufferAttribute(o,a),qs.applyMatrix4(t.matrixWorld),this.expandByPoint(qs);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Xg.copy(t.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Xg.copy(r.boundingBox)),Xg.applyMatrix4(t.matrixWorld),this.union(Xg)}const s=t.children;for(let o=0,a=s.length;o<a;o++)this.expandByObject(s[o],n);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,qs),qs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,r;return t.normal.x>0?(n=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),n<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hd),jg.subVectors(this.max,hd),Gu.subVectors(t.a,hd),Hu.subVectors(t.b,hd),Vu.subVectors(t.c,hd),Ya.subVectors(Hu,Gu),Ja.subVectors(Vu,Hu),lc.subVectors(Gu,Vu);let n=[0,-Ya.z,Ya.y,0,-Ja.z,Ja.y,0,-lc.z,lc.y,Ya.z,0,-Ya.x,Ja.z,0,-Ja.x,lc.z,0,-lc.x,-Ya.y,Ya.x,0,-Ja.y,Ja.x,0,-lc.y,lc.x,0];return!l1(n,Gu,Hu,Vu,jg)||(n=[1,0,0,0,1,0,0,0,1],!l1(n,Gu,Hu,Vu,jg))?!1:(Yg.crossVectors(Ya,Ja),n=[Yg.x,Yg.y,Yg.z],l1(n,Gu,Hu,Vu,jg))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,qs).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(qs).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(oa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const oa=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],qs=new Y,Xg=new Qi,Gu=new Y,Hu=new Y,Vu=new Y,Ya=new Y,Ja=new Y,lc=new Y,hd=new Y,jg=new Y,Yg=new Y,cc=new Y;function l1(i,t,n,r,s){for(let o=0,a=i.length-3;o<=a;o+=3){cc.fromArray(i,o);const l=s.x*Math.abs(cc.x)+s.y*Math.abs(cc.y)+s.z*Math.abs(cc.z),c=t.dot(cc),u=n.dot(cc),h=r.dot(cc);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>l)return!1}return!0}const cV=new Qi,fd=new Y,c1=new Y;class Oi{constructor(t=new Y,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const r=this.center;n!==void 0?r.copy(n):cV.setFromPoints(t).getCenter(r);let s=0;for(let o=0,a=t.length;o<a;o++)s=Math.max(s,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const r=this.center.distanceToSquared(t);return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;fd.subVectors(t,this.center);const n=fd.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),s=(r-this.radius)*.5;this.center.addScaledVector(fd,s/r),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(c1.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(fd.copy(t.center).add(c1)),this.expandByPoint(fd.copy(t.center).sub(c1))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const aa=new Y,u1=new Y,Jg=new Y,Ka=new Y,h1=new Y,Kg=new Y,f1=new Y;class Mf{constructor(t=new Y,n=new Y(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,aa)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=aa.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(aa.copy(this.origin).addScaledVector(this.direction,n),aa.distanceToSquared(t))}distanceSqToSegment(t,n,r,s){u1.copy(t).add(n).multiplyScalar(.5),Jg.copy(n).sub(t).normalize(),Ka.copy(this.origin).sub(u1);const o=t.distanceTo(n)*.5,a=-this.direction.dot(Jg),l=Ka.dot(this.direction),c=-Ka.dot(Jg),u=Ka.lengthSq(),h=Math.abs(1-a*a);let f,p,g,v;if(h>0)if(f=a*c-l,p=a*l-c,v=o*h,f>=0)if(p>=-v)if(p<=v){const _=1/h;f*=_,p*=_,g=f*(f+a*p+2*l)+p*(a*f+p+2*c)+u}else p=o,f=Math.max(0,-(a*p+l)),g=-f*f+p*(p+2*c)+u;else p=-o,f=Math.max(0,-(a*p+l)),g=-f*f+p*(p+2*c)+u;else p<=-v?(f=Math.max(0,-(-a*o+l)),p=f>0?-o:Math.min(Math.max(-o,-c),o),g=-f*f+p*(p+2*c)+u):p<=v?(f=0,p=Math.min(Math.max(-o,-c),o),g=p*(p+2*c)+u):(f=Math.max(0,-(a*o+l)),p=f>0?o:Math.min(Math.max(-o,-c),o),g=-f*f+p*(p+2*c)+u);else p=a>0?-o:o,f=Math.max(0,-(a*p+l)),g=-f*f+p*(p+2*c)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),s&&s.copy(u1).addScaledVector(Jg,p),g}intersectSphere(t,n){aa.subVectors(t.center,this.origin);const r=aa.dot(this.direction),s=aa.dot(aa)-r*r,o=t.radius*t.radius;if(s>o)return null;const a=Math.sqrt(o-s),l=r-a,c=r+a;return c<0?null:l<0?this.at(c,n):this.at(l,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/n;return r>=0?r:null}intersectPlane(t,n){const r=this.distanceToPlane(t);return r===null?null:this.at(r,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let r,s,o,a,l,c;const u=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,p=this.origin;return u>=0?(r=(t.min.x-p.x)*u,s=(t.max.x-p.x)*u):(r=(t.max.x-p.x)*u,s=(t.min.x-p.x)*u),h>=0?(o=(t.min.y-p.y)*h,a=(t.max.y-p.y)*h):(o=(t.max.y-p.y)*h,a=(t.min.y-p.y)*h),r>a||o>s||((o>r||isNaN(r))&&(r=o),(a<s||isNaN(s))&&(s=a),f>=0?(l=(t.min.z-p.z)*f,c=(t.max.z-p.z)*f):(l=(t.max.z-p.z)*f,c=(t.min.z-p.z)*f),r>c||l>s)||((l>r||r!==r)&&(r=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(r>=0?r:s,n)}intersectsBox(t){return this.intersectBox(t,aa)!==null}intersectTriangle(t,n,r,s,o){h1.subVectors(n,t),Kg.subVectors(r,t),f1.crossVectors(h1,Kg);let a=this.direction.dot(f1),l;if(a>0){if(s)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Ka.subVectors(this.origin,t);const c=l*this.direction.dot(Kg.crossVectors(Ka,Kg));if(c<0)return null;const u=l*this.direction.dot(h1.cross(Ka));if(u<0||c+u>a)return null;const h=-l*Ka.dot(f1);return h<0?null:this.at(h/a,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class at{constructor(t,n,r,s,o,a,l,c,u,h,f,p,g,v,_,x){at.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,r,s,o,a,l,c,u,h,f,p,g,v,_,x)}set(t,n,r,s,o,a,l,c,u,h,f,p,g,v,_,x){const y=this.elements;return y[0]=t,y[4]=n,y[8]=r,y[12]=s,y[1]=o,y[5]=a,y[9]=l,y[13]=c,y[2]=u,y[6]=h,y[10]=f,y[14]=p,y[3]=g,y[7]=v,y[11]=_,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new at().fromArray(this.elements)}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(t){const n=this.elements,r=t.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,r){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,n,r){return this.set(t.x,n.x,r.x,0,t.y,n.y,r.y,0,t.z,n.z,r.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,r=t.elements,s=1/Wu.setFromMatrixColumn(t,0).length(),o=1/Wu.setFromMatrixColumn(t,1).length(),a=1/Wu.setFromMatrixColumn(t,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,r=t.x,s=t.y,o=t.z,a=Math.cos(r),l=Math.sin(r),c=Math.cos(s),u=Math.sin(s),h=Math.cos(o),f=Math.sin(o);if(t.order==="XYZ"){const p=a*h,g=a*f,v=l*h,_=l*f;n[0]=c*h,n[4]=-c*f,n[8]=u,n[1]=g+v*u,n[5]=p-_*u,n[9]=-l*c,n[2]=_-p*u,n[6]=v+g*u,n[10]=a*c}else if(t.order==="YXZ"){const p=c*h,g=c*f,v=u*h,_=u*f;n[0]=p+_*l,n[4]=v*l-g,n[8]=a*u,n[1]=a*f,n[5]=a*h,n[9]=-l,n[2]=g*l-v,n[6]=_+p*l,n[10]=a*c}else if(t.order==="ZXY"){const p=c*h,g=c*f,v=u*h,_=u*f;n[0]=p-_*l,n[4]=-a*f,n[8]=v+g*l,n[1]=g+v*l,n[5]=a*h,n[9]=_-p*l,n[2]=-a*u,n[6]=l,n[10]=a*c}else if(t.order==="ZYX"){const p=a*h,g=a*f,v=l*h,_=l*f;n[0]=c*h,n[4]=v*u-g,n[8]=p*u+_,n[1]=c*f,n[5]=_*u+p,n[9]=g*u-v,n[2]=-u,n[6]=l*c,n[10]=a*c}else if(t.order==="YZX"){const p=a*c,g=a*u,v=l*c,_=l*u;n[0]=c*h,n[4]=_-p*f,n[8]=v*f+g,n[1]=f,n[5]=a*h,n[9]=-l*h,n[2]=-u*h,n[6]=g*f+v,n[10]=p-_*f}else if(t.order==="XZY"){const p=a*c,g=a*u,v=l*c,_=l*u;n[0]=c*h,n[4]=-f,n[8]=u*h,n[1]=p*f+_,n[5]=a*h,n[9]=g*f-v,n[2]=v*f-g,n[6]=l*h,n[10]=_*f+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(uV,t,hV)}lookAt(t,n,r){const s=this.elements;return ls.subVectors(t,n),ls.lengthSq()===0&&(ls.z=1),ls.normalize(),Za.crossVectors(r,ls),Za.lengthSq()===0&&(Math.abs(r.z)===1?ls.x+=1e-4:ls.z+=1e-4,ls.normalize(),Za.crossVectors(r,ls)),Za.normalize(),Zg.crossVectors(ls,Za),s[0]=Za.x,s[4]=Zg.x,s[8]=ls.x,s[1]=Za.y,s[5]=Zg.y,s[9]=ls.y,s[2]=Za.z,s[6]=Zg.z,s[10]=ls.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,s=n.elements,o=this.elements,a=r[0],l=r[4],c=r[8],u=r[12],h=r[1],f=r[5],p=r[9],g=r[13],v=r[2],_=r[6],x=r[10],y=r[14],S=r[3],A=r[7],M=r[11],C=r[15],T=s[0],R=s[4],I=s[8],P=s[12],B=s[1],O=s[5],N=s[9],ne=s[13],z=s[2],j=s[6],q=s[10],he=s[14],H=s[3],X=s[7],K=s[11],k=s[15];return o[0]=a*T+l*B+c*z+u*H,o[4]=a*R+l*O+c*j+u*X,o[8]=a*I+l*N+c*q+u*K,o[12]=a*P+l*ne+c*he+u*k,o[1]=h*T+f*B+p*z+g*H,o[5]=h*R+f*O+p*j+g*X,o[9]=h*I+f*N+p*q+g*K,o[13]=h*P+f*ne+p*he+g*k,o[2]=v*T+_*B+x*z+y*H,o[6]=v*R+_*O+x*j+y*X,o[10]=v*I+_*N+x*q+y*K,o[14]=v*P+_*ne+x*he+y*k,o[3]=S*T+A*B+M*z+C*H,o[7]=S*R+A*O+M*j+C*X,o[11]=S*I+A*N+M*q+C*K,o[15]=S*P+A*ne+M*he+C*k,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[4],s=t[8],o=t[12],a=t[1],l=t[5],c=t[9],u=t[13],h=t[2],f=t[6],p=t[10],g=t[14],v=t[3],_=t[7],x=t[11],y=t[15];return v*(+o*c*f-s*u*f-o*l*p+r*u*p+s*l*g-r*c*g)+_*(+n*c*g-n*u*p+o*a*p-s*a*g+s*u*h-o*c*h)+x*(+n*u*f-n*l*g-o*a*f+r*a*g+o*l*h-r*u*h)+y*(-s*l*h-n*c*f+n*l*p+s*a*f-r*a*p+r*c*h)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,r){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=n,s[14]=r),this}invert(){const t=this.elements,n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],p=t[10],g=t[11],v=t[12],_=t[13],x=t[14],y=t[15],S=f*x*u-_*p*u+_*c*g-l*x*g-f*c*y+l*p*y,A=v*p*u-h*x*u-v*c*g+a*x*g+h*c*y-a*p*y,M=h*_*u-v*f*u+v*l*g-a*_*g-h*l*y+a*f*y,C=v*f*c-h*_*c-v*l*p+a*_*p+h*l*x-a*f*x,T=n*S+r*A+s*M+o*C;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/T;return t[0]=S*R,t[1]=(_*p*o-f*x*o-_*s*g+r*x*g+f*s*y-r*p*y)*R,t[2]=(l*x*o-_*c*o+_*s*u-r*x*u-l*s*y+r*c*y)*R,t[3]=(f*c*o-l*p*o-f*s*u+r*p*u+l*s*g-r*c*g)*R,t[4]=A*R,t[5]=(h*x*o-v*p*o+v*s*g-n*x*g-h*s*y+n*p*y)*R,t[6]=(v*c*o-a*x*o-v*s*u+n*x*u+a*s*y-n*c*y)*R,t[7]=(a*p*o-h*c*o+h*s*u-n*p*u-a*s*g+n*c*g)*R,t[8]=M*R,t[9]=(v*f*o-h*_*o-v*r*g+n*_*g+h*r*y-n*f*y)*R,t[10]=(a*_*o-v*l*o+v*r*u-n*_*u-a*r*y+n*l*y)*R,t[11]=(h*l*o-a*f*o-h*r*u+n*f*u+a*r*g-n*l*g)*R,t[12]=C*R,t[13]=(h*_*s-v*f*s+v*r*p-n*_*p-h*r*x+n*f*x)*R,t[14]=(v*l*s-a*_*s-v*r*c+n*_*c+a*r*x-n*l*x)*R,t[15]=(a*f*s-h*l*s+h*r*c-n*f*c-a*r*p+n*l*p)*R,this}scale(t){const n=this.elements,r=t.x,s=t.y,o=t.z;return n[0]*=r,n[4]*=s,n[8]*=o,n[1]*=r,n[5]*=s,n[9]*=o,n[2]*=r,n[6]*=s,n[10]*=o,n[3]*=r,n[7]*=s,n[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,s))}makeTranslation(t,n,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const r=Math.cos(n),s=Math.sin(n),o=1-r,a=t.x,l=t.y,c=t.z,u=o*a,h=o*l;return this.set(u*a+r,u*l-s*c,u*c+s*l,0,u*l+s*c,h*l+r,h*c-s*a,0,u*c-s*l,h*c+s*a,o*c*c+r,0,0,0,0,1),this}makeScale(t,n,r){return this.set(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,n,r,s,o,a){return this.set(1,r,o,0,t,1,a,0,n,s,1,0,0,0,0,1),this}compose(t,n,r){const s=this.elements,o=n._x,a=n._y,l=n._z,c=n._w,u=o+o,h=a+a,f=l+l,p=o*u,g=o*h,v=o*f,_=a*h,x=a*f,y=l*f,S=c*u,A=c*h,M=c*f,C=r.x,T=r.y,R=r.z;return s[0]=(1-(_+y))*C,s[1]=(g+M)*C,s[2]=(v-A)*C,s[3]=0,s[4]=(g-M)*T,s[5]=(1-(p+y))*T,s[6]=(x+S)*T,s[7]=0,s[8]=(v+A)*R,s[9]=(x-S)*R,s[10]=(1-(p+_))*R,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,n,r){const s=this.elements;let o=Wu.set(s[0],s[1],s[2]).length();const a=Wu.set(s[4],s[5],s[6]).length(),l=Wu.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),t.x=s[12],t.y=s[13],t.z=s[14],$s.copy(this);const u=1/o,h=1/a,f=1/l;return $s.elements[0]*=u,$s.elements[1]*=u,$s.elements[2]*=u,$s.elements[4]*=h,$s.elements[5]*=h,$s.elements[6]*=h,$s.elements[8]*=f,$s.elements[9]*=f,$s.elements[10]*=f,n.setFromRotationMatrix($s),r.x=o,r.y=a,r.z=l,this}makePerspective(t,n,r,s,o,a,l=co){const c=this.elements,u=2*o/(n-t),h=2*o/(r-s),f=(n+t)/(n-t),p=(r+s)/(r-s);let g,v;if(l===co)g=-(a+o)/(a-o),v=-2*a*o/(a-o);else if(l===cf)g=-a/(a-o),v=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=g,c[14]=v,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,n,r,s,o,a,l=co){const c=this.elements,u=1/(n-t),h=1/(r-s),f=1/(a-o),p=(n+t)*u,g=(r+s)*h;let v,_;if(l===co)v=(a+o)*f,_=-2*f;else if(l===cf)v=o*f,_=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-p,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-g,c[2]=0,c[6]=0,c[10]=_,c[14]=-v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){const n=this.elements,r=t.elements;for(let s=0;s<16;s++)if(n[s]!==r[s])return!1;return!0}fromArray(t,n=0){for(let r=0;r<16;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t[n+9]=r[9],t[n+10]=r[10],t[n+11]=r[11],t[n+12]=r[12],t[n+13]=r[13],t[n+14]=r[14],t[n+15]=r[15],t}}const Wu=new Y,$s=new at,uV=new Y(0,0,0),hV=new Y(1,1,1),Za=new Y,Zg=new Y,ls=new Y,j2=new at,Y2=new xi;class uo{constructor(t=0,n=0,r=0,s=uo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],h=s[9],f=s[2],p=s[6],g=s[10];switch(n){case"XYZ":this._y=Math.asin(li(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-li(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(li(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-li(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(li(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-li(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return j2.makeRotationFromQuaternion(t),this.setFromRotationMatrix(j2,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return Y2.setFromEuler(this),this.setFromQuaternion(Y2,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}uo.DEFAULT_ORDER="XYZ";class Jc{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let fV=0;const J2=new Y,Xu=new xi,la=new at,Qg=new Y,dd=new Y,dV=new Y,pV=new xi,K2=new Y(1,0,0),Z2=new Y(0,1,0),Q2=new Y(0,0,1),mV={type:"added"},gV={type:"removed"};class tn extends js{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fV++}),this.uuid=ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=tn.DEFAULT_UP.clone();const t=new Y,n=new uo,r=new xi,s=new Y(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new at},normalMatrix:{value:new Yt}}),this.matrix=new at,this.matrixWorld=new at,this.matrixAutoUpdate=tn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=tn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Jc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Xu.setFromAxisAngle(t,n),this.quaternion.multiply(Xu),this}rotateOnWorldAxis(t,n){return Xu.setFromAxisAngle(t,n),this.quaternion.premultiply(Xu),this}rotateX(t){return this.rotateOnAxis(K2,t)}rotateY(t){return this.rotateOnAxis(Z2,t)}rotateZ(t){return this.rotateOnAxis(Q2,t)}translateOnAxis(t,n){return J2.copy(t).applyQuaternion(this.quaternion),this.position.add(J2.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(K2,t)}translateY(t){return this.translateOnAxis(Z2,t)}translateZ(t){return this.translateOnAxis(Q2,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(la.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?Qg.copy(t):Qg.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),dd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?la.lookAt(dd,Qg,this.up):la.lookAt(Qg,dd,this.up),this.quaternion.setFromRotationMatrix(la),s&&(la.extractRotation(s.matrixWorld),Xu.setFromRotationMatrix(la),this.quaternion.premultiply(Xu.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(mV)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(gV)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),la.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),la.multiply(t.parent.matrixWorld)),t.applyMatrix4(la),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(a!==void 0)return a}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dd,t,dV),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dd,pV,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||t===!0)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(t===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=t===void 0||typeof t=="string",r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){const f=c[u];o(t.shapes,f)}else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(o(t.animations,c))}}if(n){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),h=a(t.images),f=a(t.shapes),p=a(t.skeletons),g=a(t.animations),v=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=s,r;function a(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let r=0;r<t.children.length;r++){const s=t.children[r];this.add(s.clone())}return this}}tn.DEFAULT_UP=new Y(0,1,0);tn.DEFAULT_MATRIX_AUTO_UPDATE=!0;tn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const eo=new Y,ca=new Y,d1=new Y,ua=new Y,ju=new Y,Yu=new Y,q2=new Y,p1=new Y,m1=new Y,g1=new Y;let qg=!1;class Jr{constructor(t=new Y,n=new Y,r=new Y){this.a=t,this.b=n,this.c=r}static getNormal(t,n,r,s){s.subVectors(r,n),eo.subVectors(t,n),s.cross(eo);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(t,n,r,s,o){eo.subVectors(s,n),ca.subVectors(r,n),d1.subVectors(t,n);const a=eo.dot(eo),l=eo.dot(ca),c=eo.dot(d1),u=ca.dot(ca),h=ca.dot(d1),f=a*u-l*l;if(f===0)return o.set(0,0,0),null;const p=1/f,g=(u*c-l*h)*p,v=(a*h-l*c)*p;return o.set(1-g-v,v,g)}static containsPoint(t,n,r,s){return this.getBarycoord(t,n,r,s,ua)===null?!1:ua.x>=0&&ua.y>=0&&ua.x+ua.y<=1}static getUV(t,n,r,s,o,a,l,c){return qg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),qg=!0),this.getInterpolation(t,n,r,s,o,a,l,c)}static getInterpolation(t,n,r,s,o,a,l,c){return this.getBarycoord(t,n,r,s,ua)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,ua.x),c.addScaledVector(a,ua.y),c.addScaledVector(l,ua.z),c)}static isFrontFacing(t,n,r,s){return eo.subVectors(r,n),ca.subVectors(t,n),eo.cross(ca).dot(s)<0}set(t,n,r){return this.a.copy(t),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(t,n,r,s){return this.a.copy(t[n]),this.b.copy(t[r]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,n,r,s){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return eo.subVectors(this.c,this.b),ca.subVectors(this.a,this.b),eo.cross(ca).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Jr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return Jr.getBarycoord(t,this.a,this.b,this.c,n)}getUV(t,n,r,s,o){return qg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),qg=!0),Jr.getInterpolation(t,this.a,this.b,this.c,n,r,s,o)}getInterpolation(t,n,r,s,o){return Jr.getInterpolation(t,this.a,this.b,this.c,n,r,s,o)}containsPoint(t){return Jr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Jr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const r=this.a,s=this.b,o=this.c;let a,l;ju.subVectors(s,r),Yu.subVectors(o,r),p1.subVectors(t,r);const c=ju.dot(p1),u=Yu.dot(p1);if(c<=0&&u<=0)return n.copy(r);m1.subVectors(t,s);const h=ju.dot(m1),f=Yu.dot(m1);if(h>=0&&f<=h)return n.copy(s);const p=c*f-h*u;if(p<=0&&c>=0&&h<=0)return a=c/(c-h),n.copy(r).addScaledVector(ju,a);g1.subVectors(t,o);const g=ju.dot(g1),v=Yu.dot(g1);if(v>=0&&g<=v)return n.copy(o);const _=g*u-c*v;if(_<=0&&u>=0&&v<=0)return l=u/(u-v),n.copy(r).addScaledVector(Yu,l);const x=h*v-g*f;if(x<=0&&f-h>=0&&g-v>=0)return q2.subVectors(o,s),l=(f-h)/(f-h+(g-v)),n.copy(s).addScaledVector(q2,l);const y=1/(x+_+p);return a=_*y,l=p*y,n.copy(r).addScaledVector(ju,a).addScaledVector(Yu,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const I3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qa={h:0,s:0,l:0},$g={h:0,s:0,l:0};function v1(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(t-i)*6*n:n<1/2?t:n<2/3?i+(t-i)*6*(2/3-n):i}class Ke{constructor(t,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,r)}set(t,n,r){if(n===void 0&&r===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,n,r);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=wi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,En.toWorkingColorSpace(this,n),this}setRGB(t,n,r,s=En.workingColorSpace){return this.r=t,this.g=n,this.b=r,En.toWorkingColorSpace(this,s),this}setHSL(t,n,r,s=En.workingColorSpace){if(t=Aw(t,1),n=li(n,0,1),r=li(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=v1(a,o,t+1/3),this.g=v1(a,o,t),this.b=v1(a,o,t-1/3)}return En.toWorkingColorSpace(this,s),this}setStyle(t,n=wi){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const a=s[1],l=s[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=wi){const r=I3[t.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Kh(t.r),this.g=Kh(t.g),this.b=Kh(t.b),this}copyLinearToSRGB(t){return this.r=s1(t.r),this.g=s1(t.g),this.b=s1(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=wi){return En.fromWorkingColorSpace(gr.copy(this),t),Math.round(li(gr.r*255,0,255))*65536+Math.round(li(gr.g*255,0,255))*256+Math.round(li(gr.b*255,0,255))}getHexString(t=wi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=En.workingColorSpace){En.fromWorkingColorSpace(gr.copy(this),n);const r=gr.r,s=gr.g,o=gr.b,a=Math.max(r,s,o),l=Math.min(r,s,o);let c,u;const h=(l+a)/2;if(l===a)c=0,u=0;else{const f=a-l;switch(u=h<=.5?f/(a+l):f/(2-a-l),a){case r:c=(s-o)/f+(s<o?6:0);break;case s:c=(o-r)/f+2;break;case o:c=(r-s)/f+4;break}c/=6}return t.h=c,t.s=u,t.l=h,t}getRGB(t,n=En.workingColorSpace){return En.fromWorkingColorSpace(gr.copy(this),n),t.r=gr.r,t.g=gr.g,t.b=gr.b,t}getStyle(t=wi){En.fromWorkingColorSpace(gr.copy(this),t);const n=gr.r,r=gr.g,s=gr.b;return t!==wi?`color(${t} ${n.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(t,n,r){return this.getHSL(Qa),this.setHSL(Qa.h+t,Qa.s+n,Qa.l+r)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,r){return this.r=t.r+(n.r-t.r)*r,this.g=t.g+(n.g-t.g)*r,this.b=t.b+(n.b-t.b)*r,this}lerpHSL(t,n){this.getHSL(Qa),t.getHSL($g);const r=rp(Qa.h,$g.h,n),s=rp(Qa.s,$g.s,n),o=rp(Qa.l,$g.l,n);return this.setHSL(r,s,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,r=this.g,s=this.b,o=t.elements;return this.r=o[0]*n+o[3]*r+o[6]*s,this.g=o[1]*n+o[4]*r+o[7]*s,this.b=o[2]*n+o[5]*r+o[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const gr=new Ke;Ke.NAMES=I3;let vV=0;class ci extends js{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vV++}),this.uuid=ps(),this.name="",this.type="Material",this.blending=jc,this.side=Xs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ny,this.blendDst=iy,this.blendEquation=dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ke(0,0,0),this.blendAlpha=0,this.depthFunc=Op,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tc,this.stencilZFail=Tc,this.stencilZPass=Tc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const n in t){const r=t[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const s=this[n];if(s===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[n]=r}}toJSON(t){const n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==jc&&(r.blending=this.blending),this.side!==Xs&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==ny&&(r.blendSrc=this.blendSrc),this.blendDst!==iy&&(r.blendDst=this.blendDst),this.blendEquation!==dl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Op&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==gE&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Tc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Tc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Tc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(n){const o=s(t.textures),a=s(t.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let r=null;if(n!==null){const s=n.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Ur extends ci{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ga=yV();function yV(){const i=new ArrayBuffer(4),t=new Float32Array(i),n=new Uint32Array(i),r=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(r[c]=0,r[c|256]=32768,s[c]=24,s[c|256]=24):u<-14?(r[c]=1024>>-u-14,r[c|256]=1024>>-u-14|32768,s[c]=-u-1,s[c|256]=-u-1):u<=15?(r[c]=u+15<<10,r[c|256]=u+15<<10|32768,s[c]=13,s[c|256]=13):u<128?(r[c]=31744,r[c|256]=64512,s[c]=24,s[c|256]=24):(r[c]=31744,r[c|256]=64512,s[c]=13,s[c|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,o[c]=u|h}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:s,mantissaTable:o,exponentTable:a,offsetTable:l}}function Xr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=li(i,-65504,65504),ga.floatView[0]=i;const t=ga.uint32View[0],n=t>>23&511;return ga.baseTable[n]+((t&8388607)>>ga.shiftTable[n])}function Vd(i){const t=i>>10;return ga.uint32View[0]=ga.mantissaTable[ga.offsetTable[t]+(i&1023)]+ga.exponentTable[t],ga.floatView[0]}const zc={toHalfFloat:Xr,fromHalfFloat:Vd},Ei=new Y,ev=new De;class $t{constructor(t,n,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=r,this.usage=Wp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Yi,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,r){t*=this.itemSize,r*=n.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[t+s]=n.array[r+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)ev.fromBufferAttribute(this,n),ev.applyMatrix3(t),this.setXY(n,ev.x,ev.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ei.fromBufferAttribute(this,n),Ei.applyMatrix3(t),this.setXYZ(n,Ei.x,Ei.y,Ei.z);return this}applyMatrix4(t){for(let n=0,r=this.count;n<r;n++)Ei.fromBufferAttribute(this,n),Ei.applyMatrix4(t),this.setXYZ(n,Ei.x,Ei.y,Ei.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)Ei.fromBufferAttribute(this,n),Ei.applyNormalMatrix(t),this.setXYZ(n,Ei.x,Ei.y,Ei.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)Ei.fromBufferAttribute(this,n),Ei.transformDirection(t),this.setXYZ(n,Ei.x,Ei.y,Ei.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let r=this.array[t*this.itemSize+n];return this.normalized&&(r=Kr(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=Zt(r,this.array)),this.array[t*this.itemSize+n]=r,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=Kr(n,this.array)),n}setX(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=Kr(n,this.array)),n}setY(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=Kr(n,this.array)),n}setZ(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=Kr(n,this.array)),n}setW(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array)),this.array[t+0]=n,this.array[t+1]=r,this}setXYZ(t,n,r,s){return t*=this.itemSize,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=s,this}setXYZW(t,n,r,s,o){return t*=this.itemSize,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array),s=Zt(s,this.array),o=Zt(o,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=s,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Wp&&(t.usage=this.usage),t}}class _V extends $t{constructor(t,n,r){super(new Int8Array(t),n,r)}}class xV extends $t{constructor(t,n,r){super(new Uint8Array(t),n,r)}}class SV extends $t{constructor(t,n,r){super(new Uint8ClampedArray(t),n,r)}}class AV extends $t{constructor(t,n,r){super(new Int16Array(t),n,r)}}class Zy extends $t{constructor(t,n,r){super(new Uint16Array(t),n,r)}}class EV extends $t{constructor(t,n,r){super(new Int32Array(t),n,r)}}class ww extends $t{constructor(t,n,r){super(new Uint32Array(t),n,r)}}class MV extends $t{constructor(t,n,r){super(new Uint16Array(t),n,r),this.isFloat16BufferAttribute=!0}getX(t){let n=Vd(this.array[t*this.itemSize]);return this.normalized&&(n=Kr(n,this.array)),n}setX(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize]=Xr(n),this}getY(t){let n=Vd(this.array[t*this.itemSize+1]);return this.normalized&&(n=Kr(n,this.array)),n}setY(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize+1]=Xr(n),this}getZ(t){let n=Vd(this.array[t*this.itemSize+2]);return this.normalized&&(n=Kr(n,this.array)),n}setZ(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize+2]=Xr(n),this}getW(t){let n=Vd(this.array[t*this.itemSize+3]);return this.normalized&&(n=Kr(n,this.array)),n}setW(t,n){return this.normalized&&(n=Zt(n,this.array)),this.array[t*this.itemSize+3]=Xr(n),this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array)),this.array[t+0]=Xr(n),this.array[t+1]=Xr(r),this}setXYZ(t,n,r,s){return t*=this.itemSize,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.array[t+0]=Xr(n),this.array[t+1]=Xr(r),this.array[t+2]=Xr(s),this}setXYZW(t,n,r,s,o){return t*=this.itemSize,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array),s=Zt(s,this.array),o=Zt(o,this.array)),this.array[t+0]=Xr(n),this.array[t+1]=Xr(r),this.array[t+2]=Xr(s),this.array[t+3]=Xr(o),this}}class pt extends $t{constructor(t,n,r){super(new Float32Array(t),n,r)}}class wV extends $t{constructor(t,n,r){super(new Float64Array(t),n,r)}}let TV=0;const Rs=new at,y1=new tn,Ju=new Y,cs=new Qi,pd=new Qi,Wi=new Y;class It extends js{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:TV++}),this.uuid=ps(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(R3(t)?ww:Zy)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,r=0){this.groups.push({start:t,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Yt().getNormalMatrix(t);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Rs.makeRotationFromQuaternion(t),this.applyMatrix4(Rs),this}rotateX(t){return Rs.makeRotationX(t),this.applyMatrix4(Rs),this}rotateY(t){return Rs.makeRotationY(t),this.applyMatrix4(Rs),this}rotateZ(t){return Rs.makeRotationZ(t),this.applyMatrix4(Rs),this}translate(t,n,r){return Rs.makeTranslation(t,n,r),this.applyMatrix4(Rs),this}scale(t,n,r){return Rs.makeScale(t,n,r),this.applyMatrix4(Rs),this}lookAt(t){return y1.lookAt(t),y1.updateMatrix(),this.applyMatrix4(y1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ju).negate(),this.translate(Ju.x,Ju.y,Ju.z),this}setFromPoints(t){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new pt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qi);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let r=0,s=n.length;r<s;r++){const o=n[r];cs.setFromBufferAttribute(o),this.morphTargetsRelative?(Wi.addVectors(this.boundingBox.min,cs.min),this.boundingBox.expandByPoint(Wi),Wi.addVectors(this.boundingBox.max,cs.max),this.boundingBox.expandByPoint(Wi)):(this.boundingBox.expandByPoint(cs.min),this.boundingBox.expandByPoint(cs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oi);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Y,1/0);return}if(t){const r=this.boundingSphere.center;if(cs.setFromBufferAttribute(t),n)for(let o=0,a=n.length;o<a;o++){const l=n[o];pd.setFromBufferAttribute(l),this.morphTargetsRelative?(Wi.addVectors(cs.min,pd.min),cs.expandByPoint(Wi),Wi.addVectors(cs.max,pd.max),cs.expandByPoint(Wi)):(cs.expandByPoint(pd.min),cs.expandByPoint(pd.max))}cs.getCenter(r);let s=0;for(let o=0,a=t.count;o<a;o++)Wi.fromBufferAttribute(t,o),s=Math.max(s,r.distanceToSquared(Wi));if(n)for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this.morphTargetsRelative;for(let u=0,h=l.count;u<h;u++)Wi.fromBufferAttribute(l,u),c&&(Ju.fromBufferAttribute(t,u),Wi.add(Ju)),s=Math.max(s,r.distanceToSquared(Wi))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.array,s=n.position.array,o=n.normal.array,a=n.uv.array,l=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $t(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,u=[],h=[];for(let B=0;B<l;B++)u[B]=new Y,h[B]=new Y;const f=new Y,p=new Y,g=new Y,v=new De,_=new De,x=new De,y=new Y,S=new Y;function A(B,O,N){f.fromArray(s,B*3),p.fromArray(s,O*3),g.fromArray(s,N*3),v.fromArray(a,B*2),_.fromArray(a,O*2),x.fromArray(a,N*2),p.sub(f),g.sub(f),_.sub(v),x.sub(v);const ne=1/(_.x*x.y-x.x*_.y);isFinite(ne)&&(y.copy(p).multiplyScalar(x.y).addScaledVector(g,-_.y).multiplyScalar(ne),S.copy(g).multiplyScalar(_.x).addScaledVector(p,-x.x).multiplyScalar(ne),u[B].add(y),u[O].add(y),u[N].add(y),h[B].add(S),h[O].add(S),h[N].add(S))}let M=this.groups;M.length===0&&(M=[{start:0,count:r.length}]);for(let B=0,O=M.length;B<O;++B){const N=M[B],ne=N.start,z=N.count;for(let j=ne,q=ne+z;j<q;j+=3)A(r[j+0],r[j+1],r[j+2])}const C=new Y,T=new Y,R=new Y,I=new Y;function P(B){R.fromArray(o,B*3),I.copy(R);const O=u[B];C.copy(O),C.sub(R.multiplyScalar(R.dot(O))).normalize(),T.crossVectors(I,O);const ne=T.dot(h[B])<0?-1:1;c[B*4]=C.x,c[B*4+1]=C.y,c[B*4+2]=C.z,c[B*4+3]=ne}for(let B=0,O=M.length;B<O;++B){const N=M[B],ne=N.start,z=N.count;for(let j=ne,q=ne+z;j<q;j+=3)P(r[j+0]),P(r[j+1]),P(r[j+2])}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new $t(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,g=r.count;p<g;p++)r.setXYZ(p,0,0,0);const s=new Y,o=new Y,a=new Y,l=new Y,c=new Y,u=new Y,h=new Y,f=new Y;if(t)for(let p=0,g=t.count;p<g;p+=3){const v=t.getX(p+0),_=t.getX(p+1),x=t.getX(p+2);s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,_),a.fromBufferAttribute(n,x),h.subVectors(a,o),f.subVectors(s,o),h.cross(f),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,_),u.fromBufferAttribute(r,x),l.add(h),c.add(h),u.add(h),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let p=0,g=n.count;p<g;p+=3)s.fromBufferAttribute(n,p+0),o.fromBufferAttribute(n,p+1),a.fromBufferAttribute(n,p+2),h.subVectors(a,o),f.subVectors(s,o),h.cross(f),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,r=t.count;n<r;n++)Wi.fromBufferAttribute(t,n),Wi.normalize(),t.setXYZ(n,Wi.x,Wi.y,Wi.z)}toNonIndexed(){function t(l,c){const u=l.array,h=l.itemSize,f=l.normalized,p=new u.constructor(c.length*h);let g=0,v=0;for(let _=0,x=c.length;_<x;_++){l.isInterleavedBufferAttribute?g=c[_]*l.data.stride+l.offset:g=c[_]*h;for(let y=0;y<h;y++)p[v++]=u[g++]}return new $t(p,h,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new It,r=this.index.array,s=this.attributes;for(const l in s){const c=s[l],u=t(c,r);n.setAttribute(l,u)}const o=this.morphAttributes;for(const l in o){const c=[],u=o[l];for(let h=0,f=u.length;h<f;h++){const p=u[h],g=t(p,r);c.push(g)}n.morphAttributes[l]=c}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(t[u]=c[u]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const c in r){const u=r[c];t.data.attributes[c]=u.toJSON(t.data)}const s={};let o=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],h=[];for(let f=0,p=u.length;f<p;f++){const g=u[f];h.push(g.toJSON(t.data))}h.length>0&&(s[c]=h,o=!0)}o&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const r=t.index;r!==null&&this.setIndex(r.clone(n));const s=t.attributes;for(const u in s){const h=s[u];this.setAttribute(u,h.clone(n))}const o=t.morphAttributes;for(const u in o){const h=[],f=o[u];for(let p=0,g=f.length;p<g;p++)h.push(f[p].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let u=0,h=a.length;u<h;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $2=new at,uc=new Mf,tv=new Oi,eR=new Y,Ku=new Y,Zu=new Y,Qu=new Y,_1=new Y,nv=new Y,iv=new De,rv=new De,sv=new De,tR=new Y,nR=new Y,iR=new Y,ov=new Y,av=new Y;class In extends tn{constructor(t=new It,n=new Ur){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const l=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}getVertexPosition(t,n){const r=this.geometry,s=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(s,t);const l=this.morphTargetInfluences;if(o&&l){nv.set(0,0,0);for(let c=0,u=o.length;c<u;c++){const h=l[c],f=o[c];h!==0&&(_1.fromBufferAttribute(f,t),a?nv.addScaledVector(_1,h):nv.addScaledVector(_1.sub(n),h))}n.add(nv)}return n}raycast(t,n){const r=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),tv.copy(r.boundingSphere),tv.applyMatrix4(o),uc.copy(t.ray).recast(t.near),!(tv.containsPoint(uc.origin)===!1&&(uc.intersectSphere(tv,eR)===null||uc.origin.distanceToSquared(eR)>(t.far-t.near)**2))&&($2.copy(o).invert(),uc.copy(t.ray).applyMatrix4($2),!(r.boundingBox!==null&&uc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(t,n,uc)))}_computeIntersections(t,n,r){let s;const o=this.geometry,a=this.material,l=o.index,c=o.attributes.position,u=o.attributes.uv,h=o.attributes.uv1,f=o.attributes.normal,p=o.groups,g=o.drawRange;if(l!==null)if(Array.isArray(a))for(let v=0,_=p.length;v<_;v++){const x=p[v],y=a[x.materialIndex],S=Math.max(x.start,g.start),A=Math.min(l.count,Math.min(x.start+x.count,g.start+g.count));for(let M=S,C=A;M<C;M+=3){const T=l.getX(M),R=l.getX(M+1),I=l.getX(M+2);s=lv(this,y,t,r,u,h,f,T,R,I),s&&(s.faceIndex=Math.floor(M/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const v=Math.max(0,g.start),_=Math.min(l.count,g.start+g.count);for(let x=v,y=_;x<y;x+=3){const S=l.getX(x),A=l.getX(x+1),M=l.getX(x+2);s=lv(this,a,t,r,u,h,f,S,A,M),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}else if(c!==void 0)if(Array.isArray(a))for(let v=0,_=p.length;v<_;v++){const x=p[v],y=a[x.materialIndex],S=Math.max(x.start,g.start),A=Math.min(c.count,Math.min(x.start+x.count,g.start+g.count));for(let M=S,C=A;M<C;M+=3){const T=M,R=M+1,I=M+2;s=lv(this,y,t,r,u,h,f,T,R,I),s&&(s.faceIndex=Math.floor(M/3),s.face.materialIndex=x.materialIndex,n.push(s))}}else{const v=Math.max(0,g.start),_=Math.min(c.count,g.start+g.count);for(let x=v,y=_;x<y;x+=3){const S=x,A=x+1,M=x+2;s=lv(this,a,t,r,u,h,f,S,A,M),s&&(s.faceIndex=Math.floor(x/3),n.push(s))}}}}function CV(i,t,n,r,s,o,a,l){let c;if(t.side===Ci?c=r.intersectTriangle(a,o,s,!0,l):c=r.intersectTriangle(s,o,a,t.side===Xs,l),c===null)return null;av.copy(l),av.applyMatrix4(i.matrixWorld);const u=n.ray.origin.distanceTo(av);return u<n.near||u>n.far?null:{distance:u,point:av.clone(),object:i}}function lv(i,t,n,r,s,o,a,l,c,u){i.getVertexPosition(l,Ku),i.getVertexPosition(c,Zu),i.getVertexPosition(u,Qu);const h=CV(i,t,n,r,Ku,Zu,Qu,ov);if(h){s&&(iv.fromBufferAttribute(s,l),rv.fromBufferAttribute(s,c),sv.fromBufferAttribute(s,u),h.uv=Jr.getInterpolation(ov,Ku,Zu,Qu,iv,rv,sv,new De)),o&&(iv.fromBufferAttribute(o,l),rv.fromBufferAttribute(o,c),sv.fromBufferAttribute(o,u),h.uv1=Jr.getInterpolation(ov,Ku,Zu,Qu,iv,rv,sv,new De),h.uv2=h.uv1),a&&(tR.fromBufferAttribute(a,l),nR.fromBufferAttribute(a,c),iR.fromBufferAttribute(a,u),h.normal=Jr.getInterpolation(ov,Ku,Zu,Qu,tR,nR,iR,new Y),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const f={a:l,b:c,c:u,normal:new Y,materialIndex:0};Jr.getNormal(Ku,Zu,Qu,f.normal),h.face=f}return h}class mu extends It{constructor(t=1,n=1,r=1,s=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:s,heightSegments:o,depthSegments:a};const l=this;s=Math.floor(s),o=Math.floor(o),a=Math.floor(a);const c=[],u=[],h=[],f=[];let p=0,g=0;v("z","y","x",-1,-1,r,n,t,a,o,0),v("z","y","x",1,-1,r,n,-t,a,o,1),v("x","z","y",1,1,t,r,n,s,a,2),v("x","z","y",1,-1,t,r,-n,s,a,3),v("x","y","z",1,-1,t,n,r,s,o,4),v("x","y","z",-1,-1,t,n,-r,s,o,5),this.setIndex(c),this.setAttribute("position",new pt(u,3)),this.setAttribute("normal",new pt(h,3)),this.setAttribute("uv",new pt(f,2));function v(_,x,y,S,A,M,C,T,R,I,P){const B=M/R,O=C/I,N=M/2,ne=C/2,z=T/2,j=R+1,q=I+1;let he=0,H=0;const X=new Y;for(let K=0;K<q;K++){const k=K*O-ne;for(let Z=0;Z<j;Z++){const Q=Z*B-N;X[_]=Q*S,X[x]=k*A,X[y]=z,u.push(X.x,X.y,X.z),X[_]=0,X[x]=0,X[y]=T>0?1:-1,h.push(X.x,X.y,X.z),f.push(Z/R),f.push(1-K/I),he+=1}}for(let K=0;K<I;K++)for(let k=0;k<R;k++){const Z=p+k+j*K,Q=p+k+j*(K+1),se=p+(k+1)+j*(K+1),le=p+(k+1)+j*K;c.push(Z,Q,le),c.push(Q,se,le),H+=6}l.addGroup(g,H,P),g+=H,p+=he}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mu(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function hf(i){const t={};for(const n in i){t[n]={};for(const r in i[n]){const s=i[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=s.clone():Array.isArray(s)?t[n][r]=s.slice():t[n][r]=s}}return t}function Ir(i){const t={};for(let n=0;n<i.length;n++){const r=hf(i[n]);for(const s in r)t[s]=r[s]}return t}function bV(i){const t=[];for(let n=0;n<i.length;n++)t.push(i[n].clone());return t}function D3(i){return i.getRenderTarget()===null?i.outputColorSpace:En.workingColorSpace}const Tw={clone:hf,merge:Ir};var RV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,PV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ri extends ci{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=RV,this.fragmentShader=PV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=hf(t.uniforms),this.uniformsGroups=bV(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?n.uniforms[s]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?n.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[s]={type:"m4",value:a.toArray()}:n.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class gu extends tn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new at,this.projectionMatrix=new at,this.projectionMatrixInverse=new at,this.coordinateSystem=co}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Jn extends gu{constructor(t=50,n=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=uf*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Yc*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return uf*2*Math.atan(Math.tan(Yc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,n,r,s,o,a){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(Yc*.5*this.fov)/this.zoom,r=2*n,s=this.aspect*r,o=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;o+=a.offsetX*s/c,n-=a.offsetY*r/u,s*=a.width/c,r*=a.height/u}const l=this.filmOffset;l!==0&&(o+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,n,n-r,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const qu=-90,$u=1;class L3 extends tn{constructor(t,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Jn(qu,$u,t,n);s.layers=this.layers,this.add(s);const o=new Jn(qu,$u,t,n);o.layers=this.layers,this.add(o);const a=new Jn(qu,$u,t,n);a.layers=this.layers,this.add(a);const l=new Jn(qu,$u,t,n);l.layers=this.layers,this.add(l);const c=new Jn(qu,$u,t,n);c.layers=this.layers,this.add(c);const u=new Jn(qu,$u,t,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[r,s,o,a,l,c]=n;for(const u of n)this.remove(u);if(t===co)r.up.set(0,1,0),r.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===cf)r.up.set(0,-1,0),r.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const u of n)this.add(u),u.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,a,l,c,u,h]=this.children,f=t.getRenderTarget(),p=t.getActiveCubeFace(),g=t.getActiveMipmapLevel(),v=t.xr.enabled;t.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0,s),t.render(n,o),t.setRenderTarget(r,1,s),t.render(n,a),t.setRenderTarget(r,2,s),t.render(n,l),t.setRenderTarget(r,3,s),t.render(n,c),t.setRenderTarget(r,4,s),t.render(n,u),r.texture.generateMipmaps=_,t.setRenderTarget(r,5,s),t.render(n,h),t.setRenderTarget(f,p,g),t.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class gm extends Sn{constructor(t,n,r,s,o,a,l,c,u,h){t=t!==void 0?t:[],n=n!==void 0?n:Go,super(t,n,r,s,o,a,l,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Cw extends Kn{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},s=[r,r,r,r,r,r];n.encoding!==void 0&&(sp("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===No?wi:hs),this.texture=new gm(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ln}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new mu(5,5,5),o=new Ri({name:"CubemapFromEquirect",uniforms:hf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ci,blending:sr});o.uniforms.tEquirect.value=n;const a=new In(s,o),l=n.minFilter;return n.minFilter===Vo&&(n.minFilter=ln),new L3(1,10,this).update(t,a),n.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,n,r,s){const o=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(n,r,s);t.setRenderTarget(o)}}const x1=new Y,BV=new Y,IV=new Yt;class ma{constructor(t=new Y(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,r,s){return this.normal.set(t,n,r),this.constant=s,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,r){const s=x1.subVectors(r,n).cross(BV.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const r=t.delta(x1),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:n.copy(t.start).addScaledVector(r,o)}intersectsLine(t){const n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const r=n||IV.getNormalMatrix(t),s=this.coplanarPoint(x1).applyMatrix4(t),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const hc=new Oi,cv=new Y;class vm{constructor(t=new ma,n=new ma,r=new ma,s=new ma,o=new ma,a=new ma){this.planes=[t,n,r,s,o,a]}set(t,n,r,s,o,a){const l=this.planes;return l[0].copy(t),l[1].copy(n),l[2].copy(r),l[3].copy(s),l[4].copy(o),l[5].copy(a),this}copy(t){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t,n=co){const r=this.planes,s=t.elements,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],h=s[5],f=s[6],p=s[7],g=s[8],v=s[9],_=s[10],x=s[11],y=s[12],S=s[13],A=s[14],M=s[15];if(r[0].setComponents(c-o,p-u,x-g,M-y).normalize(),r[1].setComponents(c+o,p+u,x+g,M+y).normalize(),r[2].setComponents(c+a,p+h,x+v,M+S).normalize(),r[3].setComponents(c-a,p-h,x-v,M-S).normalize(),r[4].setComponents(c-l,p-f,x-_,M-A).normalize(),n===co)r[5].setComponents(c+l,p+f,x+_,M+A).normalize();else if(n===cf)r[5].setComponents(l,f,_,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),hc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),hc.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(hc)}intersectsSprite(t){return hc.center.set(0,0,0),hc.radius=.7071067811865476,hc.applyMatrix4(t.matrixWorld),this.intersectsSphere(hc)}intersectsSphere(t){const n=this.planes,r=t.center,s=-t.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(t){const n=this.planes;for(let r=0;r<6;r++){const s=n[r];if(cv.x=s.normal.x>0?t.max.x:t.min.x,cv.y=s.normal.y>0?t.max.y:t.min.y,cv.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(cv)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function U3(){let i=null,t=!1,n=null,r=null;function s(o,a){n(o,a),r=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&n!==null&&(r=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){i=o}}}function DV(i,t){const n=t.isWebGL2,r=new WeakMap;function s(u,h){const f=u.array,p=u.usage,g=f.byteLength,v=i.createBuffer();i.bindBuffer(h,v),i.bufferData(h,f,p),u.onUploadCallback();let _;if(f instanceof Float32Array)_=i.FLOAT;else if(f instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)_=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)_=i.SHORT;else if(f instanceof Uint32Array)_=i.UNSIGNED_INT;else if(f instanceof Int32Array)_=i.INT;else if(f instanceof Int8Array)_=i.BYTE;else if(f instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:g}}function o(u,h,f){const p=h.array,g=h._updateRange,v=h.updateRanges;if(i.bindBuffer(f,u),g.count===-1&&v.length===0&&i.bufferSubData(f,0,p),v.length!==0){for(let _=0,x=v.length;_<x;_++){const y=v[_];n?i.bufferSubData(f,y.start*p.BYTES_PER_ELEMENT,p,y.start,y.count):i.bufferSubData(f,y.start*p.BYTES_PER_ELEMENT,p.subarray(y.start,y.start+y.count))}h.clearUpdateRanges()}g.count!==-1&&(n?i.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):i.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1),h.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function l(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h&&(i.deleteBuffer(h.buffer),r.delete(u))}function c(u,h){if(u.isGLBufferAttribute){const p=r.get(u);(!p||p.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);if(f===void 0)r.set(u,s(u,h));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(f.buffer,u,h),f.version=u.version}}return{get:a,remove:l,update:c}}class Vl extends It{constructor(t=1,n=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:r,heightSegments:s};const o=t/2,a=n/2,l=Math.floor(r),c=Math.floor(s),u=l+1,h=c+1,f=t/l,p=n/c,g=[],v=[],_=[],x=[];for(let y=0;y<h;y++){const S=y*p-a;for(let A=0;A<u;A++){const M=A*f-o;v.push(M,-S,0),_.push(0,0,1),x.push(A/l),x.push(1-y/c)}}for(let y=0;y<c;y++)for(let S=0;S<l;S++){const A=S+u*y,M=S+u*(y+1),C=S+1+u*(y+1),T=S+1+u*y;g.push(A,M,T),g.push(M,C,T)}this.setIndex(g),this.setAttribute("position",new pt(v,3)),this.setAttribute("normal",new pt(_,3)),this.setAttribute("uv",new pt(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Vl(t.width,t.height,t.widthSegments,t.heightSegments)}}var LV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,UV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,FV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NV=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,kV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,zV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,GV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,HV=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,VV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,WV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,XV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,YV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,JV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,KV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,ZV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,QV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$V=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,e5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,t5=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,n5=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,i5=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r5=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,s5=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,o5=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,a5=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,l5=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,c5=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,u5="gl_FragColor = linearToOutputTexel( gl_FragColor );",h5=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,f5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,d5=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,p5=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,m5=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,g5=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,v5=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,y5=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_5=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,x5=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,S5=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,A5=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,E5=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,M5=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,w5=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,T5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,C5=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,b5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,R5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,P5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,B5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,I5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,D5=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,L5=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,U5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,F5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,O5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,N5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,k5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,z5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,G5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,H5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,V5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,W5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,X5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,j5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Y5=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,J5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,K5=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Z5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Q5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,q5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,e8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,t8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,n8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,i8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,r8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,s8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,o8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,a8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,l8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,c8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,u8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,h8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,f8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,d8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,p8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,m8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,g8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,v8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,y8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,x8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,S8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,A8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,E8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,M8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,w8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,T8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,C8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,b8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,R8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,P8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,B8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,I8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const D8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,L8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,U8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,F8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,N8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,k8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,z8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,G8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,H8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,V8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,W8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,X8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,j8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Y8=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,J8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K8=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z8=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,q8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,e6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,t6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i6=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,r6=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s6=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a6=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,l6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,c6=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u6=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,h6=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jt={alphahash_fragment:LV,alphahash_pars_fragment:UV,alphamap_fragment:FV,alphamap_pars_fragment:OV,alphatest_fragment:NV,alphatest_pars_fragment:kV,aomap_fragment:zV,aomap_pars_fragment:GV,batching_pars_vertex:HV,batching_vertex:VV,begin_vertex:WV,beginnormal_vertex:XV,bsdfs:jV,iridescence_fragment:YV,bumpmap_pars_fragment:JV,clipping_planes_fragment:KV,clipping_planes_pars_fragment:ZV,clipping_planes_pars_vertex:QV,clipping_planes_vertex:qV,color_fragment:$V,color_pars_fragment:e5,color_pars_vertex:t5,color_vertex:n5,common:i5,cube_uv_reflection_fragment:r5,defaultnormal_vertex:s5,displacementmap_pars_vertex:o5,displacementmap_vertex:a5,emissivemap_fragment:l5,emissivemap_pars_fragment:c5,colorspace_fragment:u5,colorspace_pars_fragment:h5,envmap_fragment:f5,envmap_common_pars_fragment:d5,envmap_pars_fragment:p5,envmap_pars_vertex:m5,envmap_physical_pars_fragment:C5,envmap_vertex:g5,fog_vertex:v5,fog_pars_vertex:y5,fog_fragment:_5,fog_pars_fragment:x5,gradientmap_pars_fragment:S5,lightmap_fragment:A5,lightmap_pars_fragment:E5,lights_lambert_fragment:M5,lights_lambert_pars_fragment:w5,lights_pars_begin:T5,lights_toon_fragment:b5,lights_toon_pars_fragment:R5,lights_phong_fragment:P5,lights_phong_pars_fragment:B5,lights_physical_fragment:I5,lights_physical_pars_fragment:D5,lights_fragment_begin:L5,lights_fragment_maps:U5,lights_fragment_end:F5,logdepthbuf_fragment:O5,logdepthbuf_pars_fragment:N5,logdepthbuf_pars_vertex:k5,logdepthbuf_vertex:z5,map_fragment:G5,map_pars_fragment:H5,map_particle_fragment:V5,map_particle_pars_fragment:W5,metalnessmap_fragment:X5,metalnessmap_pars_fragment:j5,morphcolor_vertex:Y5,morphnormal_vertex:J5,morphtarget_pars_vertex:K5,morphtarget_vertex:Z5,normal_fragment_begin:Q5,normal_fragment_maps:q5,normal_pars_fragment:$5,normal_pars_vertex:e8,normal_vertex:t8,normalmap_pars_fragment:n8,clearcoat_normal_fragment_begin:i8,clearcoat_normal_fragment_maps:r8,clearcoat_pars_fragment:s8,iridescence_pars_fragment:o8,opaque_fragment:a8,packing:l8,premultiplied_alpha_fragment:c8,project_vertex:u8,dithering_fragment:h8,dithering_pars_fragment:f8,roughnessmap_fragment:d8,roughnessmap_pars_fragment:p8,shadowmap_pars_fragment:m8,shadowmap_pars_vertex:g8,shadowmap_vertex:v8,shadowmask_pars_fragment:y8,skinbase_vertex:_8,skinning_pars_vertex:x8,skinning_vertex:S8,skinnormal_vertex:A8,specularmap_fragment:E8,specularmap_pars_fragment:M8,tonemapping_fragment:w8,tonemapping_pars_fragment:T8,transmission_fragment:C8,transmission_pars_fragment:b8,uv_pars_fragment:R8,uv_pars_vertex:P8,uv_vertex:B8,worldpos_vertex:I8,background_vert:D8,background_frag:L8,backgroundCube_vert:U8,backgroundCube_frag:F8,cube_vert:O8,cube_frag:N8,depth_vert:k8,depth_frag:z8,distanceRGBA_vert:G8,distanceRGBA_frag:H8,equirect_vert:V8,equirect_frag:W8,linedashed_vert:X8,linedashed_frag:j8,meshbasic_vert:Y8,meshbasic_frag:J8,meshlambert_vert:K8,meshlambert_frag:Z8,meshmatcap_vert:Q8,meshmatcap_frag:q8,meshnormal_vert:$8,meshnormal_frag:e6,meshphong_vert:t6,meshphong_frag:n6,meshphysical_vert:i6,meshphysical_frag:r6,meshtoon_vert:s6,meshtoon_frag:o6,points_vert:a6,points_frag:l6,shadow_vert:c6,shadow_frag:u6,sprite_vert:h6,sprite_frag:f6},st={common:{diffuse:{value:new Ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yt},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new Ke(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}}},ao={basic:{uniforms:Ir([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.fog]),vertexShader:jt.meshbasic_vert,fragmentShader:jt.meshbasic_frag},lambert:{uniforms:Ir([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new Ke(0)}}]),vertexShader:jt.meshlambert_vert,fragmentShader:jt.meshlambert_frag},phong:{uniforms:Ir([st.common,st.specularmap,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.fog,st.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:jt.meshphong_vert,fragmentShader:jt.meshphong_frag},standard:{uniforms:Ir([st.common,st.envmap,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.roughnessmap,st.metalnessmap,st.fog,st.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag},toon:{uniforms:Ir([st.common,st.aomap,st.lightmap,st.emissivemap,st.bumpmap,st.normalmap,st.displacementmap,st.gradientmap,st.fog,st.lights,{emissive:{value:new Ke(0)}}]),vertexShader:jt.meshtoon_vert,fragmentShader:jt.meshtoon_frag},matcap:{uniforms:Ir([st.common,st.bumpmap,st.normalmap,st.displacementmap,st.fog,{matcap:{value:null}}]),vertexShader:jt.meshmatcap_vert,fragmentShader:jt.meshmatcap_frag},points:{uniforms:Ir([st.points,st.fog]),vertexShader:jt.points_vert,fragmentShader:jt.points_frag},dashed:{uniforms:Ir([st.common,st.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jt.linedashed_vert,fragmentShader:jt.linedashed_frag},depth:{uniforms:Ir([st.common,st.displacementmap]),vertexShader:jt.depth_vert,fragmentShader:jt.depth_frag},normal:{uniforms:Ir([st.common,st.bumpmap,st.normalmap,st.displacementmap,{opacity:{value:1}}]),vertexShader:jt.meshnormal_vert,fragmentShader:jt.meshnormal_frag},sprite:{uniforms:Ir([st.sprite,st.fog]),vertexShader:jt.sprite_vert,fragmentShader:jt.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jt.background_vert,fragmentShader:jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:jt.backgroundCube_vert,fragmentShader:jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jt.cube_vert,fragmentShader:jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jt.equirect_vert,fragmentShader:jt.equirect_frag},distanceRGBA:{uniforms:Ir([st.common,st.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jt.distanceRGBA_vert,fragmentShader:jt.distanceRGBA_frag},shadow:{uniforms:Ir([st.lights,st.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:jt.shadow_vert,fragmentShader:jt.shadow_frag}};ao.physical={uniforms:Ir([ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yt},clearcoatNormalScale:{value:new De(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yt},sheen:{value:0},sheenColor:{value:new Ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yt},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yt},attenuationDistance:{value:0},attenuationColor:{value:new Ke(0)},specularColor:{value:new Ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yt},anisotropyVector:{value:new De},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yt}}]),vertexShader:jt.meshphysical_vert,fragmentShader:jt.meshphysical_frag};const uv={r:0,b:0,g:0};function d6(i,t,n,r,s,o,a){const l=new Ke(0);let c=o===!0?0:1,u,h,f=null,p=0,g=null;function v(x,y){let S=!1,A=y.isScene===!0?y.background:null;A&&A.isTexture&&(A=(y.backgroundBlurriness>0?n:t).get(A)),A===null?_(l,c):A&&A.isColor&&(_(A,1),S=!0);const M=i.xr.getEnvironmentBlendMode();M==="additive"?r.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(i.autoClear||S)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),A&&(A.isCubeTexture||A.mapping===Ef)?(h===void 0&&(h=new In(new mu(1,1,1),new Ri({name:"BackgroundCubeMaterial",uniforms:hf(ao.backgroundCube.uniforms),vertexShader:ao.backgroundCube.vertexShader,fragmentShader:ao.backgroundCube.fragmentShader,side:Ci,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,T,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(h)),h.material.uniforms.envMap.value=A,h.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,h.material.toneMapped=En.getTransfer(A.colorSpace)!==Ln,(f!==A||p!==A.version||g!==i.toneMapping)&&(h.material.needsUpdate=!0,f=A,p=A.version,g=i.toneMapping),h.layers.enableAll(),x.unshift(h,h.geometry,h.material,0,0,null)):A&&A.isTexture&&(u===void 0&&(u=new In(new Vl(2,2),new Ri({name:"BackgroundMaterial",uniforms:hf(ao.background.uniforms),vertexShader:ao.background.vertexShader,fragmentShader:ao.background.fragmentShader,side:Xs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=A,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=En.getTransfer(A.colorSpace)!==Ln,A.matrixAutoUpdate===!0&&A.updateMatrix(),u.material.uniforms.uvTransform.value.copy(A.matrix),(f!==A||p!==A.version||g!==i.toneMapping)&&(u.material.needsUpdate=!0,f=A,p=A.version,g=i.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function _(x,y){x.getRGB(uv,D3(i)),r.buffers.color.setClear(uv.r,uv.g,uv.b,y,a)}return{getClearColor:function(){return l},setClearColor:function(x,y=1){l.set(x),c=y,_(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(x){c=x,_(l,c)},render:v}}function p6(i,t,n,r){const s=i.getParameter(i.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,l={},c=x(null);let u=c,h=!1;function f(z,j,q,he,H){let X=!1;if(a){const K=_(he,q,j);u!==K&&(u=K,g(u.object)),X=y(z,he,q,H),X&&S(z,he,q,H)}else{const K=j.wireframe===!0;(u.geometry!==he.id||u.program!==q.id||u.wireframe!==K)&&(u.geometry=he.id,u.program=q.id,u.wireframe=K,X=!0)}H!==null&&n.update(H,i.ELEMENT_ARRAY_BUFFER),(X||h)&&(h=!1,I(z,j,q,he),H!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.get(H).buffer))}function p(){return r.isWebGL2?i.createVertexArray():o.createVertexArrayOES()}function g(z){return r.isWebGL2?i.bindVertexArray(z):o.bindVertexArrayOES(z)}function v(z){return r.isWebGL2?i.deleteVertexArray(z):o.deleteVertexArrayOES(z)}function _(z,j,q){const he=q.wireframe===!0;let H=l[z.id];H===void 0&&(H={},l[z.id]=H);let X=H[j.id];X===void 0&&(X={},H[j.id]=X);let K=X[he];return K===void 0&&(K=x(p()),X[he]=K),K}function x(z){const j=[],q=[],he=[];for(let H=0;H<s;H++)j[H]=0,q[H]=0,he[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:q,attributeDivisors:he,object:z,attributes:{},index:null}}function y(z,j,q,he){const H=u.attributes,X=j.attributes;let K=0;const k=q.getAttributes();for(const Z in k)if(k[Z].location>=0){const se=H[Z];let le=X[Z];if(le===void 0&&(Z==="instanceMatrix"&&z.instanceMatrix&&(le=z.instanceMatrix),Z==="instanceColor"&&z.instanceColor&&(le=z.instanceColor)),se===void 0||se.attribute!==le||le&&se.data!==le.data)return!0;K++}return u.attributesNum!==K||u.index!==he}function S(z,j,q,he){const H={},X=j.attributes;let K=0;const k=q.getAttributes();for(const Z in k)if(k[Z].location>=0){let se=X[Z];se===void 0&&(Z==="instanceMatrix"&&z.instanceMatrix&&(se=z.instanceMatrix),Z==="instanceColor"&&z.instanceColor&&(se=z.instanceColor));const le={};le.attribute=se,se&&se.data&&(le.data=se.data),H[Z]=le,K++}u.attributes=H,u.attributesNum=K,u.index=he}function A(){const z=u.newAttributes;for(let j=0,q=z.length;j<q;j++)z[j]=0}function M(z){C(z,0)}function C(z,j){const q=u.newAttributes,he=u.enabledAttributes,H=u.attributeDivisors;q[z]=1,he[z]===0&&(i.enableVertexAttribArray(z),he[z]=1),H[z]!==j&&((r.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,j),H[z]=j)}function T(){const z=u.newAttributes,j=u.enabledAttributes;for(let q=0,he=j.length;q<he;q++)j[q]!==z[q]&&(i.disableVertexAttribArray(q),j[q]=0)}function R(z,j,q,he,H,X,K){K===!0?i.vertexAttribIPointer(z,j,q,H,X):i.vertexAttribPointer(z,j,q,he,H,X)}function I(z,j,q,he){if(r.isWebGL2===!1&&(z.isInstancedMesh||he.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;A();const H=he.attributes,X=q.getAttributes(),K=j.defaultAttributeValues;for(const k in X){const Z=X[k];if(Z.location>=0){let Q=H[k];if(Q===void 0&&(k==="instanceMatrix"&&z.instanceMatrix&&(Q=z.instanceMatrix),k==="instanceColor"&&z.instanceColor&&(Q=z.instanceColor)),Q!==void 0){const se=Q.normalized,le=Q.itemSize,fe=n.get(Q);if(fe===void 0)continue;const ue=fe.buffer,Se=fe.type,ke=fe.bytesPerElement,Be=r.isWebGL2===!0&&(Se===i.INT||Se===i.UNSIGNED_INT||Q.gpuType===uw);if(Q.isInterleavedBufferAttribute){const Ae=Q.data,W=Ae.stride,Re=Q.offset;if(Ae.isInstancedInterleavedBuffer){for(let Ee=0;Ee<Z.locationSize;Ee++)C(Z.location+Ee,Ae.meshPerAttribute);z.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let Ee=0;Ee<Z.locationSize;Ee++)M(Z.location+Ee);i.bindBuffer(i.ARRAY_BUFFER,ue);for(let Ee=0;Ee<Z.locationSize;Ee++)R(Z.location+Ee,le/Z.locationSize,Se,se,W*ke,(Re+le/Z.locationSize*Ee)*ke,Be)}else{if(Q.isInstancedBufferAttribute){for(let Ae=0;Ae<Z.locationSize;Ae++)C(Z.location+Ae,Q.meshPerAttribute);z.isInstancedMesh!==!0&&he._maxInstanceCount===void 0&&(he._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let Ae=0;Ae<Z.locationSize;Ae++)M(Z.location+Ae);i.bindBuffer(i.ARRAY_BUFFER,ue);for(let Ae=0;Ae<Z.locationSize;Ae++)R(Z.location+Ae,le/Z.locationSize,Se,se,le*ke,le/Z.locationSize*Ae*ke,Be)}}else if(K!==void 0){const se=K[k];if(se!==void 0)switch(se.length){case 2:i.vertexAttrib2fv(Z.location,se);break;case 3:i.vertexAttrib3fv(Z.location,se);break;case 4:i.vertexAttrib4fv(Z.location,se);break;default:i.vertexAttrib1fv(Z.location,se)}}}}T()}function P(){N();for(const z in l){const j=l[z];for(const q in j){const he=j[q];for(const H in he)v(he[H].object),delete he[H];delete j[q]}delete l[z]}}function B(z){if(l[z.id]===void 0)return;const j=l[z.id];for(const q in j){const he=j[q];for(const H in he)v(he[H].object),delete he[H];delete j[q]}delete l[z.id]}function O(z){for(const j in l){const q=l[j];if(q[z.id]===void 0)continue;const he=q[z.id];for(const H in he)v(he[H].object),delete he[H];delete q[z.id]}}function N(){ne(),h=!0,u!==c&&(u=c,g(u.object))}function ne(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:f,reset:N,resetDefaultState:ne,dispose:P,releaseStatesOfGeometry:B,releaseStatesOfProgram:O,initAttributes:A,enableAttribute:M,disableUnusedAttributes:T}}function m6(i,t,n,r){const s=r.isWebGL2;let o;function a(h){o=h}function l(h,f){i.drawArrays(o,h,f),n.update(f,o,1)}function c(h,f,p){if(p===0)return;let g,v;if(s)g=i,v="drawArraysInstanced";else if(g=t.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](o,h,f,p),n.update(f,o,p)}function u(h,f,p){if(p===0)return;const g=t.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<p;v++)this.render(h[v],f[v]);else{g.multiDrawArraysWEBGL(o,h,0,f,0,p);let v=0;for(let _=0;_<p;_++)v+=f[_];n.update(v,o,1)}}this.setMode=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u}function g6(i,t,n){let r;function s(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){const R=t.get("EXT_texture_filter_anisotropic");r=i.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(R){if(R==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let l=n.precision!==void 0?n.precision:"highp";const c=o(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const u=a||t.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,f=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=i.getParameter(i.MAX_TEXTURE_SIZE),v=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),_=i.getParameter(i.MAX_VERTEX_ATTRIBS),x=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),y=i.getParameter(i.MAX_VARYING_VECTORS),S=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),A=p>0,M=a||t.has("OES_texture_float"),C=A&&M,T=a?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:s,getMaxPrecision:o,precision:l,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:x,maxVaryings:y,maxFragmentUniforms:S,vertexTextures:A,floatFragmentTextures:M,floatVertexTextures:C,maxSamples:T}}function v6(i){const t=this;let n=null,r=0,s=!1,o=!1;const a=new ma,l=new Yt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const g=f.length!==0||p||r!==0||s;return s=p,r=f.length,g},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,p){n=h(f,p,0)},this.setState=function(f,p,g){const v=f.clippingPlanes,_=f.clipIntersection,x=f.clipShadows,y=i.get(f);if(!s||v===null||v.length===0||o&&!x)o?h(null):u();else{const S=o?0:r,A=S*4;let M=y.clippingState||null;c.value=M,M=h(v,p,A,g);for(let C=0;C!==A;++C)M[C]=n[C];y.clippingState=M,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function u(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function h(f,p,g,v){const _=f!==null?f.length:0;let x=null;if(_!==0){if(x=c.value,v!==!0||x===null){const y=g+_*4,S=p.matrixWorldInverse;l.getNormalMatrix(S),(x===null||x.length<y)&&(x=new Float32Array(y));for(let A=0,M=g;A!==_;++A,M+=4)a.copy(f[A]).applyMatrix4(S,l),a.normal.toArray(x,M),x[M+3]=a.constant}c.value=x,c.needsUpdate=!0}return t.numPlanes=_,t.numIntersection=0,x}}function y6(i){let t=new WeakMap;function n(a,l){return l===ru?a.mapping=Go:l===Np&&(a.mapping=Il),a}function r(a){if(a&&a.isTexture){const l=a.mapping;if(l===ru||l===Np)if(t.has(a)){const c=t.get(a).texture;return n(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new Cw(c.height/2);return u.fromEquirectangularTexture(i,a),t.set(a,u),a.addEventListener("dispose",s),n(u.texture,a.mapping)}else return null}}return a}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function o(){t=new WeakMap}return{get:r,dispose:o}}class Ua extends gu{constructor(t=-1,n=1,r=1,s=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=r,this.bottom=s,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,r,s,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-t,a=r+t,l=s+n,c=s-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,a=o+u*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(o,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Ih=4,rR=[.125,.215,.35,.446,.526,.582],Ic=20,S1=new Ua,sR=new Ke;let A1=null,E1=0,M1=0;const Cc=(1+Math.sqrt(5))/2,eh=1/Cc,oR=[new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,Cc,eh),new Y(0,Cc,-eh),new Y(eh,0,Cc),new Y(-eh,0,Cc),new Y(Cc,eh,0),new Y(-Cc,eh,0)];class _E{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,r=.1,s=100){A1=this._renderer.getRenderTarget(),E1=this._renderer.getActiveCubeFace(),M1=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,r,s,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=cR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=lR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(A1,E1,M1),t.scissorTest=!1,hv(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===Go||t.mapping===Il?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),A1=this._renderer.getRenderTarget(),E1=this._renderer.getActiveCubeFace(),M1=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ln,minFilter:ln,generateMipmaps:!1,type:Ji,format:xr,colorSpace:Wo,depthBuffer:!1},s=aR(t,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aR(t,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_6(o)),this._blurMaterial=x6(o,t,n)}return s}_compileMaterial(t){const n=new In(this._lodPlanes[0],t);this._renderer.compile(n,S1)}_sceneToCubeUV(t,n,r,s){const l=new Jn(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(sR),h.toneMapping=Oo,h.autoClear=!1;const g=new Ur({name:"PMREM.Background",side:Ci,depthWrite:!1,depthTest:!1}),v=new In(new mu,g);let _=!1;const x=t.background;x?x.isColor&&(g.color.copy(x),t.background=null,_=!0):(g.color.copy(sR),_=!0);for(let y=0;y<6;y++){const S=y%3;S===0?(l.up.set(0,c[y],0),l.lookAt(u[y],0,0)):S===1?(l.up.set(0,0,c[y]),l.lookAt(0,u[y],0)):(l.up.set(0,c[y],0),l.lookAt(0,0,u[y]));const A=this._cubeSize;hv(s,S*A,y>2?A:0,A,A),h.setRenderTarget(s),_&&h.render(v,l),h.render(t,l)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=p,h.autoClear=f,t.background=x}_textureToCubeUV(t,n){const r=this._renderer,s=t.mapping===Go||t.mapping===Il;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=cR()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=lR());const o=s?this._cubemapMaterial:this._equirectMaterial,a=new In(this._lodPlanes[0],o),l=o.uniforms;l.envMap.value=t;const c=this._cubeSize;hv(n,0,0,3*c,2*c),r.setRenderTarget(n),r.render(a,S1)}_applyPMREM(t){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=oR[(s-1)%oR.length];this._blur(t,s-1,s,o,a)}n.autoClear=r}_blur(t,n,r,s,o){const a=this._pingPongRenderTarget;this._halfBlur(t,a,n,r,s,"latitudinal",o),this._halfBlur(a,t,r,r,s,"longitudinal",o)}_halfBlur(t,n,r,s,o,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,f=new In(this._lodPlanes[s],u),p=u.uniforms,g=this._sizeLods[r]-1,v=isFinite(o)?Math.PI/(2*g):2*Math.PI/(2*Ic-1),_=o/v,x=isFinite(o)?1+Math.floor(h*_):Ic;x>Ic&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Ic}`);const y=[];let S=0;for(let R=0;R<Ic;++R){const I=R/_,P=Math.exp(-I*I/2);y.push(P),R===0?S+=P:R<x&&(S+=2*P)}for(let R=0;R<y.length;R++)y[R]=y[R]/S;p.envMap.value=t.texture,p.samples.value=x,p.weights.value=y,p.latitudinal.value=a==="latitudinal",l&&(p.poleAxis.value=l);const{_lodMax:A}=this;p.dTheta.value=v,p.mipInt.value=A-r;const M=this._sizeLods[s],C=3*M*(s>A-Ih?s-A+Ih:0),T=4*(this._cubeSize-M);hv(n,C,T,3*M,2*M),c.setRenderTarget(n),c.render(f,S1)}}function _6(i){const t=[],n=[],r=[];let s=i;const o=i-Ih+1+rR.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);n.push(l);let c=1/l;a>i-Ih?c=rR[a-i+Ih-1]:a===0&&(c=0),r.push(c);const u=1/(l-2),h=-u,f=1+u,p=[h,h,f,h,f,f,h,h,f,f,h,f],g=6,v=6,_=3,x=2,y=1,S=new Float32Array(_*v*g),A=new Float32Array(x*v*g),M=new Float32Array(y*v*g);for(let T=0;T<g;T++){const R=T%3*2/3-1,I=T>2?0:-1,P=[R,I,0,R+2/3,I,0,R+2/3,I+1,0,R,I,0,R+2/3,I+1,0,R,I+1,0];S.set(P,_*v*T),A.set(p,x*v*T);const B=[T,T,T,T,T,T];M.set(B,y*v*T)}const C=new It;C.setAttribute("position",new $t(S,_)),C.setAttribute("uv",new $t(A,x)),C.setAttribute("faceIndex",new $t(M,y)),t.push(C),s>Ih&&s--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function aR(i,t,n){const r=new Kn(i,t,n);return r.texture.mapping=Ef,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function hv(i,t,n,r,s){i.viewport.set(t,n,r,s),i.scissor.set(t,n,r,s)}function x6(i,t,n){const r=new Float32Array(Ic),s=new Y(0,1,0);return new Ri({name:"SphericalGaussianBlur",defines:{n:Ic,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:bw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sr,depthTest:!1,depthWrite:!1})}function lR(){return new Ri({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sr,depthTest:!1,depthWrite:!1})}function cR(){return new Ri({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sr,depthTest:!1,depthWrite:!1})}function bw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function S6(i){let t=new WeakMap,n=null;function r(l){if(l&&l.isTexture){const c=l.mapping,u=c===ru||c===Np,h=c===Go||c===Il;if(u||h)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let f=t.get(l);return n===null&&(n=new _E(i)),f=u?n.fromEquirectangular(l,f):n.fromCubemap(l,f),t.set(l,f),f.texture}else{if(t.has(l))return t.get(l).texture;{const f=l.image;if(u&&f&&f.height>0||h&&f&&s(f)){n===null&&(n=new _E(i));const p=u?n.fromEquirectangular(l):n.fromCubemap(l);return t.set(l,p),l.addEventListener("dispose",o),p.texture}else return null}}}return l}function s(l){let c=0;const u=6;for(let h=0;h<u;h++)l[h]!==void 0&&c++;return c===u}function o(l){const c=l.target;c.removeEventListener("dispose",o);const u=t.get(c);u!==void 0&&(t.delete(c),u.dispose())}function a(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function A6(i){const t={};function n(r){if(t[r]!==void 0)return t[r];let s;switch(r){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(r)}return t[r]=s,s}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const s=n(r);return s===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function E6(i,t,n,r){const s={},o=new WeakMap;function a(f){const p=f.target;p.index!==null&&t.remove(p.index);for(const v in p.attributes)t.remove(p.attributes[v]);for(const v in p.morphAttributes){const _=p.morphAttributes[v];for(let x=0,y=_.length;x<y;x++)t.remove(_[x])}p.removeEventListener("dispose",a),delete s[p.id];const g=o.get(p);g&&(t.remove(g),o.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function l(f,p){return s[p.id]===!0||(p.addEventListener("dispose",a),s[p.id]=!0,n.memory.geometries++),p}function c(f){const p=f.attributes;for(const v in p)t.update(p[v],i.ARRAY_BUFFER);const g=f.morphAttributes;for(const v in g){const _=g[v];for(let x=0,y=_.length;x<y;x++)t.update(_[x],i.ARRAY_BUFFER)}}function u(f){const p=[],g=f.index,v=f.attributes.position;let _=0;if(g!==null){const S=g.array;_=g.version;for(let A=0,M=S.length;A<M;A+=3){const C=S[A+0],T=S[A+1],R=S[A+2];p.push(C,T,T,R,R,C)}}else if(v!==void 0){const S=v.array;_=v.version;for(let A=0,M=S.length/3-1;A<M;A+=3){const C=A+0,T=A+1,R=A+2;p.push(C,T,T,R,R,C)}}else return;const x=new(R3(p)?ww:Zy)(p,1);x.version=_;const y=o.get(f);y&&t.remove(y),o.set(f,x)}function h(f){const p=o.get(f);if(p){const g=f.index;g!==null&&p.version<g.version&&u(f)}else u(f);return o.get(f)}return{get:l,update:c,getWireframeAttribute:h}}function M6(i,t,n,r){const s=r.isWebGL2;let o;function a(g){o=g}let l,c;function u(g){l=g.type,c=g.bytesPerElement}function h(g,v){i.drawElements(o,v,l,g*c),n.update(v,o,1)}function f(g,v,_){if(_===0)return;let x,y;if(s)x=i,y="drawElementsInstanced";else if(x=t.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[y](o,v,l,g*c,_),n.update(v,o,_)}function p(g,v,_){if(_===0)return;const x=t.get("WEBGL_multi_draw");if(x===null)for(let y=0;y<_;y++)this.render(g[y]/c,v[y]);else{x.multiDrawElementsWEBGL(o,v,0,l,g,0,_);let y=0;for(let S=0;S<_;S++)y+=v[S];n.update(y,o,1)}}this.setMode=a,this.setIndex=u,this.render=h,this.renderInstances=f,this.renderMultiDraw=p}function w6(i){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,l){switch(n.calls++,a){case i.TRIANGLES:n.triangles+=l*(o/3);break;case i.LINES:n.lines+=l*(o/2);break;case i.LINE_STRIP:n.lines+=l*(o-1);break;case i.LINE_LOOP:n.lines+=l*o;break;case i.POINTS:n.points+=l*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:s,update:r}}function T6(i,t){return i[0]-t[0]}function C6(i,t){return Math.abs(t[1])-Math.abs(i[1])}function b6(i,t,n){const r={},s=new Float32Array(8),o=new WeakMap,a=new qt,l=[];for(let u=0;u<8;u++)l[u]=[u,0];function c(u,h,f){const p=u.morphTargetInfluences;if(t.isWebGL2===!0){const v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,_=v!==void 0?v.length:0;let x=o.get(h);if(x===void 0||x.count!==_){let j=function(){ne.dispose(),o.delete(h),h.removeEventListener("dispose",j)};var g=j;x!==void 0&&x.texture.dispose();const A=h.morphAttributes.position!==void 0,M=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,T=h.morphAttributes.position||[],R=h.morphAttributes.normal||[],I=h.morphAttributes.color||[];let P=0;A===!0&&(P=1),M===!0&&(P=2),C===!0&&(P=3);let B=h.attributes.position.count*P,O=1;B>t.maxTextureSize&&(O=Math.ceil(B/t.maxTextureSize),B=t.maxTextureSize);const N=new Float32Array(B*O*4*_),ne=new Ky(N,B,O,_);ne.type=Yi,ne.needsUpdate=!0;const z=P*4;for(let q=0;q<_;q++){const he=T[q],H=R[q],X=I[q],K=B*O*4*q;for(let k=0;k<he.count;k++){const Z=k*z;A===!0&&(a.fromBufferAttribute(he,k),N[K+Z+0]=a.x,N[K+Z+1]=a.y,N[K+Z+2]=a.z,N[K+Z+3]=0),M===!0&&(a.fromBufferAttribute(H,k),N[K+Z+4]=a.x,N[K+Z+5]=a.y,N[K+Z+6]=a.z,N[K+Z+7]=0),C===!0&&(a.fromBufferAttribute(X,k),N[K+Z+8]=a.x,N[K+Z+9]=a.y,N[K+Z+10]=a.z,N[K+Z+11]=X.itemSize===4?a.w:1)}}x={count:_,texture:ne,size:new De(B,O)},o.set(h,x),h.addEventListener("dispose",j)}let y=0;for(let A=0;A<p.length;A++)y+=p[A];const S=h.morphTargetsRelative?1:1-y;f.getUniforms().setValue(i,"morphTargetBaseInfluence",S),f.getUniforms().setValue(i,"morphTargetInfluences",p),f.getUniforms().setValue(i,"morphTargetsTexture",x.texture,n),f.getUniforms().setValue(i,"morphTargetsTextureSize",x.size)}else{const v=p===void 0?0:p.length;let _=r[h.id];if(_===void 0||_.length!==v){_=[];for(let M=0;M<v;M++)_[M]=[M,0];r[h.id]=_}for(let M=0;M<v;M++){const C=_[M];C[0]=M,C[1]=p[M]}_.sort(C6);for(let M=0;M<8;M++)M<v&&_[M][1]?(l[M][0]=_[M][0],l[M][1]=_[M][1]):(l[M][0]=Number.MAX_SAFE_INTEGER,l[M][1]=0);l.sort(T6);const x=h.morphAttributes.position,y=h.morphAttributes.normal;let S=0;for(let M=0;M<8;M++){const C=l[M],T=C[0],R=C[1];T!==Number.MAX_SAFE_INTEGER&&R?(x&&h.getAttribute("morphTarget"+M)!==x[T]&&h.setAttribute("morphTarget"+M,x[T]),y&&h.getAttribute("morphNormal"+M)!==y[T]&&h.setAttribute("morphNormal"+M,y[T]),s[M]=R,S+=R):(x&&h.hasAttribute("morphTarget"+M)===!0&&h.deleteAttribute("morphTarget"+M),y&&h.hasAttribute("morphNormal"+M)===!0&&h.deleteAttribute("morphNormal"+M),s[M]=0)}const A=h.morphTargetsRelative?1:1-S;f.getUniforms().setValue(i,"morphTargetBaseInfluence",A),f.getUniforms().setValue(i,"morphTargetInfluences",s)}}return{update:c}}function R6(i,t,n,r){let s=new WeakMap;function o(c){const u=r.render.frame,h=c.geometry,f=t.get(c,h);if(s.get(f)!==u&&(t.update(f),s.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),s.get(c)!==u&&(n.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&n.update(c.instanceColor,i.ARRAY_BUFFER),s.set(c,u))),c.isSkinnedMesh){const p=c.skeleton;s.get(p)!==u&&(p.update(),s.set(p,u))}return f}function a(){s=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:o,dispose:a}}class ym extends Sn{constructor(t,n,r,s,o,a,l,c,u,h){if(h=h!==void 0?h:Ea,h!==Ea&&h!==Dl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Ea&&(r=Do),r===void 0&&h===Dl&&(r=Aa),super(null,s,o,a,l,c,h,r,u),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=l!==void 0?l:Un,this.minFilter=c!==void 0?c:Un,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const F3=new Sn,O3=new ym(1,1);O3.compareFunction=Sw;const N3=new Ky,k3=new Mw,z3=new gm,uR=[],hR=[],fR=new Float32Array(16),dR=new Float32Array(9),pR=new Float32Array(4);function wf(i,t,n){const r=i[0];if(r<=0||r>0)return i;const s=t*n;let o=uR[s];if(o===void 0&&(o=new Float32Array(s),uR[s]=o),t!==0){r.toArray(o,0);for(let a=1,l=0;a!==t;++a)l+=n,i[a].toArray(o,l)}return o}function Ni(i,t){if(i.length!==t.length)return!1;for(let n=0,r=i.length;n<r;n++)if(i[n]!==t[n])return!1;return!0}function ki(i,t){for(let n=0,r=t.length;n<r;n++)i[n]=t[n]}function Qy(i,t){let n=hR[t];n===void 0&&(n=new Int32Array(t),hR[t]=n);for(let r=0;r!==t;++r)n[r]=i.allocateTextureUnit();return n}function P6(i,t){const n=this.cache;n[0]!==t&&(i.uniform1f(this.addr,t),n[0]=t)}function B6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ni(n,t))return;i.uniform2fv(this.addr,t),ki(n,t)}}function I6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ni(n,t))return;i.uniform3fv(this.addr,t),ki(n,t)}}function D6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ni(n,t))return;i.uniform4fv(this.addr,t),ki(n,t)}}function L6(i,t){const n=this.cache,r=t.elements;if(r===void 0){if(Ni(n,t))return;i.uniformMatrix2fv(this.addr,!1,t),ki(n,t)}else{if(Ni(n,r))return;pR.set(r),i.uniformMatrix2fv(this.addr,!1,pR),ki(n,r)}}function U6(i,t){const n=this.cache,r=t.elements;if(r===void 0){if(Ni(n,t))return;i.uniformMatrix3fv(this.addr,!1,t),ki(n,t)}else{if(Ni(n,r))return;dR.set(r),i.uniformMatrix3fv(this.addr,!1,dR),ki(n,r)}}function F6(i,t){const n=this.cache,r=t.elements;if(r===void 0){if(Ni(n,t))return;i.uniformMatrix4fv(this.addr,!1,t),ki(n,t)}else{if(Ni(n,r))return;fR.set(r),i.uniformMatrix4fv(this.addr,!1,fR),ki(n,r)}}function O6(i,t){const n=this.cache;n[0]!==t&&(i.uniform1i(this.addr,t),n[0]=t)}function N6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ni(n,t))return;i.uniform2iv(this.addr,t),ki(n,t)}}function k6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ni(n,t))return;i.uniform3iv(this.addr,t),ki(n,t)}}function z6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ni(n,t))return;i.uniform4iv(this.addr,t),ki(n,t)}}function G6(i,t){const n=this.cache;n[0]!==t&&(i.uniform1ui(this.addr,t),n[0]=t)}function H6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ni(n,t))return;i.uniform2uiv(this.addr,t),ki(n,t)}}function V6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ni(n,t))return;i.uniform3uiv(this.addr,t),ki(n,t)}}function W6(i,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ni(n,t))return;i.uniform4uiv(this.addr,t),ki(n,t)}}function X6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s);const o=this.type===i.SAMPLER_2D_SHADOW?O3:F3;n.setTexture2D(t||o,s)}function j6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(t||k3,s)}function Y6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(t||z3,s)}function J6(i,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(i.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(t||N3,s)}function K6(i){switch(i){case 5126:return P6;case 35664:return B6;case 35665:return I6;case 35666:return D6;case 35674:return L6;case 35675:return U6;case 35676:return F6;case 5124:case 35670:return O6;case 35667:case 35671:return N6;case 35668:case 35672:return k6;case 35669:case 35673:return z6;case 5125:return G6;case 36294:return H6;case 36295:return V6;case 36296:return W6;case 35678:case 36198:case 36298:case 36306:case 35682:return X6;case 35679:case 36299:case 36307:return j6;case 35680:case 36300:case 36308:case 36293:return Y6;case 36289:case 36303:case 36311:case 36292:return J6}}function Z6(i,t){i.uniform1fv(this.addr,t)}function Q6(i,t){const n=wf(t,this.size,2);i.uniform2fv(this.addr,n)}function q6(i,t){const n=wf(t,this.size,3);i.uniform3fv(this.addr,n)}function $6(i,t){const n=wf(t,this.size,4);i.uniform4fv(this.addr,n)}function e9(i,t){const n=wf(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function t9(i,t){const n=wf(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function n9(i,t){const n=wf(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function i9(i,t){i.uniform1iv(this.addr,t)}function r9(i,t){i.uniform2iv(this.addr,t)}function s9(i,t){i.uniform3iv(this.addr,t)}function o9(i,t){i.uniform4iv(this.addr,t)}function a9(i,t){i.uniform1uiv(this.addr,t)}function l9(i,t){i.uniform2uiv(this.addr,t)}function c9(i,t){i.uniform3uiv(this.addr,t)}function u9(i,t){i.uniform4uiv(this.addr,t)}function h9(i,t,n){const r=this.cache,s=t.length,o=Qy(n,s);Ni(r,o)||(i.uniform1iv(this.addr,o),ki(r,o));for(let a=0;a!==s;++a)n.setTexture2D(t[a]||F3,o[a])}function f9(i,t,n){const r=this.cache,s=t.length,o=Qy(n,s);Ni(r,o)||(i.uniform1iv(this.addr,o),ki(r,o));for(let a=0;a!==s;++a)n.setTexture3D(t[a]||k3,o[a])}function d9(i,t,n){const r=this.cache,s=t.length,o=Qy(n,s);Ni(r,o)||(i.uniform1iv(this.addr,o),ki(r,o));for(let a=0;a!==s;++a)n.setTextureCube(t[a]||z3,o[a])}function p9(i,t,n){const r=this.cache,s=t.length,o=Qy(n,s);Ni(r,o)||(i.uniform1iv(this.addr,o),ki(r,o));for(let a=0;a!==s;++a)n.setTexture2DArray(t[a]||N3,o[a])}function m9(i){switch(i){case 5126:return Z6;case 35664:return Q6;case 35665:return q6;case 35666:return $6;case 35674:return e9;case 35675:return t9;case 35676:return n9;case 5124:case 35670:return i9;case 35667:case 35671:return r9;case 35668:case 35672:return s9;case 35669:case 35673:return o9;case 5125:return a9;case 36294:return l9;case 36295:return c9;case 36296:return u9;case 35678:case 36198:case 36298:case 36306:case 35682:return h9;case 35679:case 36299:case 36307:return f9;case 35680:case 36300:case 36308:case 36293:return d9;case 36289:case 36303:case 36311:case 36292:return p9}}class g9{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=K6(n.type)}}class v9{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=m9(n.type)}}class y9{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,r){const s=this.seq;for(let o=0,a=s.length;o!==a;++o){const l=s[o];l.setValue(t,n[l.id],r)}}}const w1=/(\w+)(\])?(\[|\.)?/g;function mR(i,t){i.seq.push(t),i.map[t.id]=t}function _9(i,t,n){const r=i.name,s=r.length;for(w1.lastIndex=0;;){const o=w1.exec(r),a=w1.lastIndex;let l=o[1];const c=o[2]==="]",u=o[3];if(c&&(l=l|0),u===void 0||u==="["&&a+2===s){mR(n,u===void 0?new g9(l,i,t):new v9(l,i,t));break}else{let f=n.map[l];f===void 0&&(f=new y9(l),mR(n,f)),n=f}}}class S0{constructor(t,n){this.seq=[],this.map={};const r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const o=t.getActiveUniform(n,s),a=t.getUniformLocation(n,o.name);_9(o,a,this)}}setValue(t,n,r,s){const o=this.map[n];o!==void 0&&o.setValue(t,r,s)}setOptional(t,n,r){const s=n[r];s!==void 0&&this.setValue(t,r,s)}static upload(t,n,r,s){for(let o=0,a=n.length;o!==a;++o){const l=n[o],c=r[l.id];c.needsUpdate!==!1&&l.setValue(t,c.value,s)}}static seqWithValue(t,n){const r=[];for(let s=0,o=t.length;s!==o;++s){const a=t[s];a.id in n&&r.push(a)}return r}}function gR(i,t,n){const r=i.createShader(t);return i.shaderSource(r,n),i.compileShader(r),r}const x9=37297;let S9=0;function A9(i,t){const n=i.split(`
`),r=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=s;a<o;a++){const l=a+1;r.push(`${l===t?">":" "} ${l}: ${n[a]}`)}return r.join(`
`)}function E9(i){const t=En.getPrimaries(En.workingColorSpace),n=En.getPrimaries(i);let r;switch(t===n?r="":t===Vp&&n===Hp?r="LinearDisplayP3ToLinearSRGB":t===Hp&&n===Vp&&(r="LinearSRGBToLinearDisplayP3"),i){case Wo:case mm:return[r,"LinearTransferOETF"];case wi:case Jy:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[r,"LinearTransferOETF"]}}function vR(i,t,n){const r=i.getShaderParameter(t,i.COMPILE_STATUS),s=i.getShaderInfoLog(t).trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+s+`

`+A9(i.getShaderSource(t),a)}else return s}function M9(i,t){const n=E9(t);return`vec4 ${i}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function w9(i,t){let n;switch(t){case r3:n="Linear";break;case s3:n="Reinhard";break;case o3:n="OptimizedCineon";break;case cw:n="ACESFilmic";break;case l3:n="AgX";break;case a3:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function T9(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Dh).join(`
`)}function C9(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Dh).join(`
`)}function b9(i){const t=[];for(const n in i){const r=i[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function R9(i,t){const n={},r=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const o=i.getActiveAttrib(t,s),a=o.name;let l=1;o.type===i.FLOAT_MAT2&&(l=2),o.type===i.FLOAT_MAT3&&(l=3),o.type===i.FLOAT_MAT4&&(l=4),n[a]={type:o.type,location:i.getAttribLocation(t,a),locationSize:l}}return n}function Dh(i){return i!==""}function yR(i,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function _R(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const P9=/^[ \t]*#include +<([\w\d./]+)>/gm;function xE(i){return i.replace(P9,I9)}const B9=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function I9(i,t){let n=jt[t];if(n===void 0){const r=B9.get(t);if(r!==void 0)n=jt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r);else throw new Error("Can not resolve #include <"+t+">")}return xE(n)}const D9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xR(i){return i.replace(D9,L9)}function L9(i,t,n,r){let s="";for(let o=parseInt(t);o<parseInt(n);o++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function SR(i){let t="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function U9(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Wy?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===ip?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ro&&(t="SHADOWMAP_TYPE_VSM"),t}function F9(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Go:case Il:t="ENVMAP_TYPE_CUBE";break;case Ef:t="ENVMAP_TYPE_CUBE_UV";break}return t}function O9(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Il:t="ENVMAP_MODE_REFRACTION";break}return t}function N9(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case fm:t="ENVMAP_BLENDING_MULTIPLY";break;case n3:t="ENVMAP_BLENDING_MIX";break;case i3:t="ENVMAP_BLENDING_ADD";break}return t}function k9(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function z9(i,t,n,r){const s=i.getContext(),o=n.defines;let a=n.vertexShader,l=n.fragmentShader;const c=U9(n),u=F9(n),h=O9(n),f=N9(n),p=k9(n),g=n.isWebGL2?"":T9(n),v=C9(n),_=b9(o),x=s.createProgram();let y,S,A=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter(Dh).join(`
`),y.length>0&&(y+=`
`),S=[g,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_].filter(Dh).join(`
`),S.length>0&&(S+=`
`)):(y=[SR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Dh).join(`
`),S=[g,SR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Oo?"#define TONE_MAPPING":"",n.toneMapping!==Oo?jt.tonemapping_pars_fragment:"",n.toneMapping!==Oo?w9("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",jt.colorspace_pars_fragment,M9("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Dh).join(`
`)),a=xE(a),a=yR(a,n),a=_R(a,n),l=xE(l),l=yR(l,n),l=_R(l,n),a=xR(a),l=xR(l),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,y=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,S=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===vE?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===vE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const M=A+y+a,C=A+S+l,T=gR(s,s.VERTEX_SHADER,M),R=gR(s,s.FRAGMENT_SHADER,C);s.attachShader(x,T),s.attachShader(x,R),n.index0AttributeName!==void 0?s.bindAttribLocation(x,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);function I(N){if(i.debug.checkShaderErrors){const ne=s.getProgramInfoLog(x).trim(),z=s.getShaderInfoLog(T).trim(),j=s.getShaderInfoLog(R).trim();let q=!0,he=!0;if(s.getProgramParameter(x,s.LINK_STATUS)===!1)if(q=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,x,T,R);else{const H=vR(s,T,"vertex"),X=vR(s,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,s.VALIDATE_STATUS)+`

Program Info Log: `+ne+`
`+H+`
`+X)}else ne!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ne):(z===""||j==="")&&(he=!1);he&&(N.diagnostics={runnable:q,programLog:ne,vertexShader:{log:z,prefix:y},fragmentShader:{log:j,prefix:S}})}s.deleteShader(T),s.deleteShader(R),P=new S0(s,x),B=R9(s,x)}let P;this.getUniforms=function(){return P===void 0&&I(this),P};let B;this.getAttributes=function(){return B===void 0&&I(this),B};let O=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(x,x9)),O},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=S9++,this.cacheKey=t,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=R,this}let G9=0;class H9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,r=t.fragmentShader,s=this._getShaderStage(n),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(t);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let r=n.get(t);return r===void 0&&(r=new Set,n.set(t,r)),r}_getShaderStage(t){const n=this.shaderCache;let r=n.get(t);return r===void 0&&(r=new V9(t),n.set(t,r)),r}}class V9{constructor(t){this.id=G9++,this.code=t,this.usedTimes=0}}function W9(i,t,n,r,s,o,a){const l=new Jc,c=new H9,u=[],h=s.isWebGL2,f=s.logarithmicDepthBuffer,p=s.vertexTextures;let g=s.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(P){return P===0?"uv":`uv${P}`}function x(P,B,O,N,ne){const z=N.fog,j=ne.geometry,q=P.isMeshStandardMaterial?N.environment:null,he=(P.isMeshStandardMaterial?n:t).get(P.envMap||q),H=he&&he.mapping===Ef?he.image.height:null,X=v[P.type];P.precision!==null&&(g=s.getMaxPrecision(P.precision),g!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",g,"instead."));const K=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,k=K!==void 0?K.length:0;let Z=0;j.morphAttributes.position!==void 0&&(Z=1),j.morphAttributes.normal!==void 0&&(Z=2),j.morphAttributes.color!==void 0&&(Z=3);let Q,se,le,fe;if(X){const Wt=ao[X];Q=Wt.vertexShader,se=Wt.fragmentShader}else Q=P.vertexShader,se=P.fragmentShader,c.update(P),le=c.getVertexShaderID(P),fe=c.getFragmentShaderID(P);const ue=i.getRenderTarget(),Se=ne.isInstancedMesh===!0,ke=ne.isBatchedMesh===!0,Be=!!P.map,Ae=!!P.matcap,W=!!he,Re=!!P.aoMap,Ee=!!P.lightMap,Ce=!!P.bumpMap,_e=!!P.normalMap,Ye=!!P.displacementMap,we=!!P.emissiveMap,G=!!P.metalnessMap,F=!!P.roughnessMap,te=P.anisotropy>0,xe=P.clearcoat>0,ge=P.iridescence>0,ye=P.sheen>0,Fe=P.transmission>0,Ve=te&&!!P.anisotropyMap,He=xe&&!!P.clearcoatMap,je=xe&&!!P.clearcoatNormalMap,tt=xe&&!!P.clearcoatRoughnessMap,Oe=ge&&!!P.iridescenceMap,yt=ge&&!!P.iridescenceThicknessMap,Qe=ye&&!!P.sheenColorMap,it=ye&&!!P.sheenRoughnessMap,Ge=!!P.specularMap,ze=!!P.specularColorMap,Ze=!!P.specularIntensityMap,ht=Fe&&!!P.transmissionMap,_t=Fe&&!!P.thicknessMap,rt=!!P.gradientMap,ve=!!P.alphaMap,ae=P.alphaTest>0,$e=!!P.alphaHash,et=!!P.extensions,St=!!j.attributes.uv1,mt=!!j.attributes.uv2,kt=!!j.attributes.uv3;let Tt=Oo;return P.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(Tt=i.toneMapping),{isWebGL2:h,shaderID:X,shaderType:P.type,shaderName:P.name,vertexShader:Q,fragmentShader:se,defines:P.defines,customVertexShaderID:le,customFragmentShaderID:fe,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:g,batching:ke,instancing:Se,instancingColor:Se&&ne.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:ue===null?i.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:Wo,map:Be,matcap:Ae,envMap:W,envMapMode:W&&he.mapping,envMapCubeUVHeight:H,aoMap:Re,lightMap:Ee,bumpMap:Ce,normalMap:_e,displacementMap:p&&Ye,emissiveMap:we,normalMapObjectSpace:_e&&P.normalMapType===S3,normalMapTangentSpace:_e&&P.normalMapType===Hl,metalnessMap:G,roughnessMap:F,anisotropy:te,anisotropyMap:Ve,clearcoat:xe,clearcoatMap:He,clearcoatNormalMap:je,clearcoatRoughnessMap:tt,iridescence:ge,iridescenceMap:Oe,iridescenceThicknessMap:yt,sheen:ye,sheenColorMap:Qe,sheenRoughnessMap:it,specularMap:Ge,specularColorMap:ze,specularIntensityMap:Ze,transmission:Fe,transmissionMap:ht,thicknessMap:_t,gradientMap:rt,opaque:P.transparent===!1&&P.blending===jc,alphaMap:ve,alphaTest:ae,alphaHash:$e,combine:P.combine,mapUv:Be&&_(P.map.channel),aoMapUv:Re&&_(P.aoMap.channel),lightMapUv:Ee&&_(P.lightMap.channel),bumpMapUv:Ce&&_(P.bumpMap.channel),normalMapUv:_e&&_(P.normalMap.channel),displacementMapUv:Ye&&_(P.displacementMap.channel),emissiveMapUv:we&&_(P.emissiveMap.channel),metalnessMapUv:G&&_(P.metalnessMap.channel),roughnessMapUv:F&&_(P.roughnessMap.channel),anisotropyMapUv:Ve&&_(P.anisotropyMap.channel),clearcoatMapUv:He&&_(P.clearcoatMap.channel),clearcoatNormalMapUv:je&&_(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:tt&&_(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Oe&&_(P.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&_(P.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&_(P.sheenColorMap.channel),sheenRoughnessMapUv:it&&_(P.sheenRoughnessMap.channel),specularMapUv:Ge&&_(P.specularMap.channel),specularColorMapUv:ze&&_(P.specularColorMap.channel),specularIntensityMapUv:Ze&&_(P.specularIntensityMap.channel),transmissionMapUv:ht&&_(P.transmissionMap.channel),thicknessMapUv:_t&&_(P.thicknessMap.channel),alphaMapUv:ve&&_(P.alphaMap.channel),vertexTangents:!!j.attributes.tangent&&(_e||te),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,vertexUv1s:St,vertexUv2s:mt,vertexUv3s:kt,pointsUvs:ne.isPoints===!0&&!!j.attributes.uv&&(Be||ve),fog:!!z,useFog:P.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:ne.isSkinnedMesh===!0,morphTargets:j.morphAttributes.position!==void 0,morphNormals:j.morphAttributes.normal!==void 0,morphColors:j.morphAttributes.color!==void 0,morphTargetsCount:k,morphTextureStride:Z,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numLightProbes:B.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:P.dithering,shadowMapEnabled:i.shadowMap.enabled&&O.length>0,shadowMapType:i.shadowMap.type,toneMapping:Tt,useLegacyLights:i._useLegacyLights,decodeVideoTexture:Be&&P.map.isVideoTexture===!0&&En.getTransfer(P.map.colorSpace)===Ln,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Li,flipSided:P.side===Ci,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:et&&P.extensions.derivatives===!0,extensionFragDepth:et&&P.extensions.fragDepth===!0,extensionDrawBuffers:et&&P.extensions.drawBuffers===!0,extensionShaderTextureLOD:et&&P.extensions.shaderTextureLOD===!0,extensionClipCullDistance:et&&P.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()}}function y(P){const B=[];if(P.shaderID?B.push(P.shaderID):(B.push(P.customVertexShaderID),B.push(P.customFragmentShaderID)),P.defines!==void 0)for(const O in P.defines)B.push(O),B.push(P.defines[O]);return P.isRawShaderMaterial===!1&&(S(B,P),A(B,P),B.push(i.outputColorSpace)),B.push(P.customProgramCacheKey),B.join()}function S(P,B){P.push(B.precision),P.push(B.outputColorSpace),P.push(B.envMapMode),P.push(B.envMapCubeUVHeight),P.push(B.mapUv),P.push(B.alphaMapUv),P.push(B.lightMapUv),P.push(B.aoMapUv),P.push(B.bumpMapUv),P.push(B.normalMapUv),P.push(B.displacementMapUv),P.push(B.emissiveMapUv),P.push(B.metalnessMapUv),P.push(B.roughnessMapUv),P.push(B.anisotropyMapUv),P.push(B.clearcoatMapUv),P.push(B.clearcoatNormalMapUv),P.push(B.clearcoatRoughnessMapUv),P.push(B.iridescenceMapUv),P.push(B.iridescenceThicknessMapUv),P.push(B.sheenColorMapUv),P.push(B.sheenRoughnessMapUv),P.push(B.specularMapUv),P.push(B.specularColorMapUv),P.push(B.specularIntensityMapUv),P.push(B.transmissionMapUv),P.push(B.thicknessMapUv),P.push(B.combine),P.push(B.fogExp2),P.push(B.sizeAttenuation),P.push(B.morphTargetsCount),P.push(B.morphAttributeCount),P.push(B.numDirLights),P.push(B.numPointLights),P.push(B.numSpotLights),P.push(B.numSpotLightMaps),P.push(B.numHemiLights),P.push(B.numRectAreaLights),P.push(B.numDirLightShadows),P.push(B.numPointLightShadows),P.push(B.numSpotLightShadows),P.push(B.numSpotLightShadowsWithMaps),P.push(B.numLightProbes),P.push(B.shadowMapType),P.push(B.toneMapping),P.push(B.numClippingPlanes),P.push(B.numClipIntersection),P.push(B.depthPacking)}function A(P,B){l.disableAll(),B.isWebGL2&&l.enable(0),B.supportsVertexTextures&&l.enable(1),B.instancing&&l.enable(2),B.instancingColor&&l.enable(3),B.matcap&&l.enable(4),B.envMap&&l.enable(5),B.normalMapObjectSpace&&l.enable(6),B.normalMapTangentSpace&&l.enable(7),B.clearcoat&&l.enable(8),B.iridescence&&l.enable(9),B.alphaTest&&l.enable(10),B.vertexColors&&l.enable(11),B.vertexAlphas&&l.enable(12),B.vertexUv1s&&l.enable(13),B.vertexUv2s&&l.enable(14),B.vertexUv3s&&l.enable(15),B.vertexTangents&&l.enable(16),B.anisotropy&&l.enable(17),B.alphaHash&&l.enable(18),B.batching&&l.enable(19),P.push(l.mask),l.disableAll(),B.fog&&l.enable(0),B.useFog&&l.enable(1),B.flatShading&&l.enable(2),B.logarithmicDepthBuffer&&l.enable(3),B.skinning&&l.enable(4),B.morphTargets&&l.enable(5),B.morphNormals&&l.enable(6),B.morphColors&&l.enable(7),B.premultipliedAlpha&&l.enable(8),B.shadowMapEnabled&&l.enable(9),B.useLegacyLights&&l.enable(10),B.doubleSided&&l.enable(11),B.flipSided&&l.enable(12),B.useDepthPacking&&l.enable(13),B.dithering&&l.enable(14),B.transmission&&l.enable(15),B.sheen&&l.enable(16),B.opaque&&l.enable(17),B.pointsUvs&&l.enable(18),B.decodeVideoTexture&&l.enable(19),P.push(l.mask)}function M(P){const B=v[P.type];let O;if(B){const N=ao[B];O=Tw.clone(N.uniforms)}else O=P.uniforms;return O}function C(P,B){let O;for(let N=0,ne=u.length;N<ne;N++){const z=u[N];if(z.cacheKey===B){O=z,++O.usedTimes;break}}return O===void 0&&(O=new z9(i,B,P,o),u.push(O)),O}function T(P){if(--P.usedTimes===0){const B=u.indexOf(P);u[B]=u[u.length-1],u.pop(),P.destroy()}}function R(P){c.remove(P)}function I(){c.dispose()}return{getParameters:x,getProgramCacheKey:y,getUniforms:M,acquireProgram:C,releaseProgram:T,releaseShaderCache:R,programs:u,dispose:I}}function X9(){let i=new WeakMap;function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,l){i.get(o)[a]=l}function s(){i=new WeakMap}return{get:t,remove:n,update:r,dispose:s}}function j9(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function AR(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function ER(){const i=[];let t=0;const n=[],r=[],s=[];function o(){t=0,n.length=0,r.length=0,s.length=0}function a(f,p,g,v,_,x){let y=i[t];return y===void 0?(y={id:f.id,object:f,geometry:p,material:g,groupOrder:v,renderOrder:f.renderOrder,z:_,group:x},i[t]=y):(y.id=f.id,y.object=f,y.geometry=p,y.material=g,y.groupOrder=v,y.renderOrder=f.renderOrder,y.z=_,y.group=x),t++,y}function l(f,p,g,v,_,x){const y=a(f,p,g,v,_,x);g.transmission>0?r.push(y):g.transparent===!0?s.push(y):n.push(y)}function c(f,p,g,v,_,x){const y=a(f,p,g,v,_,x);g.transmission>0?r.unshift(y):g.transparent===!0?s.unshift(y):n.unshift(y)}function u(f,p){n.length>1&&n.sort(f||j9),r.length>1&&r.sort(p||AR),s.length>1&&s.sort(p||AR)}function h(){for(let f=t,p=i.length;f<p;f++){const g=i[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:n,transmissive:r,transparent:s,init:o,push:l,unshift:c,finish:h,sort:u}}function Y9(){let i=new WeakMap;function t(r,s){const o=i.get(r);let a;return o===void 0?(a=new ER,i.set(r,[a])):s>=o.length?(a=new ER,o.push(a)):a=o[s],a}function n(){i=new WeakMap}return{get:t,dispose:n}}function J9(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Y,color:new Ke};break;case"SpotLight":n={position:new Y,direction:new Y,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Y,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Y,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":n={color:new Ke,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return i[t.id]=n,n}}}function K9(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=n,n}}}let Z9=0;function Q9(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function q9(i,t){const n=new J9,r=K9(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)s.probe.push(new Y);const o=new Y,a=new at,l=new at;function c(h,f){let p=0,g=0,v=0;for(let N=0;N<9;N++)s.probe[N].set(0,0,0);let _=0,x=0,y=0,S=0,A=0,M=0,C=0,T=0,R=0,I=0,P=0;h.sort(Q9);const B=f===!0?Math.PI:1;for(let N=0,ne=h.length;N<ne;N++){const z=h[N],j=z.color,q=z.intensity,he=z.distance,H=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=j.r*q*B,g+=j.g*q*B,v+=j.b*q*B;else if(z.isLightProbe){for(let X=0;X<9;X++)s.probe[X].addScaledVector(z.sh.coefficients[X],q);P++}else if(z.isDirectionalLight){const X=n.get(z);if(X.color.copy(z.color).multiplyScalar(z.intensity*B),z.castShadow){const K=z.shadow,k=r.get(z);k.shadowBias=K.bias,k.shadowNormalBias=K.normalBias,k.shadowRadius=K.radius,k.shadowMapSize=K.mapSize,s.directionalShadow[_]=k,s.directionalShadowMap[_]=H,s.directionalShadowMatrix[_]=z.shadow.matrix,M++}s.directional[_]=X,_++}else if(z.isSpotLight){const X=n.get(z);X.position.setFromMatrixPosition(z.matrixWorld),X.color.copy(j).multiplyScalar(q*B),X.distance=he,X.coneCos=Math.cos(z.angle),X.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),X.decay=z.decay,s.spot[y]=X;const K=z.shadow;if(z.map&&(s.spotLightMap[R]=z.map,R++,K.updateMatrices(z),z.castShadow&&I++),s.spotLightMatrix[y]=K.matrix,z.castShadow){const k=r.get(z);k.shadowBias=K.bias,k.shadowNormalBias=K.normalBias,k.shadowRadius=K.radius,k.shadowMapSize=K.mapSize,s.spotShadow[y]=k,s.spotShadowMap[y]=H,T++}y++}else if(z.isRectAreaLight){const X=n.get(z);X.color.copy(j).multiplyScalar(q),X.halfWidth.set(z.width*.5,0,0),X.halfHeight.set(0,z.height*.5,0),s.rectArea[S]=X,S++}else if(z.isPointLight){const X=n.get(z);if(X.color.copy(z.color).multiplyScalar(z.intensity*B),X.distance=z.distance,X.decay=z.decay,z.castShadow){const K=z.shadow,k=r.get(z);k.shadowBias=K.bias,k.shadowNormalBias=K.normalBias,k.shadowRadius=K.radius,k.shadowMapSize=K.mapSize,k.shadowCameraNear=K.camera.near,k.shadowCameraFar=K.camera.far,s.pointShadow[x]=k,s.pointShadowMap[x]=H,s.pointShadowMatrix[x]=z.shadow.matrix,C++}s.point[x]=X,x++}else if(z.isHemisphereLight){const X=n.get(z);X.skyColor.copy(z.color).multiplyScalar(q*B),X.groundColor.copy(z.groundColor).multiplyScalar(q*B),s.hemi[A]=X,A++}}S>0&&(t.isWebGL2?i.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=st.LTC_FLOAT_1,s.rectAreaLTC2=st.LTC_FLOAT_2):(s.rectAreaLTC1=st.LTC_HALF_1,s.rectAreaLTC2=st.LTC_HALF_2):i.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=st.LTC_FLOAT_1,s.rectAreaLTC2=st.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=st.LTC_HALF_1,s.rectAreaLTC2=st.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=p,s.ambient[1]=g,s.ambient[2]=v;const O=s.hash;(O.directionalLength!==_||O.pointLength!==x||O.spotLength!==y||O.rectAreaLength!==S||O.hemiLength!==A||O.numDirectionalShadows!==M||O.numPointShadows!==C||O.numSpotShadows!==T||O.numSpotMaps!==R||O.numLightProbes!==P)&&(s.directional.length=_,s.spot.length=y,s.rectArea.length=S,s.point.length=x,s.hemi.length=A,s.directionalShadow.length=M,s.directionalShadowMap.length=M,s.pointShadow.length=C,s.pointShadowMap.length=C,s.spotShadow.length=T,s.spotShadowMap.length=T,s.directionalShadowMatrix.length=M,s.pointShadowMatrix.length=C,s.spotLightMatrix.length=T+R-I,s.spotLightMap.length=R,s.numSpotLightShadowsWithMaps=I,s.numLightProbes=P,O.directionalLength=_,O.pointLength=x,O.spotLength=y,O.rectAreaLength=S,O.hemiLength=A,O.numDirectionalShadows=M,O.numPointShadows=C,O.numSpotShadows=T,O.numSpotMaps=R,O.numLightProbes=P,s.version=Z9++)}function u(h,f){let p=0,g=0,v=0,_=0,x=0;const y=f.matrixWorldInverse;for(let S=0,A=h.length;S<A;S++){const M=h[S];if(M.isDirectionalLight){const C=s.directional[p];C.direction.setFromMatrixPosition(M.matrixWorld),o.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(y),p++}else if(M.isSpotLight){const C=s.spot[v];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(y),C.direction.setFromMatrixPosition(M.matrixWorld),o.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(y),v++}else if(M.isRectAreaLight){const C=s.rectArea[_];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(y),l.identity(),a.copy(M.matrixWorld),a.premultiply(y),l.extractRotation(a),C.halfWidth.set(M.width*.5,0,0),C.halfHeight.set(0,M.height*.5,0),C.halfWidth.applyMatrix4(l),C.halfHeight.applyMatrix4(l),_++}else if(M.isPointLight){const C=s.point[g];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(y),g++}else if(M.isHemisphereLight){const C=s.hemi[x];C.direction.setFromMatrixPosition(M.matrixWorld),C.direction.transformDirection(y),x++}}}return{setup:c,setupView:u,state:s}}function MR(i,t){const n=new q9(i,t),r=[],s=[];function o(){r.length=0,s.length=0}function a(f){r.push(f)}function l(f){s.push(f)}function c(f){n.setup(r,f)}function u(f){n.setupView(r,f)}return{init:o,state:{lightsArray:r,shadowsArray:s,lights:n},setupLights:c,setupLightsView:u,pushLight:a,pushShadow:l}}function $9(i,t){let n=new WeakMap;function r(o,a=0){const l=n.get(o);let c;return l===void 0?(c=new MR(i,t),n.set(o,[c])):a>=l.length?(c=new MR(i,t),l.push(c)):c=l[a],c}function s(){n=new WeakMap}return{get:r,dispose:s}}class qy extends ci{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Gl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class $y extends ci{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const eW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nW(i,t,n){let r=new vm;const s=new De,o=new De,a=new qt,l=new qy({depthPacking:xw}),c=new $y,u={},h=n.maxTextureSize,f={[Xs]:Ci,[Ci]:Xs,[Li]:Li},p=new Ri({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:eW,fragmentShader:tW}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new It;v.setAttribute("position",new $t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new In(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Wy;let y=this.type;this.render=function(T,R,I){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||T.length===0)return;const P=i.getRenderTarget(),B=i.getActiveCubeFace(),O=i.getActiveMipmapLevel(),N=i.state;N.setBlending(sr),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const ne=y!==ro&&this.type===ro,z=y===ro&&this.type!==ro;for(let j=0,q=T.length;j<q;j++){const he=T[j],H=he.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",he,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;s.copy(H.mapSize);const X=H.getFrameExtents();if(s.multiply(X),o.copy(H.mapSize),(s.x>h||s.y>h)&&(s.x>h&&(o.x=Math.floor(h/X.x),s.x=o.x*X.x,H.mapSize.x=o.x),s.y>h&&(o.y=Math.floor(h/X.y),s.y=o.y*X.y,H.mapSize.y=o.y)),H.map===null||ne===!0||z===!0){const k=this.type!==ro?{minFilter:Un,magFilter:Un}:{};H.map!==null&&H.map.dispose(),H.map=new Kn(s.x,s.y,k),H.map.texture.name=he.name+".shadowMap",H.camera.updateProjectionMatrix()}i.setRenderTarget(H.map),i.clear();const K=H.getViewportCount();for(let k=0;k<K;k++){const Z=H.getViewport(k);a.set(o.x*Z.x,o.y*Z.y,o.x*Z.z,o.y*Z.w),N.viewport(a),H.updateMatrices(he,k),r=H.getFrustum(),M(R,I,H.camera,he,this.type)}H.isPointLightShadow!==!0&&this.type===ro&&S(H,I),H.needsUpdate=!1}y=this.type,x.needsUpdate=!1,i.setRenderTarget(P,B,O)};function S(T,R){const I=t.update(_);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Kn(s.x,s.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,i.setRenderTarget(T.mapPass),i.clear(),i.renderBufferDirect(R,null,I,p,_,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,i.setRenderTarget(T.map),i.clear(),i.renderBufferDirect(R,null,I,g,_,null)}function A(T,R,I,P){let B=null;const O=I.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(O!==void 0)B=O;else if(B=I.isPointLight===!0?c:l,i.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const N=B.uuid,ne=R.uuid;let z=u[N];z===void 0&&(z={},u[N]=z);let j=z[ne];j===void 0&&(j=B.clone(),z[ne]=j,R.addEventListener("dispose",C)),B=j}if(B.visible=R.visible,B.wireframe=R.wireframe,P===ro?B.side=R.shadowSide!==null?R.shadowSide:R.side:B.side=R.shadowSide!==null?R.shadowSide:f[R.side],B.alphaMap=R.alphaMap,B.alphaTest=R.alphaTest,B.map=R.map,B.clipShadows=R.clipShadows,B.clippingPlanes=R.clippingPlanes,B.clipIntersection=R.clipIntersection,B.displacementMap=R.displacementMap,B.displacementScale=R.displacementScale,B.displacementBias=R.displacementBias,B.wireframeLinewidth=R.wireframeLinewidth,B.linewidth=R.linewidth,I.isPointLight===!0&&B.isMeshDistanceMaterial===!0){const N=i.properties.get(B);N.light=I}return B}function M(T,R,I,P,B){if(T.visible===!1)return;if(T.layers.test(R.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&B===ro)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,T.matrixWorld);const ne=t.update(T),z=T.material;if(Array.isArray(z)){const j=ne.groups;for(let q=0,he=j.length;q<he;q++){const H=j[q],X=z[H.materialIndex];if(X&&X.visible){const K=A(T,X,P,B);T.onBeforeShadow(i,T,R,I,ne,K,H),i.renderBufferDirect(I,null,ne,K,T,H),T.onAfterShadow(i,T,R,I,ne,K,H)}}}else if(z.visible){const j=A(T,z,P,B);T.onBeforeShadow(i,T,R,I,ne,j,null),i.renderBufferDirect(I,null,ne,j,T,null),T.onAfterShadow(i,T,R,I,ne,j,null)}}const N=T.children;for(let ne=0,z=N.length;ne<z;ne++)M(N[ne],R,I,P,B)}function C(T){T.target.removeEventListener("dispose",C);for(const I in u){const P=u[I],B=T.target.uuid;B in P&&(P[B].dispose(),delete P[B])}}}function iW(i,t,n){const r=n.isWebGL2;function s(){let ae=!1;const $e=new qt;let et=null;const St=new qt(0,0,0,0);return{setMask:function(mt){et!==mt&&!ae&&(i.colorMask(mt,mt,mt,mt),et=mt)},setLocked:function(mt){ae=mt},setClear:function(mt,kt,Tt,An,Wt){Wt===!0&&(mt*=An,kt*=An,Tt*=An),$e.set(mt,kt,Tt,An),St.equals($e)===!1&&(i.clearColor(mt,kt,Tt,An),St.copy($e))},reset:function(){ae=!1,et=null,St.set(-1,0,0,0)}}}function o(){let ae=!1,$e=null,et=null,St=null;return{setTest:function(mt){mt?ke(i.DEPTH_TEST):Be(i.DEPTH_TEST)},setMask:function(mt){$e!==mt&&!ae&&(i.depthMask(mt),$e=mt)},setFunc:function(mt){if(et!==mt){switch(mt){case KU:i.depthFunc(i.NEVER);break;case ZU:i.depthFunc(i.ALWAYS);break;case QU:i.depthFunc(i.LESS);break;case Op:i.depthFunc(i.LEQUAL);break;case qU:i.depthFunc(i.EQUAL);break;case $U:i.depthFunc(i.GEQUAL);break;case e3:i.depthFunc(i.GREATER);break;case t3:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}et=mt}},setLocked:function(mt){ae=mt},setClear:function(mt){St!==mt&&(i.clearDepth(mt),St=mt)},reset:function(){ae=!1,$e=null,et=null,St=null}}}function a(){let ae=!1,$e=null,et=null,St=null,mt=null,kt=null,Tt=null,An=null,Wt=null;return{setTest:function(Ct){ae||(Ct?ke(i.STENCIL_TEST):Be(i.STENCIL_TEST))},setMask:function(Ct){$e!==Ct&&!ae&&(i.stencilMask(Ct),$e=Ct)},setFunc:function(Ct,vn,wn){(et!==Ct||St!==vn||mt!==wn)&&(i.stencilFunc(Ct,vn,wn),et=Ct,St=vn,mt=wn)},setOp:function(Ct,vn,wn){(kt!==Ct||Tt!==vn||An!==wn)&&(i.stencilOp(Ct,vn,wn),kt=Ct,Tt=vn,An=wn)},setLocked:function(Ct){ae=Ct},setClear:function(Ct){Wt!==Ct&&(i.clearStencil(Ct),Wt=Ct)},reset:function(){ae=!1,$e=null,et=null,St=null,mt=null,kt=null,Tt=null,An=null,Wt=null}}}const l=new s,c=new o,u=new a,h=new WeakMap,f=new WeakMap;let p={},g={},v=new WeakMap,_=[],x=null,y=!1,S=null,A=null,M=null,C=null,T=null,R=null,I=null,P=new Ke(0,0,0),B=0,O=!1,N=null,ne=null,z=null,j=null,q=null;const he=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,X=0;const K=i.getParameter(i.VERSION);K.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(K)[1]),H=X>=1):K.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),H=X>=2);let k=null,Z={};const Q=i.getParameter(i.SCISSOR_BOX),se=i.getParameter(i.VIEWPORT),le=new qt().fromArray(Q),fe=new qt().fromArray(se);function ue(ae,$e,et,St){const mt=new Uint8Array(4),kt=i.createTexture();i.bindTexture(ae,kt),i.texParameteri(ae,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ae,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Tt=0;Tt<et;Tt++)r&&(ae===i.TEXTURE_3D||ae===i.TEXTURE_2D_ARRAY)?i.texImage3D($e,0,i.RGBA,1,1,St,0,i.RGBA,i.UNSIGNED_BYTE,mt):i.texImage2D($e+Tt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,mt);return kt}const Se={};Se[i.TEXTURE_2D]=ue(i.TEXTURE_2D,i.TEXTURE_2D,1),Se[i.TEXTURE_CUBE_MAP]=ue(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Se[i.TEXTURE_2D_ARRAY]=ue(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Se[i.TEXTURE_3D]=ue(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),c.setClear(1),u.setClear(0),ke(i.DEPTH_TEST),c.setFunc(Op),we(!1),G(NA),ke(i.CULL_FACE),_e(sr);function ke(ae){p[ae]!==!0&&(i.enable(ae),p[ae]=!0)}function Be(ae){p[ae]!==!1&&(i.disable(ae),p[ae]=!1)}function Ae(ae,$e){return g[ae]!==$e?(i.bindFramebuffer(ae,$e),g[ae]=$e,r&&(ae===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=$e),ae===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=$e)),!0):!1}function W(ae,$e){let et=_,St=!1;if(ae)if(et=v.get($e),et===void 0&&(et=[],v.set($e,et)),ae.isWebGLMultipleRenderTargets){const mt=ae.texture;if(et.length!==mt.length||et[0]!==i.COLOR_ATTACHMENT0){for(let kt=0,Tt=mt.length;kt<Tt;kt++)et[kt]=i.COLOR_ATTACHMENT0+kt;et.length=mt.length,St=!0}}else et[0]!==i.COLOR_ATTACHMENT0&&(et[0]=i.COLOR_ATTACHMENT0,St=!0);else et[0]!==i.BACK&&(et[0]=i.BACK,St=!0);St&&(n.isWebGL2?i.drawBuffers(et):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(et))}function Re(ae){return x!==ae?(i.useProgram(ae),x=ae,!0):!1}const Ee={[dl]:i.FUNC_ADD,[LU]:i.FUNC_SUBTRACT,[UU]:i.FUNC_REVERSE_SUBTRACT};if(r)Ee[HA]=i.MIN,Ee[VA]=i.MAX;else{const ae=t.get("EXT_blend_minmax");ae!==null&&(Ee[HA]=ae.MIN_EXT,Ee[VA]=ae.MAX_EXT)}const Ce={[FU]:i.ZERO,[OU]:i.ONE,[NU]:i.SRC_COLOR,[ny]:i.SRC_ALPHA,[WU]:i.SRC_ALPHA_SATURATE,[HU]:i.DST_COLOR,[zU]:i.DST_ALPHA,[kU]:i.ONE_MINUS_SRC_COLOR,[iy]:i.ONE_MINUS_SRC_ALPHA,[VU]:i.ONE_MINUS_DST_COLOR,[GU]:i.ONE_MINUS_DST_ALPHA,[XU]:i.CONSTANT_COLOR,[jU]:i.ONE_MINUS_CONSTANT_COLOR,[YU]:i.CONSTANT_ALPHA,[JU]:i.ONE_MINUS_CONSTANT_ALPHA};function _e(ae,$e,et,St,mt,kt,Tt,An,Wt,Ct){if(ae===sr){y===!0&&(Be(i.BLEND),y=!1);return}if(y===!1&&(ke(i.BLEND),y=!0),ae!==DU){if(ae!==S||Ct!==O){if((A!==dl||T!==dl)&&(i.blendEquation(i.FUNC_ADD),A=dl,T=dl),Ct)switch(ae){case jc:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case kA:i.blendFunc(i.ONE,i.ONE);break;case zA:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case GA:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case jc:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case kA:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case zA:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case GA:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}M=null,C=null,R=null,I=null,P.set(0,0,0),B=0,S=ae,O=Ct}return}mt=mt||$e,kt=kt||et,Tt=Tt||St,($e!==A||mt!==T)&&(i.blendEquationSeparate(Ee[$e],Ee[mt]),A=$e,T=mt),(et!==M||St!==C||kt!==R||Tt!==I)&&(i.blendFuncSeparate(Ce[et],Ce[St],Ce[kt],Ce[Tt]),M=et,C=St,R=kt,I=Tt),(An.equals(P)===!1||Wt!==B)&&(i.blendColor(An.r,An.g,An.b,Wt),P.copy(An),B=Wt),S=ae,O=!1}function Ye(ae,$e){ae.side===Li?Be(i.CULL_FACE):ke(i.CULL_FACE);let et=ae.side===Ci;$e&&(et=!et),we(et),ae.blending===jc&&ae.transparent===!1?_e(sr):_e(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.blendColor,ae.blendAlpha,ae.premultipliedAlpha),c.setFunc(ae.depthFunc),c.setTest(ae.depthTest),c.setMask(ae.depthWrite),l.setMask(ae.colorWrite);const St=ae.stencilWrite;u.setTest(St),St&&(u.setMask(ae.stencilWriteMask),u.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),u.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),te(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?ke(i.SAMPLE_ALPHA_TO_COVERAGE):Be(i.SAMPLE_ALPHA_TO_COVERAGE)}function we(ae){N!==ae&&(ae?i.frontFace(i.CW):i.frontFace(i.CCW),N=ae)}function G(ae){ae!==PU?(ke(i.CULL_FACE),ae!==ne&&(ae===NA?i.cullFace(i.BACK):ae===BU?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Be(i.CULL_FACE),ne=ae}function F(ae){ae!==z&&(H&&i.lineWidth(ae),z=ae)}function te(ae,$e,et){ae?(ke(i.POLYGON_OFFSET_FILL),(j!==$e||q!==et)&&(i.polygonOffset($e,et),j=$e,q=et)):Be(i.POLYGON_OFFSET_FILL)}function xe(ae){ae?ke(i.SCISSOR_TEST):Be(i.SCISSOR_TEST)}function ge(ae){ae===void 0&&(ae=i.TEXTURE0+he-1),k!==ae&&(i.activeTexture(ae),k=ae)}function ye(ae,$e,et){et===void 0&&(k===null?et=i.TEXTURE0+he-1:et=k);let St=Z[et];St===void 0&&(St={type:void 0,texture:void 0},Z[et]=St),(St.type!==ae||St.texture!==$e)&&(k!==et&&(i.activeTexture(et),k=et),i.bindTexture(ae,$e||Se[ae]),St.type=ae,St.texture=$e)}function Fe(){const ae=Z[k];ae!==void 0&&ae.type!==void 0&&(i.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function Ve(){try{i.compressedTexImage2D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function He(){try{i.compressedTexImage3D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function je(){try{i.texSubImage2D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function tt(){try{i.texSubImage3D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Oe(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function yt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Qe(){try{i.texStorage2D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function it(){try{i.texStorage3D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ge(){try{i.texImage2D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ze(){try{i.texImage3D.apply(i,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ze(ae){le.equals(ae)===!1&&(i.scissor(ae.x,ae.y,ae.z,ae.w),le.copy(ae))}function ht(ae){fe.equals(ae)===!1&&(i.viewport(ae.x,ae.y,ae.z,ae.w),fe.copy(ae))}function _t(ae,$e){let et=f.get($e);et===void 0&&(et=new WeakMap,f.set($e,et));let St=et.get(ae);St===void 0&&(St=i.getUniformBlockIndex($e,ae.name),et.set(ae,St))}function rt(ae,$e){const St=f.get($e).get(ae);h.get($e)!==St&&(i.uniformBlockBinding($e,St,ae.__bindingPointIndex),h.set($e,St))}function ve(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),r===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},k=null,Z={},g={},v=new WeakMap,_=[],x=null,y=!1,S=null,A=null,M=null,C=null,T=null,R=null,I=null,P=new Ke(0,0,0),B=0,O=!1,N=null,ne=null,z=null,j=null,q=null,le.set(0,0,i.canvas.width,i.canvas.height),fe.set(0,0,i.canvas.width,i.canvas.height),l.reset(),c.reset(),u.reset()}return{buffers:{color:l,depth:c,stencil:u},enable:ke,disable:Be,bindFramebuffer:Ae,drawBuffers:W,useProgram:Re,setBlending:_e,setMaterial:Ye,setFlipSided:we,setCullFace:G,setLineWidth:F,setPolygonOffset:te,setScissorTest:xe,activeTexture:ge,bindTexture:ye,unbindTexture:Fe,compressedTexImage2D:Ve,compressedTexImage3D:He,texImage2D:Ge,texImage3D:ze,updateUBOMapping:_t,uniformBlockBinding:rt,texStorage2D:Qe,texStorage3D:it,texSubImage2D:je,texSubImage3D:tt,compressedTexSubImage2D:Oe,compressedTexSubImage3D:yt,scissor:Ze,viewport:ht,reset:ve}}function rW(i,t,n,r,s,o,a){const l=s.isWebGL2,c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let f;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(G,F){return g?new OffscreenCanvas(G,F):Xp("canvas")}function _(G,F,te,xe){let ge=1;if((G.width>xe||G.height>xe)&&(ge=xe/Math.max(G.width,G.height)),ge<1||F===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const ye=F?oy:Math.floor,Fe=ye(ge*G.width),Ve=ye(ge*G.height);f===void 0&&(f=v(Fe,Ve));const He=te?v(Fe,Ve):f;return He.width=Fe,He.height=Ve,He.getContext("2d").drawImage(G,0,0,Fe,Ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+Fe+"x"+Ve+")."),He}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function x(G){return yE(G.width)&&yE(G.height)}function y(G){return l?!1:G.wrapS!==Ui||G.wrapT!==Ui||G.minFilter!==Un&&G.minFilter!==ln}function S(G,F){return G.generateMipmaps&&F&&G.minFilter!==Un&&G.minFilter!==ln}function A(G){i.generateMipmap(G)}function M(G,F,te,xe,ge=!1){if(l===!1)return F;if(G!==null){if(i[G]!==void 0)return i[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let ye=F;if(F===i.RED&&(te===i.FLOAT&&(ye=i.R32F),te===i.HALF_FLOAT&&(ye=i.R16F),te===i.UNSIGNED_BYTE&&(ye=i.R8)),F===i.RED_INTEGER&&(te===i.UNSIGNED_BYTE&&(ye=i.R8UI),te===i.UNSIGNED_SHORT&&(ye=i.R16UI),te===i.UNSIGNED_INT&&(ye=i.R32UI),te===i.BYTE&&(ye=i.R8I),te===i.SHORT&&(ye=i.R16I),te===i.INT&&(ye=i.R32I)),F===i.RG&&(te===i.FLOAT&&(ye=i.RG32F),te===i.HALF_FLOAT&&(ye=i.RG16F),te===i.UNSIGNED_BYTE&&(ye=i.RG8)),F===i.RGBA){const Fe=ge?Gp:En.getTransfer(xe);te===i.FLOAT&&(ye=i.RGBA32F),te===i.HALF_FLOAT&&(ye=i.RGBA16F),te===i.UNSIGNED_BYTE&&(ye=Fe===Ln?i.SRGB8_ALPHA8:i.RGBA8),te===i.UNSIGNED_SHORT_4_4_4_4&&(ye=i.RGBA4),te===i.UNSIGNED_SHORT_5_5_5_1&&(ye=i.RGB5_A1)}return(ye===i.R16F||ye===i.R32F||ye===i.RG16F||ye===i.RG32F||ye===i.RGBA16F||ye===i.RGBA32F)&&t.get("EXT_color_buffer_float"),ye}function C(G,F,te){return S(G,te)===!0||G.isFramebufferTexture&&G.minFilter!==Un&&G.minFilter!==ln?Math.log2(Math.max(F.width,F.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?F.mipmaps.length:1}function T(G){return G===Un||G===kp||G===Jh?i.NEAREST:i.LINEAR}function R(G){const F=G.target;F.removeEventListener("dispose",R),P(F),F.isVideoTexture&&h.delete(F)}function I(G){const F=G.target;F.removeEventListener("dispose",I),O(F)}function P(G){const F=r.get(G);if(F.__webglInit===void 0)return;const te=G.source,xe=p.get(te);if(xe){const ge=xe[F.__cacheKey];ge.usedTimes--,ge.usedTimes===0&&B(G),Object.keys(xe).length===0&&p.delete(te)}r.remove(G)}function B(G){const F=r.get(G);i.deleteTexture(F.__webglTexture);const te=G.source,xe=p.get(te);delete xe[F.__cacheKey],a.memory.textures--}function O(G){const F=G.texture,te=r.get(G),xe=r.get(F);if(xe.__webglTexture!==void 0&&(i.deleteTexture(xe.__webglTexture),a.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(te.__webglFramebuffer[ge]))for(let ye=0;ye<te.__webglFramebuffer[ge].length;ye++)i.deleteFramebuffer(te.__webglFramebuffer[ge][ye]);else i.deleteFramebuffer(te.__webglFramebuffer[ge]);te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer[ge])}else{if(Array.isArray(te.__webglFramebuffer))for(let ge=0;ge<te.__webglFramebuffer.length;ge++)i.deleteFramebuffer(te.__webglFramebuffer[ge]);else i.deleteFramebuffer(te.__webglFramebuffer);if(te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&i.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer)for(let ge=0;ge<te.__webglColorRenderbuffer.length;ge++)te.__webglColorRenderbuffer[ge]&&i.deleteRenderbuffer(te.__webglColorRenderbuffer[ge]);te.__webglDepthRenderbuffer&&i.deleteRenderbuffer(te.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let ge=0,ye=F.length;ge<ye;ge++){const Fe=r.get(F[ge]);Fe.__webglTexture&&(i.deleteTexture(Fe.__webglTexture),a.memory.textures--),r.remove(F[ge])}r.remove(F),r.remove(G)}let N=0;function ne(){N=0}function z(){const G=N;return G>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+s.maxTextures),N+=1,G}function j(G){const F=[];return F.push(G.wrapS),F.push(G.wrapT),F.push(G.wrapR||0),F.push(G.magFilter),F.push(G.minFilter),F.push(G.anisotropy),F.push(G.internalFormat),F.push(G.format),F.push(G.type),F.push(G.generateMipmaps),F.push(G.premultiplyAlpha),F.push(G.flipY),F.push(G.unpackAlignment),F.push(G.colorSpace),F.join()}function q(G,F){const te=r.get(G);if(G.isVideoTexture&&Ye(G),G.isRenderTargetTexture===!1&&G.version>0&&te.__version!==G.version){const xe=G.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(te,G,F);return}}n.bindTexture(i.TEXTURE_2D,te.__webglTexture,i.TEXTURE0+F)}function he(G,F){const te=r.get(G);if(G.version>0&&te.__version!==G.version){le(te,G,F);return}n.bindTexture(i.TEXTURE_2D_ARRAY,te.__webglTexture,i.TEXTURE0+F)}function H(G,F){const te=r.get(G);if(G.version>0&&te.__version!==G.version){le(te,G,F);return}n.bindTexture(i.TEXTURE_3D,te.__webglTexture,i.TEXTURE0+F)}function X(G,F){const te=r.get(G);if(G.version>0&&te.__version!==G.version){fe(te,G,F);return}n.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+F)}const K={[Ho]:i.REPEAT,[Ui]:i.CLAMP_TO_EDGE,[af]:i.MIRRORED_REPEAT},k={[Un]:i.NEAREST,[kp]:i.NEAREST_MIPMAP_NEAREST,[Jh]:i.NEAREST_MIPMAP_LINEAR,[ln]:i.LINEAR,[jy]:i.LINEAR_MIPMAP_NEAREST,[Vo]:i.LINEAR_MIPMAP_LINEAR},Z={[A3]:i.NEVER,[b3]:i.ALWAYS,[E3]:i.LESS,[Sw]:i.LEQUAL,[M3]:i.EQUAL,[C3]:i.GEQUAL,[w3]:i.GREATER,[T3]:i.NOTEQUAL};function Q(G,F,te){if(te?(i.texParameteri(G,i.TEXTURE_WRAP_S,K[F.wrapS]),i.texParameteri(G,i.TEXTURE_WRAP_T,K[F.wrapT]),(G===i.TEXTURE_3D||G===i.TEXTURE_2D_ARRAY)&&i.texParameteri(G,i.TEXTURE_WRAP_R,K[F.wrapR]),i.texParameteri(G,i.TEXTURE_MAG_FILTER,k[F.magFilter]),i.texParameteri(G,i.TEXTURE_MIN_FILTER,k[F.minFilter])):(i.texParameteri(G,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(G,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(G===i.TEXTURE_3D||G===i.TEXTURE_2D_ARRAY)&&i.texParameteri(G,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(F.wrapS!==Ui||F.wrapT!==Ui)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(G,i.TEXTURE_MAG_FILTER,T(F.magFilter)),i.texParameteri(G,i.TEXTURE_MIN_FILTER,T(F.minFilter)),F.minFilter!==Un&&F.minFilter!==ln&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),F.compareFunction&&(i.texParameteri(G,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(G,i.TEXTURE_COMPARE_FUNC,Z[F.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){const xe=t.get("EXT_texture_filter_anisotropic");if(F.magFilter===Un||F.minFilter!==Jh&&F.minFilter!==Vo||F.type===Yi&&t.has("OES_texture_float_linear")===!1||l===!1&&F.type===Ji&&t.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(i.texParameterf(G,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,s.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function se(G,F){let te=!1;G.__webglInit===void 0&&(G.__webglInit=!0,F.addEventListener("dispose",R));const xe=F.source;let ge=p.get(xe);ge===void 0&&(ge={},p.set(xe,ge));const ye=j(F);if(ye!==G.__cacheKey){ge[ye]===void 0&&(ge[ye]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,te=!0),ge[ye].usedTimes++;const Fe=ge[G.__cacheKey];Fe!==void 0&&(ge[G.__cacheKey].usedTimes--,Fe.usedTimes===0&&B(F)),G.__cacheKey=ye,G.__webglTexture=ge[ye].texture}return te}function le(G,F,te){let xe=i.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(xe=i.TEXTURE_2D_ARRAY),F.isData3DTexture&&(xe=i.TEXTURE_3D);const ge=se(G,F),ye=F.source;n.bindTexture(xe,G.__webglTexture,i.TEXTURE0+te);const Fe=r.get(ye);if(ye.version!==Fe.__version||ge===!0){n.activeTexture(i.TEXTURE0+te);const Ve=En.getPrimaries(En.workingColorSpace),He=F.colorSpace===hs?null:En.getPrimaries(F.colorSpace),je=F.colorSpace===hs||Ve===He?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,F.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,F.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,je);const tt=y(F)&&x(F.image)===!1;let Oe=_(F.image,tt,!1,s.maxTextureSize);Oe=we(F,Oe);const yt=x(Oe)||l,Qe=o.convert(F.format,F.colorSpace);let it=o.convert(F.type),Ge=M(F.internalFormat,Qe,it,F.colorSpace,F.isVideoTexture);Q(xe,F,yt);let ze;const Ze=F.mipmaps,ht=l&&F.isVideoTexture!==!0&&Ge!==vw,_t=Fe.__version===void 0||ge===!0,rt=C(F,Oe,yt);if(F.isDepthTexture)Ge=i.DEPTH_COMPONENT,l?F.type===Yi?Ge=i.DEPTH_COMPONENT32F:F.type===Do?Ge=i.DEPTH_COMPONENT24:F.type===Aa?Ge=i.DEPTH24_STENCIL8:Ge=i.DEPTH_COMPONENT16:F.type===Yi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===Ea&&Ge===i.DEPTH_COMPONENT&&F.type!==dm&&F.type!==Do&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=Do,it=o.convert(F.type)),F.format===Dl&&Ge===i.DEPTH_COMPONENT&&(Ge=i.DEPTH_STENCIL,F.type!==Aa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=Aa,it=o.convert(F.type))),_t&&(ht?n.texStorage2D(i.TEXTURE_2D,1,Ge,Oe.width,Oe.height):n.texImage2D(i.TEXTURE_2D,0,Ge,Oe.width,Oe.height,0,Qe,it,null));else if(F.isDataTexture)if(Ze.length>0&&yt){ht&&_t&&n.texStorage2D(i.TEXTURE_2D,rt,Ge,Ze[0].width,Ze[0].height);for(let ve=0,ae=Ze.length;ve<ae;ve++)ze=Ze[ve],ht?n.texSubImage2D(i.TEXTURE_2D,ve,0,0,ze.width,ze.height,Qe,it,ze.data):n.texImage2D(i.TEXTURE_2D,ve,Ge,ze.width,ze.height,0,Qe,it,ze.data);F.generateMipmaps=!1}else ht?(_t&&n.texStorage2D(i.TEXTURE_2D,rt,Ge,Oe.width,Oe.height),n.texSubImage2D(i.TEXTURE_2D,0,0,0,Oe.width,Oe.height,Qe,it,Oe.data)):n.texImage2D(i.TEXTURE_2D,0,Ge,Oe.width,Oe.height,0,Qe,it,Oe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){ht&&_t&&n.texStorage3D(i.TEXTURE_2D_ARRAY,rt,Ge,Ze[0].width,Ze[0].height,Oe.depth);for(let ve=0,ae=Ze.length;ve<ae;ve++)ze=Ze[ve],F.format!==xr?Qe!==null?ht?n.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ve,0,0,0,ze.width,ze.height,Oe.depth,Qe,ze.data,0,0):n.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ve,Ge,ze.width,ze.height,Oe.depth,0,ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?n.texSubImage3D(i.TEXTURE_2D_ARRAY,ve,0,0,0,ze.width,ze.height,Oe.depth,Qe,it,ze.data):n.texImage3D(i.TEXTURE_2D_ARRAY,ve,Ge,ze.width,ze.height,Oe.depth,0,Qe,it,ze.data)}else{ht&&_t&&n.texStorage2D(i.TEXTURE_2D,rt,Ge,Ze[0].width,Ze[0].height);for(let ve=0,ae=Ze.length;ve<ae;ve++)ze=Ze[ve],F.format!==xr?Qe!==null?ht?n.compressedTexSubImage2D(i.TEXTURE_2D,ve,0,0,ze.width,ze.height,Qe,ze.data):n.compressedTexImage2D(i.TEXTURE_2D,ve,Ge,ze.width,ze.height,0,ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?n.texSubImage2D(i.TEXTURE_2D,ve,0,0,ze.width,ze.height,Qe,it,ze.data):n.texImage2D(i.TEXTURE_2D,ve,Ge,ze.width,ze.height,0,Qe,it,ze.data)}else if(F.isDataArrayTexture)ht?(_t&&n.texStorage3D(i.TEXTURE_2D_ARRAY,rt,Ge,Oe.width,Oe.height,Oe.depth),n.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,Qe,it,Oe.data)):n.texImage3D(i.TEXTURE_2D_ARRAY,0,Ge,Oe.width,Oe.height,Oe.depth,0,Qe,it,Oe.data);else if(F.isData3DTexture)ht?(_t&&n.texStorage3D(i.TEXTURE_3D,rt,Ge,Oe.width,Oe.height,Oe.depth),n.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,Qe,it,Oe.data)):n.texImage3D(i.TEXTURE_3D,0,Ge,Oe.width,Oe.height,Oe.depth,0,Qe,it,Oe.data);else if(F.isFramebufferTexture){if(_t)if(ht)n.texStorage2D(i.TEXTURE_2D,rt,Ge,Oe.width,Oe.height);else{let ve=Oe.width,ae=Oe.height;for(let $e=0;$e<rt;$e++)n.texImage2D(i.TEXTURE_2D,$e,Ge,ve,ae,0,Qe,it,null),ve>>=1,ae>>=1}}else if(Ze.length>0&&yt){ht&&_t&&n.texStorage2D(i.TEXTURE_2D,rt,Ge,Ze[0].width,Ze[0].height);for(let ve=0,ae=Ze.length;ve<ae;ve++)ze=Ze[ve],ht?n.texSubImage2D(i.TEXTURE_2D,ve,0,0,Qe,it,ze):n.texImage2D(i.TEXTURE_2D,ve,Ge,Qe,it,ze);F.generateMipmaps=!1}else ht?(_t&&n.texStorage2D(i.TEXTURE_2D,rt,Ge,Oe.width,Oe.height),n.texSubImage2D(i.TEXTURE_2D,0,0,0,Qe,it,Oe)):n.texImage2D(i.TEXTURE_2D,0,Ge,Qe,it,Oe);S(F,yt)&&A(xe),Fe.__version=ye.version,F.onUpdate&&F.onUpdate(F)}G.__version=F.version}function fe(G,F,te){if(F.image.length!==6)return;const xe=se(G,F),ge=F.source;n.bindTexture(i.TEXTURE_CUBE_MAP,G.__webglTexture,i.TEXTURE0+te);const ye=r.get(ge);if(ge.version!==ye.__version||xe===!0){n.activeTexture(i.TEXTURE0+te);const Fe=En.getPrimaries(En.workingColorSpace),Ve=F.colorSpace===hs?null:En.getPrimaries(F.colorSpace),He=F.colorSpace===hs||Fe===Ve?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,F.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,F.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);const je=F.isCompressedTexture||F.image[0].isCompressedTexture,tt=F.image[0]&&F.image[0].isDataTexture,Oe=[];for(let ve=0;ve<6;ve++)!je&&!tt?Oe[ve]=_(F.image[ve],!1,!0,s.maxCubemapSize):Oe[ve]=tt?F.image[ve].image:F.image[ve],Oe[ve]=we(F,Oe[ve]);const yt=Oe[0],Qe=x(yt)||l,it=o.convert(F.format,F.colorSpace),Ge=o.convert(F.type),ze=M(F.internalFormat,it,Ge,F.colorSpace),Ze=l&&F.isVideoTexture!==!0,ht=ye.__version===void 0||xe===!0;let _t=C(F,yt,Qe);Q(i.TEXTURE_CUBE_MAP,F,Qe);let rt;if(je){Ze&&ht&&n.texStorage2D(i.TEXTURE_CUBE_MAP,_t,ze,yt.width,yt.height);for(let ve=0;ve<6;ve++){rt=Oe[ve].mipmaps;for(let ae=0;ae<rt.length;ae++){const $e=rt[ae];F.format!==xr?it!==null?Ze?n.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae,0,0,$e.width,$e.height,it,$e.data):n.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae,ze,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae,0,0,$e.width,$e.height,it,Ge,$e.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae,ze,$e.width,$e.height,0,it,Ge,$e.data)}}}else{rt=F.mipmaps,Ze&&ht&&(rt.length>0&&_t++,n.texStorage2D(i.TEXTURE_CUBE_MAP,_t,ze,Oe[0].width,Oe[0].height));for(let ve=0;ve<6;ve++)if(tt){Ze?n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,Oe[ve].width,Oe[ve].height,it,Ge,Oe[ve].data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,ze,Oe[ve].width,Oe[ve].height,0,it,Ge,Oe[ve].data);for(let ae=0;ae<rt.length;ae++){const et=rt[ae].image[ve].image;Ze?n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae+1,0,0,et.width,et.height,it,Ge,et.data):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae+1,ze,et.width,et.height,0,it,Ge,et.data)}}else{Ze?n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,it,Ge,Oe[ve]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,ze,it,Ge,Oe[ve]);for(let ae=0;ae<rt.length;ae++){const $e=rt[ae];Ze?n.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae+1,0,0,it,Ge,$e.image[ve]):n.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ae+1,ze,it,Ge,$e.image[ve])}}}S(F,Qe)&&A(i.TEXTURE_CUBE_MAP),ye.__version=ge.version,F.onUpdate&&F.onUpdate(F)}G.__version=F.version}function ue(G,F,te,xe,ge,ye){const Fe=o.convert(te.format,te.colorSpace),Ve=o.convert(te.type),He=M(te.internalFormat,Fe,Ve,te.colorSpace);if(!r.get(F).__hasExternalTextures){const tt=Math.max(1,F.width>>ye),Oe=Math.max(1,F.height>>ye);ge===i.TEXTURE_3D||ge===i.TEXTURE_2D_ARRAY?n.texImage3D(ge,ye,He,tt,Oe,F.depth,0,Fe,Ve,null):n.texImage2D(ge,ye,He,tt,Oe,0,Fe,Ve,null)}n.bindFramebuffer(i.FRAMEBUFFER,G),_e(F)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,xe,ge,r.get(te).__webglTexture,0,Ce(F)):(ge===i.TEXTURE_2D||ge>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ge<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,xe,ge,r.get(te).__webglTexture,ye),n.bindFramebuffer(i.FRAMEBUFFER,null)}function Se(G,F,te){if(i.bindRenderbuffer(i.RENDERBUFFER,G),F.depthBuffer&&!F.stencilBuffer){let xe=l===!0?i.DEPTH_COMPONENT24:i.DEPTH_COMPONENT16;if(te||_e(F)){const ge=F.depthTexture;ge&&ge.isDepthTexture&&(ge.type===Yi?xe=i.DEPTH_COMPONENT32F:ge.type===Do&&(xe=i.DEPTH_COMPONENT24));const ye=Ce(F);_e(F)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ye,xe,F.width,F.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,ye,xe,F.width,F.height)}else i.renderbufferStorage(i.RENDERBUFFER,xe,F.width,F.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,G)}else if(F.depthBuffer&&F.stencilBuffer){const xe=Ce(F);te&&_e(F)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,xe,i.DEPTH24_STENCIL8,F.width,F.height):_e(F)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,xe,i.DEPTH24_STENCIL8,F.width,F.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,F.width,F.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,G)}else{const xe=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let ge=0;ge<xe.length;ge++){const ye=xe[ge],Fe=o.convert(ye.format,ye.colorSpace),Ve=o.convert(ye.type),He=M(ye.internalFormat,Fe,Ve,ye.colorSpace),je=Ce(F);te&&_e(F)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,je,He,F.width,F.height):_e(F)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,je,He,F.width,F.height):i.renderbufferStorage(i.RENDERBUFFER,He,F.width,F.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ke(G,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(i.FRAMEBUFFER,G),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),q(F.depthTexture,0);const xe=r.get(F.depthTexture).__webglTexture,ge=Ce(F);if(F.depthTexture.format===Ea)_e(F)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,xe,0,ge):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,xe,0);else if(F.depthTexture.format===Dl)_e(F)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,xe,0,ge):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function Be(G){const F=r.get(G),te=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!F.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");ke(F.__webglFramebuffer,G)}else if(te){F.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)n.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer[xe]),F.__webglDepthbuffer[xe]=i.createRenderbuffer(),Se(F.__webglDepthbuffer[xe],G,!1)}else n.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=i.createRenderbuffer(),Se(F.__webglDepthbuffer,G,!1);n.bindFramebuffer(i.FRAMEBUFFER,null)}function Ae(G,F,te){const xe=r.get(G);F!==void 0&&ue(xe.__webglFramebuffer,G,G.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),te!==void 0&&Be(G)}function W(G){const F=G.texture,te=r.get(G),xe=r.get(F);G.addEventListener("dispose",I),G.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=i.createTexture()),xe.__version=F.version,a.memory.textures++);const ge=G.isWebGLCubeRenderTarget===!0,ye=G.isWebGLMultipleRenderTargets===!0,Fe=x(G)||l;if(ge){te.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(l&&F.mipmaps&&F.mipmaps.length>0){te.__webglFramebuffer[Ve]=[];for(let He=0;He<F.mipmaps.length;He++)te.__webglFramebuffer[Ve][He]=i.createFramebuffer()}else te.__webglFramebuffer[Ve]=i.createFramebuffer()}else{if(l&&F.mipmaps&&F.mipmaps.length>0){te.__webglFramebuffer=[];for(let Ve=0;Ve<F.mipmaps.length;Ve++)te.__webglFramebuffer[Ve]=i.createFramebuffer()}else te.__webglFramebuffer=i.createFramebuffer();if(ye)if(s.drawBuffers){const Ve=G.texture;for(let He=0,je=Ve.length;He<je;He++){const tt=r.get(Ve[He]);tt.__webglTexture===void 0&&(tt.__webglTexture=i.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&G.samples>0&&_e(G)===!1){const Ve=ye?F:[F];te.__webglMultisampledFramebuffer=i.createFramebuffer(),te.__webglColorRenderbuffer=[],n.bindFramebuffer(i.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let He=0;He<Ve.length;He++){const je=Ve[He];te.__webglColorRenderbuffer[He]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,te.__webglColorRenderbuffer[He]);const tt=o.convert(je.format,je.colorSpace),Oe=o.convert(je.type),yt=M(je.internalFormat,tt,Oe,je.colorSpace,G.isXRRenderTarget===!0),Qe=Ce(G);i.renderbufferStorageMultisample(i.RENDERBUFFER,Qe,yt,G.width,G.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+He,i.RENDERBUFFER,te.__webglColorRenderbuffer[He])}i.bindRenderbuffer(i.RENDERBUFFER,null),G.depthBuffer&&(te.__webglDepthRenderbuffer=i.createRenderbuffer(),Se(te.__webglDepthRenderbuffer,G,!0)),n.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ge){n.bindTexture(i.TEXTURE_CUBE_MAP,xe.__webglTexture),Q(i.TEXTURE_CUBE_MAP,F,Fe);for(let Ve=0;Ve<6;Ve++)if(l&&F.mipmaps&&F.mipmaps.length>0)for(let He=0;He<F.mipmaps.length;He++)ue(te.__webglFramebuffer[Ve][He],G,F,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,He);else ue(te.__webglFramebuffer[Ve],G,F,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);S(F,Fe)&&A(i.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ye){const Ve=G.texture;for(let He=0,je=Ve.length;He<je;He++){const tt=Ve[He],Oe=r.get(tt);n.bindTexture(i.TEXTURE_2D,Oe.__webglTexture),Q(i.TEXTURE_2D,tt,Fe),ue(te.__webglFramebuffer,G,tt,i.COLOR_ATTACHMENT0+He,i.TEXTURE_2D,0),S(tt,Fe)&&A(i.TEXTURE_2D)}n.unbindTexture()}else{let Ve=i.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(l?Ve=G.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ve,xe.__webglTexture),Q(Ve,F,Fe),l&&F.mipmaps&&F.mipmaps.length>0)for(let He=0;He<F.mipmaps.length;He++)ue(te.__webglFramebuffer[He],G,F,i.COLOR_ATTACHMENT0,Ve,He);else ue(te.__webglFramebuffer,G,F,i.COLOR_ATTACHMENT0,Ve,0);S(F,Fe)&&A(Ve),n.unbindTexture()}G.depthBuffer&&Be(G)}function Re(G){const F=x(G)||l,te=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let xe=0,ge=te.length;xe<ge;xe++){const ye=te[xe];if(S(ye,F)){const Fe=G.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Ve=r.get(ye).__webglTexture;n.bindTexture(Fe,Ve),A(Fe),n.unbindTexture()}}}function Ee(G){if(l&&G.samples>0&&_e(G)===!1){const F=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],te=G.width,xe=G.height;let ge=i.COLOR_BUFFER_BIT;const ye=[],Fe=G.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ve=r.get(G),He=G.isWebGLMultipleRenderTargets===!0;if(He)for(let je=0;je<F.length;je++)n.bindFramebuffer(i.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+je,i.RENDERBUFFER,null),n.bindFramebuffer(i.FRAMEBUFFER,Ve.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+je,i.TEXTURE_2D,null,0);n.bindFramebuffer(i.READ_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ve.__webglFramebuffer);for(let je=0;je<F.length;je++){ye.push(i.COLOR_ATTACHMENT0+je),G.depthBuffer&&ye.push(Fe);const tt=Ve.__ignoreDepthValues!==void 0?Ve.__ignoreDepthValues:!1;if(tt===!1&&(G.depthBuffer&&(ge|=i.DEPTH_BUFFER_BIT),G.stencilBuffer&&(ge|=i.STENCIL_BUFFER_BIT)),He&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Ve.__webglColorRenderbuffer[je]),tt===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Fe]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Fe])),He){const Oe=r.get(F[je]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Oe,0)}i.blitFramebuffer(0,0,te,xe,0,0,te,xe,ge,i.NEAREST),u&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ye)}if(n.bindFramebuffer(i.READ_FRAMEBUFFER,null),n.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),He)for(let je=0;je<F.length;je++){n.bindFramebuffer(i.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+je,i.RENDERBUFFER,Ve.__webglColorRenderbuffer[je]);const tt=r.get(F[je]).__webglTexture;n.bindFramebuffer(i.FRAMEBUFFER,Ve.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+je,i.TEXTURE_2D,tt,0)}n.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer)}}function Ce(G){return Math.min(s.maxSamples,G.samples)}function _e(G){const F=r.get(G);return l&&G.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Ye(G){const F=a.render.frame;h.get(G)!==F&&(h.set(G,F),G.update())}function we(G,F){const te=G.colorSpace,xe=G.format,ge=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===sy||te!==Wo&&te!==hs&&(En.getTransfer(te)===Ln?l===!1?t.has("EXT_sRGB")===!0&&xe===xr?(G.format=sy,G.minFilter=ln,G.generateMipmaps=!1):F=Ew.sRGBToLinear(F):(xe!==xr||ge!==or)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),F}this.allocateTextureUnit=z,this.resetTextureUnits=ne,this.setTexture2D=q,this.setTexture2DArray=he,this.setTexture3D=H,this.setTextureCube=X,this.rebindTextures=Ae,this.setupRenderTarget=W,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=Ee,this.setupDepthRenderbuffer=Be,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=_e}function G3(i,t,n){const r=n.isWebGL2;function s(o,a=hs){let l;const c=En.getTransfer(a);if(o===or)return i.UNSIGNED_BYTE;if(o===hw)return i.UNSIGNED_SHORT_4_4_4_4;if(o===fw)return i.UNSIGNED_SHORT_5_5_5_1;if(o===u3)return i.BYTE;if(o===h3)return i.SHORT;if(o===dm)return i.UNSIGNED_SHORT;if(o===uw)return i.INT;if(o===Do)return i.UNSIGNED_INT;if(o===Yi)return i.FLOAT;if(o===Ji)return r?i.HALF_FLOAT:(l=t.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(o===f3)return i.ALPHA;if(o===xr)return i.RGBA;if(o===d3)return i.LUMINANCE;if(o===p3)return i.LUMINANCE_ALPHA;if(o===Ea)return i.DEPTH_COMPONENT;if(o===Dl)return i.DEPTH_STENCIL;if(o===sy)return l=t.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(o===dw)return i.RED;if(o===pw)return i.RED_INTEGER;if(o===m3)return i.RG;if(o===mw)return i.RG_INTEGER;if(o===gw)return i.RGBA_INTEGER;if(o===m0||o===g0||o===v0||o===y0)if(c===Ln)if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(o===m0)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===g0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===v0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===y0)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=t.get("WEBGL_compressed_texture_s3tc"),l!==null){if(o===m0)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===g0)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===v0)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===y0)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===XA||o===jA||o===YA||o===JA)if(l=t.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(o===XA)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===jA)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===YA)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===JA)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===vw)return l=t.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===KA||o===ZA)if(l=t.get("WEBGL_compressed_texture_etc"),l!==null){if(o===KA)return c===Ln?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(o===ZA)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===QA||o===qA||o===$A||o===eE||o===tE||o===nE||o===iE||o===rE||o===sE||o===oE||o===aE||o===lE||o===cE||o===uE)if(l=t.get("WEBGL_compressed_texture_astc"),l!==null){if(o===QA)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===qA)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===$A)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===eE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===tE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===nE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===iE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===rE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===sE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===oE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===aE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===lE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===cE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===uE)return c===Ln?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===_0||o===hE||o===fE)if(l=t.get("EXT_texture_compression_bptc"),l!==null){if(o===_0)return c===Ln?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===hE)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===fE)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===g3||o===dE||o===pE||o===mE)if(l=t.get("EXT_texture_compression_rgtc"),l!==null){if(o===_0)return l.COMPRESSED_RED_RGTC1_EXT;if(o===dE)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===pE)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===mE)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Aa?r?i.UNSIGNED_INT_24_8:(l=t.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):i[o]!==void 0?i[o]:null}return{convert:s}}class H3 extends Jn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class ho extends tn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sW={type:"move"};class T1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ho,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ho,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ho,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const r of t.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,r){let s=null,o=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(u&&t.hand){a=!0;for(const _ of t.hand.values()){const x=n.getJointPose(_,r),y=this._getHandJoint(u,_);x!==null&&(y.matrix.fromArray(x.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=x.radius),y.visible=x!==null}const h=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],p=h.position.distanceTo(f.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(o=n.getPose(t.gripSpace,r),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(s=n.getPose(t.targetRaySpace,r),s===null&&o!==null&&(s=o),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(sW)))}return l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const r=new ho;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[n.jointName]=r,t.add(r)}return t.joints[n.jointName]}}class oW extends js{constructor(t,n){super();const r=this;let s=null,o=1,a=null,l="local-floor",c=1,u=null,h=null,f=null,p=null,g=null,v=null;const _=n.getContextAttributes();let x=null,y=null;const S=[],A=[],M=new De;let C=null;const T=new Jn;T.layers.enable(1),T.viewport=new qt;const R=new Jn;R.layers.enable(2),R.viewport=new qt;const I=[T,R],P=new H3;P.layers.enable(1),P.layers.enable(2);let B=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let se=S[Q];return se===void 0&&(se=new T1,S[Q]=se),se.getTargetRaySpace()},this.getControllerGrip=function(Q){let se=S[Q];return se===void 0&&(se=new T1,S[Q]=se),se.getGripSpace()},this.getHand=function(Q){let se=S[Q];return se===void 0&&(se=new T1,S[Q]=se),se.getHandSpace()};function N(Q){const se=A.indexOf(Q.inputSource);if(se===-1)return;const le=S[se];le!==void 0&&(le.update(Q.inputSource,Q.frame,u||a),le.dispatchEvent({type:Q.type,data:Q.inputSource}))}function ne(){s.removeEventListener("select",N),s.removeEventListener("selectstart",N),s.removeEventListener("selectend",N),s.removeEventListener("squeeze",N),s.removeEventListener("squeezestart",N),s.removeEventListener("squeezeend",N),s.removeEventListener("end",ne),s.removeEventListener("inputsourceschange",z);for(let Q=0;Q<S.length;Q++){const se=A[Q];se!==null&&(A[Q]=null,S[Q].disconnect(se))}B=null,O=null,t.setRenderTarget(x),g=null,p=null,f=null,s=null,y=null,Z.stop(),r.isPresenting=!1,t.setPixelRatio(C),t.setSize(M.width,M.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){o=Q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){l=Q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(Q){u=Q},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return s},this.setSession=async function(Q){if(s=Q,s!==null){if(x=t.getRenderTarget(),s.addEventListener("select",N),s.addEventListener("selectstart",N),s.addEventListener("selectend",N),s.addEventListener("squeeze",N),s.addEventListener("squeezestart",N),s.addEventListener("squeezeend",N),s.addEventListener("end",ne),s.addEventListener("inputsourceschange",z),_.xrCompatible!==!0&&await n.makeXRCompatible(),C=t.getPixelRatio(),t.getSize(M),s.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const se={antialias:s.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:o};g=new XRWebGLLayer(s,n,se),s.updateRenderState({baseLayer:g}),t.setPixelRatio(1),t.setSize(g.framebufferWidth,g.framebufferHeight,!1),y=new Kn(g.framebufferWidth,g.framebufferHeight,{format:xr,type:or,colorSpace:t.outputColorSpace,stencilBuffer:_.stencil})}else{let se=null,le=null,fe=null;_.depth&&(fe=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,se=_.stencil?Dl:Ea,le=_.stencil?Aa:Do);const ue={colorFormat:n.RGBA8,depthFormat:fe,scaleFactor:o};f=new XRWebGLBinding(s,n),p=f.createProjectionLayer(ue),s.updateRenderState({layers:[p]}),t.setPixelRatio(1),t.setSize(p.textureWidth,p.textureHeight,!1),y=new Kn(p.textureWidth,p.textureHeight,{format:xr,type:or,depthTexture:new ym(p.textureWidth,p.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:_.stencil,colorSpace:t.outputColorSpace,samples:_.antialias?4:0});const Se=t.properties.get(y);Se.__ignoreDepthValues=p.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await s.requestReferenceSpace(l),Z.setContext(s),Z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function z(Q){for(let se=0;se<Q.removed.length;se++){const le=Q.removed[se],fe=A.indexOf(le);fe>=0&&(A[fe]=null,S[fe].disconnect(le))}for(let se=0;se<Q.added.length;se++){const le=Q.added[se];let fe=A.indexOf(le);if(fe===-1){for(let Se=0;Se<S.length;Se++)if(Se>=A.length){A.push(le),fe=Se;break}else if(A[Se]===null){A[Se]=le,fe=Se;break}if(fe===-1)break}const ue=S[fe];ue&&ue.connect(le)}}const j=new Y,q=new Y;function he(Q,se,le){j.setFromMatrixPosition(se.matrixWorld),q.setFromMatrixPosition(le.matrixWorld);const fe=j.distanceTo(q),ue=se.projectionMatrix.elements,Se=le.projectionMatrix.elements,ke=ue[14]/(ue[10]-1),Be=ue[14]/(ue[10]+1),Ae=(ue[9]+1)/ue[5],W=(ue[9]-1)/ue[5],Re=(ue[8]-1)/ue[0],Ee=(Se[8]+1)/Se[0],Ce=ke*Re,_e=ke*Ee,Ye=fe/(-Re+Ee),we=Ye*-Re;se.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(we),Q.translateZ(Ye),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const G=ke+Ye,F=Be+Ye,te=Ce-we,xe=_e+(fe-we),ge=Ae*Be/F*G,ye=W*Be/F*G;Q.projectionMatrix.makePerspective(te,xe,ge,ye,G,F),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function H(Q,se){se===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(se.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(s===null)return;P.near=R.near=T.near=Q.near,P.far=R.far=T.far=Q.far,(B!==P.near||O!==P.far)&&(s.updateRenderState({depthNear:P.near,depthFar:P.far}),B=P.near,O=P.far);const se=Q.parent,le=P.cameras;H(P,se);for(let fe=0;fe<le.length;fe++)H(le[fe],se);le.length===2?he(P,T,R):P.projectionMatrix.copy(T.projectionMatrix),X(Q,P,se)};function X(Q,se,le){le===null?Q.matrix.copy(se.matrixWorld):(Q.matrix.copy(le.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(se.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(se.projectionMatrix),Q.projectionMatrixInverse.copy(se.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=uf*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(p===null&&g===null))return c},this.setFoveation=function(Q){c=Q,p!==null&&(p.fixedFoveation=Q),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=Q)};let K=null;function k(Q,se){if(h=se.getViewerPose(u||a),v=se,h!==null){const le=h.views;g!==null&&(t.setRenderTargetFramebuffer(y,g.framebuffer),t.setRenderTarget(y));let fe=!1;le.length!==P.cameras.length&&(P.cameras.length=0,fe=!0);for(let ue=0;ue<le.length;ue++){const Se=le[ue];let ke=null;if(g!==null)ke=g.getViewport(Se);else{const Ae=f.getViewSubImage(p,Se);ke=Ae.viewport,ue===0&&(t.setRenderTargetTextures(y,Ae.colorTexture,p.ignoreDepthValues?void 0:Ae.depthStencilTexture),t.setRenderTarget(y))}let Be=I[ue];Be===void 0&&(Be=new Jn,Be.layers.enable(ue),Be.viewport=new qt,I[ue]=Be),Be.matrix.fromArray(Se.transform.matrix),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.projectionMatrix.fromArray(Se.projectionMatrix),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert(),Be.viewport.set(ke.x,ke.y,ke.width,ke.height),ue===0&&(P.matrix.copy(Be.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),fe===!0&&P.cameras.push(Be)}}for(let le=0;le<S.length;le++){const fe=A[le],ue=S[le];fe!==null&&ue!==void 0&&ue.update(fe,se,u||a)}K&&K(Q,se),se.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:se}),v=null}const Z=new U3;Z.setAnimationLoop(k),this.setAnimationLoop=function(Q){K=Q},this.dispose=function(){}}}function aW(i,t){function n(x,y){x.matrixAutoUpdate===!0&&x.updateMatrix(),y.value.copy(x.matrix)}function r(x,y){y.color.getRGB(x.fogColor.value,D3(i)),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function s(x,y,S,A,M){y.isMeshBasicMaterial||y.isMeshLambertMaterial?o(x,y):y.isMeshToonMaterial?(o(x,y),f(x,y)):y.isMeshPhongMaterial?(o(x,y),h(x,y)):y.isMeshStandardMaterial?(o(x,y),p(x,y),y.isMeshPhysicalMaterial&&g(x,y,M)):y.isMeshMatcapMaterial?(o(x,y),v(x,y)):y.isMeshDepthMaterial?o(x,y):y.isMeshDistanceMaterial?(o(x,y),_(x,y)):y.isMeshNormalMaterial?o(x,y):y.isLineBasicMaterial?(a(x,y),y.isLineDashedMaterial&&l(x,y)):y.isPointsMaterial?c(x,y,S,A):y.isSpriteMaterial?u(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function o(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map,n(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,n(y.alphaMap,x.alphaMapTransform)),y.bumpMap&&(x.bumpMap.value=y.bumpMap,n(y.bumpMap,x.bumpMapTransform),x.bumpScale.value=y.bumpScale,y.side===Ci&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,n(y.normalMap,x.normalMapTransform),x.normalScale.value.copy(y.normalScale),y.side===Ci&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,n(y.displacementMap,x.displacementMapTransform),x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap,n(y.emissiveMap,x.emissiveMapTransform)),y.specularMap&&(x.specularMap.value=y.specularMap,n(y.specularMap,x.specularMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const S=t.get(y).envMap;if(S&&(x.envMap.value=S,x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap){x.lightMap.value=y.lightMap;const A=i._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=y.lightMapIntensity*A,n(y.lightMap,x.lightMapTransform)}y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity,n(y.aoMap,x.aoMapTransform))}function a(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,y.map&&(x.map.value=y.map,n(y.map,x.mapTransform))}function l(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function c(x,y,S,A){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*S,x.scale.value=A*.5,y.map&&(x.map.value=y.map,n(y.map,x.uvTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,n(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function u(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map,n(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,n(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function h(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function f(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function p(x,y){x.metalness.value=y.metalness,y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap,n(y.metalnessMap,x.metalnessMapTransform)),x.roughness.value=y.roughness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap,n(y.roughnessMap,x.roughnessMapTransform)),t.get(y).envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function g(x,y,S){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap,n(y.sheenColorMap,x.sheenColorMapTransform)),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap,n(y.sheenRoughnessMap,x.sheenRoughnessMapTransform))),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap,n(y.clearcoatMap,x.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,n(y.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(x.clearcoatNormalMap.value=y.clearcoatNormalMap,n(y.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Ci&&x.clearcoatNormalScale.value.negate())),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap,n(y.iridescenceMap,x.iridescenceMapTransform)),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap,n(y.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap,n(y.transmissionMap,x.transmissionMapTransform)),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap,n(y.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(x.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(x.anisotropyMap.value=y.anisotropyMap,n(y.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap,n(y.specularColorMap,x.specularColorMapTransform)),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap,n(y.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,y){y.matcap&&(x.matcap.value=y.matcap)}function _(x,y){const S=t.get(y).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:s}}function lW(i,t,n,r){let s={},o={},a=[];const l=n.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(S,A){const M=A.program;r.uniformBlockBinding(S,M)}function u(S,A){let M=s[S.id];M===void 0&&(v(S),M=h(S),s[S.id]=M,S.addEventListener("dispose",x));const C=A.program;r.updateUBOMapping(S,C);const T=t.render.frame;o[S.id]!==T&&(p(S),o[S.id]=T)}function h(S){const A=f();S.__bindingPointIndex=A;const M=i.createBuffer(),C=S.__size,T=S.usage;return i.bindBuffer(i.UNIFORM_BUFFER,M),i.bufferData(i.UNIFORM_BUFFER,C,T),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,A,M),M}function f(){for(let S=0;S<l;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const A=s[S.id],M=S.uniforms,C=S.__cache;i.bindBuffer(i.UNIFORM_BUFFER,A);for(let T=0,R=M.length;T<R;T++){const I=Array.isArray(M[T])?M[T]:[M[T]];for(let P=0,B=I.length;P<B;P++){const O=I[P];if(g(O,T,P,C)===!0){const N=O.__offset,ne=Array.isArray(O.value)?O.value:[O.value];let z=0;for(let j=0;j<ne.length;j++){const q=ne[j],he=_(q);typeof q=="number"||typeof q=="boolean"?(O.__data[0]=q,i.bufferSubData(i.UNIFORM_BUFFER,N+z,O.__data)):q.isMatrix3?(O.__data[0]=q.elements[0],O.__data[1]=q.elements[1],O.__data[2]=q.elements[2],O.__data[3]=0,O.__data[4]=q.elements[3],O.__data[5]=q.elements[4],O.__data[6]=q.elements[5],O.__data[7]=0,O.__data[8]=q.elements[6],O.__data[9]=q.elements[7],O.__data[10]=q.elements[8],O.__data[11]=0):(q.toArray(O.__data,z),z+=he.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,N,O.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function g(S,A,M,C){const T=S.value,R=A+"_"+M;if(C[R]===void 0)return typeof T=="number"||typeof T=="boolean"?C[R]=T:C[R]=T.clone(),!0;{const I=C[R];if(typeof T=="number"||typeof T=="boolean"){if(I!==T)return C[R]=T,!0}else if(I.equals(T)===!1)return I.copy(T),!0}return!1}function v(S){const A=S.uniforms;let M=0;const C=16;for(let R=0,I=A.length;R<I;R++){const P=Array.isArray(A[R])?A[R]:[A[R]];for(let B=0,O=P.length;B<O;B++){const N=P[B],ne=Array.isArray(N.value)?N.value:[N.value];for(let z=0,j=ne.length;z<j;z++){const q=ne[z],he=_(q),H=M%C;H!==0&&C-H<he.boundary&&(M+=C-H),N.__data=new Float32Array(he.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=M,M+=he.storage}}}const T=M%C;return T>0&&(M+=C-T),S.__size=M,S.__cache={},this}function _(S){const A={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(A.boundary=4,A.storage=4):S.isVector2?(A.boundary=8,A.storage=8):S.isVector3||S.isColor?(A.boundary=16,A.storage=12):S.isVector4?(A.boundary=16,A.storage=16):S.isMatrix3?(A.boundary=48,A.storage=48):S.isMatrix4?(A.boundary=64,A.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),A}function x(S){const A=S.target;A.removeEventListener("dispose",x);const M=a.indexOf(A.__bindingPointIndex);a.splice(M,1),i.deleteBuffer(s[A.id]),delete s[A.id],delete o[A.id]}function y(){for(const S in s)i.deleteBuffer(s[S]);a=[],s={},o={}}return{bind:c,update:u,dispose:y}}class Rw{constructor(t={}){const{canvas:n=P3(),context:r=null,depth:s=!0,stencil:o=!0,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1}=t;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=a;const g=new Uint32Array(4),v=new Int32Array(4);let _=null,x=null;const y=[],S=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=wi,this._useLegacyLights=!1,this.toneMapping=Oo,this.toneMappingExposure=1;const A=this;let M=!1,C=0,T=0,R=null,I=-1,P=null;const B=new qt,O=new qt;let N=null;const ne=new Ke(0);let z=0,j=n.width,q=n.height,he=1,H=null,X=null;const K=new qt(0,0,j,q),k=new qt(0,0,j,q);let Z=!1;const Q=new vm;let se=!1,le=!1,fe=null;const ue=new at,Se=new De,ke=new Y,Be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ae(){return R===null?he:1}let W=r;function Re(L,J){for(let $=0;$<L.length;$++){const oe=L[$],re=n.getContext(oe,J);if(re!==null)return re}return null}try{const L={alpha:!0,depth:s,stencil:o,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Jo}`),n.addEventListener("webglcontextlost",ve,!1),n.addEventListener("webglcontextrestored",ae,!1),n.addEventListener("webglcontextcreationerror",$e,!1),W===null){const J=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&J.shift(),W=Re(J,L),W===null)throw Re(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&W instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let Ee,Ce,_e,Ye,we,G,F,te,xe,ge,ye,Fe,Ve,He,je,tt,Oe,yt,Qe,it,Ge,ze,Ze,ht;function _t(){Ee=new A6(W),Ce=new g6(W,Ee,t),Ee.init(Ce),ze=new G3(W,Ee,Ce),_e=new iW(W,Ee,Ce),Ye=new w6(W),we=new X9,G=new rW(W,Ee,_e,we,Ce,ze,Ye),F=new y6(A),te=new S6(A),xe=new DV(W,Ce),Ze=new p6(W,Ee,xe,Ce),ge=new E6(W,xe,Ye,Ze),ye=new R6(W,ge,xe,Ye),Qe=new b6(W,Ce,G),tt=new v6(we),Fe=new W9(A,F,te,Ee,Ce,Ze,tt),Ve=new aW(A,we),He=new Y9,je=new $9(Ee,Ce),yt=new d6(A,F,te,_e,ye,p,c),Oe=new nW(A,ye,Ce),ht=new lW(W,Ye,Ce,_e),it=new m6(W,Ee,Ye,Ce),Ge=new M6(W,Ee,Ye,Ce),Ye.programs=Fe.programs,A.capabilities=Ce,A.extensions=Ee,A.properties=we,A.renderLists=He,A.shadowMap=Oe,A.state=_e,A.info=Ye}_t();const rt=new oW(A,W);this.xr=rt,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const L=Ee.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=Ee.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(L){L!==void 0&&(he=L,this.setSize(j,q,!1))},this.getSize=function(L){return L.set(j,q)},this.setSize=function(L,J,$=!0){if(rt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=L,q=J,n.width=Math.floor(L*he),n.height=Math.floor(J*he),$===!0&&(n.style.width=L+"px",n.style.height=J+"px"),this.setViewport(0,0,L,J)},this.getDrawingBufferSize=function(L){return L.set(j*he,q*he).floor()},this.setDrawingBufferSize=function(L,J,$){j=L,q=J,he=$,n.width=Math.floor(L*$),n.height=Math.floor(J*$),this.setViewport(0,0,L,J)},this.getCurrentViewport=function(L){return L.copy(B)},this.getViewport=function(L){return L.copy(K)},this.setViewport=function(L,J,$,oe){L.isVector4?K.set(L.x,L.y,L.z,L.w):K.set(L,J,$,oe),_e.viewport(B.copy(K).multiplyScalar(he).floor())},this.getScissor=function(L){return L.copy(k)},this.setScissor=function(L,J,$,oe){L.isVector4?k.set(L.x,L.y,L.z,L.w):k.set(L,J,$,oe),_e.scissor(O.copy(k).multiplyScalar(he).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(L){_e.setScissorTest(Z=L)},this.setOpaqueSort=function(L){H=L},this.setTransparentSort=function(L){X=L},this.getClearColor=function(L){return L.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(L=!0,J=!0,$=!0){let oe=0;if(L){let re=!1;if(R!==null){const Te=R.texture.format;re=Te===gw||Te===mw||Te===pw}if(re){const Te=R.texture.type,Pe=Te===or||Te===Do||Te===dm||Te===Aa||Te===hw||Te===fw,Le=yt.getClearColor(),de=yt.getClearAlpha(),lt=Le.r,Xe=Le.g,We=Le.b;Pe?(g[0]=lt,g[1]=Xe,g[2]=We,g[3]=de,W.clearBufferuiv(W.COLOR,0,g)):(v[0]=lt,v[1]=Xe,v[2]=We,v[3]=de,W.clearBufferiv(W.COLOR,0,v))}else oe|=W.COLOR_BUFFER_BIT}J&&(oe|=W.DEPTH_BUFFER_BIT),$&&(oe|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ve,!1),n.removeEventListener("webglcontextrestored",ae,!1),n.removeEventListener("webglcontextcreationerror",$e,!1),He.dispose(),je.dispose(),we.dispose(),F.dispose(),te.dispose(),ye.dispose(),Ze.dispose(),ht.dispose(),Fe.dispose(),rt.dispose(),rt.removeEventListener("sessionstart",Wt),rt.removeEventListener("sessionend",Ct),fe&&(fe.dispose(),fe=null),vn.stop()};function ve(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function ae(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const L=Ye.autoReset,J=Oe.enabled,$=Oe.autoUpdate,oe=Oe.needsUpdate,re=Oe.type;_t(),Ye.autoReset=L,Oe.enabled=J,Oe.autoUpdate=$,Oe.needsUpdate=oe,Oe.type=re}function $e(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function et(L){const J=L.target;J.removeEventListener("dispose",et),St(J)}function St(L){mt(L),we.remove(L)}function mt(L){const J=we.get(L).programs;J!==void 0&&(J.forEach(function($){Fe.releaseProgram($)}),L.isShaderMaterial&&Fe.releaseShaderCache(L))}this.renderBufferDirect=function(L,J,$,oe,re,Te){J===null&&(J=Be);const Pe=re.isMesh&&re.matrixWorld.determinant()<0,Le=U(L,J,$,oe,re);_e.setMaterial(oe,Pe);let de=$.index,lt=1;if(oe.wireframe===!0){if(de=ge.getWireframeAttribute($),de===void 0)return;lt=2}const Xe=$.drawRange,We=$.attributes.position;let dt=Xe.start*lt,At=(Xe.start+Xe.count)*lt;Te!==null&&(dt=Math.max(dt,Te.start*lt),At=Math.min(At,(Te.start+Te.count)*lt)),de!==null?(dt=Math.max(dt,0),At=Math.min(At,de.count)):We!=null&&(dt=Math.max(dt,0),At=Math.min(At,We.count));const Mt=At-dt;if(Mt<0||Mt===1/0)return;Ze.setup(re,oe,Le,$,de);let Bt,ct=it;if(de!==null&&(Bt=xe.get(de),ct=Ge,ct.setIndex(Bt)),re.isMesh)oe.wireframe===!0?(_e.setLineWidth(oe.wireframeLinewidth*Ae()),ct.setMode(W.LINES)):ct.setMode(W.TRIANGLES);else if(re.isLine){let nt=oe.linewidth;nt===void 0&&(nt=1),_e.setLineWidth(nt*Ae()),re.isLineSegments?ct.setMode(W.LINES):re.isLineLoop?ct.setMode(W.LINE_LOOP):ct.setMode(W.LINE_STRIP)}else re.isPoints?ct.setMode(W.POINTS):re.isSprite&&ct.setMode(W.TRIANGLES);if(re.isBatchedMesh)ct.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else if(re.isInstancedMesh)ct.renderInstances(dt,Mt,re.count);else if($.isInstancedBufferGeometry){const nt=$._maxInstanceCount!==void 0?$._maxInstanceCount:1/0,zt=Math.min($.instanceCount,nt);ct.renderInstances(dt,Mt,zt)}else ct.render(dt,Mt)};function kt(L,J,$){L.transparent===!0&&L.side===Li&&L.forceSinglePass===!1?(L.side=Ci,L.needsUpdate=!0,xt(L,J,$),L.side=Xs,L.needsUpdate=!0,xt(L,J,$),L.side=Li):xt(L,J,$)}this.compile=function(L,J,$=null){$===null&&($=L),x=je.get($),x.init(),S.push(x),$.traverseVisible(function(re){re.isLight&&re.layers.test(J.layers)&&(x.pushLight(re),re.castShadow&&x.pushShadow(re))}),L!==$&&L.traverseVisible(function(re){re.isLight&&re.layers.test(J.layers)&&(x.pushLight(re),re.castShadow&&x.pushShadow(re))}),x.setupLights(A._useLegacyLights);const oe=new Set;return L.traverse(function(re){const Te=re.material;if(Te)if(Array.isArray(Te))for(let Pe=0;Pe<Te.length;Pe++){const Le=Te[Pe];kt(Le,$,re),oe.add(Le)}else kt(Te,$,re),oe.add(Te)}),S.pop(),x=null,oe},this.compileAsync=function(L,J,$=null){const oe=this.compile(L,J,$);return new Promise(re=>{function Te(){if(oe.forEach(function(Pe){we.get(Pe).currentProgram.isReady()&&oe.delete(Pe)}),oe.size===0){re(L);return}setTimeout(Te,10)}Ee.get("KHR_parallel_shader_compile")!==null?Te():setTimeout(Te,10)})};let Tt=null;function An(L){Tt&&Tt(L)}function Wt(){vn.stop()}function Ct(){vn.start()}const vn=new U3;vn.setAnimationLoop(An),typeof self<"u"&&vn.setContext(self),this.setAnimationLoop=function(L){Tt=L,rt.setAnimationLoop(L),L===null?vn.stop():vn.start()},rt.addEventListener("sessionstart",Wt),rt.addEventListener("sessionend",Ct),this.render=function(L,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),rt.enabled===!0&&rt.isPresenting===!0&&(rt.cameraAutoUpdate===!0&&rt.updateCamera(J),J=rt.getCamera()),L.isScene===!0&&L.onBeforeRender(A,L,J,R),x=je.get(L,S.length),x.init(),S.push(x),ue.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),Q.setFromProjectionMatrix(ue),le=this.localClippingEnabled,se=tt.init(this.clippingPlanes,le),_=He.get(L,y.length),_.init(),y.push(_),wn(L,J,0,A.sortObjects),_.finish(),A.sortObjects===!0&&_.sort(H,X),this.info.render.frame++,se===!0&&tt.beginShadows();const $=x.state.shadowsArray;if(Oe.render($,L,J),se===!0&&tt.endShadows(),this.info.autoReset===!0&&this.info.reset(),yt.render(_,L),x.setupLights(A._useLegacyLights),J.isArrayCamera){const oe=J.cameras;for(let re=0,Te=oe.length;re<Te;re++){const Pe=oe[re];nn(_,L,Pe,Pe.viewport)}}else nn(_,L,J);R!==null&&(G.updateMultisampleRenderTarget(R),G.updateRenderTargetMipmap(R)),L.isScene===!0&&L.onAfterRender(A,L,J),Ze.resetDefaultState(),I=-1,P=null,S.pop(),S.length>0?x=S[S.length-1]:x=null,y.pop(),y.length>0?_=y[y.length-1]:_=null};function wn(L,J,$,oe){if(L.visible===!1)return;if(L.layers.test(J.layers)){if(L.isGroup)$=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(J);else if(L.isLight)x.pushLight(L),L.castShadow&&x.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||Q.intersectsSprite(L)){oe&&ke.setFromMatrixPosition(L.matrixWorld).applyMatrix4(ue);const Pe=ye.update(L),Le=L.material;Le.visible&&_.push(L,Pe,Le,$,ke.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||Q.intersectsObject(L))){const Pe=ye.update(L),Le=L.material;if(oe&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),ke.copy(L.boundingSphere.center)):(Pe.boundingSphere===null&&Pe.computeBoundingSphere(),ke.copy(Pe.boundingSphere.center)),ke.applyMatrix4(L.matrixWorld).applyMatrix4(ue)),Array.isArray(Le)){const de=Pe.groups;for(let lt=0,Xe=de.length;lt<Xe;lt++){const We=de[lt],dt=Le[We.materialIndex];dt&&dt.visible&&_.push(L,Pe,dt,$,ke.z,We)}}else Le.visible&&_.push(L,Pe,Le,$,ke.z,null)}}const Te=L.children;for(let Pe=0,Le=Te.length;Pe<Le;Pe++)wn(Te[Pe],J,$,oe)}function nn(L,J,$,oe){const re=L.opaque,Te=L.transmissive,Pe=L.transparent;x.setupLightsView($),se===!0&&tt.setGlobalState(A.clippingPlanes,$),Te.length>0&&On(re,Te,J,$),oe&&_e.viewport(B.copy(oe)),re.length>0&&Nn(re,J,$),Te.length>0&&Nn(Te,J,$),Pe.length>0&&Nn(Pe,J,$),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function On(L,J,$,oe){if(($.isScene===!0?$.overrideMaterial:null)!==null)return;const Te=Ce.isWebGL2;fe===null&&(fe=new Kn(1,1,{generateMipmaps:!0,type:Ee.has("EXT_color_buffer_half_float")?Ji:or,minFilter:Vo,samples:Te?4:0})),A.getDrawingBufferSize(Se),Te?fe.setSize(Se.x,Se.y):fe.setSize(oy(Se.x),oy(Se.y));const Pe=A.getRenderTarget();A.setRenderTarget(fe),A.getClearColor(ne),z=A.getClearAlpha(),z<1&&A.setClearColor(16777215,.5),A.clear();const Le=A.toneMapping;A.toneMapping=Oo,Nn(L,$,oe),G.updateMultisampleRenderTarget(fe),G.updateRenderTargetMipmap(fe);let de=!1;for(let lt=0,Xe=J.length;lt<Xe;lt++){const We=J[lt],dt=We.object,At=We.geometry,Mt=We.material,Bt=We.group;if(Mt.side===Li&&dt.layers.test(oe.layers)){const ct=Mt.side;Mt.side=Ci,Mt.needsUpdate=!0,yn(dt,$,oe,At,Mt,Bt),Mt.side=ct,Mt.needsUpdate=!0,de=!0}}de===!0&&(G.updateMultisampleRenderTarget(fe),G.updateRenderTargetMipmap(fe)),A.setRenderTarget(Pe),A.setClearColor(ne,z),A.toneMapping=Le}function Nn(L,J,$){const oe=J.isScene===!0?J.overrideMaterial:null;for(let re=0,Te=L.length;re<Te;re++){const Pe=L[re],Le=Pe.object,de=Pe.geometry,lt=oe===null?Pe.material:oe,Xe=Pe.group;Le.layers.test($.layers)&&yn(Le,J,$,de,lt,Xe)}}function yn(L,J,$,oe,re,Te){L.onBeforeRender(A,J,$,oe,re,Te),L.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),re.onBeforeRender(A,J,$,oe,L,Te),re.transparent===!0&&re.side===Li&&re.forceSinglePass===!1?(re.side=Ci,re.needsUpdate=!0,A.renderBufferDirect($,J,oe,re,L,Te),re.side=Xs,re.needsUpdate=!0,A.renderBufferDirect($,J,oe,re,L,Te),re.side=Li):A.renderBufferDirect($,J,oe,re,L,Te),L.onAfterRender(A,J,$,oe,re,Te)}function xt(L,J,$){J.isScene!==!0&&(J=Be);const oe=we.get(L),re=x.state.lights,Te=x.state.shadowsArray,Pe=re.state.version,Le=Fe.getParameters(L,re.state,Te,J,$),de=Fe.getProgramCacheKey(Le);let lt=oe.programs;oe.environment=L.isMeshStandardMaterial?J.environment:null,oe.fog=J.fog,oe.envMap=(L.isMeshStandardMaterial?te:F).get(L.envMap||oe.environment),lt===void 0&&(L.addEventListener("dispose",et),lt=new Map,oe.programs=lt);let Xe=lt.get(de);if(Xe!==void 0){if(oe.currentProgram===Xe&&oe.lightsStateVersion===Pe)return Er(L,Le),Xe}else Le.uniforms=Fe.getUniforms(L),L.onBuild($,Le,A),L.onBeforeCompile(Le,A),Xe=Fe.acquireProgram(Le,de),lt.set(de,Xe),oe.uniforms=Le.uniforms;const We=oe.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(We.clippingPlanes=tt.uniform),Er(L,Le),oe.needsLights=ce(L),oe.lightsStateVersion=Pe,oe.needsLights&&(We.ambientLightColor.value=re.state.ambient,We.lightProbe.value=re.state.probe,We.directionalLights.value=re.state.directional,We.directionalLightShadows.value=re.state.directionalShadow,We.spotLights.value=re.state.spot,We.spotLightShadows.value=re.state.spotShadow,We.rectAreaLights.value=re.state.rectArea,We.ltc_1.value=re.state.rectAreaLTC1,We.ltc_2.value=re.state.rectAreaLTC2,We.pointLights.value=re.state.point,We.pointLightShadows.value=re.state.pointShadow,We.hemisphereLights.value=re.state.hemi,We.directionalShadowMap.value=re.state.directionalShadowMap,We.directionalShadowMatrix.value=re.state.directionalShadowMatrix,We.spotShadowMap.value=re.state.spotShadowMap,We.spotLightMatrix.value=re.state.spotLightMatrix,We.spotLightMap.value=re.state.spotLightMap,We.pointShadowMap.value=re.state.pointShadowMap,We.pointShadowMatrix.value=re.state.pointShadowMatrix),oe.currentProgram=Xe,oe.uniformsList=null,Xe}function Zn(L){if(L.uniformsList===null){const J=L.currentProgram.getUniforms();L.uniformsList=S0.seqWithValue(J.seq,L.uniforms)}return L.uniformsList}function Er(L,J){const $=we.get(L);$.outputColorSpace=J.outputColorSpace,$.batching=J.batching,$.instancing=J.instancing,$.instancingColor=J.instancingColor,$.skinning=J.skinning,$.morphTargets=J.morphTargets,$.morphNormals=J.morphNormals,$.morphColors=J.morphColors,$.morphTargetsCount=J.morphTargetsCount,$.numClippingPlanes=J.numClippingPlanes,$.numIntersection=J.numClipIntersection,$.vertexAlphas=J.vertexAlphas,$.vertexTangents=J.vertexTangents,$.toneMapping=J.toneMapping}function U(L,J,$,oe,re){J.isScene!==!0&&(J=Be),G.resetTextureUnits();const Te=J.fog,Pe=oe.isMeshStandardMaterial?J.environment:null,Le=R===null?A.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Wo,de=(oe.isMeshStandardMaterial?te:F).get(oe.envMap||Pe),lt=oe.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,Xe=!!$.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),We=!!$.morphAttributes.position,dt=!!$.morphAttributes.normal,At=!!$.morphAttributes.color;let Mt=Oo;oe.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(Mt=A.toneMapping);const Bt=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,ct=Bt!==void 0?Bt.length:0,nt=we.get(oe),zt=x.state.lights;if(se===!0&&(le===!0||L!==P)){const Ot=L===P&&oe.id===I;tt.setState(oe,L,Ot)}let bt=!1;oe.version===nt.__version?(nt.needsLights&&nt.lightsStateVersion!==zt.state.version||nt.outputColorSpace!==Le||re.isBatchedMesh&&nt.batching===!1||!re.isBatchedMesh&&nt.batching===!0||re.isInstancedMesh&&nt.instancing===!1||!re.isInstancedMesh&&nt.instancing===!0||re.isSkinnedMesh&&nt.skinning===!1||!re.isSkinnedMesh&&nt.skinning===!0||re.isInstancedMesh&&nt.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&nt.instancingColor===!1&&re.instanceColor!==null||nt.envMap!==de||oe.fog===!0&&nt.fog!==Te||nt.numClippingPlanes!==void 0&&(nt.numClippingPlanes!==tt.numPlanes||nt.numIntersection!==tt.numIntersection)||nt.vertexAlphas!==lt||nt.vertexTangents!==Xe||nt.morphTargets!==We||nt.morphNormals!==dt||nt.morphColors!==At||nt.toneMapping!==Mt||Ce.isWebGL2===!0&&nt.morphTargetsCount!==ct)&&(bt=!0):(bt=!0,nt.__version=oe.version);let Rt=nt.currentProgram;bt===!0&&(Rt=xt(oe,J,re));let fn=!1,Tn=!1,Cn=!1;const Jt=Rt.getUniforms(),Xt=nt.uniforms;if(_e.useProgram(Rt.program)&&(fn=!0,Tn=!0,Cn=!0),oe.id!==I&&(I=oe.id,Tn=!0),fn||P!==L){Jt.setValue(W,"projectionMatrix",L.projectionMatrix),Jt.setValue(W,"viewMatrix",L.matrixWorldInverse);const Ot=Jt.map.cameraPosition;Ot!==void 0&&Ot.setValue(W,ke.setFromMatrixPosition(L.matrixWorld)),Ce.logarithmicDepthBuffer&&Jt.setValue(W,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Jt.setValue(W,"isOrthographic",L.isOrthographicCamera===!0),P!==L&&(P=L,Tn=!0,Cn=!0)}if(re.isSkinnedMesh){Jt.setOptional(W,re,"bindMatrix"),Jt.setOptional(W,re,"bindMatrixInverse");const Ot=re.skeleton;Ot&&(Ce.floatVertexTextures?(Ot.boneTexture===null&&Ot.computeBoneTexture(),Jt.setValue(W,"boneTexture",Ot.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}re.isBatchedMesh&&(Jt.setOptional(W,re,"batchingTexture"),Jt.setValue(W,"batchingTexture",re._matricesTexture,G));const Pn=$.morphAttributes;if((Pn.position!==void 0||Pn.normal!==void 0||Pn.color!==void 0&&Ce.isWebGL2===!0)&&Qe.update(re,$,Rt),(Tn||nt.receiveShadow!==re.receiveShadow)&&(nt.receiveShadow=re.receiveShadow,Jt.setValue(W,"receiveShadow",re.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(Xt.envMap.value=de,Xt.flipEnvMap.value=de.isCubeTexture&&de.isRenderTargetTexture===!1?-1:1),Tn&&(Jt.setValue(W,"toneMappingExposure",A.toneMappingExposure),nt.needsLights&&V(Xt,Cn),Te&&oe.fog===!0&&Ve.refreshFogUniforms(Xt,Te),Ve.refreshMaterialUniforms(Xt,oe,he,q,fe),S0.upload(W,Zn(nt),Xt,G)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(S0.upload(W,Zn(nt),Xt,G),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Jt.setValue(W,"center",re.center),Jt.setValue(W,"modelViewMatrix",re.modelViewMatrix),Jt.setValue(W,"normalMatrix",re.normalMatrix),Jt.setValue(W,"modelMatrix",re.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const Ot=oe.uniformsGroups;for(let Ut=0,bn=Ot.length;Ut<bn;Ut++)if(Ce.isWebGL2){const $i=Ot[Ut];ht.update($i,Rt),ht.bind($i,Rt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Rt}function V(L,J){L.ambientLightColor.needsUpdate=J,L.lightProbe.needsUpdate=J,L.directionalLights.needsUpdate=J,L.directionalLightShadows.needsUpdate=J,L.pointLights.needsUpdate=J,L.pointLightShadows.needsUpdate=J,L.spotLights.needsUpdate=J,L.spotLightShadows.needsUpdate=J,L.rectAreaLights.needsUpdate=J,L.hemisphereLights.needsUpdate=J}function ce(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(L,J,$){we.get(L.texture).__webglTexture=J,we.get(L.depthTexture).__webglTexture=$;const oe=we.get(L);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=$===void 0,oe.__autoAllocateDepthBuffer||Ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(L,J){const $=we.get(L);$.__webglFramebuffer=J,$.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(L,J=0,$=0){R=L,C=J,T=$;let oe=!0,re=null,Te=!1,Pe=!1;if(L){const de=we.get(L);de.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(W.FRAMEBUFFER,null),oe=!1):de.__webglFramebuffer===void 0?G.setupRenderTarget(L):de.__hasExternalTextures&&G.rebindTextures(L,we.get(L.texture).__webglTexture,we.get(L.depthTexture).__webglTexture);const lt=L.texture;(lt.isData3DTexture||lt.isDataArrayTexture||lt.isCompressedArrayTexture)&&(Pe=!0);const Xe=we.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(Xe[J])?re=Xe[J][$]:re=Xe[J],Te=!0):Ce.isWebGL2&&L.samples>0&&G.useMultisampledRTT(L)===!1?re=we.get(L).__webglMultisampledFramebuffer:Array.isArray(Xe)?re=Xe[$]:re=Xe,B.copy(L.viewport),O.copy(L.scissor),N=L.scissorTest}else B.copy(K).multiplyScalar(he).floor(),O.copy(k).multiplyScalar(he).floor(),N=Z;if(_e.bindFramebuffer(W.FRAMEBUFFER,re)&&Ce.drawBuffers&&oe&&_e.drawBuffers(L,re),_e.viewport(B),_e.scissor(O),_e.setScissorTest(N),Te){const de=we.get(L.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+J,de.__webglTexture,$)}else if(Pe){const de=we.get(L.texture),lt=J||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,de.__webglTexture,$||0,lt)}I=-1},this.readRenderTargetPixels=function(L,J,$,oe,re,Te,Pe){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Le=we.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&Pe!==void 0&&(Le=Le[Pe]),Le){_e.bindFramebuffer(W.FRAMEBUFFER,Le);try{const de=L.texture,lt=de.format,Xe=de.type;if(lt!==xr&&ze.convert(lt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const We=Xe===Ji&&(Ee.has("EXT_color_buffer_half_float")||Ce.isWebGL2&&Ee.has("EXT_color_buffer_float"));if(Xe!==or&&ze.convert(Xe)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Xe===Yi&&(Ce.isWebGL2||Ee.has("OES_texture_float")||Ee.has("WEBGL_color_buffer_float")))&&!We){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=L.width-oe&&$>=0&&$<=L.height-re&&W.readPixels(J,$,oe,re,ze.convert(lt),ze.convert(Xe),Te)}finally{const de=R!==null?we.get(R).__webglFramebuffer:null;_e.bindFramebuffer(W.FRAMEBUFFER,de)}}},this.copyFramebufferToTexture=function(L,J,$=0){const oe=Math.pow(2,-$),re=Math.floor(J.image.width*oe),Te=Math.floor(J.image.height*oe);G.setTexture2D(J,0),W.copyTexSubImage2D(W.TEXTURE_2D,$,0,0,L.x,L.y,re,Te),_e.unbindTexture()},this.copyTextureToTexture=function(L,J,$,oe=0){const re=J.image.width,Te=J.image.height,Pe=ze.convert($.format),Le=ze.convert($.type);G.setTexture2D($,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,$.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,$.unpackAlignment),J.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,oe,L.x,L.y,re,Te,Pe,Le,J.image.data):J.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,oe,L.x,L.y,J.mipmaps[0].width,J.mipmaps[0].height,Pe,J.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,oe,L.x,L.y,Pe,Le,J.image),oe===0&&$.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),_e.unbindTexture()},this.copyTextureToTexture3D=function(L,J,$,oe,re=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Te=L.max.x-L.min.x+1,Pe=L.max.y-L.min.y+1,Le=L.max.z-L.min.z+1,de=ze.convert(oe.format),lt=ze.convert(oe.type);let Xe;if(oe.isData3DTexture)G.setTexture3D(oe,0),Xe=W.TEXTURE_3D;else if(oe.isDataArrayTexture||oe.isCompressedArrayTexture)G.setTexture2DArray(oe,0),Xe=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,oe.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,oe.unpackAlignment);const We=W.getParameter(W.UNPACK_ROW_LENGTH),dt=W.getParameter(W.UNPACK_IMAGE_HEIGHT),At=W.getParameter(W.UNPACK_SKIP_PIXELS),Mt=W.getParameter(W.UNPACK_SKIP_ROWS),Bt=W.getParameter(W.UNPACK_SKIP_IMAGES),ct=$.isCompressedTexture?$.mipmaps[re]:$.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,ct.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,ct.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,L.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,L.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,L.min.z),$.isDataTexture||$.isData3DTexture?W.texSubImage3D(Xe,re,J.x,J.y,J.z,Te,Pe,Le,de,lt,ct.data):$.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(Xe,re,J.x,J.y,J.z,Te,Pe,Le,de,ct.data)):W.texSubImage3D(Xe,re,J.x,J.y,J.z,Te,Pe,Le,de,lt,ct),W.pixelStorei(W.UNPACK_ROW_LENGTH,We),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,dt),W.pixelStorei(W.UNPACK_SKIP_PIXELS,At),W.pixelStorei(W.UNPACK_SKIP_ROWS,Mt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Bt),re===0&&oe.generateMipmaps&&W.generateMipmap(Xe),_e.unbindTexture()},this.initTexture=function(L){L.isCubeTexture?G.setTextureCube(L,0):L.isData3DTexture?G.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?G.setTexture2DArray(L,0):G.setTexture2D(L,0),_e.unbindTexture()},this.resetState=function(){C=0,T=0,R=null,_e.reset(),Ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return co}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===Jy?"display-p3":"srgb",n.unpackColorSpace=En.workingColorSpace===mm?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===wi?No:pm}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===No?wi:Wo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class V3 extends Rw{}V3.prototype.isWebGL1Renderer=!0;class e_{constructor(t,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ke(t),this.density=n}clone(){return new e_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class t_{constructor(t,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ke(t),this.near=n,this.far=r}clone(){return new t_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ll extends tn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class _m{constructor(t,n){this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.usage=Wp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ps()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,n,r){t*=this.stride,r*=n.stride;for(let s=0,o=this.stride;s<o;s++)this.array[t+s]=n.array[r+s];return this}set(t,n=0){return this.array.set(t,n),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Pr=new Y;class Ul{constructor(t,n,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let n=0,r=this.data.count;n<r;n++)Pr.fromBufferAttribute(this,n),Pr.applyMatrix4(t),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)Pr.fromBufferAttribute(this,n),Pr.applyNormalMatrix(t),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)Pr.fromBufferAttribute(this,n),Pr.transformDirection(t),this.setXYZ(n,Pr.x,Pr.y,Pr.z);return this}setX(t,n){return this.normalized&&(n=Zt(n,this.array)),this.data.array[t*this.data.stride+this.offset]=n,this}setY(t,n){return this.normalized&&(n=Zt(n,this.array)),this.data.array[t*this.data.stride+this.offset+1]=n,this}setZ(t,n){return this.normalized&&(n=Zt(n,this.array)),this.data.array[t*this.data.stride+this.offset+2]=n,this}setW(t,n){return this.normalized&&(n=Zt(n,this.array)),this.data.array[t*this.data.stride+this.offset+3]=n,this}getX(t){let n=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(n=Kr(n,this.array)),n}getY(t){let n=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(n=Kr(n,this.array)),n}getZ(t){let n=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(n=Kr(n,this.array)),n}getW(t){let n=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(n=Kr(n,this.array)),n}setXY(t,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this}setXYZ(t,n,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array),s=Zt(s,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=s,this}setXYZW(t,n,r,s,o){return t=t*this.data.stride+this.offset,this.normalized&&(n=Zt(n,this.array),r=Zt(r,this.array),s=Zt(s,this.array),o=Zt(o,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=s,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[s+o])}return new $t(new this.array.constructor(n),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ul(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Pw extends ci{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let th;const md=new Y,nh=new Y,ih=new Y,rh=new De,gd=new De,W3=new at,fv=new Y,vd=new Y,dv=new Y,wR=new De,C1=new De,TR=new De;class X3 extends tn{constructor(t=new Pw){if(super(),this.isSprite=!0,this.type="Sprite",th===void 0){th=new It;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _m(n,5);th.setIndex([0,1,2,0,2,3]),th.setAttribute("position",new Ul(r,3,0,!1)),th.setAttribute("uv",new Ul(r,2,3,!1))}this.geometry=th,this.material=t,this.center=new De(.5,.5)}raycast(t,n){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),nh.setFromMatrixScale(this.matrixWorld),W3.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ih.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&nh.multiplyScalar(-ih.z);const r=this.material.rotation;let s,o;r!==0&&(o=Math.cos(r),s=Math.sin(r));const a=this.center;pv(fv.set(-.5,-.5,0),ih,a,nh,s,o),pv(vd.set(.5,-.5,0),ih,a,nh,s,o),pv(dv.set(.5,.5,0),ih,a,nh,s,o),wR.set(0,0),C1.set(1,0),TR.set(1,1);let l=t.ray.intersectTriangle(fv,vd,dv,!1,md);if(l===null&&(pv(vd.set(-.5,.5,0),ih,a,nh,s,o),C1.set(0,1),l=t.ray.intersectTriangle(fv,dv,vd,!1,md),l===null))return;const c=t.ray.origin.distanceTo(md);c<t.near||c>t.far||n.push({distance:c,point:md.clone(),uv:Jr.getInterpolation(md,fv,vd,dv,wR,C1,TR,new De),face:null,object:this})}copy(t,n){return super.copy(t,n),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function pv(i,t,n,r,s,o){rh.subVectors(i,n).addScalar(.5).multiply(r),s!==void 0?(gd.x=o*rh.x-s*rh.y,gd.y=s*rh.x+o*rh.y):gd.copy(rh),i.copy(t),i.x+=gd.x,i.y+=gd.y,i.applyMatrix4(W3)}const mv=new Y,CR=new Y;class j3 extends tn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const n=t.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,n=0,r=0){n=Math.abs(n);const s=this.levels;let o;for(o=0;o<s.length&&!(n<s[o].distance);o++);return s.splice(o,0,{distance:n,hysteresis:r,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const n=this.levels;if(n.length>0){let r,s;for(r=1,s=n.length;r<s;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),t<o)break}return n[r-1].object}return null}raycast(t,n){if(this.levels.length>0){mv.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(mv);this.getObjectForDistance(s).raycast(t,n)}}update(t){const n=this.levels;if(n.length>1){mv.setFromMatrixPosition(t.matrixWorld),CR.setFromMatrixPosition(this.matrixWorld);const r=mv.distanceTo(CR)/t.zoom;n[0].object.visible=!0;let s,o;for(s=1,o=n.length;s<o;s++){let a=n[s].distance;if(n[s].object.visible&&(a-=a*n[s].hysteresis),r>=a)n[s-1].object.visible=!1,n[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<o;s++)n[s].object.visible=!1}}toJSON(t){const n=super.toJSON(t);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let s=0,o=r.length;s<o;s++){const a=r[s];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const bR=new Y,RR=new qt,PR=new qt,cW=new Y,BR=new at,gv=new Y,b1=new Oi,IR=new at,R1=new Mf;class n_ extends In{constructor(t,n){super(t,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=WA,this.bindMatrix=new at,this.bindMatrixInverse=new at,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qi),this.boundingBox.makeEmpty();const n=t.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,gv),this.boundingBox.expandByPoint(gv)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Oi),this.boundingSphere.makeEmpty();const n=t.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,gv),this.boundingSphere.expandByPoint(gv)}copy(t,n){return super.copy(t,n),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,n){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),b1.copy(this.boundingSphere),b1.applyMatrix4(s),t.ray.intersectsSphere(b1)!==!1&&(IR.copy(s).invert(),R1.copy(t.ray).applyMatrix4(IR),!(this.boundingBox!==null&&R1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,n,R1)))}getVertexPosition(t,n){return super.getVertexPosition(t,n),this.applyBoneTransform(t,n),n}bind(t,n){this.skeleton=t,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new qt,n=this.geometry.attributes.skinWeight;for(let r=0,s=n.count;r<s;r++){t.fromBufferAttribute(n,r);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),n.setXYZW(r,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===WA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===c3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,n){const r=this.skeleton,s=this.geometry;RR.fromBufferAttribute(s.attributes.skinIndex,t),PR.fromBufferAttribute(s.attributes.skinWeight,t),bR.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const a=PR.getComponent(o);if(a!==0){const l=RR.getComponent(o);BR.multiplyMatrices(r.bones[l].matrixWorld,r.boneInverses[l]),n.addScaledVector(cW.copy(bR).applyMatrix4(BR),a)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,n)}}class ff extends tn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Kc extends Sn{constructor(t=null,n=1,r=1,s,o,a,l,c,u=Un,h=Un,f,p){super(null,a,l,c,u,h,s,o,f,p),this.isDataTexture=!0,this.image={data:t,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DR=new at,uW=new at;class Tf{constructor(t=[],n=[]){this.uuid=ps(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),n.length===0)this.calculateInverses();else if(t.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new at)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,n=this.bones.length;t<n;t++){const r=new at;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const t=this.bones,n=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let o=0,a=t.length;o<a;o++){const l=t[o]?t[o].matrixWorld:uW;DR.multiplyMatrices(l,n[o]),DR.toArray(r,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Tf(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4);n.set(this.boneMatrices);const r=new Kc(n,t,t,xr,Yi);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(t){for(let n=0,r=this.bones.length;n<r;n++){const s=this.bones[n];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,n){this.uuid=t.uuid;for(let r=0,s=t.bones.length;r<s;r++){const o=t.bones[r];let a=n[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new ff),this.bones.push(a),this.boneInverses.push(new at().fromArray(t.boneInverses[r]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let s=0,o=n.length;s<o;s++){const a=n[s];t.bones.push(a.uuid);const l=r[s];t.boneInverses.push(l.toArray())}return t}}class ou extends $t{constructor(t,n,r,s=1){super(t,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const sh=new at,LR=new at,vv=[],UR=new Qi,hW=new at,yd=new In,_d=new Oi;class Bw extends In{constructor(t,n,r){super(t,n),this.isInstancedMesh=!0,this.instanceMatrix=new ou(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,hW)}computeBoundingBox(){const t=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Qi),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,sh),UR.copy(t.boundingBox).applyMatrix4(sh),this.boundingBox.union(UR)}computeBoundingSphere(){const t=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Oi),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,sh),_d.copy(t.boundingSphere).applyMatrix4(sh),this.boundingSphere.union(_d)}copy(t,n){return super.copy(t,n),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,n){n.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,n){n.fromArray(this.instanceMatrix.array,t*16)}raycast(t,n){const r=this.matrixWorld,s=this.count;if(yd.geometry=this.geometry,yd.material=this.material,yd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_d.copy(this.boundingSphere),_d.applyMatrix4(r),t.ray.intersectsSphere(_d)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,sh),LR.multiplyMatrices(r,sh),yd.matrixWorld=LR,yd.raycast(t,vv);for(let a=0,l=vv.length;a<l;a++){const c=vv[a];c.instanceId=o,c.object=this,n.push(c)}vv.length=0}}setColorAt(t,n){this.instanceColor===null&&(this.instanceColor=new ou(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,n){n.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function fW(i,t){return i.z-t.z}function dW(i,t){return t.z-i.z}class pW{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,n){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const o=r[this.index];s.push(o),this.index++,o.start=t.start,o.count=t.count,o.z=n}reset(){this.list.length=0,this.index=0}}const oh="batchId",qa=new at,FR=new at,mW=new at,OR=new at,P1=new vm,yv=new Qi,fc=new Oi,xd=new Y,B1=new pW,vr=new In,_v=[];function gW(i,t,n=0){const r=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let o=0;o<s;o++)for(let a=0;a<r;a++)t.setComponent(o+n,a,i.getComponent(o,a))}else t.array.set(i.array,n*r);t.needsUpdate=!0}class Y3 extends In{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,n,r=n*2,s){super(new It,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let t=Math.sqrt(this._maxGeometryCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4),r=new Kc(n,t,t,xr,Yi);this._matricesTexture=r}_initializeGeometry(t){const n=this.geometry,r=this._maxVertexCount,s=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const l in t.attributes){const c=t.getAttribute(l),{array:u,itemSize:h,normalized:f}=c,p=new u.constructor(r*h),g=new c.constructor(p,h,f);g.setUsage(c.usage),n.setAttribute(l,g)}if(t.getIndex()!==null){const l=r>65536?new Uint32Array(o):new Uint16Array(o);n.setIndex(new $t(l,1))}const a=s>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(oh,new $t(a,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(oh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${oh}"`);const n=this.geometry;if(!!t.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===oh)continue;if(!t.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const s=t.getAttribute(r),o=n.getAttribute(r);if(s.itemSize!==o.itemSize||s.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qi);const t=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let s=0;s<t;s++)r[s]!==!1&&(this.getMatrixAt(s,qa),this.getBoundingBoxAt(s,yv).applyMatrix4(qa),n.union(yv))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Oi);const t=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let s=0;s<t;s++)r[s]!==!1&&(this.getMatrixAt(s,qa),this.getBoundingSphereAt(s,fc).applyMatrix4(qa),n.union(fc))}addGeometry(t,n=-1,r=-1){if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const a=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(o=a[a.length-1]),n===-1?s.vertexCount=t.getAttribute("position").count:s.vertexCount=n,o===null?s.vertexStart=0:s.vertexStart=o.vertexStart+o.vertexCount;const u=t.getIndex(),h=u!==null;if(h&&(r===-1?s.indexCount=u.count:s.indexCount=r,o===null?s.indexStart=0:s.indexStart=o.indexStart+o.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,g=this._matricesTexture,v=this._matricesTexture.image.data;f.push(!0),p.push(!0);const _=this._geometryCount;this._geometryCount++,mW.toArray(v,_*16),g.needsUpdate=!0,a.push(s),l.push({start:h?s.indexStart:s.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new Qi,sphereInitialized:!1,sphere:new Oi});const x=this.geometry.getAttribute(oh);for(let y=0;y<s.vertexCount;y++)x.setX(s.vertexStart+y,_);return x.needsUpdate=!0,this.setGeometryAt(_,t),_}setGeometryAt(t,n){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,s=r.getIndex()!==null,o=r.getIndex(),a=n.getIndex(),l=this._reservedRanges[t];if(s&&a.count>l.indexCount||n.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,u=l.vertexCount;for(const g in r.attributes){if(g===oh)continue;const v=n.getAttribute(g),_=r.getAttribute(g);gW(v,_,c);const x=v.itemSize;for(let y=v.count,S=u;y<S;y++){const A=c+y;for(let M=0;M<x;M++)_.setComponent(A,M,0)}_.needsUpdate=!0}if(s){const g=l.indexStart;for(let v=0;v<a.count;v++)o.setX(g+v,c+a.getX(v));for(let v=a.count,_=l.indexCount;v<_;v++)o.setX(g+v,c);o.needsUpdate=!0}const h=this._bounds[t];n.boundingBox!==null?(h.box.copy(n.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,n.boundingSphere!==null?(h.sphere.copy(n.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const f=this._drawRanges[t],p=n.getAttribute("position");return f.count=s?a.count:p.count,this._visibilityChanged=!0,t}deleteGeometry(t){const n=this._active;return t>=n.length||n[t]===!1?this:(n[t]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(t,n){if(this._active[t]===!1)return this;const s=this._bounds[t],o=s.box,a=this.geometry;if(s.boxInitialized===!1){o.makeEmpty();const l=a.index,c=a.attributes.position,u=this._drawRanges[t];for(let h=u.start,f=u.start+u.count;h<f;h++){let p=h;l&&(p=l.getX(p)),o.expandByPoint(xd.fromBufferAttribute(c,p))}s.boxInitialized=!0}return n.copy(o),n}getBoundingSphereAt(t,n){if(this._active[t]===!1)return this;const s=this._bounds[t],o=s.sphere,a=this.geometry;if(s.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(t,yv),yv.getCenter(o.center);const l=a.index,c=a.attributes.position,u=this._drawRanges[t];let h=0;for(let f=u.start,p=u.start+u.count;f<p;f++){let g=f;l&&(g=l.getX(g)),xd.fromBufferAttribute(c,g),h=Math.max(h,o.center.distanceToSquared(xd))}o.radius=Math.sqrt(h),s.sphereInitialized=!0}return n.copy(o),n}setMatrixAt(t,n){const r=this._active,s=this._matricesTexture,o=this._matricesTexture.image.data,a=this._geometryCount;return t>=a||r[t]===!1?this:(n.toArray(o,t*16),s.needsUpdate=!0,this)}getMatrixAt(t,n){const r=this._active,s=this._matricesTexture.image.data,o=this._geometryCount;return t>=o||r[t]===!1?null:n.fromArray(s,t*16)}setVisibleAt(t,n){const r=this._visibility,s=this._active,o=this._geometryCount;return t>=o||s[t]===!1||r[t]===n?this:(r[t]=n,this._visibilityChanged=!0,this)}getVisibleAt(t){const n=this._visibility,r=this._active,s=this._geometryCount;return t>=s||r[t]===!1?!1:n[t]}raycast(t,n){const r=this._visibility,s=this._active,o=this._drawRanges,a=this._geometryCount,l=this.matrixWorld,c=this.geometry;vr.material=this.material,vr.geometry.index=c.index,vr.geometry.attributes=c.attributes,vr.geometry.boundingBox===null&&(vr.geometry.boundingBox=new Qi),vr.geometry.boundingSphere===null&&(vr.geometry.boundingSphere=new Oi);for(let u=0;u<a;u++){if(!r[u]||!s[u])continue;const h=o[u];vr.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(u,vr.matrixWorld).premultiply(l),this.getBoundingBoxAt(u,vr.geometry.boundingBox),this.getBoundingSphereAt(u,vr.geometry.boundingSphere),vr.raycast(t,_v);for(let f=0,p=_v.length;f<p;f++){const g=_v[f];g.object=this,g.batchId=u,n.push(g)}_v.length=0}vr.material=null,vr.geometry.index=null,vr.geometry.attributes={},vr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(n=>({...n})),this._reservedRanges=t._reservedRanges.map(n=>({...n})),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(t,n,r,s,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._visibility,u=this._multiDrawStarts,h=this._multiDrawCounts,f=this._drawRanges,p=this.perObjectFrustumCulled;p&&(OR.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),P1.setFromProjectionMatrix(OR,t.isWebGPURenderer?cf:co));let g=0;if(this.sortObjects){FR.copy(this.matrixWorld).invert(),xd.setFromMatrixPosition(r.matrixWorld).applyMatrix4(FR);for(let x=0,y=c.length;x<y;x++)if(c[x]){this.getMatrixAt(x,qa),this.getBoundingSphereAt(x,fc).applyMatrix4(qa);let S=!1;if(p&&(S=!P1.intersectsSphere(fc)),!S){const A=xd.distanceTo(fc.center);B1.push(f[x],A)}}const v=B1.list,_=this.customSort;_===null?v.sort(o.transparent?dW:fW):_.call(this,v,r);for(let x=0,y=v.length;x<y;x++){const S=v[x];u[g]=S.start*l,h[g]=S.count,g++}B1.reset()}else for(let v=0,_=c.length;v<_;v++)if(c[v]){let x=!1;if(p&&(this.getMatrixAt(v,qa),this.getBoundingSphereAt(v,fc).applyMatrix4(qa),x=!P1.intersectsSphere(fc)),!x){const y=f[v];u[g]=y.start*l,h[g]=y.count,g++}}this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(t,n,r,s,o,a){this.onBeforeRender(t,null,s,o,a)}}class lr extends ci{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const NR=new Y,kR=new Y,zR=new at,I1=new Mf,xv=new Oi;class Xo extends tn{constructor(t=new It,n=new lr){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[0];for(let s=1,o=n.count;s<o;s++)NR.fromBufferAttribute(n,s-1),kR.fromBufferAttribute(n,s),r[s]=r[s-1],r[s]+=NR.distanceTo(kR);t.setAttribute("lineDistance",new pt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,n){const r=this.geometry,s=this.matrixWorld,o=t.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xv.copy(r.boundingSphere),xv.applyMatrix4(s),xv.radius+=o,t.ray.intersectsSphere(xv)===!1)return;zR.copy(s).invert(),I1.copy(t.ray).applyMatrix4(zR);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=new Y,h=new Y,f=new Y,p=new Y,g=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const y=Math.max(0,a.start),S=Math.min(v.count,a.start+a.count);for(let A=y,M=S-1;A<M;A+=g){const C=v.getX(A),T=v.getX(A+1);if(u.fromBufferAttribute(x,C),h.fromBufferAttribute(x,T),I1.distanceSqToSegment(u,h,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const I=t.ray.origin.distanceTo(p);I<t.near||I>t.far||n.push({distance:I,point:f.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,a.start),S=Math.min(x.count,a.start+a.count);for(let A=y,M=S-1;A<M;A+=g){if(u.fromBufferAttribute(x,A),h.fromBufferAttribute(x,A+1),I1.distanceSqToSegment(u,h,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const T=t.ray.origin.distanceTo(p);T<t.near||T>t.far||n.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const l=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}}const GR=new Y,HR=new Y;class yo extends Xo{constructor(t,n){super(t,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[];for(let s=0,o=n.count;s<o;s+=2)GR.fromBufferAttribute(n,s),HR.fromBufferAttribute(n,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+GR.distanceTo(HR);t.setAttribute("lineDistance",new pt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Iw extends Xo{constructor(t,n){super(t,n),this.isLineLoop=!0,this.type="LineLoop"}}class i_ extends ci{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const VR=new at,SE=new Mf,Sv=new Oi,Av=new Y;class Dw extends tn{constructor(t=new It,n=new i_){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,n){const r=this.geometry,s=this.matrixWorld,o=t.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Sv.copy(r.boundingSphere),Sv.applyMatrix4(s),Sv.radius+=o,t.ray.intersectsSphere(Sv)===!1)return;VR.copy(s).invert(),SE.copy(t.ray).applyMatrix4(VR);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=r.index,f=r.attributes.position;if(u!==null){const p=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let v=p,_=g;v<_;v++){const x=u.getX(v);Av.fromBufferAttribute(f,x),WR(Av,x,c,s,t,n,this)}}else{const p=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let v=p,_=g;v<_;v++)Av.fromBufferAttribute(f,v),WR(Av,v,c,s,t,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const s=n[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=s.length;o<a;o++){const l=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}}function WR(i,t,n,r,s,o,a){const l=SE.distanceSqToPoint(i);if(l<n){const c=new Y;SE.closestPointToPoint(i,c),c.applyMatrix4(r);const u=s.ray.origin.distanceTo(c);if(u<s.near||u>s.far)return;o.push({distance:u,distanceToRay:Math.sqrt(l),point:c,index:t,face:null,object:a})}}class vW extends Sn{constructor(t,n,r,s,o,a,l,c,u){super(t,n,r,s,o,a,l,c,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:ln,this.magFilter=o!==void 0?o:ln,this.generateMipmaps=!1;const h=this;function f(){h.needsUpdate=!0,t.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class yW extends Sn{constructor(t,n){super({width:t,height:n}),this.isFramebufferTexture=!0,this.magFilter=Un,this.minFilter=Un,this.generateMipmaps=!1,this.needsUpdate=!0}}class r_ extends Sn{constructor(t,n,r,s,o,a,l,c,u,h,f,p){super(null,a,l,c,u,h,s,o,f,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class _W extends r_{constructor(t,n,r,s,o,a){super(t,n,r,o,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ui}}class xW extends r_{constructor(t,n,r){super(void 0,t[0].width,t[0].height,n,r,Go),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class SW extends Sn{constructor(t,n,r,s,o,a,l,c,u){super(t,n,r,s,o,a,l,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ys{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,n){const r=this.getUtoTmapping(t);return this.getPoint(r,n)}getPoints(t=5){const n=[];for(let r=0;r<=t;r++)n.push(this.getPoint(r/t));return n}getSpacedPoints(t=5){const n=[];for(let r=0;r<=t;r++)n.push(this.getPointAt(r/t));return n}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,s=this.getPoint(0),o=0;n.push(0);for(let a=1;a<=t;a++)r=this.getPoint(a/t),o+=r.distanceTo(s),n.push(o),s=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,n){const r=this.getLengths();let s=0;const o=r.length;let a;n?a=n:a=t*r[o-1];let l=0,c=o-1,u;for(;l<=c;)if(s=Math.floor(l+(c-l)/2),u=r[s]-a,u<0)l=s+1;else if(u>0)c=s-1;else{c=s;break}if(s=c,r[s]===a)return s/(o-1);const h=r[s],p=r[s+1]-h,g=(a-h)/p;return(s+g)/(o-1)}getTangent(t,n){let s=t-1e-4,o=t+1e-4;s<0&&(s=0),o>1&&(o=1);const a=this.getPoint(s),l=this.getPoint(o),c=n||(a.isVector2?new De:new Y);return c.copy(l).sub(a).normalize(),c}getTangentAt(t,n){const r=this.getUtoTmapping(t);return this.getTangent(r,n)}computeFrenetFrames(t,n){const r=new Y,s=[],o=[],a=[],l=new Y,c=new at;for(let g=0;g<=t;g++){const v=g/t;s[g]=this.getTangentAt(v,new Y)}o[0]=new Y,a[0]=new Y;let u=Number.MAX_VALUE;const h=Math.abs(s[0].x),f=Math.abs(s[0].y),p=Math.abs(s[0].z);h<=u&&(u=h,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),p<=u&&r.set(0,0,1),l.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],l),a[0].crossVectors(s[0],o[0]);for(let g=1;g<=t;g++){if(o[g]=o[g-1].clone(),a[g]=a[g-1].clone(),l.crossVectors(s[g-1],s[g]),l.length()>Number.EPSILON){l.normalize();const v=Math.acos(li(s[g-1].dot(s[g]),-1,1));o[g].applyMatrix4(c.makeRotationAxis(l,v))}a[g].crossVectors(s[g],o[g])}if(n===!0){let g=Math.acos(li(o[0].dot(o[t]),-1,1));g/=t,s[0].dot(l.crossVectors(o[0],o[t]))>0&&(g=-g);for(let v=1;v<=t;v++)o[v].applyMatrix4(c.makeRotationAxis(s[v],g*v)),a[v].crossVectors(s[v],o[v])}return{tangents:s,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class s_ extends Ys{constructor(t=0,n=0,r=1,s=1,o=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=n,this.xRadius=r,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(t,n){const r=n||new De,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(a?o=0:o=s),this.aClockwise===!0&&!a&&(o===s?o=-s:o=o-s);const l=this.aStartAngle+t*o;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=c-this.aX,g=u-this.aY;c=p*h-g*f+this.aX,u=p*f+g*h+this.aY}return r.set(c,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class J3 extends s_{constructor(t,n,r,s,o,a){super(t,n,r,r,s,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Lw(){let i=0,t=0,n=0,r=0;function s(o,a,l,c){i=o,t=l,n=-3*o+3*a-2*l-c,r=2*o-2*a+l+c}return{initCatmullRom:function(o,a,l,c,u){s(a,l,u*(l-o),u*(c-a))},initNonuniformCatmullRom:function(o,a,l,c,u,h,f){let p=(a-o)/u-(l-o)/(u+h)+(l-a)/h,g=(l-a)/h-(c-a)/(h+f)+(c-l)/f;p*=h,g*=h,s(a,l,p,g)},calc:function(o){const a=o*o,l=a*o;return i+t*o+n*a+r*l}}}const Ev=new Y,D1=new Lw,L1=new Lw,U1=new Lw;class K3 extends Ys{constructor(t=[],n=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=n,this.curveType=r,this.tension=s}getPoint(t,n=new Y){const r=n,s=this.points,o=s.length,a=(o-(this.closed?0:1))*t;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:c===0&&l===o-1&&(l=o-2,c=1);let u,h;this.closed||l>0?u=s[(l-1)%o]:(Ev.subVectors(s[0],s[1]).add(s[0]),u=Ev);const f=s[l%o],p=s[(l+1)%o];if(this.closed||l+2<o?h=s[(l+2)%o]:(Ev.subVectors(s[o-1],s[o-2]).add(s[o-1]),h=Ev),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(f),g),_=Math.pow(f.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(h),g);_<1e-4&&(_=1),v<1e-4&&(v=_),x<1e-4&&(x=_),D1.initNonuniformCatmullRom(u.x,f.x,p.x,h.x,v,_,x),L1.initNonuniformCatmullRom(u.y,f.y,p.y,h.y,v,_,x),U1.initNonuniformCatmullRom(u.z,f.z,p.z,h.z,v,_,x)}else this.curveType==="catmullrom"&&(D1.initCatmullRom(u.x,f.x,p.x,h.x,this.tension),L1.initCatmullRom(u.y,f.y,p.y,h.y,this.tension),U1.initCatmullRom(u.z,f.z,p.z,h.z,this.tension));return r.set(D1.calc(c),L1.calc(c),U1.calc(c)),r}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(new Y().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function XR(i,t,n,r,s){const o=(r-t)*.5,a=(s-n)*.5,l=i*i,c=i*l;return(2*n-2*r+o+a)*c+(-3*n+3*r-2*o-a)*l+o*i+n}function AW(i,t){const n=1-i;return n*n*t}function EW(i,t){return 2*(1-i)*i*t}function MW(i,t){return i*i*t}function op(i,t,n,r){return AW(i,t)+EW(i,n)+MW(i,r)}function wW(i,t){const n=1-i;return n*n*n*t}function TW(i,t){const n=1-i;return 3*n*n*i*t}function CW(i,t){return 3*(1-i)*i*i*t}function bW(i,t){return i*i*i*t}function ap(i,t,n,r,s){return wW(i,t)+TW(i,n)+CW(i,r)+bW(i,s)}class Uw extends Ys{constructor(t=new De,n=new De,r=new De,s=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=n,this.v2=r,this.v3=s}getPoint(t,n=new De){const r=n,s=this.v0,o=this.v1,a=this.v2,l=this.v3;return r.set(ap(t,s.x,o.x,a.x,l.x),ap(t,s.y,o.y,a.y,l.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Z3 extends Ys{constructor(t=new Y,n=new Y,r=new Y,s=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=n,this.v2=r,this.v3=s}getPoint(t,n=new Y){const r=n,s=this.v0,o=this.v1,a=this.v2,l=this.v3;return r.set(ap(t,s.x,o.x,a.x,l.x),ap(t,s.y,o.y,a.y,l.y),ap(t,s.z,o.z,a.z,l.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Fw extends Ys{constructor(t=new De,n=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=n}getPoint(t,n=new De){const r=n;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new De){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Q3 extends Ys{constructor(t=new Y,n=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=n}getPoint(t,n=new Y){const r=n;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new Y){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ow extends Ys{constructor(t=new De,n=new De,r=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=n,this.v2=r}getPoint(t,n=new De){const r=n,s=this.v0,o=this.v1,a=this.v2;return r.set(op(t,s.x,o.x,a.x),op(t,s.y,o.y,a.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Nw extends Ys{constructor(t=new Y,n=new Y,r=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=n,this.v2=r}getPoint(t,n=new Y){const r=n,s=this.v0,o=this.v1,a=this.v2;return r.set(op(t,s.x,o.x,a.x),op(t,s.y,o.y,a.y),op(t,s.z,o.z,a.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class kw extends Ys{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,n=new De){const r=n,s=this.points,o=(s.length-1)*t,a=Math.floor(o),l=o-a,c=s[a===0?a:a-1],u=s[a],h=s[a>s.length-2?s.length-1:a+1],f=s[a>s.length-3?s.length-1:a+2];return r.set(XR(l,c.x,u.x,h.x,f.x),XR(l,c.y,u.y,h.y,f.y)),r}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){const s=this.points[n];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const s=t.points[n];this.points.push(new De().fromArray(s))}return this}}var ay=Object.freeze({__proto__:null,ArcCurve:J3,CatmullRomCurve3:K3,CubicBezierCurve:Uw,CubicBezierCurve3:Z3,EllipseCurve:s_,LineCurve:Fw,LineCurve3:Q3,QuadraticBezierCurve:Ow,QuadraticBezierCurve3:Nw,SplineCurve:kw});class q3 extends Ys{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(n)){const r=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ay[r](n,t))}return this}getPoint(t,n){const r=t*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=r){const a=s[o]-r,l=this.curves[o],c=l.getLength(),u=c===0?0:1-a/c;return l.getPointAt(u,n)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let n=0;for(let r=0,s=this.curves.length;r<s;r++)n+=this.curves[r].getLength(),t.push(n);return this.cacheLengths=t,t}getSpacedPoints(t=40){const n=[];for(let r=0;r<=t;r++)n.push(this.getPoint(r/t));return this.autoClose&&n.push(n[0]),n}getPoints(t=12){const n=[];let r;for(let s=0,o=this.curves;s<o.length;s++){const a=o[s],l=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,c=a.getPoints(l);for(let u=0;u<c.length;u++){const h=c[u];r&&r.equals(h)||(n.push(h),r=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(t){super.copy(t),this.curves=[];for(let n=0,r=t.curves.length;n<r;n++){const s=t.curves[n];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const s=this.curves[n];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let n=0,r=t.curves.length;n<r;n++){const s=t.curves[n];this.curves.push(new ay[s.type]().fromJSON(s))}return this}}class jp extends q3{constructor(t){super(),this.type="Path",this.currentPoint=new De,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let n=1,r=t.length;n<r;n++)this.lineTo(t[n].x,t[n].y);return this}moveTo(t,n){return this.currentPoint.set(t,n),this}lineTo(t,n){const r=new Fw(this.currentPoint.clone(),new De(t,n));return this.curves.push(r),this.currentPoint.set(t,n),this}quadraticCurveTo(t,n,r,s){const o=new Ow(this.currentPoint.clone(),new De(t,n),new De(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}bezierCurveTo(t,n,r,s,o,a){const l=new Uw(this.currentPoint.clone(),new De(t,n),new De(r,s),new De(o,a));return this.curves.push(l),this.currentPoint.set(o,a),this}splineThru(t){const n=[this.currentPoint.clone()].concat(t),r=new kw(n);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,n,r,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+l,n+c,r,s,o,a),this}absarc(t,n,r,s,o,a){return this.absellipse(t,n,r,r,s,o,a),this}ellipse(t,n,r,s,o,a,l,c){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+u,n+h,r,s,o,a,l,c),this}absellipse(t,n,r,s,o,a,l,c){const u=new s_(t,n,r,s,o,a,l,c);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class xm extends It{constructor(t=[new De(0,-.5),new De(.5,0),new De(0,.5)],n=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:n,phiStart:r,phiLength:s},n=Math.floor(n),s=li(s,0,Math.PI*2);const o=[],a=[],l=[],c=[],u=[],h=1/n,f=new Y,p=new De,g=new Y,v=new Y,_=new Y;let x=0,y=0;for(let S=0;S<=t.length-1;S++)switch(S){case 0:x=t[S+1].x-t[S].x,y=t[S+1].y-t[S].y,g.x=y*1,g.y=-x,g.z=y*0,_.copy(g),g.normalize(),c.push(g.x,g.y,g.z);break;case t.length-1:c.push(_.x,_.y,_.z);break;default:x=t[S+1].x-t[S].x,y=t[S+1].y-t[S].y,g.x=y*1,g.y=-x,g.z=y*0,v.copy(g),g.x+=_.x,g.y+=_.y,g.z+=_.z,g.normalize(),c.push(g.x,g.y,g.z),_.copy(v)}for(let S=0;S<=n;S++){const A=r+S*h*s,M=Math.sin(A),C=Math.cos(A);for(let T=0;T<=t.length-1;T++){f.x=t[T].x*M,f.y=t[T].y,f.z=t[T].x*C,a.push(f.x,f.y,f.z),p.x=S/n,p.y=T/(t.length-1),l.push(p.x,p.y);const R=c[3*T+0]*M,I=c[3*T+1],P=c[3*T+0]*C;u.push(R,I,P)}}for(let S=0;S<n;S++)for(let A=0;A<t.length-1;A++){const M=A+S*t.length,C=M,T=M+t.length,R=M+t.length+1,I=M+1;o.push(C,T,I),o.push(R,I,T)}this.setIndex(o),this.setAttribute("position",new pt(a,3)),this.setAttribute("uv",new pt(l,2)),this.setAttribute("normal",new pt(u,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xm(t.points,t.segments,t.phiStart,t.phiLength)}}class o_ extends xm{constructor(t=1,n=1,r=4,s=8){const o=new jp;o.absarc(0,-n/2,t,Math.PI*1.5,0),o.absarc(0,n/2,t,0,Math.PI*.5),super(o.getPoints(r),s),this.type="CapsuleGeometry",this.parameters={radius:t,length:n,capSegments:r,radialSegments:s}}static fromJSON(t){return new o_(t.radius,t.length,t.capSegments,t.radialSegments)}}class a_ extends It{constructor(t=1,n=32,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:r,thetaLength:s},n=Math.max(3,n);const o=[],a=[],l=[],c=[],u=new Y,h=new De;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let f=0,p=3;f<=n;f++,p+=3){const g=r+f/n*s;u.x=t*Math.cos(g),u.y=t*Math.sin(g),a.push(u.x,u.y,u.z),l.push(0,0,1),h.x=(a[p]/t+1)/2,h.y=(a[p+1]/t+1)/2,c.push(h.x,h.y)}for(let f=1;f<=n;f++)o.push(f,f+1,0);this.setIndex(o),this.setAttribute("position",new pt(a,3)),this.setAttribute("normal",new pt(l,3)),this.setAttribute("uv",new pt(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new a_(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Cf extends It{constructor(t=1,n=1,r=1,s=32,o=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:r,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:c};const u=this;s=Math.floor(s),o=Math.floor(o);const h=[],f=[],p=[],g=[];let v=0;const _=[],x=r/2;let y=0;S(),a===!1&&(t>0&&A(!0),n>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new pt(f,3)),this.setAttribute("normal",new pt(p,3)),this.setAttribute("uv",new pt(g,2));function S(){const M=new Y,C=new Y;let T=0;const R=(n-t)/r;for(let I=0;I<=o;I++){const P=[],B=I/o,O=B*(n-t)+t;for(let N=0;N<=s;N++){const ne=N/s,z=ne*c+l,j=Math.sin(z),q=Math.cos(z);C.x=O*j,C.y=-B*r+x,C.z=O*q,f.push(C.x,C.y,C.z),M.set(j,R,q).normalize(),p.push(M.x,M.y,M.z),g.push(ne,1-B),P.push(v++)}_.push(P)}for(let I=0;I<s;I++)for(let P=0;P<o;P++){const B=_[P][I],O=_[P+1][I],N=_[P+1][I+1],ne=_[P][I+1];h.push(B,O,ne),h.push(O,N,ne),T+=6}u.addGroup(y,T,0),y+=T}function A(M){const C=v,T=new De,R=new Y;let I=0;const P=M===!0?t:n,B=M===!0?1:-1;for(let N=1;N<=s;N++)f.push(0,x*B,0),p.push(0,B,0),g.push(.5,.5),v++;const O=v;for(let N=0;N<=s;N++){const z=N/s*c+l,j=Math.cos(z),q=Math.sin(z);R.x=P*q,R.y=x*B,R.z=P*j,f.push(R.x,R.y,R.z),p.push(0,B,0),T.x=j*.5+.5,T.y=q*.5*B+.5,g.push(T.x,T.y),v++}for(let N=0;N<s;N++){const ne=C+N,z=O+N;M===!0?h.push(z,z+1,ne):h.push(z+1,z,ne),I+=3}u.addGroup(y,I,M===!0?1:2),y+=I}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Cf(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class l_ extends Cf{constructor(t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(0,t,n,r,s,o,a,l),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l}}static fromJSON(t){return new l_(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Wl extends It{constructor(t=[],n=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:n,radius:r,detail:s};const o=[],a=[];l(s),u(r),h(),this.setAttribute("position",new pt(o,3)),this.setAttribute("normal",new pt(o.slice(),3)),this.setAttribute("uv",new pt(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(S){const A=new Y,M=new Y,C=new Y;for(let T=0;T<n.length;T+=3)g(n[T+0],A),g(n[T+1],M),g(n[T+2],C),c(A,M,C,S)}function c(S,A,M,C){const T=C+1,R=[];for(let I=0;I<=T;I++){R[I]=[];const P=S.clone().lerp(M,I/T),B=A.clone().lerp(M,I/T),O=T-I;for(let N=0;N<=O;N++)N===0&&I===T?R[I][N]=P:R[I][N]=P.clone().lerp(B,N/O)}for(let I=0;I<T;I++)for(let P=0;P<2*(T-I)-1;P++){const B=Math.floor(P/2);P%2===0?(p(R[I][B+1]),p(R[I+1][B]),p(R[I][B])):(p(R[I][B+1]),p(R[I+1][B+1]),p(R[I+1][B]))}}function u(S){const A=new Y;for(let M=0;M<o.length;M+=3)A.x=o[M+0],A.y=o[M+1],A.z=o[M+2],A.normalize().multiplyScalar(S),o[M+0]=A.x,o[M+1]=A.y,o[M+2]=A.z}function h(){const S=new Y;for(let A=0;A<o.length;A+=3){S.x=o[A+0],S.y=o[A+1],S.z=o[A+2];const M=x(S)/2/Math.PI+.5,C=y(S)/Math.PI+.5;a.push(M,1-C)}v(),f()}function f(){for(let S=0;S<a.length;S+=6){const A=a[S+0],M=a[S+2],C=a[S+4],T=Math.max(A,M,C),R=Math.min(A,M,C);T>.9&&R<.1&&(A<.2&&(a[S+0]+=1),M<.2&&(a[S+2]+=1),C<.2&&(a[S+4]+=1))}}function p(S){o.push(S.x,S.y,S.z)}function g(S,A){const M=S*3;A.x=t[M+0],A.y=t[M+1],A.z=t[M+2]}function v(){const S=new Y,A=new Y,M=new Y,C=new Y,T=new De,R=new De,I=new De;for(let P=0,B=0;P<o.length;P+=9,B+=6){S.set(o[P+0],o[P+1],o[P+2]),A.set(o[P+3],o[P+4],o[P+5]),M.set(o[P+6],o[P+7],o[P+8]),T.set(a[B+0],a[B+1]),R.set(a[B+2],a[B+3]),I.set(a[B+4],a[B+5]),C.copy(S).add(A).add(M).divideScalar(3);const O=x(C);_(T,B+0,S,O),_(R,B+2,A,O),_(I,B+4,M,O)}}function _(S,A,M,C){C<0&&S.x===1&&(a[A]=S.x-1),M.x===0&&M.z===0&&(a[A]=C/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function y(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Wl(t.vertices,t.indices,t.radius,t.details)}}class c_ extends Wl{constructor(t=1,n=0){const r=(1+Math.sqrt(5))/2,s=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,t,n),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new c_(t.radius,t.detail)}}const Mv=new Y,wv=new Y,F1=new Y,Tv=new Jr;class $3 extends It{constructor(t=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:n},t!==null){const s=Math.pow(10,4),o=Math.cos(Yc*n),a=t.getIndex(),l=t.getAttribute("position"),c=a?a.count:l.count,u=[0,0,0],h=["a","b","c"],f=new Array(3),p={},g=[];for(let v=0;v<c;v+=3){a?(u[0]=a.getX(v),u[1]=a.getX(v+1),u[2]=a.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:_,b:x,c:y}=Tv;if(_.fromBufferAttribute(l,u[0]),x.fromBufferAttribute(l,u[1]),y.fromBufferAttribute(l,u[2]),Tv.getNormal(F1),f[0]=`${Math.round(_.x*s)},${Math.round(_.y*s)},${Math.round(_.z*s)}`,f[1]=`${Math.round(x.x*s)},${Math.round(x.y*s)},${Math.round(x.z*s)}`,f[2]=`${Math.round(y.x*s)},${Math.round(y.y*s)},${Math.round(y.z*s)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const A=(S+1)%3,M=f[S],C=f[A],T=Tv[h[S]],R=Tv[h[A]],I=`${M}_${C}`,P=`${C}_${M}`;P in p&&p[P]?(F1.dot(p[P].normal)<=o&&(g.push(T.x,T.y,T.z),g.push(R.x,R.y,R.z)),p[P]=null):I in p||(p[I]={index0:u[S],index1:u[A],normal:F1.clone()})}}for(const v in p)if(p[v]){const{index0:_,index1:x}=p[v];Mv.fromBufferAttribute(l,_),wv.fromBufferAttribute(l,x),g.push(Mv.x,Mv.y,Mv.z),g.push(wv.x,wv.y,wv.z)}this.setAttribute("position",new pt(g,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Zc extends jp{constructor(t){super(t),this.uuid=ps(),this.type="Shape",this.holes=[]}getPointsHoles(t){const n=[];for(let r=0,s=this.holes.length;r<s;r++)n[r]=this.holes[r].getPoints(t);return n}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let n=0,r=t.holes.length;n<r;n++){const s=t.holes[n];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const s=this.holes[n];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let n=0,r=t.holes.length;n<r;n++){const s=t.holes[n];this.holes.push(new jp().fromJSON(s))}return this}}const RW={triangulate:function(i,t,n=2){const r=t&&t.length,s=r?t[0]*n:i.length;let o=eF(i,0,s,n,!0);const a=[];if(!o||o.next===o.prev)return a;let l,c,u,h,f,p,g;if(r&&(o=LW(i,t,o,n)),i.length>80*n){l=u=i[0],c=h=i[1];for(let v=n;v<s;v+=n)f=i[v],p=i[v+1],f<l&&(l=f),p<c&&(c=p),f>u&&(u=f),p>h&&(h=p);g=Math.max(u-l,h-c),g=g!==0?32767/g:0}return Yp(o,a,n,l,c,g,0),a}};function eF(i,t,n,r,s){let o,a;if(s===XW(i,t,n,r)>0)for(o=t;o<n;o+=r)a=jR(o,i[o],i[o+1],a);else for(o=n-r;o>=t;o-=r)a=jR(o,i[o],i[o+1],a);return a&&u_(a,a.next)&&(Kp(a),a=a.next),a}function au(i,t){if(!i)return i;t||(t=i);let n=i,r;do if(r=!1,!n.steiner&&(u_(n,n.next)||ei(n.prev,n,n.next)===0)){if(Kp(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function Yp(i,t,n,r,s,o,a){if(!i)return;!a&&o&&kW(i,r,s,o);let l=i,c,u;for(;i.prev!==i.next;){if(c=i.prev,u=i.next,o?BW(i,r,s,o):PW(i)){t.push(c.i/n|0),t.push(i.i/n|0),t.push(u.i/n|0),Kp(i),i=u.next,l=u.next;continue}if(i=u,i===l){a?a===1?(i=IW(au(i),t,n),Yp(i,t,n,r,s,o,2)):a===2&&DW(i,t,n,r,s,o):Yp(au(i),t,n,r,s,o,1);break}}}function PW(i){const t=i.prev,n=i,r=i.next;if(ei(t,n,r)>=0)return!1;const s=t.x,o=n.x,a=r.x,l=t.y,c=n.y,u=r.y,h=s<o?s<a?s:a:o<a?o:a,f=l<c?l<u?l:u:c<u?c:u,p=s>o?s>a?s:a:o>a?o:a,g=l>c?l>u?l:u:c>u?c:u;let v=r.next;for(;v!==t;){if(v.x>=h&&v.x<=p&&v.y>=f&&v.y<=g&&Lh(s,l,o,c,a,u,v.x,v.y)&&ei(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function BW(i,t,n,r){const s=i.prev,o=i,a=i.next;if(ei(s,o,a)>=0)return!1;const l=s.x,c=o.x,u=a.x,h=s.y,f=o.y,p=a.y,g=l<c?l<u?l:u:c<u?c:u,v=h<f?h<p?h:p:f<p?f:p,_=l>c?l>u?l:u:c>u?c:u,x=h>f?h>p?h:p:f>p?f:p,y=AE(g,v,t,n,r),S=AE(_,x,t,n,r);let A=i.prevZ,M=i.nextZ;for(;A&&A.z>=y&&M&&M.z<=S;){if(A.x>=g&&A.x<=_&&A.y>=v&&A.y<=x&&A!==s&&A!==a&&Lh(l,h,c,f,u,p,A.x,A.y)&&ei(A.prev,A,A.next)>=0||(A=A.prevZ,M.x>=g&&M.x<=_&&M.y>=v&&M.y<=x&&M!==s&&M!==a&&Lh(l,h,c,f,u,p,M.x,M.y)&&ei(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;A&&A.z>=y;){if(A.x>=g&&A.x<=_&&A.y>=v&&A.y<=x&&A!==s&&A!==a&&Lh(l,h,c,f,u,p,A.x,A.y)&&ei(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;M&&M.z<=S;){if(M.x>=g&&M.x<=_&&M.y>=v&&M.y<=x&&M!==s&&M!==a&&Lh(l,h,c,f,u,p,M.x,M.y)&&ei(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function IW(i,t,n){let r=i;do{const s=r.prev,o=r.next.next;!u_(s,o)&&tF(s,r,r.next,o)&&Jp(s,o)&&Jp(o,s)&&(t.push(s.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),Kp(r),Kp(r.next),r=i=o),r=r.next}while(r!==i);return au(r)}function DW(i,t,n,r,s,o){let a=i;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&HW(a,l)){let c=nF(a,l);a=au(a,a.next),c=au(c,c.next),Yp(a,t,n,r,s,o,0),Yp(c,t,n,r,s,o,0);return}l=l.next}a=a.next}while(a!==i)}function LW(i,t,n,r){const s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;o++)l=t[o]*r,c=o<a-1?t[o+1]*r:i.length,u=eF(i,l,c,r,!1),u===u.next&&(u.steiner=!0),s.push(GW(u));for(s.sort(UW),o=0;o<s.length;o++)n=FW(s[o],n);return n}function UW(i,t){return i.x-t.x}function FW(i,t){const n=OW(i,t);if(!n)return t;const r=nF(n,i);return au(r,r.next),au(n,n.next)}function OW(i,t){let n=t,r=-1/0,s;const o=i.x,a=i.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const p=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=o&&p>r&&(r=p,s=n.x<n.next.x?n:n.next,p===o))return s}n=n.next}while(n!==t);if(!s)return null;const l=s,c=s.x,u=s.y;let h=1/0,f;n=s;do o>=n.x&&n.x>=c&&o!==n.x&&Lh(a<u?o:r,a,c,u,a<u?r:o,a,n.x,n.y)&&(f=Math.abs(a-n.y)/(o-n.x),Jp(n,i)&&(f<h||f===h&&(n.x>s.x||n.x===s.x&&NW(s,n)))&&(s=n,h=f)),n=n.next;while(n!==l);return s}function NW(i,t){return ei(i.prev,i,t.prev)<0&&ei(t.next,i,i.next)<0}function kW(i,t,n,r){let s=i;do s.z===0&&(s.z=AE(s.x,s.y,t,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,zW(s)}function zW(i){let t,n,r,s,o,a,l,c,u=1;do{for(n=i,i=null,o=null,a=0;n;){for(a++,r=n,l=0,t=0;t<u&&(l++,r=r.nextZ,!!r);t++);for(c=u;l>0||c>0&&r;)l!==0&&(c===0||!r||n.z<=r.z)?(s=n,n=n.nextZ,l--):(s=r,r=r.nextZ,c--),o?o.nextZ=s:i=s,s.prevZ=o,o=s;n=r}o.nextZ=null,u*=2}while(a>1);return i}function AE(i,t,n,r,s){return i=(i-n)*s|0,t=(t-r)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function GW(i){let t=i,n=i;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==i);return n}function Lh(i,t,n,r,s,o,a,l){return(s-a)*(t-l)>=(i-a)*(o-l)&&(i-a)*(r-l)>=(n-a)*(t-l)&&(n-a)*(o-l)>=(s-a)*(r-l)}function HW(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!VW(i,t)&&(Jp(i,t)&&Jp(t,i)&&WW(i,t)&&(ei(i.prev,i,t.prev)||ei(i,t.prev,t))||u_(i,t)&&ei(i.prev,i,i.next)>0&&ei(t.prev,t,t.next)>0)}function ei(i,t,n){return(t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y)}function u_(i,t){return i.x===t.x&&i.y===t.y}function tF(i,t,n,r){const s=bv(ei(i,t,n)),o=bv(ei(i,t,r)),a=bv(ei(n,r,i)),l=bv(ei(n,r,t));return!!(s!==o&&a!==l||s===0&&Cv(i,n,t)||o===0&&Cv(i,r,t)||a===0&&Cv(n,i,r)||l===0&&Cv(n,t,r))}function Cv(i,t,n){return t.x<=Math.max(i.x,n.x)&&t.x>=Math.min(i.x,n.x)&&t.y<=Math.max(i.y,n.y)&&t.y>=Math.min(i.y,n.y)}function bv(i){return i>0?1:i<0?-1:0}function VW(i,t){let n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==t.i&&n.next.i!==t.i&&tF(n,n.next,i,t))return!0;n=n.next}while(n!==i);return!1}function Jp(i,t){return ei(i.prev,i,i.next)<0?ei(i,t,i.next)>=0&&ei(i,i.prev,t)>=0:ei(i,t,i.prev)<0||ei(i,i.next,t)<0}function WW(i,t){let n=i,r=!1;const s=(i.x+t.x)/2,o=(i.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&s<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==i);return r}function nF(i,t){const n=new EE(i.i,i.x,i.y),r=new EE(t.i,t.x,t.y),s=i.next,o=t.prev;return i.next=t,t.prev=i,n.next=s,s.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function jR(i,t,n,r){const s=new EE(i,t,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Kp(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function EE(i,t,n){this.i=i,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function XW(i,t,n,r){let s=0;for(let o=t,a=n-r;o<n;o+=r)s+=(i[a]-i[o])*(i[o+1]+i[a+1]),a=o;return s}class ko{static area(t){const n=t.length;let r=0;for(let s=n-1,o=0;o<n;s=o++)r+=t[s].x*t[o].y-t[o].x*t[s].y;return r*.5}static isClockWise(t){return ko.area(t)<0}static triangulateShape(t,n){const r=[],s=[],o=[];YR(t),JR(r,t);let a=t.length;n.forEach(YR);for(let c=0;c<n.length;c++)s.push(a),a+=n[c].length,JR(r,n[c]);const l=RW.triangulate(r,s);for(let c=0;c<l.length;c+=3)o.push(l.slice(c,c+3));return o}}function YR(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function JR(i,t){for(let n=0;n<t.length;n++)i.push(t[n].x),i.push(t[n].y)}class h_ extends It{constructor(t=new Zc([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const r=this,s=[],o=[];for(let l=0,c=t.length;l<c;l++){const u=t[l];a(u)}this.setAttribute("position",new pt(s,3)),this.setAttribute("uv",new pt(o,2)),this.computeVertexNormals();function a(l){const c=[],u=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,g=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:g-.1,_=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const y=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:jW;let A,M=!1,C,T,R,I;y&&(A=y.getSpacedPoints(h),M=!0,p=!1,C=y.computeFrenetFrames(h,!1),T=new Y,R=new Y,I=new Y),p||(x=0,g=0,v=0,_=0);const P=l.extractPoints(u);let B=P.shape;const O=P.holes;if(!ko.isClockWise(B)){B=B.reverse();for(let W=0,Re=O.length;W<Re;W++){const Ee=O[W];ko.isClockWise(Ee)&&(O[W]=Ee.reverse())}}const ne=ko.triangulateShape(B,O),z=B;for(let W=0,Re=O.length;W<Re;W++){const Ee=O[W];B=B.concat(Ee)}function j(W,Re,Ee){return Re||console.error("THREE.ExtrudeGeometry: vec does not exist"),W.clone().addScaledVector(Re,Ee)}const q=B.length,he=ne.length;function H(W,Re,Ee){let Ce,_e,Ye;const we=W.x-Re.x,G=W.y-Re.y,F=Ee.x-W.x,te=Ee.y-W.y,xe=we*we+G*G,ge=we*te-G*F;if(Math.abs(ge)>Number.EPSILON){const ye=Math.sqrt(xe),Fe=Math.sqrt(F*F+te*te),Ve=Re.x-G/ye,He=Re.y+we/ye,je=Ee.x-te/Fe,tt=Ee.y+F/Fe,Oe=((je-Ve)*te-(tt-He)*F)/(we*te-G*F);Ce=Ve+we*Oe-W.x,_e=He+G*Oe-W.y;const yt=Ce*Ce+_e*_e;if(yt<=2)return new De(Ce,_e);Ye=Math.sqrt(yt/2)}else{let ye=!1;we>Number.EPSILON?F>Number.EPSILON&&(ye=!0):we<-Number.EPSILON?F<-Number.EPSILON&&(ye=!0):Math.sign(G)===Math.sign(te)&&(ye=!0),ye?(Ce=-G,_e=we,Ye=Math.sqrt(xe)):(Ce=we,_e=G,Ye=Math.sqrt(xe/2))}return new De(Ce/Ye,_e/Ye)}const X=[];for(let W=0,Re=z.length,Ee=Re-1,Ce=W+1;W<Re;W++,Ee++,Ce++)Ee===Re&&(Ee=0),Ce===Re&&(Ce=0),X[W]=H(z[W],z[Ee],z[Ce]);const K=[];let k,Z=X.concat();for(let W=0,Re=O.length;W<Re;W++){const Ee=O[W];k=[];for(let Ce=0,_e=Ee.length,Ye=_e-1,we=Ce+1;Ce<_e;Ce++,Ye++,we++)Ye===_e&&(Ye=0),we===_e&&(we=0),k[Ce]=H(Ee[Ce],Ee[Ye],Ee[we]);K.push(k),Z=Z.concat(k)}for(let W=0;W<x;W++){const Re=W/x,Ee=g*Math.cos(Re*Math.PI/2),Ce=v*Math.sin(Re*Math.PI/2)+_;for(let _e=0,Ye=z.length;_e<Ye;_e++){const we=j(z[_e],X[_e],Ce);ue(we.x,we.y,-Ee)}for(let _e=0,Ye=O.length;_e<Ye;_e++){const we=O[_e];k=K[_e];for(let G=0,F=we.length;G<F;G++){const te=j(we[G],k[G],Ce);ue(te.x,te.y,-Ee)}}}const Q=v+_;for(let W=0;W<q;W++){const Re=p?j(B[W],Z[W],Q):B[W];M?(R.copy(C.normals[0]).multiplyScalar(Re.x),T.copy(C.binormals[0]).multiplyScalar(Re.y),I.copy(A[0]).add(R).add(T),ue(I.x,I.y,I.z)):ue(Re.x,Re.y,0)}for(let W=1;W<=h;W++)for(let Re=0;Re<q;Re++){const Ee=p?j(B[Re],Z[Re],Q):B[Re];M?(R.copy(C.normals[W]).multiplyScalar(Ee.x),T.copy(C.binormals[W]).multiplyScalar(Ee.y),I.copy(A[W]).add(R).add(T),ue(I.x,I.y,I.z)):ue(Ee.x,Ee.y,f/h*W)}for(let W=x-1;W>=0;W--){const Re=W/x,Ee=g*Math.cos(Re*Math.PI/2),Ce=v*Math.sin(Re*Math.PI/2)+_;for(let _e=0,Ye=z.length;_e<Ye;_e++){const we=j(z[_e],X[_e],Ce);ue(we.x,we.y,f+Ee)}for(let _e=0,Ye=O.length;_e<Ye;_e++){const we=O[_e];k=K[_e];for(let G=0,F=we.length;G<F;G++){const te=j(we[G],k[G],Ce);M?ue(te.x,te.y+A[h-1].y,A[h-1].x+Ee):ue(te.x,te.y,f+Ee)}}}se(),le();function se(){const W=s.length/3;if(p){let Re=0,Ee=q*Re;for(let Ce=0;Ce<he;Ce++){const _e=ne[Ce];Se(_e[2]+Ee,_e[1]+Ee,_e[0]+Ee)}Re=h+x*2,Ee=q*Re;for(let Ce=0;Ce<he;Ce++){const _e=ne[Ce];Se(_e[0]+Ee,_e[1]+Ee,_e[2]+Ee)}}else{for(let Re=0;Re<he;Re++){const Ee=ne[Re];Se(Ee[2],Ee[1],Ee[0])}for(let Re=0;Re<he;Re++){const Ee=ne[Re];Se(Ee[0]+q*h,Ee[1]+q*h,Ee[2]+q*h)}}r.addGroup(W,s.length/3-W,0)}function le(){const W=s.length/3;let Re=0;fe(z,Re),Re+=z.length;for(let Ee=0,Ce=O.length;Ee<Ce;Ee++){const _e=O[Ee];fe(_e,Re),Re+=_e.length}r.addGroup(W,s.length/3-W,1)}function fe(W,Re){let Ee=W.length;for(;--Ee>=0;){const Ce=Ee;let _e=Ee-1;_e<0&&(_e=W.length-1);for(let Ye=0,we=h+x*2;Ye<we;Ye++){const G=q*Ye,F=q*(Ye+1),te=Re+Ce+G,xe=Re+_e+G,ge=Re+_e+F,ye=Re+Ce+F;ke(te,xe,ge,ye)}}}function ue(W,Re,Ee){c.push(W),c.push(Re),c.push(Ee)}function Se(W,Re,Ee){Be(W),Be(Re),Be(Ee);const Ce=s.length/3,_e=S.generateTopUV(r,s,Ce-3,Ce-2,Ce-1);Ae(_e[0]),Ae(_e[1]),Ae(_e[2])}function ke(W,Re,Ee,Ce){Be(W),Be(Re),Be(Ce),Be(Re),Be(Ee),Be(Ce);const _e=s.length/3,Ye=S.generateSideWallUV(r,s,_e-6,_e-3,_e-2,_e-1);Ae(Ye[0]),Ae(Ye[1]),Ae(Ye[3]),Ae(Ye[1]),Ae(Ye[2]),Ae(Ye[3])}function Be(W){s.push(c[W*3+0]),s.push(c[W*3+1]),s.push(c[W*3+2])}function Ae(W){o.push(W.x),o.push(W.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return YW(n,r,t)}static fromJSON(t,n){const r=[];for(let o=0,a=t.shapes.length;o<a;o++){const l=n[t.shapes[o]];r.push(l)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new ay[s.type]().fromJSON(s)),new h_(r,t.options)}}const jW={generateTopUV:function(i,t,n,r,s){const o=t[n*3],a=t[n*3+1],l=t[r*3],c=t[r*3+1],u=t[s*3],h=t[s*3+1];return[new De(o,a),new De(l,c),new De(u,h)]},generateSideWallUV:function(i,t,n,r,s,o){const a=t[n*3],l=t[n*3+1],c=t[n*3+2],u=t[r*3],h=t[r*3+1],f=t[r*3+2],p=t[s*3],g=t[s*3+1],v=t[s*3+2],_=t[o*3],x=t[o*3+1],y=t[o*3+2];return Math.abs(l-h)<Math.abs(a-u)?[new De(a,1-c),new De(u,1-f),new De(p,1-v),new De(_,1-y)]:[new De(l,1-c),new De(h,1-f),new De(g,1-v),new De(x,1-y)]}};function YW(i,t,n){if(n.shapes=[],Array.isArray(i))for(let r=0,s=i.length;r<s;r++){const o=i[r];n.shapes.push(o.uuid)}else n.shapes.push(i.uuid);return n.options=Object.assign({},t),t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class Sm extends Wl{constructor(t=1,n=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,t,n),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new Sm(t.radius,t.detail)}}class Am extends Wl{constructor(t=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,t,n),this.type="OctahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new Am(t.radius,t.detail)}}class f_ extends It{constructor(t=.5,n=1,r=32,s=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:r,phiSegments:s,thetaStart:o,thetaLength:a},r=Math.max(3,r),s=Math.max(1,s);const l=[],c=[],u=[],h=[];let f=t;const p=(n-t)/s,g=new Y,v=new De;for(let _=0;_<=s;_++){for(let x=0;x<=r;x++){const y=o+x/r*a;g.x=f*Math.cos(y),g.y=f*Math.sin(y),c.push(g.x,g.y,g.z),u.push(0,0,1),v.x=(g.x/n+1)/2,v.y=(g.y/n+1)/2,h.push(v.x,v.y)}f+=p}for(let _=0;_<s;_++){const x=_*(r+1);for(let y=0;y<r;y++){const S=y+x,A=S,M=S+r+1,C=S+r+2,T=S+1;l.push(A,M,T),l.push(M,C,T)}}this.setIndex(l),this.setAttribute("position",new pt(c,3)),this.setAttribute("normal",new pt(u,3)),this.setAttribute("uv",new pt(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new f_(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class d_ extends It{constructor(t=new Zc([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:n};const r=[],s=[],o=[],a=[];let l=0,c=0;if(Array.isArray(t)===!1)u(t);else for(let h=0;h<t.length;h++)u(t[h]),this.addGroup(l,c,h),l+=c,c=0;this.setIndex(r),this.setAttribute("position",new pt(s,3)),this.setAttribute("normal",new pt(o,3)),this.setAttribute("uv",new pt(a,2));function u(h){const f=s.length/3,p=h.extractPoints(n);let g=p.shape;const v=p.holes;ko.isClockWise(g)===!1&&(g=g.reverse());for(let x=0,y=v.length;x<y;x++){const S=v[x];ko.isClockWise(S)===!0&&(v[x]=S.reverse())}const _=ko.triangulateShape(g,v);for(let x=0,y=v.length;x<y;x++){const S=v[x];g=g.concat(S)}for(let x=0,y=g.length;x<y;x++){const S=g[x];s.push(S.x,S.y,0),o.push(0,0,1),a.push(S.x,S.y)}for(let x=0,y=_.length;x<y;x++){const S=_[x],A=S[0]+f,M=S[1]+f,C=S[2]+f;r.push(A,M,C),c+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes;return JW(n,t)}static fromJSON(t,n){const r=[];for(let s=0,o=t.shapes.length;s<o;s++){const a=n[t.shapes[s]];r.push(a)}return new d_(r,t.curveSegments)}}function JW(i,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class Em extends It{constructor(t=1,n=32,r=16,s=0,o=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:r,phiStart:s,phiLength:o,thetaStart:a,thetaLength:l},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const c=Math.min(a+l,Math.PI);let u=0;const h=[],f=new Y,p=new Y,g=[],v=[],_=[],x=[];for(let y=0;y<=r;y++){const S=[],A=y/r;let M=0;y===0&&a===0?M=.5/n:y===r&&c===Math.PI&&(M=-.5/n);for(let C=0;C<=n;C++){const T=C/n;f.x=-t*Math.cos(s+T*o)*Math.sin(a+A*l),f.y=t*Math.cos(a+A*l),f.z=t*Math.sin(s+T*o)*Math.sin(a+A*l),v.push(f.x,f.y,f.z),p.copy(f).normalize(),_.push(p.x,p.y,p.z),x.push(T+M,1-A),S.push(u++)}h.push(S)}for(let y=0;y<r;y++)for(let S=0;S<n;S++){const A=h[y][S+1],M=h[y][S],C=h[y+1][S],T=h[y+1][S+1];(y!==0||a>0)&&g.push(A,M,T),(y!==r-1||c<Math.PI)&&g.push(M,C,T)}this.setIndex(g),this.setAttribute("position",new pt(v,3)),this.setAttribute("normal",new pt(_,3)),this.setAttribute("uv",new pt(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Em(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class p_ extends Wl{constructor(t=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,t,n),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new p_(t.radius,t.detail)}}class m_ extends It{constructor(t=1,n=.4,r=12,s=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:n,radialSegments:r,tubularSegments:s,arc:o},r=Math.floor(r),s=Math.floor(s);const a=[],l=[],c=[],u=[],h=new Y,f=new Y,p=new Y;for(let g=0;g<=r;g++)for(let v=0;v<=s;v++){const _=v/s*o,x=g/r*Math.PI*2;f.x=(t+n*Math.cos(x))*Math.cos(_),f.y=(t+n*Math.cos(x))*Math.sin(_),f.z=n*Math.sin(x),l.push(f.x,f.y,f.z),h.x=t*Math.cos(_),h.y=t*Math.sin(_),p.subVectors(f,h).normalize(),c.push(p.x,p.y,p.z),u.push(v/s),u.push(g/r)}for(let g=1;g<=r;g++)for(let v=1;v<=s;v++){const _=(s+1)*g+v-1,x=(s+1)*(g-1)+v-1,y=(s+1)*(g-1)+v,S=(s+1)*g+v;a.push(_,x,S),a.push(x,y,S)}this.setIndex(a),this.setAttribute("position",new pt(l,3)),this.setAttribute("normal",new pt(c,3)),this.setAttribute("uv",new pt(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new m_(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class g_ extends It{constructor(t=1,n=.4,r=64,s=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:n,tubularSegments:r,radialSegments:s,p:o,q:a},r=Math.floor(r),s=Math.floor(s);const l=[],c=[],u=[],h=[],f=new Y,p=new Y,g=new Y,v=new Y,_=new Y,x=new Y,y=new Y;for(let A=0;A<=r;++A){const M=A/r*o*Math.PI*2;S(M,o,a,t,g),S(M+.01,o,a,t,v),x.subVectors(v,g),y.addVectors(v,g),_.crossVectors(x,y),y.crossVectors(_,x),_.normalize(),y.normalize();for(let C=0;C<=s;++C){const T=C/s*Math.PI*2,R=-n*Math.cos(T),I=n*Math.sin(T);f.x=g.x+(R*y.x+I*_.x),f.y=g.y+(R*y.y+I*_.y),f.z=g.z+(R*y.z+I*_.z),c.push(f.x,f.y,f.z),p.subVectors(f,g).normalize(),u.push(p.x,p.y,p.z),h.push(A/r),h.push(C/s)}}for(let A=1;A<=r;A++)for(let M=1;M<=s;M++){const C=(s+1)*(A-1)+(M-1),T=(s+1)*A+(M-1),R=(s+1)*A+M,I=(s+1)*(A-1)+M;l.push(C,T,I),l.push(T,R,I)}this.setIndex(l),this.setAttribute("position",new pt(c,3)),this.setAttribute("normal",new pt(u,3)),this.setAttribute("uv",new pt(h,2));function S(A,M,C,T,R){const I=Math.cos(A),P=Math.sin(A),B=C/M*A,O=Math.cos(B);R.x=T*(2+O)*.5*I,R.y=T*(2+O)*P*.5,R.z=T*Math.sin(B)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new g_(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class v_ extends It{constructor(t=new Nw(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),n=64,r=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:n,radius:r,radialSegments:s,closed:o};const a=t.computeFrenetFrames(n,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new Y,c=new Y,u=new De;let h=new Y;const f=[],p=[],g=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new pt(f,3)),this.setAttribute("normal",new pt(p,3)),this.setAttribute("uv",new pt(g,2));function _(){for(let A=0;A<n;A++)x(A);x(o===!1?n:0),S(),y()}function x(A){h=t.getPointAt(A/n,h);const M=a.normals[A],C=a.binormals[A];for(let T=0;T<=s;T++){const R=T/s*Math.PI*2,I=Math.sin(R),P=-Math.cos(R);c.x=P*M.x+I*C.x,c.y=P*M.y+I*C.y,c.z=P*M.z+I*C.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=h.x+r*c.x,l.y=h.y+r*c.y,l.z=h.z+r*c.z,f.push(l.x,l.y,l.z)}}function y(){for(let A=1;A<=n;A++)for(let M=1;M<=s;M++){const C=(s+1)*(A-1)+(M-1),T=(s+1)*A+(M-1),R=(s+1)*A+M,I=(s+1)*(A-1)+M;v.push(C,T,I),v.push(T,R,I)}}function S(){for(let A=0;A<=n;A++)for(let M=0;M<=s;M++)u.x=A/n,u.y=M/s,g.push(u.x,u.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new v_(new ay[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class iF extends It{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const n=[],r=new Set,s=new Y,o=new Y;if(t.index!==null){const a=t.attributes.position,l=t.index;let c=t.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,h=c.length;u<h;++u){const f=c[u],p=f.start,g=f.count;for(let v=p,_=p+g;v<_;v+=3)for(let x=0;x<3;x++){const y=l.getX(v+x),S=l.getX(v+(x+1)%3);s.fromBufferAttribute(a,y),o.fromBufferAttribute(a,S),KR(s,o,r)===!0&&(n.push(s.x,s.y,s.z),n.push(o.x,o.y,o.z))}}}else{const a=t.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let u=0;u<3;u++){const h=3*l+u,f=3*l+(u+1)%3;s.fromBufferAttribute(a,h),o.fromBufferAttribute(a,f),KR(s,o,r)===!0&&(n.push(s.x,s.y,s.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new pt(n,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function KR(i,t,n){const r=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return n.has(r)===!0||n.has(s)===!0?!1:(n.add(r),n.add(s),!0)}var ZR=Object.freeze({__proto__:null,BoxGeometry:mu,CapsuleGeometry:o_,CircleGeometry:a_,ConeGeometry:l_,CylinderGeometry:Cf,DodecahedronGeometry:c_,EdgesGeometry:$3,ExtrudeGeometry:h_,IcosahedronGeometry:Sm,LatheGeometry:xm,OctahedronGeometry:Am,PlaneGeometry:Vl,PolyhedronGeometry:Wl,RingGeometry:f_,ShapeGeometry:d_,SphereGeometry:Em,TetrahedronGeometry:p_,TorusGeometry:m_,TorusKnotGeometry:g_,TubeGeometry:v_,WireframeGeometry:iF});class rF extends ci{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ke(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class sF extends Ri{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class vu extends ci{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hl,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Ko extends vu{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return li(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class lp extends ci{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hl,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class oF extends ci{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hl,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class zw extends ci{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hl,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Gw extends ci{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hl,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class aF extends ci{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hl,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class lF extends lr{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Gc(i,t,n){return!i||!n&&i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function cF(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function uF(i){function t(s,o){return i[s]-i[o]}const n=i.length,r=new Array(n);for(let s=0;s!==n;++s)r[s]=s;return r.sort(t),r}function ME(i,t,n){const r=i.length,s=new i.constructor(r);for(let o=0,a=0;a!==r;++o){const l=n[o]*t;for(let c=0;c!==t;++c)s[a++]=i[l+c]}return s}function Hw(i,t,n,r){let s=1,o=i[0];for(;o!==void 0&&o[r]===void 0;)o=i[s++];if(o===void 0)return;let a=o[r];if(a!==void 0)if(Array.isArray(a))do a=o[r],a!==void 0&&(t.push(o.time),n.push.apply(n,a)),o=i[s++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[r],a!==void 0&&(t.push(o.time),a.toArray(n,n.length)),o=i[s++];while(o!==void 0);else do a=o[r],a!==void 0&&(t.push(o.time),n.push(a)),o=i[s++];while(o!==void 0)}function KW(i,t,n,r,s=30){const o=i.clone();o.name=t;const a=[];for(let c=0;c<o.tracks.length;++c){const u=o.tracks[c],h=u.getValueSize(),f=[],p=[];for(let g=0;g<u.times.length;++g){const v=u.times[g]*s;if(!(v<n||v>=r)){f.push(u.times[g]);for(let _=0;_<h;++_)p.push(u.values[g*h+_])}}f.length!==0&&(u.times=Gc(f,u.times.constructor),u.values=Gc(p,u.values.constructor),a.push(u))}o.tracks=a;let l=1/0;for(let c=0;c<o.tracks.length;++c)l>o.tracks[c].times[0]&&(l=o.tracks[c].times[0]);for(let c=0;c<o.tracks.length;++c)o.tracks[c].shift(-1*l);return o.resetDuration(),o}function ZW(i,t=0,n=i,r=30){r<=0&&(r=30);const s=n.tracks.length,o=t/r;for(let a=0;a<s;++a){const l=n.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const u=i.tracks.find(function(y){return y.name===l.name&&y.ValueTypeName===c});if(u===void 0)continue;let h=0;const f=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const v=l.times.length-1;let _;if(o<=l.times[0]){const y=h,S=f-h;_=l.values.slice(y,S)}else if(o>=l.times[v]){const y=v*f+h,S=y+f-h;_=l.values.slice(y,S)}else{const y=l.createInterpolant(),S=h,A=f-h;y.evaluate(o),_=y.resultBuffer.slice(S,A)}c==="quaternion"&&new xi().fromArray(_).normalize().conjugate().toArray(_);const x=u.times.length;for(let y=0;y<x;++y){const S=y*g+p;if(c==="quaternion")xi.multiplyQuaternionsFlat(u.values,S,_,0,u.values,S);else{const A=g-p*2;for(let M=0;M<A;++M)u.values[S+M]-=_[M]}}}return i.blendMode=yw,i}const QW={convertArray:Gc,isTypedArray:cF,getKeyframeOrder:uF,sortedArray:ME,flattenJSON:Hw,subclip:KW,makeClipAdditive:ZW};class bf{constructor(t,n,r,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let r=this._cachedIndex,s=n[r],o=n[r-1];e:{t:{let a;n:{i:if(!(t<s)){for(let l=r+2;;){if(s===void 0){if(t<o)break i;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===l)break;if(o=s,s=n[++r],t<s)break t}a=n.length;break n}if(!(t>=o)){const l=n[1];t<l&&(r=2,o=l);for(let c=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(s=o,o=n[--r-1],t>=o)break t}a=r,r=0;break n}break e}for(;r<a;){const l=r+a>>>1;t<n[l]?a=l:r=l+1}if(s=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=t*s;for(let a=0;a!==s;++a)n[a]=r[o+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hF extends bf{constructor(t,n,r,s){super(t,n,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Oc,endingEnd:Oc}}intervalChanged_(t,n,r){const s=this.parameterPositions;let o=t-2,a=t+1,l=s[o],c=s[a];if(l===void 0)switch(this.getSettings_().endingStart){case Nc:o=t,l=2*n-r;break;case zp:o=s.length-2,l=n+s[o]-s[o+1];break;default:o=t,l=r}if(c===void 0)switch(this.getSettings_().endingEnd){case Nc:a=t,c=2*r-n;break;case zp:a=1,c=r+s[1]-s[0];break;default:a=t-1,c=n}const u=(r-n)*.5,h=this.valueSize;this._weightPrev=u/(n-l),this._weightNext=u/(c-r),this._offsetPrev=o*h,this._offsetNext=a*h}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=t*l,u=c-l,h=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(r-n)/(s-n),_=v*v,x=_*v,y=-p*x+2*p*_-p*v,S=(1+p)*x+(-1.5-2*p)*_+(-.5+p)*v+1,A=(-1-g)*x+(1.5+g)*_+.5*v,M=g*x-g*_;for(let C=0;C!==l;++C)o[C]=y*a[h+C]+S*a[u+C]+A*a[c+C]+M*a[f+C];return o}}class Vw extends bf{constructor(t,n,r,s){super(t,n,r,s)}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=t*l,u=c-l,h=(r-n)/(s-n),f=1-h;for(let p=0;p!==l;++p)o[p]=a[u+p]*f+a[c+p]*h;return o}}class fF extends bf{constructor(t,n,r,s){super(t,n,r,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class _o{constructor(t,n,r,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Gc(n,this.TimeBufferType),this.values=Gc(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(t);else{r={name:t.name,times:Gc(t.times,Array),values:Gc(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(r.interpolation=s)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new fF(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Vw(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new hF(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case lf:n=this.InterpolantFactoryMethodDiscrete;break;case su:n=this.InterpolantFactoryMethodLinear;break;case x0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lf;case this.InterpolantFactoryMethodLinear:return su;case this.InterpolantFactoryMethodSmooth:return x0}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const n=this.times;for(let r=0,s=n.length;r!==s;++r)n[r]+=t}return this}scale(t){if(t!==1){const n=this.times;for(let r=0,s=n.length;r!==s;++r)n[r]*=t}return this}trim(t,n){const r=this.times,s=r.length;let o=0,a=s-1;for(;o!==s&&r[o]<t;)++o;for(;a!==-1&&r[a]>n;)--a;if(++a,o!==0||a!==s){o>=a&&(a=Math.max(a,1),o=a-1);const l=this.getValueSize();this.times=r.slice(o,a),this.values=this.values.slice(o*l,a*l)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const r=this.times,s=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let l=0;l!==o;l++){const c=r[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),t=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),t=!1;break}a=c}if(s!==void 0&&cF(s))for(let l=0,c=s.length;l!==c;++l){const u=s[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===x0,o=t.length-1;let a=1;for(let l=1;l<o;++l){let c=!1;const u=t[l],h=t[l+1];if(u!==h&&(l!==1||u!==t[0]))if(s)c=!0;else{const f=l*r,p=f-r,g=f+r;for(let v=0;v!==r;++v){const _=n[f+v];if(_!==n[p+v]||_!==n[g+v]){c=!0;break}}}if(c){if(l!==a){t[a]=t[l];const f=l*r,p=a*r;for(let g=0;g!==r;++g)n[p+g]=n[f+g]}++a}}if(o>0){t[a]=t[o];for(let l=o*r,c=a*r,u=0;u!==r;++u)n[c+u]=n[l+u];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=n.slice(0,a*r)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),r=this.constructor,s=new r(this.name,t,n);return s.createInterpolant=this.createInterpolant,s}}_o.prototype.TimeBufferType=Float32Array;_o.prototype.ValueBufferType=Float32Array;_o.prototype.DefaultInterpolation=su;class yu extends _o{}yu.prototype.ValueTypeName="bool";yu.prototype.ValueBufferType=Array;yu.prototype.DefaultInterpolation=lf;yu.prototype.InterpolantFactoryMethodLinear=void 0;yu.prototype.InterpolantFactoryMethodSmooth=void 0;class Ww extends _o{}Ww.prototype.ValueTypeName="color";class lu extends _o{}lu.prototype.ValueTypeName="number";class dF extends bf{constructor(t,n,r,s){super(t,n,r,s)}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(r-n)/(s-n);let u=t*l;for(let h=u+l;u!==h;u+=4)xi.slerpFlat(o,0,a,u-l,a,u,c);return o}}class Ba extends _o{InterpolantFactoryMethodLinear(t){return new dF(this.times,this.values,this.getValueSize(),t)}}Ba.prototype.ValueTypeName="quaternion";Ba.prototype.DefaultInterpolation=su;Ba.prototype.InterpolantFactoryMethodSmooth=void 0;class _u extends _o{}_u.prototype.ValueTypeName="string";_u.prototype.ValueBufferType=Array;_u.prototype.DefaultInterpolation=lf;_u.prototype.InterpolantFactoryMethodLinear=void 0;_u.prototype.InterpolantFactoryMethodSmooth=void 0;class cu extends _o{}cu.prototype.ValueTypeName="vector";class uu{constructor(t,n=-1,r,s=Yy){this.name=t,this.tracks=r,this.duration=n,this.blendMode=s,this.uuid=ps(),this.duration<0&&this.resetDuration()}static parse(t){const n=[],r=t.tracks,s=1/(t.fps||1);for(let a=0,l=r.length;a!==l;++a)n.push($W(r[a]).scale(s));const o=new this(t.name,t.duration,n,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const n=[],r=t.tracks,s={name:t.name,duration:t.duration,tracks:n,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,a=r.length;o!==a;++o)n.push(_o.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(t,n,r,s){const o=n.length,a=[];for(let l=0;l<o;l++){let c=[],u=[];c.push((l+o-1)%o,l,(l+1)%o),u.push(0,1,0);const h=uF(c);c=ME(c,1,h),u=ME(u,1,h),!s&&c[0]===0&&(c.push(o),u.push(u[0])),a.push(new lu(".morphTargetInfluences["+n[l].name+"]",c,u).scale(1/r))}return new this(t,-1,a)}static findByName(t,n){let r=t;if(!Array.isArray(t)){const s=t;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===n)return r[s];return null}static CreateClipsFromMorphTargetSequences(t,n,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let l=0,c=t.length;l<c;l++){const u=t[l],h=u.name.match(o);if(h&&h.length>1){const f=h[1];let p=s[f];p||(s[f]=p=[]),p.push(u)}}const a=[];for(const l in s)a.push(this.CreateFromMorphTargetSequence(l,s[l],n,r));return a}static parseAnimation(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,g,v,_){if(g.length!==0){const x=[],y=[];Hw(g,x,y,v),x.length!==0&&_.push(new f(p,x,y))}},s=[],o=t.name||"default",a=t.fps||30,l=t.blendMode;let c=t.length||-1;const u=t.hierarchy||[];for(let f=0;f<u.length;f++){const p=u[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let _=0;_<p[v].morphTargets.length;_++)g[p[v].morphTargets[_]]=-1;for(const _ in g){const x=[],y=[];for(let S=0;S!==p[v].morphTargets.length;++S){const A=p[v];x.push(A.time),y.push(A.morphTarget===_?1:0)}s.push(new lu(".morphTargetInfluence["+_+"]",x,y))}c=g.length*a}else{const g=".bones["+n[f].name+"]";r(cu,g+".position",p,"pos",s),r(Ba,g+".quaternion",p,"rot",s),r(cu,g+".scale",p,"scl",s)}}return s.length===0?null:new this(o,c,s,l)}resetDuration(){const t=this.tracks;let n=0;for(let r=0,s=t.length;r!==s;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let n=0;n<this.tracks.length;n++)t=t&&this.tracks[n].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qW(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lu;case"vector":case"vector2":case"vector3":case"vector4":return cu;case"color":return Ww;case"quaternion":return Ba;case"bool":case"boolean":return yu;case"string":return _u}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function $W(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=qW(i.type);if(i.times===void 0){const n=[],r=[];Hw(i.keys,n,r,"value"),i.times=n,i.values=r}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const _a={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Xw{constructor(t,n,r){const s=this;let o=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(h){l++,o===!1&&s.onStart!==void 0&&s.onStart(h,a,l),o=!0},this.itemEnd=function(h){a++,s.onProgress!==void 0&&s.onProgress(h,a,l),a===l&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(h){s.onError!==void 0&&s.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,f){return u.push(h,f),this},this.removeHandler=function(h){const f=u.indexOf(h);return f!==-1&&u.splice(f,2),this},this.getHandler=function(h){for(let f=0,p=u.length;f<p;f+=2){const g=u[f],v=u[f+1];if(g.global&&(g.lastIndex=0),g.test(h))return v}return null}}}const Uh=new Xw;class qi{constructor(t){this.manager=t!==void 0?t:Uh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const r=this;return new Promise(function(s,o){r.load(t,s,n,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}qi.DEFAULT_MATERIAL_NAME="__DEFAULT";const ha={};class e7 extends Error{constructor(t,n){super(t),this.response=n}}class Or extends qi{constructor(t){super(t)}load(t,n,r,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=_a.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{n&&n(o),this.manager.itemEnd(t)},0),o;if(ha[t]!==void 0){ha[t].push({onLoad:n,onProgress:r,onError:s});return}ha[t]=[],ha[t].push({onLoad:n,onProgress:r,onError:s});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=ha[t],f=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),g=p?parseInt(p):0,v=g!==0;let _=0;const x=new ReadableStream({start(y){S();function S(){f.read().then(({done:A,value:M})=>{if(A)y.close();else{_+=M.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:g});for(let T=0,R=h.length;T<R;T++){const I=h[T];I.onProgress&&I.onProgress(C)}y.enqueue(M),S()}})}}});return new Response(x)}else throw new e7(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,l));case"json":return u.json();default:if(l===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(l),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{_a.add(t,u);const h=ha[t];delete ha[t];for(let f=0,p=h.length;f<p;f++){const g=h[f];g.onLoad&&g.onLoad(u)}}).catch(u=>{const h=ha[t];if(h===void 0)throw this.manager.itemError(t),u;delete ha[t];for(let f=0,p=h.length;f<p;f++){const g=h[f];g.onError&&g.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class t7 extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new Or(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{n(o.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),o.manager.itemError(t)}},r,s)}parse(t){const n=[];for(let r=0;r<t.length;r++){const s=uu.parse(t[r]);n.push(s)}return n}}class n7 extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=[],l=new r_,c=new Or(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(o.withCredentials);let u=0;function h(f){c.load(t[f],function(p){const g=o.parse(p,!0);a[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(l.minFilter=ln),l.image=a,l.format=g.format,l.needsUpdate=!0,n&&n(l))},r,s)}if(Array.isArray(t))for(let f=0,p=t.length;f<p;++f)h(f);else c.load(t,function(f){const p=o.parse(f,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let v=0;v<g;v++){a[v]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)a[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+_]),a[v].format=p.format,a[v].width=p.width,a[v].height=p.height}l.image=a}else l.image.width=p.width,l.image.height=p.height,l.mipmaps=p.mipmaps;p.mipmapCount===1&&(l.minFilter=ln),l.format=p.format,l.needsUpdate=!0,n&&n(l)},r,s);return l}}class Zp extends qi{constructor(t){super(t)}load(t,n,r,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,a=_a.get(t);if(a!==void 0)return o.manager.itemStart(t),setTimeout(function(){n&&n(a),o.manager.itemEnd(t)},0),a;const l=Xp("img");function c(){h(),_a.add(t,this),n&&n(this),o.manager.itemEnd(t)}function u(f){h(),s&&s(f),o.manager.itemError(t),o.manager.itemEnd(t)}function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(t),l.src=t,l}}class pF extends qi{constructor(t){super(t)}load(t,n,r,s){const o=new gm;o.colorSpace=wi;const a=new Zp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(u){a.load(t[u],function(h){o.images[u]=h,l++,l===6&&(o.needsUpdate=!0,n&&n(o))},void 0,s)}for(let u=0;u<t.length;++u)c(u);return o}}class jw extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new Kc,l=new Or(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(o.withCredentials),l.load(t,function(c){let u;try{u=o.parse(c)}catch(h){if(s!==void 0)s(h);else{console.error(h);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:Ui,a.wrapT=u.wrapT!==void 0?u.wrapT:Ui,a.magFilter=u.magFilter!==void 0?u.magFilter:ln,a.minFilter=u.minFilter!==void 0?u.minFilter:ln,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?a.colorSpace=u.colorSpace:u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Vo),u.mipmapCount===1&&(a.minFilter=ln),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,n&&n(a,u)},r,s),a}}class Rf extends qi{constructor(t){super(t)}load(t,n,r,s){const o=new Sn,a=new Zp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(l){o.image=l,o.needsUpdate=!0,n!==void 0&&n(o)},r,s),o}}class Xl extends tn{constructor(t,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ke(t),this.intensity=n}dispose(){}copy(t,n){return super.copy(t,n),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const n=super.toJSON(t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class mF extends Xl{constructor(t,n,r){super(t,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(tn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ke(n)}copy(t,n){return super.copy(t,n),this.groundColor.copy(t.groundColor),this}}const O1=new at,QR=new Y,qR=new Y;class Yw{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new at,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vm,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const n=this.camera,r=this.matrix;QR.setFromMatrixPosition(t.matrixWorld),n.position.copy(QR),qR.setFromMatrixPosition(t.target.matrixWorld),n.lookAt(qR),n.updateMatrixWorld(),O1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(O1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(O1)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class i7 extends Yw{constructor(){super(new Jn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const n=this.camera,r=uf*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=t.distance||n.far;(r!==n.fov||s!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=s,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class y_ extends Xl{constructor(t,n,r=0,s=Math.PI/3,o=0,a=2){super(t,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(tn.DEFAULT_UP),this.updateMatrix(),this.target=new tn,this.distance=r,this.angle=s,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new i7}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const $R=new at,Sd=new Y,N1=new Y;class r7 extends Yw{constructor(){super(new Jn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(t,n=0){const r=this.camera,s=this.matrix,o=t.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),Sd.setFromMatrixPosition(t.matrixWorld),r.position.copy(Sd),N1.copy(r.position),N1.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(N1),r.updateMatrixWorld(),s.makeTranslation(-Sd.x,-Sd.y,-Sd.z),$R.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix($R)}}class Qp extends Xl{constructor(t,n,r=0,s=2){super(t,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new r7}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class s7 extends Yw{constructor(){super(new Ua(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class __ extends Xl{constructor(t,n){super(t,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(tn.DEFAULT_UP),this.updateMatrix(),this.target=new tn,this.shadow=new s7}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Jw extends Xl{constructor(t,n){super(t,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class gF extends Xl{constructor(t,n,r=10,s=10){super(t,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const n=super.toJSON(t);return n.object.width=this.width,n.object.height=this.height,n}}class vF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Y)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const r=t.x,s=t.y,o=t.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*s),n.addScaledVector(a[2],.488603*o),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*s)),n.addScaledVector(a[5],1.092548*(s*o)),n.addScaledVector(a[6],.315392*(3*o*o-1)),n.addScaledVector(a[7],1.092548*(r*o)),n.addScaledVector(a[8],.546274*(r*r-s*s)),n}getIrradianceAt(t,n){const r=t.x,s=t.y,o=t.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*s),n.addScaledVector(a[2],2*.511664*o),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*s),n.addScaledVector(a[5],2*.429043*s*o),n.addScaledVector(a[6],.743125*o*o-.247708),n.addScaledVector(a[7],2*.429043*r*o),n.addScaledVector(a[8],.429043*(r*r-s*s)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(t.coefficients[r],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(t.coefficients[r],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(t,n+s*3);return this}toArray(t=[],n=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(t,n+s*3);return t}static getBasisAt(t,n){const r=t.x,s=t.y,o=t.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*s,n[5]=1.092548*s*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-s*s)}}class yF extends Xl{constructor(t=new vF,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const n=super.toJSON(t);return n.object.sh=this.sh.toArray(),n}}class x_ extends qi{constructor(t){super(t),this.textures={}}load(t,n,r,s){const o=this,a=new Or(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(l){try{n(o.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),o.manager.itemError(t)}},r,s)}parse(t){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const s=x_.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new Ke().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const a=t.uniforms[o];switch(s.uniforms[o]={},a.type){case"t":s.uniforms[o].value=r(a.value);break;case"c":s.uniforms[o].value=new Ke().setHex(a.value);break;case"v2":s.uniforms[o].value=new De().fromArray(a.value);break;case"v3":s.uniforms[o].value=new Y().fromArray(a.value);break;case"v4":s.uniforms[o].value=new qt().fromArray(a.value);break;case"m3":s.uniforms[o].value=new Yt().fromArray(a.value);break;case"m4":s.uniforms[o].value=new at().fromArray(a.value);break;default:s.uniforms[o].value=a.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)s.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=r(t.map)),t.matcap!==void 0&&(s.matcap=r(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=r(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=r(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=r(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new De().fromArray(o)}return t.displacementMap!==void 0&&(s.displacementMap=r(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=r(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=r(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=r(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=r(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=r(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=r(t.envMap)),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=r(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=r(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=r(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=r(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new De().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=r(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=r(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=r(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=r(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=r(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){const n={ShadowMaterial:rF,SpriteMaterial:Pw,RawShaderMaterial:sF,ShaderMaterial:Ri,PointsMaterial:i_,MeshPhysicalMaterial:Ko,MeshStandardMaterial:vu,MeshPhongMaterial:lp,MeshToonMaterial:oF,MeshNormalMaterial:zw,MeshLambertMaterial:Gw,MeshDepthMaterial:qy,MeshDistanceMaterial:$y,MeshBasicMaterial:Ur,MeshMatcapMaterial:aF,LineDashedMaterial:lF,LineBasicMaterial:lr,Material:ci};return new n[t]}}class ms{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let n="";for(let r=0,s=t.length;r<s;r++)n+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(t){const n=t.lastIndexOf("/");return n===-1?"./":t.slice(0,n+1)}static resolveURL(t,n){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(t)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:n+t)}}class Kw extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class _F extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new Or(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(t,function(l){try{n(o.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),o.manager.itemError(t)}},r,s)}parse(t){const n={},r={};function s(g,v){if(n[v]!==void 0)return n[v];const x=g.interleavedBuffers[v],y=o(g,x.buffer),S=Bh(x.type,y),A=new _m(S,x.stride);return A.uuid=x.uuid,n[v]=A,A}function o(g,v){if(r[v]!==void 0)return r[v];const x=g.arrayBuffers[v],y=new Uint32Array(x).buffer;return r[v]=y,y}const a=t.isInstancedBufferGeometry?new Kw:new It,l=t.data.index;if(l!==void 0){const g=Bh(l.type,l.array);a.setIndex(new $t(g,1))}const c=t.data.attributes;for(const g in c){const v=c[g];let _;if(v.isInterleavedBufferAttribute){const x=s(t.data,v.data);_=new Ul(x,v.itemSize,v.offset,v.normalized)}else{const x=Bh(v.type,v.array),y=v.isInstancedBufferAttribute?ou:$t;_=new y(x,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),a.setAttribute(g,_)}const u=t.data.morphAttributes;if(u)for(const g in u){const v=u[g],_=[];for(let x=0,y=v.length;x<y;x++){const S=v[x];let A;if(S.isInterleavedBufferAttribute){const M=s(t.data,S.data);A=new Ul(M,S.itemSize,S.offset,S.normalized)}else{const M=Bh(S.type,S.array);A=new $t(M,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),_.push(A)}a.morphAttributes[g]=_}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=t.data.groups||t.data.drawcalls||t.data.offsets;if(f!==void 0)for(let g=0,v=f.length;g!==v;++g){const _=f[g];a.addGroup(_.start,_.count,_.materialIndex)}const p=t.data.boundingSphere;if(p!==void 0){const g=new Y;p.center!==void 0&&g.fromArray(p.center),a.boundingSphere=new Oi(g,p.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class o7 extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=this.path===""?ms.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const l=new Or(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){let u=null;try{u=JSON.parse(c)}catch(f){s!==void 0&&s(f),console.error("THREE:ObjectLoader: Can't parse "+t+".",f.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(u,n)},r,s)}async loadAsync(t,n){const r=this,s=this.path===""?ms.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const o=new Or(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(t,n),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await r.parseAsync(l)}parse(t,n){const r=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,s),a=this.parseImages(t.images,function(){n!==void 0&&n(u)}),l=this.parseTextures(t.textures,a),c=this.parseMaterials(t.materials,l),u=this.parseObject(t.object,o,c,l,r),h=this.parseSkeletons(t.skeletons,u);if(this.bindSkeletons(u,h),n!==void 0){let f=!1;for(const p in a)if(a[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(u)}return u}async parseAsync(t){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,r),o=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,o),l=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,s,l,a,n),u=this.parseSkeletons(t.skeletons,c);return this.bindSkeletons(c,u),c}parseShapes(t){const n={};if(t!==void 0)for(let r=0,s=t.length;r<s;r++){const o=new Zc().fromJSON(t[r]);n[o.uuid]=o}return n}parseSkeletons(t,n){const r={},s={};if(n.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),t!==void 0)for(let o=0,a=t.length;o<a;o++){const l=new Tf().fromJSON(t[o],s);r[l.uuid]=l}return r}parseGeometries(t,n){const r={};if(t!==void 0){const s=new _F;for(let o=0,a=t.length;o<a;o++){let l;const c=t[o];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(c);break;default:c.type in ZR?l=ZR[c.type].fromJSON(c,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),r[c.uuid]=l}}return r}parseMaterials(t,n){const r={},s={};if(t!==void 0){const o=new x_;o.setTextures(n);for(let a=0,l=t.length;a<l;a++){const c=t[a];r[c.uuid]===void 0&&(r[c.uuid]=o.parse(c)),s[c.uuid]=r[c.uuid]}}return s}parseAnimations(t){const n={};if(t!==void 0)for(let r=0;r<t.length;r++){const s=t[r],o=uu.parse(s);n[o.uuid]=o}return n}parseImages(t,n){const r=this,s={};let o;function a(c){return r.manager.itemStart(c),o.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const u=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return a(h)}else return c.data?{data:Bh(c.type,c.data),width:c.width,height:c.height}:null}if(t!==void 0&&t.length>0){const c=new Xw(n);o=new Zp(c),o.setCrossOrigin(this.crossOrigin);for(let u=0,h=t.length;u<h;u++){const f=t[u],p=f.url;if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v],y=l(x);y!==null&&(y instanceof HTMLImageElement?g.push(y):g.push(new Kc(y.data,y.width,y.height)))}s[f.uuid]=new kc(g)}else{const g=l(f.url);s[f.uuid]=new kc(g)}}}return s}async parseImagesAsync(t){const n=this,r={};let s;async function o(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:n.resourcePath+l;return await s.loadAsync(c)}else return a.data?{data:Bh(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){s=new Zp(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const c=t[a],u=c.url;if(Array.isArray(u)){const h=[];for(let f=0,p=u.length;f<p;f++){const g=u[f],v=await o(g);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new Kc(v.data,v.width,v.height)))}r[c.uuid]=new kc(h)}else{const h=await o(c.url);r[c.uuid]=new kc(h)}}}return r}parseTextures(t,n){function r(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const s={};if(t!==void 0)for(let o=0,a=t.length;o<a;o++){const l=t[o];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),n[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=n[l.image],u=c.data;let h;Array.isArray(u)?(h=new gm,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Kc:h=new Sn,u&&(h.needsUpdate=!0)),h.source=c,h.uuid=l.uuid,l.name!==void 0&&(h.name=l.name),l.mapping!==void 0&&(h.mapping=r(l.mapping,a7)),l.channel!==void 0&&(h.channel=l.channel),l.offset!==void 0&&h.offset.fromArray(l.offset),l.repeat!==void 0&&h.repeat.fromArray(l.repeat),l.center!==void 0&&h.center.fromArray(l.center),l.rotation!==void 0&&(h.rotation=l.rotation),l.wrap!==void 0&&(h.wrapS=r(l.wrap[0],eP),h.wrapT=r(l.wrap[1],eP)),l.format!==void 0&&(h.format=l.format),l.internalFormat!==void 0&&(h.internalFormat=l.internalFormat),l.type!==void 0&&(h.type=l.type),l.colorSpace!==void 0&&(h.colorSpace=l.colorSpace),l.encoding!==void 0&&(h.encoding=l.encoding),l.minFilter!==void 0&&(h.minFilter=r(l.minFilter,tP)),l.magFilter!==void 0&&(h.magFilter=r(l.magFilter,tP)),l.anisotropy!==void 0&&(h.anisotropy=l.anisotropy),l.flipY!==void 0&&(h.flipY=l.flipY),l.generateMipmaps!==void 0&&(h.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(h.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(h.compareFunction=l.compareFunction),l.userData!==void 0&&(h.userData=l.userData),s[l.uuid]=h}return s}parseObject(t,n,r,s,o){let a;function l(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function c(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),g.push(r[x])}return g}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return s[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),s[p]}let h,f;switch(t.type){case"Scene":a=new Ll,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new Ke(t.background):a.background=u(t.background)),t.environment!==void 0&&(a.environment=u(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new t_(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new e_(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity);break;case"PerspectiveCamera":a=new Jn(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Ua(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new Jw(t.color,t.intensity);break;case"DirectionalLight":a=new __(t.color,t.intensity);break;case"PointLight":a=new Qp(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new gF(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new y_(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new mF(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new yF().fromJSON(t);break;case"SkinnedMesh":h=l(t.geometry),f=c(t.material),a=new n_(h,f),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":h=l(t.geometry),f=c(t.material),a=new In(h,f);break;case"InstancedMesh":h=l(t.geometry),f=c(t.material);const p=t.count,g=t.instanceMatrix,v=t.instanceColor;a=new Bw(h,f,p),a.instanceMatrix=new ou(new Float32Array(g.array),16),v!==void 0&&(a.instanceColor=new ou(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":h=l(t.geometry),f=c(t.material),a=new Y3(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,f),a.geometry=h,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._visibility=t.visibility,a._active=t.active,a._bounds=t.bounds.map(_=>{const x=new Qi;x.min.fromArray(_.boxMin),x.max.fromArray(_.boxMax);const y=new Oi;return y.radius=_.sphereRadius,y.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:x,sphereInitialized:_.sphereInitialized,sphere:y}}),a._maxGeometryCount=t.maxGeometryCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._geometryCount=t.geometryCount,a._matricesTexture=u(t.matricesTexture.uuid);break;case"LOD":a=new j3;break;case"Line":a=new Xo(l(t.geometry),c(t.material));break;case"LineLoop":a=new Iw(l(t.geometry),c(t.material));break;case"LineSegments":a=new yo(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":a=new Dw(l(t.geometry),c(t.material));break;case"Sprite":a=new X3(c(t.material));break;case"Group":a=new ho;break;case"Bone":a=new ff;break;default:a=new tn}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const p=t.children;for(let g=0;g<p.length;g++)a.add(this.parseObject(p[g],n,r,s,o))}if(t.animations!==void 0){const p=t.animations;for(let g=0;g<p.length;g++){const v=p[g];a.animations.push(o[v])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const p=t.levels;for(let g=0;g<p.length;g++){const v=p[g],_=a.getObjectByProperty("uuid",v.object);_!==void 0&&a.addLevel(_,v.distance,v.hysteresis)}}return a}bindSkeletons(t,n){Object.keys(n).length!==0&&t.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=n[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}}const a7={UVMapping:Xy,CubeReflectionMapping:Go,CubeRefractionMapping:Il,EquirectangularReflectionMapping:ru,EquirectangularRefractionMapping:Np,CubeUVReflectionMapping:Ef},eP={RepeatWrapping:Ho,ClampToEdgeWrapping:Ui,MirroredRepeatWrapping:af},tP={NearestFilter:Un,NearestMipmapNearestFilter:kp,NearestMipmapLinearFilter:Jh,LinearFilter:ln,LinearMipmapNearestFilter:jy,LinearMipmapLinearFilter:Vo};class xF extends qi{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,n,r,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,a=_a.get(t);if(a!==void 0){if(o.manager.itemStart(t),a.then){a.then(u=>{n&&n(u),o.manager.itemEnd(t)}).catch(u=>{s&&s(u)});return}return setTimeout(function(){n&&n(a),o.manager.itemEnd(t)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(t,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return _a.add(t,u),n&&n(u),o.manager.itemEnd(t),u}).catch(function(u){s&&s(u),_a.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});_a.add(t,c),o.manager.itemStart(t)}}let Rv;class Zw{static getContext(){return Rv===void 0&&(Rv=new(window.AudioContext||window.webkitAudioContext)),Rv}static setContext(t){Rv=t}}class l7 extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=new Or(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(c){try{const u=c.slice(0);Zw.getContext().decodeAudioData(u,function(f){n(f)}).catch(l)}catch(u){l(u)}},r,s);function l(c){s?s(c):console.error(c),o.manager.itemError(t)}}}const nP=new at,iP=new at,dc=new at;class c7{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Jn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Jn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const n=this._cache;if(n.focus!==t.focus||n.fov!==t.fov||n.aspect!==t.aspect*this.aspect||n.near!==t.near||n.far!==t.far||n.zoom!==t.zoom||n.eyeSep!==this.eyeSep){n.focus=t.focus,n.fov=t.fov,n.aspect=t.aspect*this.aspect,n.near=t.near,n.far=t.far,n.zoom=t.zoom,n.eyeSep=this.eyeSep,dc.copy(t.projectionMatrix);const s=n.eyeSep/2,o=s*n.near/n.focus,a=n.near*Math.tan(Yc*n.fov*.5)/n.zoom;let l,c;iP.elements[12]=-s,nP.elements[12]=s,l=-a*n.aspect+o,c=a*n.aspect+o,dc.elements[0]=2*n.near/(c-l),dc.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(dc),l=-a*n.aspect-o,c=a*n.aspect-o,dc.elements[0]=2*n.near/(c-l),dc.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(dc)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(iP),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(nP)}}class Qw{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=rP();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}function rP(){return(typeof performance>"u"?Date:performance).now()}const pc=new Y,sP=new xi,u7=new Y,mc=new Y;class h7 extends tn{constructor(){super(),this.type="AudioListener",this.context=Zw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Qw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(pc,sP,u7),mc.set(0,0,-1).applyQuaternion(sP),n.positionX){const s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(pc.x,s),n.positionY.linearRampToValueAtTime(pc.y,s),n.positionZ.linearRampToValueAtTime(pc.z,s),n.forwardX.linearRampToValueAtTime(mc.x,s),n.forwardY.linearRampToValueAtTime(mc.y,s),n.forwardZ.linearRampToValueAtTime(mc.z,s),n.upX.linearRampToValueAtTime(r.x,s),n.upY.linearRampToValueAtTime(r.y,s),n.upZ.linearRampToValueAtTime(r.z,s)}else n.setPosition(pc.x,pc.y,pc.z),n.setOrientation(mc.x,mc.y,mc.z,r.x,r.y,r.z)}}class SF extends tn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const gc=new Y,oP=new xi,f7=new Y,vc=new Y;class d7 extends SF{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,n,r){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(gc,oP,f7),vc.set(0,0,1).applyQuaternion(oP);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(gc.x,r),n.positionY.linearRampToValueAtTime(gc.y,r),n.positionZ.linearRampToValueAtTime(gc.z,r),n.orientationX.linearRampToValueAtTime(vc.x,r),n.orientationY.linearRampToValueAtTime(vc.y,r),n.orientationZ.linearRampToValueAtTime(vc.z,r)}else n.setPosition(gc.x,gc.y,gc.z),n.setOrientation(vc.x,vc.y,vc.z)}}class p7{constructor(t,n=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)t+=n[r];return t/n.length}}class AF{constructor(t,n,r){this.binding=t,this.valueSize=r;let s,o,a;switch(n){case"quaternion":s=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,n){const r=this.buffer,s=this.valueSize,o=t*s+s;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==s;++l)r[o+l]=r[l];a=n}else{a+=n;const l=n/a;this._mixBufferRegion(r,o,0,l,s)}this.cumulativeWeight=a}accumulateAdditive(t){const n=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,s,0,t,r),this.cumulativeWeightAdditive+=t}apply(t){const n=this.valueSize,r=this.buffer,s=t*n+n,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const c=n*this._origIndex;this._mixBufferRegion(r,s,c,1-o,n)}a>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*n,1,n);for(let c=n,u=n+n;c!==u;++c)if(r[c]!==r[c+n]){l.setValue(r,s);break}}saveOriginalState(){const t=this.binding,n=this.buffer,r=this.valueSize,s=r*this._origIndex;t.getValue(n,s);for(let o=r,a=s;o!==a;++o)n[o]=n[s+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,n=t+this.valueSize;for(let r=t;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[t+r]}_select(t,n,r,s,o){if(s>=.5)for(let a=0;a!==o;++a)t[n+a]=t[r+a]}_slerp(t,n,r,s){xi.slerpFlat(t,n,t,n,t,r,s)}_slerpAdditive(t,n,r,s,o){const a=this._workIndex*o;xi.multiplyQuaternionsFlat(t,a,t,n,t,r),xi.slerpFlat(t,n,t,n,t,a,s)}_lerp(t,n,r,s,o){const a=1-s;for(let l=0;l!==o;++l){const c=n+l;t[c]=t[c]*a+t[r+l]*s}}_lerpAdditive(t,n,r,s,o){for(let a=0;a!==o;++a){const l=n+a;t[l]=t[l]+t[r+a]*s}}}const qw="\\[\\]\\.:\\/",m7=new RegExp("["+qw+"]","g"),$w="[^"+qw+"]",g7="[^"+qw.replace("\\.","")+"]",v7=/((?:WC+[\/:])*)/.source.replace("WC",$w),y7=/(WCOD+)?/.source.replace("WCOD",g7),_7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$w),x7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$w),S7=new RegExp("^"+v7+y7+_7+x7+"$"),A7=["material","materials","bones","map"];class E7{constructor(t,n,r){const s=r||sn.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,s)}getValue(t,n){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(t,n)}setValue(t,n){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].unbind()}}class sn{constructor(t,n,r){this.path=n,this.parsedPath=r||sn.parseTrackName(n),this.node=sn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new sn.Composite(t,n,r):new sn(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(m7,"")}static parseTrackName(t){const n=S7.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=r.nodeName.substring(s+1);A7.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(r!==void 0)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=sn.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const a=t[s];if(a===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}sn.Composite=E7;sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};sn.prototype.GetterByBindingType=[sn.prototype._getValue_direct,sn.prototype._getValue_array,sn.prototype._getValue_arrayElement,sn.prototype._getValue_toArray];sn.prototype.SetterByBindingTypeAndVersioning=[[sn.prototype._setValue_direct,sn.prototype._setValue_direct_setNeedsUpdate,sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_array,sn.prototype._setValue_array_setNeedsUpdate,sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_arrayElement,sn.prototype._setValue_arrayElement_setNeedsUpdate,sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_fromArray,sn.prototype._setValue_fromArray_setNeedsUpdate,sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class M7{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ps(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let r=0,s=arguments.length;r!==s;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const t=this._objects,n=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length;let l,c=t.length,u=this.nCachedObjects_;for(let h=0,f=arguments.length;h!==f;++h){const p=arguments[h],g=p.uuid;let v=n[g];if(v===void 0){v=c++,n[g]=v,t.push(p);for(let _=0,x=a;_!==x;++_)o[_].push(new sn(p,r[_],s[_]))}else if(v<u){l=t[v];const _=--u,x=t[_];n[x.uuid]=v,t[v]=x,n[g]=_,t[_]=p;for(let y=0,S=a;y!==S;++y){const A=o[y],M=A[_];let C=A[v];A[v]=M,C===void 0&&(C=new sn(p,r[y],s[y])),A[_]=C}}else t[v]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const t=this._objects,n=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=n[u];if(h!==void 0&&h>=o){const f=o++,p=t[f];n[p.uuid]=h,t[h]=p,n[u]=f,t[f]=c;for(let g=0,v=s;g!==v;++g){const _=r[g],x=_[f],y=_[h];_[h]=x,_[f]=y}}}this.nCachedObjects_=o}uncache(){const t=this._objects,n=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_,a=t.length;for(let l=0,c=arguments.length;l!==c;++l){const u=arguments[l],h=u.uuid,f=n[h];if(f!==void 0)if(delete n[h],f<o){const p=--o,g=t[p],v=--a,_=t[v];n[g.uuid]=f,t[f]=g,n[_.uuid]=p,t[p]=_,t.pop();for(let x=0,y=s;x!==y;++x){const S=r[x],A=S[p],M=S[v];S[f]=A,S[p]=M,S.pop()}}else{const p=--a,g=t[p];p>0&&(n[g.uuid]=f),t[f]=g,t.pop();for(let v=0,_=s;v!==_;++v){const x=r[v];x[f]=x[p],x.pop()}}}this.nCachedObjects_=o}subscribe_(t,n){const r=this._bindingsIndicesByPath;let s=r[t];const o=this._bindings;if(s!==void 0)return o[s];const a=this._paths,l=this._parsedPaths,c=this._objects,u=c.length,h=this.nCachedObjects_,f=new Array(u);s=o.length,r[t]=s,a.push(t),l.push(n),o.push(f);for(let p=h,g=c.length;p!==g;++p){const v=c[p];f[p]=new sn(v,t,n)}return f}unsubscribe_(t){const n=this._bindingsIndicesByPath,r=n[t];if(r!==void 0){const s=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],u=t[l];n[u]=r,a[r]=c,a.pop(),o[r]=o[l],o.pop(),s[r]=s[l],s.pop()}}}class EF{constructor(t,n,r=null,s=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=s;const o=n.tracks,a=o.length,l=new Array(a),c={endingStart:Oc,endingEnd:Oc};for(let u=0;u!==a;++u){const h=o[u].createInterpolant(null);l[u]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=y3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,r){if(t.fadeOut(n),this.fadeIn(n),r){const s=this._clip.duration,o=t._clip.duration,a=o/s,l=s/o;t.warp(1,a,n),this.warp(l,1,n)}return this}crossFadeTo(t,n,r){return t.crossFadeFrom(this,n,r)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,r){const s=this._mixer,o=s.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,u=l.sampleValues;return c[0]=o,c[1]=o+r,u[0]=t/a,u[1]=n/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,r,s){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const c=(t-o)*r;c<0||r===0?n=0:(this._startTime=null,n=r*c)}n*=this._updateTimeScale(t);const a=this._updateTime(n),l=this._updateWeight(t);if(l>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case yw:for(let h=0,f=c.length;h!==f;++h)c[h].evaluate(a),u[h].accumulateAdditive(l);break;case Yy:default:for(let h=0,f=c.length;h!==f;++h)c[h].evaluate(a),u[h].accumulate(s,l)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(t)[0];n*=s,t>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const s=r.evaluate(t)[0];n*=s,t>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,r=this.loop;let s=this.time+t,o=this._loopCount;const a=r===_3;if(t===0)return o===-1?s:a&&(o&1)===1?n-s:s;if(r===v3){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=n||s<0){const l=Math.floor(s/n);s-=n*l,o+=Math.abs(l);const c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){const u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(a&&(o&1)===1)return n-s}return s}_setEndings(t,n,r){const s=this._interpolantSettings;r?(s.endingStart=Nc,s.endingEnd=Nc):(t?s.endingStart=this.zeroSlopeAtStart?Nc:Oc:s.endingStart=zp,n?s.endingEnd=this.zeroSlopeAtEnd?Nc:Oc:s.endingEnd=zp)}_scheduleFading(t,n,r){const s=this._mixer,o=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,c[0]=n,l[1]=o+t,c[1]=r,this}}const w7=new Float32Array(1);class MF extends js{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,n){const r=t._localRoot||this._root,s=t._clip.tracks,o=s.length,a=t._propertyBindings,l=t._interpolants,c=r.uuid,u=this._bindingsByRootAndName;let h=u[c];h===void 0&&(h={},u[c]=h);for(let f=0;f!==o;++f){const p=s[f],g=p.name;let v=h[g];if(v!==void 0)++v.referenceCount,a[f]=v;else{if(v=a[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,c,g));continue}const _=n&&n._propertyBindings[f].binding.parsedPath;v=new AF(sn.create(r,g,_),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,c,g),a[f]=v}l[f].resultBuffer=v.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const r=(t._localRoot||this._root).uuid,s=t._clip.uuid,o=this._actionsByClip[s];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,s,r)}const n=t._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const n=t._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const n=t._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(t,n,r){const s=this._actions,o=this._actionsByClip;let a=o[n];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[n]=a;else{const l=a.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[r]=t}_removeInactiveAction(t){const n=this._actions,r=n[n.length-1],s=t._cacheIndex;r._cacheIndex=s,n[s]=r,n.pop(),t._cacheIndex=null;const o=t._clip.uuid,a=this._actionsByClip,l=a[o],c=l.knownActions,u=c[c.length-1],h=t._byClipCacheIndex;u._byClipCacheIndex=h,c[h]=u,c.pop(),t._byClipCacheIndex=null;const f=l.actionByRoot,p=(t._localRoot||this._root).uuid;delete f[p],c.length===0&&delete a[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const n=t._propertyBindings;for(let r=0,s=n.length;r!==s;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const n=this._actions,r=t._cacheIndex,s=this._nActiveActions++,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_takeBackAction(t){const n=this._actions,r=t._cacheIndex,s=--this._nActiveActions,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_addInactiveBinding(t,n,r){const s=this._bindingsByRootAndName,o=this._bindings;let a=s[n];a===void 0&&(a={},s[n]=a),a[r]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const n=this._bindings,r=t.binding,s=r.rootNode.uuid,o=r.path,a=this._bindingsByRootAndName,l=a[s],c=n[n.length-1],u=t._cacheIndex;c._cacheIndex=u,n[u]=c,n.pop(),delete l[o],Object.keys(l).length===0&&delete a[s]}_lendBinding(t){const n=this._bindings,r=t._cacheIndex,s=this._nActiveBindings++,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_takeBackBinding(t){const n=this._bindings,r=t._cacheIndex,s=--this._nActiveBindings,o=n[s];t._cacheIndex=s,n[s]=t,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const t=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=t[n];return r===void 0&&(r=new Vw(new Float32Array(2),new Float32Array(2),1,w7),r.__cacheIndex=n,t[n]=r),r}_takeBackControlInterpolant(t){const n=this._controlInterpolants,r=t.__cacheIndex,s=--this._nActiveControlInterpolants,o=n[s];t.__cacheIndex=s,n[s]=t,o.__cacheIndex=r,n[r]=o}clipAction(t,n,r){const s=n||this._root,o=s.uuid;let a=typeof t=="string"?uu.findByName(s,t):t;const l=a!==null?a.uuid:t,c=this._actionsByClip[l];let u=null;if(r===void 0&&(a!==null?r=a.blendMode:r=Yy),c!==void 0){const f=c.actionByRoot[o];if(f!==void 0&&f.blendMode===r)return f;u=c.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const h=new EF(this,a,n,r);return this._bindAction(h,u),this._addInactiveAction(h,l,o),h}existingAction(t,n){const r=n||this._root,s=r.uuid,o=typeof t=="string"?uu.findByName(r,t):t,a=o?o.uuid:t,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const t=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)t[r].stop();return this}update(t){t*=this.timeScale;const n=this._actions,r=this._nActiveActions,s=this.time+=t,o=Math.sign(t),a=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(s,t,o,a);const l=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)l[u].apply(a);return this}setTime(t){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const n=this._actions,r=t.uuid,s=this._actionsByClip,o=s[r];if(o!==void 0){const a=o.knownActions;for(let l=0,c=a.length;l!==c;++l){const u=a[l];this._deactivateAction(u);const h=u._cacheIndex,f=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=h,n[h]=f,n.pop(),this._removeInactiveBindingsForAction(u)}delete s[r]}}uncacheRoot(t){const n=t.uuid,r=this._actionsByClip;for(const a in r){const l=r[a].actionByRoot,c=l[n];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,o=s[n];if(o!==void 0)for(const a in o){const l=o[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,n){const r=this.existingAction(t,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Nt{constructor(t){this.value=t}clone(){return new Nt(this.value.clone===void 0?this.value:this.value.clone())}}let T7=0;class C7 extends js{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:T7++}),this.name="",this.usage=Wp,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const n=this.uniforms.indexOf(t);return n!==-1&&this.uniforms.splice(n,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const n=t.uniforms;this.uniforms.length=0;for(let r=0,s=n.length;r<s;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let a=0;a<o.length;a++)this.uniforms.push(o[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class b7 extends _m{constructor(t,n,r=1){super(t,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const n=super.clone(t);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(t){const n=super.toJSON(t);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class R7{constructor(t,n,r,s,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,n){return this.type=t,this.elementSize=n,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}class S_{constructor(t,n,r=0,s=1/0){this.ray=new Mf(t,n),this.near=r,this.far=s,this.camera=null,this.layers=new Jc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,n){this.ray.set(t,n)}setFromCamera(t,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(t,n=!0,r=[]){return wE(t,this,r,n),r.sort(aP),r}intersectObjects(t,n=!0,r=[]){for(let s=0,o=t.length;s<o;s++)wE(t[s],this,r,n);return r.sort(aP),r}}function aP(i,t){return i.distance-t.distance}function wE(i,t,n,r){if(i.layers.test(t.layers)&&i.raycast(t,n),r===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)wE(s[o],t,n,!0)}}class wF{constructor(t=1,n=0,r=0){return this.radius=t,this.phi=n,this.theta=r,this}set(t,n,r){return this.radius=t,this.phi=n,this.theta=r,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(li(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class P7{constructor(t=1,n=0,r=0){return this.radius=t,this.theta=n,this.y=r,this}set(t,n,r){return this.radius=t,this.theta=n,this.y=r,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+r*r),this.theta=Math.atan2(t,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const lP=new De;class B7{constructor(t=new De(1/0,1/0),n=new De(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=lP.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,lP).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const cP=new Y,Pv=new Y;class I7{constructor(t=new Y,n=new Y){this.start=t,this.end=n}set(t,n){return this.start.copy(t),this.end.copy(n),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,n){return this.delta(n).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,n){cP.subVectors(t,this.start),Pv.subVectors(this.end,this.start);const r=Pv.dot(Pv);let o=Pv.dot(cP)/r;return n&&(o=li(o,0,1)),o}closestPointToPoint(t,n,r){const s=this.closestPointToPointParameter(t,n);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const uP=new Y;class D7 extends tn{constructor(t,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new It,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const u=a/c*Math.PI*2,h=l/c*Math.PI*2;s.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new pt(s,3));const o=new lr({fog:!1,toneMapped:!1});this.cone=new yo(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),uP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $a=new Y,Bv=new at,k1=new at;class L7 extends yo{constructor(t){const n=TF(t),r=new It,s=[],o=[],a=new Ke(0,0,1),l=new Ke(0,1,0);for(let u=0;u<n.length;u++){const h=n[u];h.parent&&h.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(a.r,a.g,a.b),o.push(l.r,l.g,l.b))}r.setAttribute("position",new pt(s,3)),r.setAttribute("color",new pt(o,3));const c=new lr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,r=this.geometry,s=r.getAttribute("position");k1.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<n.length;o++){const l=n[o];l.parent&&l.parent.isBone&&(Bv.multiplyMatrices(k1,l.matrixWorld),$a.setFromMatrixPosition(Bv),s.setXYZ(a,$a.x,$a.y,$a.z),Bv.multiplyMatrices(k1,l.parent.matrixWorld),$a.setFromMatrixPosition(Bv),s.setXYZ(a+1,$a.x,$a.y,$a.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function TF(i){const t=[];i.isBone===!0&&t.push(i);for(let n=0;n<i.children.length;n++)t.push.apply(t,TF(i.children[n]));return t}class U7 extends In{constructor(t,n,r){const s=new Em(n,4,2),o=new Ur({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=t,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const F7=new Y,hP=new Ke,fP=new Ke;class O7 extends tn{constructor(t,n,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const s=new Am(n);s.rotateY(Math.PI*.5),this.material=new Ur({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),a=new Float32Array(o.count*3);s.setAttribute("color",new $t(a,3)),this.add(new In(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=t.geometry.getAttribute("color");hP.copy(this.light.color),fP.copy(this.light.groundColor);for(let r=0,s=n.count;r<s;r++){const o=r<s/2?hP:fP;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(F7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class N7 extends yo{constructor(t=10,n=10,r=4473924,s=8947848){r=new Ke(r),s=new Ke(s);const o=n/2,a=t/n,l=t/2,c=[],u=[];for(let p=0,g=0,v=-l;p<=n;p++,v+=a){c.push(-l,0,v,l,0,v),c.push(v,0,-l,v,0,l);const _=p===o?r:s;_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3}const h=new It;h.setAttribute("position",new pt(c,3)),h.setAttribute("color",new pt(u,3));const f=new lr({vertexColors:!0,toneMapped:!1});super(h,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class k7 extends yo{constructor(t=10,n=16,r=8,s=64,o=4473924,a=8947848){o=new Ke(o),a=new Ke(a);const l=[],c=[];if(n>1)for(let f=0;f<n;f++){const p=f/n*(Math.PI*2),g=Math.sin(p)*t,v=Math.cos(p)*t;l.push(0,0,0),l.push(g,0,v);const _=f&1?o:a;c.push(_.r,_.g,_.b),c.push(_.r,_.g,_.b)}for(let f=0;f<r;f++){const p=f&1?o:a,g=t-t/r*f;for(let v=0;v<s;v++){let _=v/s*(Math.PI*2),x=Math.sin(_)*g,y=Math.cos(_)*g;l.push(x,0,y),c.push(p.r,p.g,p.b),_=(v+1)/s*(Math.PI*2),x=Math.sin(_)*g,y=Math.cos(_)*g,l.push(x,0,y),c.push(p.r,p.g,p.b)}}const u=new It;u.setAttribute("position",new pt(l,3)),u.setAttribute("color",new pt(c,3));const h=new lr({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const dP=new Y,Iv=new Y,pP=new Y;class z7 extends tn{constructor(t,n,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let s=new It;s.setAttribute("position",new pt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new lr({fog:!1,toneMapped:!1});this.lightPlane=new Xo(s,o),this.add(this.lightPlane),s=new It,s.setAttribute("position",new pt([0,0,0,0,0,1],3)),this.targetLine=new Xo(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),dP.setFromMatrixPosition(this.light.matrixWorld),Iv.setFromMatrixPosition(this.light.target.matrixWorld),pP.subVectors(Iv,dP),this.lightPlane.lookAt(Iv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Iv),this.targetLine.scale.z=pP.length()}}const Dv=new Y,oi=new gu;class G7 extends yo{constructor(t){const n=new It,r=new lr({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(v,_){c(v),c(_)}function c(v){s.push(0,0,0),o.push(0,0,0),a[v]===void 0&&(a[v]=[]),a[v].push(s.length/3-1)}n.setAttribute("position",new pt(s,3)),n.setAttribute("color",new pt(o,3)),super(n,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Ke(16755200),h=new Ke(16711680),f=new Ke(43775),p=new Ke(16777215),g=new Ke(3355443);this.setColors(u,h,f,p,g)}setColors(t,n,r,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,n.r,n.g,n.b),l.setXYZ(25,n.r,n.g,n.b),l.setXYZ(26,n.r,n.g,n.b),l.setXYZ(27,n.r,n.g,n.b),l.setXYZ(28,n.r,n.g,n.b),l.setXYZ(29,n.r,n.g,n.b),l.setXYZ(30,n.r,n.g,n.b),l.setXYZ(31,n.r,n.g,n.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const t=this.geometry,n=this.pointMap,r=1,s=1;oi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pi("c",n,t,oi,0,0,-1),pi("t",n,t,oi,0,0,1),pi("n1",n,t,oi,-r,-s,-1),pi("n2",n,t,oi,r,-s,-1),pi("n3",n,t,oi,-r,s,-1),pi("n4",n,t,oi,r,s,-1),pi("f1",n,t,oi,-r,-s,1),pi("f2",n,t,oi,r,-s,1),pi("f3",n,t,oi,-r,s,1),pi("f4",n,t,oi,r,s,1),pi("u1",n,t,oi,r*.7,s*1.1,-1),pi("u2",n,t,oi,-r*.7,s*1.1,-1),pi("u3",n,t,oi,0,s*2,-1),pi("cf1",n,t,oi,-r,0,1),pi("cf2",n,t,oi,r,0,1),pi("cf3",n,t,oi,0,-s,1),pi("cf4",n,t,oi,0,s,1),pi("cn1",n,t,oi,-r,0,-1),pi("cn2",n,t,oi,r,0,-1),pi("cn3",n,t,oi,0,-s,-1),pi("cn4",n,t,oi,0,s,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function pi(i,t,n,r,s,o,a){Dv.set(s,o,a).unproject(r);const l=t[i];if(l!==void 0){const c=n.getAttribute("position");for(let u=0,h=l.length;u<h;u++)c.setXYZ(l[u],Dv.x,Dv.y,Dv.z)}}const Lv=new Qi;class H7 extends yo{constructor(t,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new It;o.setIndex(new $t(r,1)),o.setAttribute("position",new $t(s,3)),super(o,new lr({color:n,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Lv.setFromObject(this.object),Lv.isEmpty())return;const n=Lv.min,r=Lv.max,s=this.geometry.attributes.position,o=s.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,n){return super.copy(t,n),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class V7 extends yo{constructor(t,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new It;o.setIndex(new $t(r,1)),o.setAttribute("position",new pt(s,3)),super(o,new lr({color:n,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class W7 extends Xo{constructor(t,n=1,r=16776960){const s=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new It;a.setAttribute("position",new pt(o,3)),a.computeBoundingSphere(),super(a,new lr({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=n;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new It;c.setAttribute("position",new pt(l,3)),c.computeBoundingSphere(),this.add(new In(c,new Ur({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const mP=new Y;let Uv,z1;class X7 extends tn{constructor(t=new Y(0,0,1),n=new Y(0,0,0),r=1,s=16776960,o=r*.2,a=o*.2){super(),this.type="ArrowHelper",Uv===void 0&&(Uv=new It,Uv.setAttribute("position",new pt([0,0,0,0,1,0],3)),z1=new Cf(0,.5,1,5,1),z1.translate(0,-.5,0)),this.position.copy(n),this.line=new Xo(Uv,new lr({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new In(z1,new Ur({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,o,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{mP.set(t.z,0,-t.x).normalize();const n=Math.acos(t.y);this.quaternion.setFromAxisAngle(mP,n)}}setLength(t,n=t*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,t-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class j7 extends yo{constructor(t=1){const n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new It;s.setAttribute("position",new pt(n,3)),s.setAttribute("color",new pt(r,3));const o=new lr({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(t,n,r){const s=new Ke,o=this.geometry.attributes.color.array;return s.set(t),s.toArray(o,0),s.toArray(o,3),s.set(n),s.toArray(o,6),s.toArray(o,9),s.set(r),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class CF{constructor(){this.type="ShapePath",this.color=new Ke,this.subPaths=[],this.currentPath=null}moveTo(t,n){return this.currentPath=new jp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,n),this}lineTo(t,n){return this.currentPath.lineTo(t,n),this}quadraticCurveTo(t,n,r,s){return this.currentPath.quadraticCurveTo(t,n,r,s),this}bezierCurveTo(t,n,r,s,o,a){return this.currentPath.bezierCurveTo(t,n,r,s,o,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(y){const S=[];for(let A=0,M=y.length;A<M;A++){const C=y[A],T=new Zc;T.curves=C.curves,S.push(T)}return S}function r(y,S){const A=S.length;let M=!1;for(let C=A-1,T=0;T<A;C=T++){let R=S[C],I=S[T],P=I.x-R.x,B=I.y-R.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(R=S[T],P=-P,I=S[C],B=-B),y.y<R.y||y.y>I.y)continue;if(y.y===R.y){if(y.x===R.x)return!0}else{const O=B*(y.x-R.x)-P*(y.y-R.y);if(O===0)return!0;if(O<0)continue;M=!M}}else{if(y.y!==R.y)continue;if(I.x<=y.x&&y.x<=R.x||R.x<=y.x&&y.x<=I.x)return!0}}return M}const s=ko.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,l,c;const u=[];if(o.length===1)return l=o[0],c=new Zc,c.curves=l.curves,u.push(c),u;let h=!s(o[0].getPoints());h=t?!h:h;const f=[],p=[];let g=[],v=0,_;p[v]=void 0,g[v]=[];for(let y=0,S=o.length;y<S;y++)l=o[y],_=l.getPoints(),a=s(_),a=t?!a:a,a?(!h&&p[v]&&v++,p[v]={s:new Zc,p:_},p[v].s.curves=l.curves,h&&v++,g[v]=[]):g[v].push({h:l,p:_[0]});if(!p[0])return n(o);if(p.length>1){let y=!1,S=0;for(let A=0,M=p.length;A<M;A++)f[A]=[];for(let A=0,M=p.length;A<M;A++){const C=g[A];for(let T=0;T<C.length;T++){const R=C[T];let I=!0;for(let P=0;P<p.length;P++)r(R.p,p[P].p)&&(A!==P&&S++,I?(I=!1,f[P].push(R)):y=!0);I&&f[A].push(R)}}S>0&&y===!1&&(g=f)}let x;for(let y=0,S=p.length;y<S;y++){c=p[y].s,u.push(c),x=g[y];for(let A=0,M=x.length;A<M;A++)c.holes.push(x[A].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Jo}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Jo);const bF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:cw,AddEquation:dl,AddOperation:i3,AdditiveAnimationBlendMode:yw,AdditiveBlending:kA,AgXToneMapping:l3,AlphaFormat:f3,AlwaysCompare:b3,AlwaysDepth:ZU,AlwaysStencilFunc:gE,AmbientLight:Jw,AnimationAction:EF,AnimationClip:uu,AnimationLoader:t7,AnimationMixer:MF,AnimationObjectGroup:M7,AnimationUtils:QW,ArcCurve:J3,ArrayCamera:H3,ArrowHelper:X7,AttachedBindMode:WA,Audio:SF,AudioAnalyser:p7,AudioContext:Zw,AudioListener:h7,AudioLoader:l7,AxesHelper:j7,BackSide:Ci,BasicDepthPacking:Gl,BasicShadowMap:IU,BatchedMesh:Y3,Bone:ff,BooleanKeyframeTrack:yu,Box2:B7,Box3:Qi,Box3Helper:V7,BoxGeometry:mu,BoxHelper:H7,BufferAttribute:$t,BufferGeometry:It,BufferGeometryLoader:_F,ByteType:u3,Cache:_a,Camera:gu,CameraHelper:G7,CanvasTexture:SW,CapsuleGeometry:o_,CatmullRomCurve3:K3,CineonToneMapping:o3,CircleGeometry:a_,ClampToEdgeWrapping:Ui,Clock:Qw,Color:Ke,ColorKeyframeTrack:Ww,ColorManagement:En,CompressedArrayTexture:_W,CompressedCubeTexture:xW,CompressedTexture:r_,CompressedTextureLoader:n7,ConeGeometry:l_,ConstantAlphaFactor:YU,ConstantColorFactor:XU,CubeCamera:L3,CubeReflectionMapping:Go,CubeRefractionMapping:Il,CubeTexture:gm,CubeTextureLoader:pF,CubeUVReflectionMapping:Ef,CubicBezierCurve:Uw,CubicBezierCurve3:Z3,CubicInterpolant:hF,CullFaceBack:NA,CullFaceFront:BU,CullFaceFrontBack:dH,CullFaceNone:PU,Curve:Ys,CurvePath:q3,CustomBlending:DU,CustomToneMapping:a3,CylinderGeometry:Cf,Cylindrical:P7,Data3DTexture:Mw,DataArrayTexture:Ky,DataTexture:Kc,DataTextureLoader:jw,DataUtils:zc,DecrementStencilOp:AH,DecrementWrapStencilOp:MH,DefaultLoadingManager:Uh,DepthFormat:Ea,DepthStencilFormat:Dl,DepthTexture:ym,DetachedBindMode:c3,DirectionalLight:__,DirectionalLightHelper:z7,DiscreteInterpolant:fF,DisplayP3ColorSpace:Jy,DodecahedronGeometry:c_,DoubleSide:Li,DstAlphaFactor:zU,DstColorFactor:HU,DynamicCopyUsage:kH,DynamicDrawUsage:DH,DynamicReadUsage:FH,EdgesGeometry:$3,EllipseCurve:s_,EqualCompare:M3,EqualDepth:qU,EqualStencilFunc:bH,EquirectangularReflectionMapping:ru,EquirectangularRefractionMapping:Np,Euler:uo,EventDispatcher:js,ExtrudeGeometry:h_,FileLoader:Or,Float16BufferAttribute:MV,Float32BufferAttribute:pt,Float64BufferAttribute:wV,FloatType:Yi,Fog:t_,FogExp2:e_,FramebufferTexture:yW,FrontSide:Xs,Frustum:vm,GLBufferAttribute:R7,GLSL1:GH,GLSL3:vE,GreaterCompare:w3,GreaterDepth:e3,GreaterEqualCompare:C3,GreaterEqualDepth:$U,GreaterEqualStencilFunc:IH,GreaterStencilFunc:PH,GridHelper:N7,Group:ho,HalfFloatType:Ji,HemisphereLight:mF,HemisphereLightHelper:O7,IcosahedronGeometry:Sm,ImageBitmapLoader:xF,ImageLoader:Zp,ImageUtils:Ew,IncrementStencilOp:SH,IncrementWrapStencilOp:EH,InstancedBufferAttribute:ou,InstancedBufferGeometry:Kw,InstancedInterleavedBuffer:b7,InstancedMesh:Bw,Int16BufferAttribute:AV,Int32BufferAttribute:EV,Int8BufferAttribute:_V,IntType:uw,InterleavedBuffer:_m,InterleavedBufferAttribute:Ul,Interpolant:bf,InterpolateDiscrete:lf,InterpolateLinear:su,InterpolateSmooth:x0,InvertStencilOp:wH,KeepStencilOp:Tc,KeyframeTrack:_o,LOD:j3,LatheGeometry:xm,Layers:Jc,LessCompare:E3,LessDepth:QU,LessEqualCompare:Sw,LessEqualDepth:Op,LessEqualStencilFunc:RH,LessStencilFunc:CH,Light:Xl,LightProbe:yF,Line:Xo,Line3:I7,LineBasicMaterial:lr,LineCurve:Fw,LineCurve3:Q3,LineDashedMaterial:lF,LineLoop:Iw,LineSegments:yo,LinearDisplayP3ColorSpace:mm,LinearEncoding:pm,LinearFilter:ln,LinearInterpolant:Vw,LinearMipMapLinearFilter:yH,LinearMipMapNearestFilter:vH,LinearMipmapLinearFilter:Vo,LinearMipmapNearestFilter:jy,LinearSRGBColorSpace:Wo,LinearToneMapping:r3,LinearTransfer:Gp,Loader:qi,LoaderUtils:ms,LoadingManager:Xw,LoopOnce:v3,LoopPingPong:_3,LoopRepeat:y3,LuminanceAlphaFormat:p3,LuminanceFormat:d3,MOUSE:hH,Material:ci,MaterialLoader:x_,MathUtils:ir,Matrix3:Yt,Matrix4:at,MaxEquation:VA,Mesh:In,MeshBasicMaterial:Ur,MeshDepthMaterial:qy,MeshDistanceMaterial:$y,MeshLambertMaterial:Gw,MeshMatcapMaterial:aF,MeshNormalMaterial:zw,MeshPhongMaterial:lp,MeshPhysicalMaterial:Ko,MeshStandardMaterial:vu,MeshToonMaterial:oF,MinEquation:HA,MirroredRepeatWrapping:af,MixOperation:n3,MultiplyBlending:GA,MultiplyOperation:fm,NearestFilter:Un,NearestMipMapLinearFilter:gH,NearestMipMapNearestFilter:mH,NearestMipmapLinearFilter:Jh,NearestMipmapNearestFilter:kp,NeverCompare:A3,NeverDepth:KU,NeverStencilFunc:TH,NoBlending:sr,NoColorSpace:hs,NoToneMapping:Oo,NormalAnimationBlendMode:Yy,NormalBlending:jc,NotEqualCompare:T3,NotEqualDepth:t3,NotEqualStencilFunc:BH,NumberKeyframeTrack:lu,Object3D:tn,ObjectLoader:o7,ObjectSpaceNormalMap:S3,OctahedronGeometry:Am,OneFactor:OU,OneMinusConstantAlphaFactor:JU,OneMinusConstantColorFactor:jU,OneMinusDstAlphaFactor:GU,OneMinusDstColorFactor:VU,OneMinusSrcAlphaFactor:iy,OneMinusSrcColorFactor:kU,OrthographicCamera:Ua,P3Primaries:Vp,PCFShadowMap:Wy,PCFSoftShadowMap:ip,PMREMGenerator:_E,Path:jp,PerspectiveCamera:Jn,Plane:ma,PlaneGeometry:Vl,PlaneHelper:W7,PointLight:Qp,PointLightHelper:U7,Points:Dw,PointsMaterial:i_,PolarGridHelper:k7,PolyhedronGeometry:Wl,PositionalAudio:d7,PropertyBinding:sn,PropertyMixer:AF,QuadraticBezierCurve:Ow,QuadraticBezierCurve3:Nw,Quaternion:xi,QuaternionKeyframeTrack:Ba,QuaternionLinearInterpolant:dF,RED_GREEN_RGTC2_Format:pE,RED_RGTC1_Format:g3,REVISION:Jo,RGBADepthPacking:xw,RGBAFormat:xr,RGBAIntegerFormat:gw,RGBA_ASTC_10x10_Format:lE,RGBA_ASTC_10x5_Format:sE,RGBA_ASTC_10x6_Format:oE,RGBA_ASTC_10x8_Format:aE,RGBA_ASTC_12x10_Format:cE,RGBA_ASTC_12x12_Format:uE,RGBA_ASTC_4x4_Format:QA,RGBA_ASTC_5x4_Format:qA,RGBA_ASTC_5x5_Format:$A,RGBA_ASTC_6x5_Format:eE,RGBA_ASTC_6x6_Format:tE,RGBA_ASTC_8x5_Format:nE,RGBA_ASTC_8x6_Format:iE,RGBA_ASTC_8x8_Format:rE,RGBA_BPTC_Format:_0,RGBA_ETC2_EAC_Format:ZA,RGBA_PVRTC_2BPPV1_Format:JA,RGBA_PVRTC_4BPPV1_Format:YA,RGBA_S3TC_DXT1_Format:g0,RGBA_S3TC_DXT3_Format:v0,RGBA_S3TC_DXT5_Format:y0,RGB_BPTC_SIGNED_Format:hE,RGB_BPTC_UNSIGNED_Format:fE,RGB_ETC1_Format:vw,RGB_ETC2_Format:KA,RGB_PVRTC_2BPPV1_Format:jA,RGB_PVRTC_4BPPV1_Format:XA,RGB_S3TC_DXT1_Format:m0,RGFormat:m3,RGIntegerFormat:mw,RawShaderMaterial:sF,Ray:Mf,Raycaster:S_,Rec709Primaries:Hp,RectAreaLight:gF,RedFormat:dw,RedIntegerFormat:pw,ReinhardToneMapping:s3,RenderTarget:B3,RepeatWrapping:Ho,ReplaceStencilOp:xH,ReverseSubtractEquation:UU,RingGeometry:f_,SIGNED_RED_GREEN_RGTC2_Format:mE,SIGNED_RED_RGTC1_Format:dE,SRGBColorSpace:wi,SRGBTransfer:Ln,Scene:Ll,ShaderChunk:jt,ShaderLib:ao,ShaderMaterial:Ri,ShadowMaterial:rF,Shape:Zc,ShapeGeometry:d_,ShapePath:CF,ShapeUtils:ko,ShortType:h3,Skeleton:Tf,SkeletonHelper:L7,SkinnedMesh:n_,Source:kc,Sphere:Oi,SphereGeometry:Em,Spherical:wF,SphericalHarmonics3:vF,SplineCurve:kw,SpotLight:y_,SpotLightHelper:D7,Sprite:X3,SpriteMaterial:Pw,SrcAlphaFactor:ny,SrcAlphaSaturateFactor:WU,SrcColorFactor:NU,StaticCopyUsage:NH,StaticDrawUsage:Wp,StaticReadUsage:UH,StereoCamera:c7,StreamCopyUsage:zH,StreamDrawUsage:LH,StreamReadUsage:OH,StringKeyframeTrack:_u,SubtractEquation:LU,SubtractiveBlending:zA,TOUCH:fH,TangentSpaceNormalMap:Hl,TetrahedronGeometry:p_,Texture:Sn,TextureLoader:Rf,TorusGeometry:m_,TorusKnotGeometry:g_,Triangle:Jr,TriangleFanDrawMode:ry,TriangleStripDrawMode:_w,TrianglesDrawMode:x3,TubeGeometry:v_,TwoPassDoubleSide:pH,UVMapping:Xy,Uint16BufferAttribute:Zy,Uint32BufferAttribute:ww,Uint8BufferAttribute:xV,Uint8ClampedBufferAttribute:SV,Uniform:Nt,UniformsGroup:C7,UniformsLib:st,UniformsUtils:Tw,UnsignedByteType:or,UnsignedInt248Type:Aa,UnsignedIntType:Do,UnsignedShort4444Type:hw,UnsignedShort5551Type:fw,UnsignedShortType:dm,VSMShadowMap:ro,Vector2:De,Vector3:Y,Vector4:qt,VectorKeyframeTrack:cu,VideoTexture:vW,WebGL1Renderer:V3,WebGL3DRenderTarget:aV,WebGLArrayRenderTarget:oV,WebGLCoordinateSystem:co,WebGLCubeRenderTarget:Cw,WebGLMultipleRenderTargets:lV,WebGLRenderTarget:Kn,WebGLRenderer:Rw,WebGLUtils:G3,WebGPUCoordinateSystem:cf,WireframeGeometry:iF,WrapAroundEnding:zp,ZeroCurvatureEnding:Oc,ZeroFactor:FU,ZeroSlopeEnding:Nc,ZeroStencilOp:_H,_SRGBAFormat:sy,createCanvasElement:P3,sRGBEncoding:No},Symbol.toStringTag,{value:"Module"}));var RF={exports:{}},xu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */xu.ConcurrentRoot=1;xu.ContinuousEventPriority=4;xu.DefaultEventPriority=16;xu.DiscreteEventPriority=1;xu.IdleEventPriority=536870912;xu.LegacyRoot=0;RF.exports=xu;var Fh=RF.exports;function Y7(i){let t;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(t):u;if(f!==t){const p=t;t=h?f:Object.assign({},t,f),n.forEach(g=>g(t,p))}},s=()=>t,o=(u,h=s,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(t);function g(){const v=h(t);if(!f(p,v)){const _=p;u(p=v,_)}}return n.add(g),()=>n.delete(g)},c={setState:r,getState:s,subscribe:(u,h,f)=>h||f?o(u,h,f):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=i(r,s,c),c}const J7=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gP=J7?ee.useEffect:ee.useLayoutEffect;function eT(i){const t=typeof i=="function"?Y7(i):i,n=(r=t.getState,s=Object.is)=>{const[,o]=ee.useReducer(x=>x+1,0),a=t.getState(),l=ee.useRef(a),c=ee.useRef(r),u=ee.useRef(s),h=ee.useRef(!1),f=ee.useRef();f.current===void 0&&(f.current=r(a));let p,g=!1;(l.current!==a||c.current!==r||u.current!==s||h.current)&&(p=r(a),g=!s(f.current,p)),gP(()=>{g&&(f.current=p),l.current=a,c.current=r,u.current=s,h.current=!1});const v=ee.useRef(a);gP(()=>{const x=()=>{try{const S=t.getState(),A=c.current(S);u.current(f.current,A)||(l.current=S,f.current=A,o())}catch{h.current=!0,o()}},y=t.subscribe(x);return t.getState()!==v.current&&x(),y},[]);const _=g?p:f.current;return ee.useDebugValue(_),_};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const s=r.length<=0;return{value:r.shift(),done:s}}}},n}var PF={exports:{}},BF={exports:{}},IF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(H,X){var K=H.length;H.push(X);e:for(;0<K;){var k=K-1>>>1,Z=H[k];if(0<s(Z,X))H[k]=X,H[K]=Z,K=k;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],K=H.pop();if(K!==X){H[0]=K;e:for(var k=0,Z=H.length,Q=Z>>>1;k<Q;){var se=2*(k+1)-1,le=H[se],fe=se+1,ue=H[fe];if(0>s(le,K))fe<Z&&0>s(ue,le)?(H[k]=ue,H[fe]=K,k=fe):(H[k]=le,H[se]=K,k=se);else if(fe<Z&&0>s(ue,K))H[k]=ue,H[fe]=K,k=fe;else break e}}return X}function s(H,X){var K=H.sortIndex-X.sortIndex;return K!==0?K:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(H){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=H)r(u),X.sortIndex=X.expirationTime,t(c,X);else break;X=n(u)}}function M(H){if(_=!1,A(H),!v)if(n(c)!==null)v=!0,q(C);else{var X=n(u);X!==null&&he(M,X.startTime-H)}}function C(H,X){v=!1,_&&(_=!1,y(I),I=-1),g=!0;var K=p;try{for(A(X),f=n(c);f!==null&&(!(f.expirationTime>X)||H&&!O());){var k=f.callback;if(typeof k=="function"){f.callback=null,p=f.priorityLevel;var Z=k(f.expirationTime<=X);X=i.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),A(X)}else r(c);f=n(c)}if(f!==null)var Q=!0;else{var se=n(u);se!==null&&he(M,se.startTime-X),Q=!1}return Q}finally{f=null,p=K,g=!1}}var T=!1,R=null,I=-1,P=5,B=-1;function O(){return!(i.unstable_now()-B<P)}function N(){if(R!==null){var H=i.unstable_now();B=H;var X=!0;try{X=R(!0,H)}finally{X?ne():(T=!1,R=null)}}else T=!1}var ne;if(typeof S=="function")ne=function(){S(N)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,j=z.port2;z.port1.onmessage=N,ne=function(){j.postMessage(null)}}else ne=function(){x(N,0)};function q(H){R=H,T||(T=!0,ne())}function he(H,X){I=x(function(){H(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,q(C))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return n(c)},i.unstable_next=function(H){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var K=p;p=X;try{return H()}finally{p=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return X()}finally{p=K}},i.unstable_scheduleCallback=function(H,X,K){var k=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?k+K:k):K=k,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=K+Z,H={id:h++,callback:X,priorityLevel:H,startTime:K,expirationTime:Z,sortIndex:-1},K>k?(H.sortIndex=K,t(u,H),n(c)===null&&H===n(u)&&(_?(y(I),I=-1):_=!0,he(M,K-k))):(H.sortIndex=Z,t(c,H),v||g||(v=!0,q(C))),H},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(H){var X=p;return function(){var K=p;p=X;try{return H.apply(this,arguments)}finally{p=K}}}})(IF);BF.exports=IF;var TE=BF.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K7=function(t){var n={},r=ee,s=TE,o=Object.assign;function a(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,E=1;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),C=Symbol.iterator;function T(d){return d===null||typeof d!="object"?null:(d=C&&d[C]||d["@@iterator"],typeof d=="function"?d:null)}function R(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case y:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case v:return(d.displayName||"Context")+".Consumer";case g:return(d._context.displayName||"Context")+".Provider";case _:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case S:return m=d.displayName||null,m!==null?m:R(d.type)||"Memo";case A:m=d._payload,d=d._init;try{return R(d(m))}catch{}}return null}function I(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(m);case 8:return m===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function P(d){var m=d,E=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,m.flags&4098&&(E=m.return),d=m.return;while(d)}return m.tag===3?E:null}function B(d){if(P(d)!==d)throw Error(a(188))}function O(d){var m=d.alternate;if(!m){if(m=P(d),m===null)throw Error(a(188));return m!==d?null:d}for(var E=d,w=m;;){var b=E.return;if(b===null)break;var D=b.alternate;if(D===null){if(w=b.return,w!==null){E=w;continue}break}if(b.child===D.child){for(D=b.child;D;){if(D===E)return B(b),d;if(D===w)return B(b),m;D=D.sibling}throw Error(a(188))}if(E.return!==w.return)E=b,w=D;else{for(var ie=!1,pe=b.child;pe;){if(pe===E){ie=!0,E=b,w=D;break}if(pe===w){ie=!0,w=b,E=D;break}pe=pe.sibling}if(!ie){for(pe=D.child;pe;){if(pe===E){ie=!0,E=D,w=b;break}if(pe===w){ie=!0,w=D,E=b;break}pe=pe.sibling}if(!ie)throw Error(a(189))}}if(E.alternate!==w)throw Error(a(190))}if(E.tag!==3)throw Error(a(188));return E.stateNode.current===E?d:m}function N(d){return d=O(d),d!==null?ne(d):null}function ne(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=ne(d);if(m!==null)return m;d=d.sibling}return null}function z(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var m=z(d);if(m!==null)return m}d=d.sibling}return null}var j=Array.isArray,q=t.getPublicInstance,he=t.getRootHostContext,H=t.getChildHostContext,X=t.prepareForCommit,K=t.resetAfterCommit,k=t.createInstance,Z=t.appendInitialChild,Q=t.finalizeInitialChildren,se=t.prepareUpdate,le=t.shouldSetTextContent,fe=t.createTextInstance,ue=t.scheduleTimeout,Se=t.cancelTimeout,ke=t.noTimeout,Be=t.isPrimaryRenderer,Ae=t.supportsMutation,W=t.supportsPersistence,Re=t.supportsHydration,Ee=t.getInstanceFromNode,Ce=t.preparePortalMount,_e=t.getCurrentEventPriority,Ye=t.detachDeletedInstance,we=t.supportsMicrotasks,G=t.scheduleMicrotask,F=t.supportsTestSelectors,te=t.findFiberRoot,xe=t.getBoundingRect,ge=t.getTextContent,ye=t.isHiddenSubtree,Fe=t.matchAccessibilityRole,Ve=t.setFocusIfFocusable,He=t.setupIntersectionObserver,je=t.appendChild,tt=t.appendChildToContainer,Oe=t.commitTextUpdate,yt=t.commitMount,Qe=t.commitUpdate,it=t.insertBefore,Ge=t.insertInContainerBefore,ze=t.removeChild,Ze=t.removeChildFromContainer,ht=t.resetTextContent,_t=t.hideInstance,rt=t.hideTextInstance,ve=t.unhideInstance,ae=t.unhideTextInstance,$e=t.clearContainer,et=t.cloneInstance,St=t.createContainerChildSet,mt=t.appendChildToContainerChildSet,kt=t.finalizeContainerChildren,Tt=t.replaceContainerChildren,An=t.cloneHiddenInstance,Wt=t.cloneHiddenTextInstance,Ct=t.canHydrateInstance,vn=t.canHydrateTextInstance,wn=t.canHydrateSuspenseInstance,nn=t.isSuspenseInstancePending,On=t.isSuspenseInstanceFallback,Nn=t.registerSuspenseInstanceRetry,yn=t.getNextHydratableSibling,xt=t.getFirstHydratableChild,Zn=t.getFirstHydratableChildWithinContainer,Er=t.getFirstHydratableChildWithinSuspenseInstance,U=t.hydrateInstance,V=t.hydrateTextInstance,ce=t.hydrateSuspenseInstance,L=t.getNextHydratableInstanceAfterSuspenseInstance,J=t.commitHydratedContainer,$=t.commitHydratedSuspenseInstance,oe=t.clearSuspenseBoundary,re=t.clearSuspenseBoundaryFromContainer,Te=t.shouldDeleteUnhydratedTailInstances,Pe=t.didNotMatchHydratedContainerTextInstance,Le=t.didNotMatchHydratedTextInstance,de;function lt(d){if(de===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);de=m&&m[1]||""}return`
`+de+d}var Xe=!1;function We(d,m){if(!d||Xe)return"";Xe=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(qe){var w=qe}Reflect.construct(d,[],m)}else{try{m.call()}catch(qe){w=qe}d.call(m.prototype)}else{try{throw Error()}catch(qe){w=qe}d()}}catch(qe){if(qe&&w&&typeof qe.stack=="string"){for(var b=qe.stack.split(`
`),D=w.stack.split(`
`),ie=b.length-1,pe=D.length-1;1<=ie&&0<=pe&&b[ie]!==D[pe];)pe--;for(;1<=ie&&0<=pe;ie--,pe--)if(b[ie]!==D[pe]){if(ie!==1||pe!==1)do if(ie--,pe--,0>pe||b[ie]!==D[pe]){var Ue=`
`+b[ie].replace(" at new "," at ");return d.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",d.displayName)),Ue}while(1<=ie&&0<=pe);break}}}finally{Xe=!1,Error.prepareStackTrace=E}return(d=d?d.displayName||d.name:"")?lt(d):""}var dt=Object.prototype.hasOwnProperty,At=[],Mt=-1;function Bt(d){return{current:d}}function ct(d){0>Mt||(d.current=At[Mt],At[Mt]=null,Mt--)}function nt(d,m){Mt++,At[Mt]=d.current,d.current=m}var zt={},bt=Bt(zt),Rt=Bt(!1),fn=zt;function Tn(d,m){var E=d.type.contextTypes;if(!E)return zt;var w=d.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===m)return w.__reactInternalMemoizedMaskedChildContext;var b={},D;for(D in E)b[D]=m[D];return w&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=b),b}function Cn(d){return d=d.childContextTypes,d!=null}function Jt(){ct(Rt),ct(bt)}function Xt(d,m,E){if(bt.current!==zt)throw Error(a(168));nt(bt,m),nt(Rt,E)}function Pn(d,m,E){var w=d.stateNode;if(m=m.childContextTypes,typeof w.getChildContext!="function")return E;w=w.getChildContext();for(var b in w)if(!(b in m))throw Error(a(108,I(d)||"Unknown",b));return o({},E,w)}function Ot(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||zt,fn=bt.current,nt(bt,d),nt(Rt,Rt.current),!0}function Ut(d,m,E){var w=d.stateNode;if(!w)throw Error(a(169));E?(d=Pn(d,m,fn),w.__reactInternalMemoizedMergedChildContext=d,ct(Rt),ct(bt),nt(bt,d)):ct(Rt),nt(Rt,E)}var bn=Math.clz32?Math.clz32:es,$i=Math.log,ui=Math.LN2;function es(d){return d>>>=0,d===0?32:31-($i(d)/ui|0)|0}var Zo=64,Qo=4194304;function qo(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Yl(d,m){var E=d.pendingLanes;if(E===0)return 0;var w=0,b=d.suspendedLanes,D=d.pingedLanes,ie=E&268435455;if(ie!==0){var pe=ie&~b;pe!==0?w=qo(pe):(D&=ie,D!==0&&(w=qo(D)))}else ie=E&~b,ie!==0?w=qo(ie):D!==0&&(w=qo(D));if(w===0)return 0;if(m!==0&&m!==w&&!(m&b)&&(b=w&-w,D=m&-m,b>=D||b===16&&(D&4194240)!==0))return m;if(w&4&&(w|=E&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=w;0<m;)E=31-bn(m),b=1<<E,w|=d[E],m&=~b;return w}function Nm(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Df(d,m){for(var E=d.suspendedLanes,w=d.pingedLanes,b=d.expirationTimes,D=d.pendingLanes;0<D;){var ie=31-bn(D),pe=1<<ie,Ue=b[ie];Ue===-1?(!(pe&E)||pe&w)&&(b[ie]=Nm(pe,m)):Ue<=m&&(d.expiredLanes|=pe),D&=~pe}}function $o(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function wu(d){for(var m=[],E=0;31>E;E++)m.push(d);return m}function xo(d,m,E){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-bn(m),d[m]=E}function Fa(d,m){var E=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var w=d.eventTimes;for(d=d.expirationTimes;0<E;){var b=31-bn(E),D=1<<b;m[b]=0,w[b]=-1,d[b]=-1,E&=~D}}function So(d,m){var E=d.entangledLanes|=m;for(d=d.entanglements;E;){var w=31-bn(E),b=1<<w;b&m|d[w]&m&&(d[w]|=m),E&=~b}}var rn=0;function Lf(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var ea=s.unstable_scheduleCallback,Tu=s.unstable_cancelCallback,Uf=s.unstable_shouldYield,km=s.unstable_requestPaint,Qn=s.unstable_now,Jl=s.unstable_ImmediatePriority,zm=s.unstable_UserBlockingPriority,Mr=s.unstable_NormalPriority,Ff=s.unstable_IdlePriority,Kl=null,ts=null;function Of(d){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(Kl,d,void 0,(d.current.flags&128)===128)}catch{}}function Gm(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var ns=typeof Object.is=="function"?Object.is:Gm,wr=null,Ao=!1,Ss=!1;function Nf(d){wr===null?wr=[d]:wr.push(d)}function kf(d){Ao=!0,Nf(d)}function zr(){if(!Ss&&wr!==null){Ss=!0;var d=0,m=rn;try{var E=wr;for(rn=1;d<E.length;d++){var w=E[d];do w=w(!0);while(w!==null)}wr=null,Ao=!1}catch(b){throw wr!==null&&(wr=wr.slice(d+1)),ea(Jl,zr),b}finally{rn=m,Ss=!1}}return null}var Zl=l.ReactCurrentBatchConfig;function Ql(d,m){if(ns(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var E=Object.keys(d),w=Object.keys(m);if(E.length!==w.length)return!1;for(w=0;w<E.length;w++){var b=E[w];if(!dt.call(m,b)||!ns(d[b],m[b]))return!1}return!0}function ql(d){switch(d.tag){case 5:return lt(d.type);case 16:return lt("Lazy");case 13:return lt("Suspense");case 19:return lt("SuspenseList");case 0:case 2:case 15:return d=We(d.type,!1),d;case 11:return d=We(d.type.render,!1),d;case 1:return d=We(d.type,!0),d;default:return""}}function Tr(d,m){if(d&&d.defaultProps){m=o({},m),d=d.defaultProps;for(var E in d)m[E]===void 0&&(m[E]=d[E]);return m}return m}var zi=Bt(null),Cu=null,Ks=null,Oa=null;function bu(){Oa=Ks=Cu=null}function Hm(d,m,E){Be?(nt(zi,m._currentValue),m._currentValue=E):(nt(zi,m._currentValue2),m._currentValue2=E)}function Gi(d){var m=zi.current;ct(zi),Be?d._currentValue=m:d._currentValue2=m}function Cr(d,m,E){for(;d!==null;){var w=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,w!==null&&(w.childLanes|=m)):w!==null&&(w.childLanes&m)!==m&&(w.childLanes|=m),d===E)break;d=d.return}}function hi(d,m){Cu=d,Oa=Ks=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&m&&(os=!0),d.firstContext=null)}function fi(d){var m=Be?d._currentValue:d._currentValue2;if(Oa!==d)if(d={context:d,memoizedValue:m,next:null},Ks===null){if(Cu===null)throw Error(a(308));Ks=d,Cu.dependencies={lanes:0,firstContext:d}}else Ks=Ks.next=d;return m}var is=null,Na=!1;function k_(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sC(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ta(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function ka(d,m){var E=d.updateQueue;E!==null&&(E=E.shared,Si!==null&&d.mode&1&&!(en&2)?(d=E.interleaved,d===null?(m.next=m,is===null?is=[E]:is.push(E)):(m.next=d.next,d.next=m),E.interleaved=m):(d=E.pending,d===null?m.next=m:(m.next=d.next,d.next=m),E.pending=m))}function Vm(d,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194240)!==0)){var w=m.lanes;w&=d.pendingLanes,E|=w,m.lanes=E,So(d,E)}}function oC(d,m){var E=d.updateQueue,w=d.alternate;if(w!==null&&(w=w.updateQueue,E===w)){var b=null,D=null;if(E=E.firstBaseUpdate,E!==null){do{var ie={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};D===null?b=D=ie:D=D.next=ie,E=E.next}while(E!==null);D===null?b=D=m:D=D.next=m}else b=D=m;E={baseState:w.baseState,firstBaseUpdate:b,lastBaseUpdate:D,shared:w.shared,effects:w.effects},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=m:d.next=m,E.lastBaseUpdate=m}function Wm(d,m,E,w){var b=d.updateQueue;Na=!1;var D=b.firstBaseUpdate,ie=b.lastBaseUpdate,pe=b.shared.pending;if(pe!==null){b.shared.pending=null;var Ue=pe,qe=Ue.next;Ue.next=null,ie===null?D=qe:ie.next=qe,ie=Ue;var vt=d.alternate;vt!==null&&(vt=vt.updateQueue,pe=vt.lastBaseUpdate,pe!==ie&&(pe===null?vt.firstBaseUpdate=qe:pe.next=qe,vt.lastBaseUpdate=Ue))}if(D!==null){var Ht=b.baseState;ie=0,vt=qe=Ue=null,pe=D;do{var Pt=pe.lane,Bn=pe.eventTime;if((w&Pt)===Pt){vt!==null&&(vt=vt.next={eventTime:Bn,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var wt=d,fr=pe;switch(Pt=m,Bn=E,fr.tag){case 1:if(wt=fr.payload,typeof wt=="function"){Ht=wt.call(Bn,Ht,Pt);break e}Ht=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=fr.payload,Pt=typeof wt=="function"?wt.call(Bn,Ht,Pt):wt,Pt==null)break e;Ht=o({},Ht,Pt);break e;case 2:Na=!0}}pe.callback!==null&&pe.lane!==0&&(d.flags|=64,Pt=b.effects,Pt===null?b.effects=[pe]:Pt.push(pe))}else Bn={eventTime:Bn,lane:Pt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},vt===null?(qe=vt=Bn,Ue=Ht):vt=vt.next=Bn,ie|=Pt;if(pe=pe.next,pe===null){if(pe=b.shared.pending,pe===null)break;Pt=pe,pe=Pt.next,Pt.next=null,b.lastBaseUpdate=Pt,b.shared.pending=null}}while(!0);if(vt===null&&(Ue=Ht),b.baseState=Ue,b.firstBaseUpdate=qe,b.lastBaseUpdate=vt,m=b.shared.interleaved,m!==null){b=m;do ie|=b.lane,b=b.next;while(b!==m)}else D===null&&(b.shared.lanes=0);Ou|=ie,d.lanes=ie,d.memoizedState=Ht}}function aC(d,m,E){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var w=d[m],b=w.callback;if(b!==null){if(w.callback=null,w=E,typeof b!="function")throw Error(a(191,b));b.call(w)}}}var lC=new r.Component().refs;function z_(d,m,E,w){m=d.memoizedState,E=E(w,m),E=E==null?m:o({},m,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var Xm={isMounted:function(d){return(d=d._reactInternals)?P(d)===d:!1},enqueueSetState:function(d,m,E){d=d._reactInternals;var w=Rr(),b=Ha(d),D=ta(w,b);D.payload=m,E!=null&&(D.callback=E),ka(d,D),m=Ts(d,b,w),m!==null&&Vm(m,d,b)},enqueueReplaceState:function(d,m,E){d=d._reactInternals;var w=Rr(),b=Ha(d),D=ta(w,b);D.tag=1,D.payload=m,E!=null&&(D.callback=E),ka(d,D),m=Ts(d,b,w),m!==null&&Vm(m,d,b)},enqueueForceUpdate:function(d,m){d=d._reactInternals;var E=Rr(),w=Ha(d),b=ta(E,w);b.tag=2,m!=null&&(b.callback=m),ka(d,b),m=Ts(d,w,E),m!==null&&Vm(m,d,w)}};function cC(d,m,E,w,b,D,ie){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(w,D,ie):m.prototype&&m.prototype.isPureReactComponent?!Ql(E,w)||!Ql(b,D):!0}function uC(d,m,E){var w=!1,b=zt,D=m.contextType;return typeof D=="object"&&D!==null?D=fi(D):(b=Cn(m)?fn:bt.current,w=m.contextTypes,D=(w=w!=null)?Tn(d,b):zt),m=new m(E,D),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Xm,d.stateNode=m,m._reactInternals=d,w&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=b,d.__reactInternalMemoizedMaskedChildContext=D),m}function hC(d,m,E,w){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,w),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,w),m.state!==d&&Xm.enqueueReplaceState(m,m.state,null)}function G_(d,m,E,w){var b=d.stateNode;b.props=E,b.state=d.memoizedState,b.refs=lC,k_(d);var D=m.contextType;typeof D=="object"&&D!==null?b.context=fi(D):(D=Cn(m)?fn:bt.current,b.context=Tn(d,D)),b.state=d.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(z_(d,m,D,E),b.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(m=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),m!==b.state&&Xm.enqueueReplaceState(b,b.state,null),Wm(d,E,b,w),b.state=d.memoizedState),typeof b.componentDidMount=="function"&&(d.flags|=4194308)}var Ru=[],Pu=0,jm=null,Ym=0,As=[],Es=0,$l=null,na=1,ia="";function ec(d,m){Ru[Pu++]=Ym,Ru[Pu++]=jm,jm=d,Ym=m}function fC(d,m,E){As[Es++]=na,As[Es++]=ia,As[Es++]=$l,$l=d;var w=na;d=ia;var b=32-bn(w)-1;w&=~(1<<b),E+=1;var D=32-bn(m)+b;if(30<D){var ie=b-b%5;D=(w&(1<<ie)-1).toString(32),w>>=ie,b-=ie,na=1<<32-bn(m)+b|E<<b|w,ia=D+d}else na=1<<D|E<<b|w,ia=d}function H_(d){d.return!==null&&(ec(d,1),fC(d,1,0))}function V_(d){for(;d===jm;)jm=Ru[--Pu],Ru[Pu]=null,Ym=Ru[--Pu],Ru[Pu]=null;for(;d===$l;)$l=As[--Es],As[Es]=null,ia=As[--Es],As[Es]=null,na=As[--Es],As[Es]=null}var rs=null,ss=null,Xn=!1,zf=!1,Zs=null;function dC(d,m){var E=Cs(5,null,null,0);E.elementType="DELETED",E.stateNode=m,E.return=d,m=d.deletions,m===null?(d.deletions=[E],d.flags|=16):m.push(E)}function pC(d,m){switch(d.tag){case 5:return m=Ct(m,d.type,d.pendingProps),m!==null?(d.stateNode=m,rs=d,ss=xt(m),!0):!1;case 6:return m=vn(m,d.pendingProps),m!==null?(d.stateNode=m,rs=d,ss=null,!0):!1;case 13:if(m=wn(m),m!==null){var E=$l!==null?{id:na,overflow:ia}:null;return d.memoizedState={dehydrated:m,treeContext:E,retryLane:1073741824},E=Cs(18,null,null,0),E.stateNode=m,E.return=d,d.child=E,rs=d,ss=null,!0}return!1;default:return!1}}function W_(d){return(d.mode&1)!==0&&(d.flags&128)===0}function X_(d){if(Xn){var m=ss;if(m){var E=m;if(!pC(d,m)){if(W_(d))throw Error(a(418));m=yn(E);var w=rs;m&&pC(d,m)?dC(w,E):(d.flags=d.flags&-4097|2,Xn=!1,rs=d)}}else{if(W_(d))throw Error(a(418));d.flags=d.flags&-4097|2,Xn=!1,rs=d}}}function mC(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;rs=d}function Gf(d){if(!Re||d!==rs)return!1;if(!Xn)return mC(d),Xn=!0,!1;if(d.tag!==3&&(d.tag!==5||Te(d.type)&&!le(d.type,d.memoizedProps))){var m=ss;if(m){if(W_(d)){for(d=ss;d;)d=yn(d);throw Error(a(418))}for(;m;)dC(d,m),m=yn(m)}}if(mC(d),d.tag===13){if(!Re)throw Error(a(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));ss=L(d)}else ss=rs?yn(d.stateNode):null;return!0}function Bu(){Re&&(ss=rs=null,zf=Xn=!1)}function j_(d){Zs===null?Zs=[d]:Zs.push(d)}function Hf(d,m,E){if(d=E.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(a(309));var w=E.stateNode}if(!w)throw Error(a(147,d));var b=w,D=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===D?m.ref:(m=function(ie){var pe=b.refs;pe===lC&&(pe=b.refs={}),ie===null?delete pe[D]:pe[D]=ie},m._stringRef=D,m)}if(typeof d!="string")throw Error(a(284));if(!E._owner)throw Error(a(290,d))}return d}function Jm(d,m){throw d=Object.prototype.toString.call(m),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function gC(d){var m=d._init;return m(d._payload)}function vC(d){function m(be,me){if(d){var Ie=be.deletions;Ie===null?(be.deletions=[me],be.flags|=16):Ie.push(me)}}function E(be,me){if(!d)return null;for(;me!==null;)m(be,me),me=me.sibling;return null}function w(be,me){for(be=new Map;me!==null;)me.key!==null?be.set(me.key,me):be.set(me.index,me),me=me.sibling;return be}function b(be,me){return be=Wa(be,me),be.index=0,be.sibling=null,be}function D(be,me,Ie){return be.index=Ie,d?(Ie=be.alternate,Ie!==null?(Ie=Ie.index,Ie<me?(be.flags|=2,me):Ie):(be.flags|=2,me)):(be.flags|=1048576,me)}function ie(be){return d&&be.alternate===null&&(be.flags|=2),be}function pe(be,me,Ie,ft){return me===null||me.tag!==6?(me=Rx(Ie,be.mode,ft),me.return=be,me):(me=b(me,Ie),me.return=be,me)}function Ue(be,me,Ie,ft){var Et=Ie.type;return Et===h?vt(be,me,Ie.props.children,ft,Ie.key):me!==null&&(me.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&gC(Et)===me.type)?(ft=b(me,Ie.props),ft.ref=Hf(be,me,Ie),ft.return=be,ft):(ft=wg(Ie.type,Ie.key,Ie.props,null,be.mode,ft),ft.ref=Hf(be,me,Ie),ft.return=be,ft)}function qe(be,me,Ie,ft){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ie.containerInfo||me.stateNode.implementation!==Ie.implementation?(me=Px(Ie,be.mode,ft),me.return=be,me):(me=b(me,Ie.children||[]),me.return=be,me)}function vt(be,me,Ie,ft,Et){return me===null||me.tag!==7?(me=ac(Ie,be.mode,ft,Et),me.return=be,me):(me=b(me,Ie),me.return=be,me)}function Ht(be,me,Ie){if(typeof me=="string"&&me!==""||typeof me=="number")return me=Rx(""+me,be.mode,Ie),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case c:return Ie=wg(me.type,me.key,me.props,null,be.mode,Ie),Ie.ref=Hf(be,null,me),Ie.return=be,Ie;case u:return me=Px(me,be.mode,Ie),me.return=be,me;case A:var ft=me._init;return Ht(be,ft(me._payload),Ie)}if(j(me)||T(me))return me=ac(me,be.mode,Ie,null),me.return=be,me;Jm(be,me)}return null}function Pt(be,me,Ie,ft){var Et=me!==null?me.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Et!==null?null:pe(be,me,""+Ie,ft);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case c:return Ie.key===Et?Ue(be,me,Ie,ft):null;case u:return Ie.key===Et?qe(be,me,Ie,ft):null;case A:return Et=Ie._init,Pt(be,me,Et(Ie._payload),ft)}if(j(Ie)||T(Ie))return Et!==null?null:vt(be,me,Ie,ft,null);Jm(be,Ie)}return null}function Bn(be,me,Ie,ft,Et){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return be=be.get(Ie)||null,pe(me,be,""+ft,Et);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case c:return be=be.get(ft.key===null?Ie:ft.key)||null,Ue(me,be,ft,Et);case u:return be=be.get(ft.key===null?Ie:ft.key)||null,qe(me,be,ft,Et);case A:var Qt=ft._init;return Bn(be,me,Ie,Qt(ft._payload),Et)}if(j(ft)||T(ft))return be=be.get(Ie)||null,vt(me,be,ft,Et,null);Jm(me,ft)}return null}function wt(be,me,Ie,ft){for(var Et=null,Qt=null,Vt=me,dn=me=0,Vi=null;Vt!==null&&dn<Ie.length;dn++){Vt.index>dn?(Vi=Vt,Vt=null):Vi=Vt.sibling;var pn=Pt(be,Vt,Ie[dn],ft);if(pn===null){Vt===null&&(Vt=Vi);break}d&&Vt&&pn.alternate===null&&m(be,Vt),me=D(pn,me,dn),Qt===null?Et=pn:Qt.sibling=pn,Qt=pn,Vt=Vi}if(dn===Ie.length)return E(be,Vt),Xn&&ec(be,dn),Et;if(Vt===null){for(;dn<Ie.length;dn++)Vt=Ht(be,Ie[dn],ft),Vt!==null&&(me=D(Vt,me,dn),Qt===null?Et=Vt:Qt.sibling=Vt,Qt=Vt);return Xn&&ec(be,dn),Et}for(Vt=w(be,Vt);dn<Ie.length;dn++)Vi=Bn(Vt,be,dn,Ie[dn],ft),Vi!==null&&(d&&Vi.alternate!==null&&Vt.delete(Vi.key===null?dn:Vi.key),me=D(Vi,me,dn),Qt===null?Et=Vi:Qt.sibling=Vi,Qt=Vi);return d&&Vt.forEach(function(Xa){return m(be,Xa)}),Xn&&ec(be,dn),Et}function fr(be,me,Ie,ft){var Et=T(Ie);if(typeof Et!="function")throw Error(a(150));if(Ie=Et.call(Ie),Ie==null)throw Error(a(151));for(var Qt=Et=null,Vt=me,dn=me=0,Vi=null,pn=Ie.next();Vt!==null&&!pn.done;dn++,pn=Ie.next()){Vt.index>dn?(Vi=Vt,Vt=null):Vi=Vt.sibling;var Xa=Pt(be,Vt,pn.value,ft);if(Xa===null){Vt===null&&(Vt=Vi);break}d&&Vt&&Xa.alternate===null&&m(be,Vt),me=D(Xa,me,dn),Qt===null?Et=Xa:Qt.sibling=Xa,Qt=Xa,Vt=Vi}if(pn.done)return E(be,Vt),Xn&&ec(be,dn),Et;if(Vt===null){for(;!pn.done;dn++,pn=Ie.next())pn=Ht(be,pn.value,ft),pn!==null&&(me=D(pn,me,dn),Qt===null?Et=pn:Qt.sibling=pn,Qt=pn);return Xn&&ec(be,dn),Et}for(Vt=w(be,Vt);!pn.done;dn++,pn=Ie.next())pn=Bn(Vt,be,dn,pn.value,ft),pn!==null&&(d&&pn.alternate!==null&&Vt.delete(pn.key===null?dn:pn.key),me=D(pn,me,dn),Qt===null?Et=pn:Qt.sibling=pn,Qt=pn);return d&&Vt.forEach(function(k4){return m(be,k4)}),Xn&&ec(be,dn),Et}function bs(be,me,Ie,ft){if(typeof Ie=="object"&&Ie!==null&&Ie.type===h&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case c:e:{for(var Et=Ie.key,Qt=me;Qt!==null;){if(Qt.key===Et){if(Et=Ie.type,Et===h){if(Qt.tag===7){E(be,Qt.sibling),me=b(Qt,Ie.props.children),me.return=be,be=me;break e}}else if(Qt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&gC(Et)===Qt.type){E(be,Qt.sibling),me=b(Qt,Ie.props),me.ref=Hf(be,Qt,Ie),me.return=be,be=me;break e}E(be,Qt);break}else m(be,Qt);Qt=Qt.sibling}Ie.type===h?(me=ac(Ie.props.children,be.mode,ft,Ie.key),me.return=be,be=me):(ft=wg(Ie.type,Ie.key,Ie.props,null,be.mode,ft),ft.ref=Hf(be,me,Ie),ft.return=be,be=ft)}return ie(be);case u:e:{for(Qt=Ie.key;me!==null;){if(me.key===Qt)if(me.tag===4&&me.stateNode.containerInfo===Ie.containerInfo&&me.stateNode.implementation===Ie.implementation){E(be,me.sibling),me=b(me,Ie.children||[]),me.return=be,be=me;break e}else{E(be,me);break}else m(be,me);me=me.sibling}me=Px(Ie,be.mode,ft),me.return=be,be=me}return ie(be);case A:return Qt=Ie._init,bs(be,me,Qt(Ie._payload),ft)}if(j(Ie))return wt(be,me,Ie,ft);if(T(Ie))return fr(be,me,Ie,ft);Jm(be,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,me!==null&&me.tag===6?(E(be,me.sibling),me=b(me,Ie),me.return=be,be=me):(E(be,me),me=Rx(Ie,be.mode,ft),me.return=be,be=me),ie(be)):E(be,me)}return bs}var Iu=vC(!0),yC=vC(!1),Vf={},Ms=Bt(Vf),Wf=Bt(Vf),Du=Bt(Vf);function Eo(d){if(d===Vf)throw Error(a(174));return d}function Y_(d,m){nt(Du,m),nt(Wf,d),nt(Ms,Vf),d=he(m),ct(Ms),nt(Ms,d)}function Lu(){ct(Ms),ct(Wf),ct(Du)}function _C(d){var m=Eo(Du.current),E=Eo(Ms.current);m=H(E,d.type,m),E!==m&&(nt(Wf,d),nt(Ms,m))}function J_(d){Wf.current===d&&(ct(Ms),ct(Wf))}var qn=Bt(0);function Km(d){for(var m=d;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||nn(E)||On(E)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var K_=[];function Z_(){for(var d=0;d<K_.length;d++){var m=K_[d];Be?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}K_.length=0}var Zm=l.ReactCurrentDispatcher,ws=l.ReactCurrentBatchConfig,Uu=0,si=null,cr=null,Hi=null,Qm=!1,Xf=!1,jf=0,u4=0;function ur(){throw Error(a(321))}function Q_(d,m){if(m===null)return!1;for(var E=0;E<m.length&&E<d.length;E++)if(!ns(d[E],m[E]))return!1;return!0}function q_(d,m,E,w,b,D){if(Uu=D,si=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Zm.current=d===null||d.memoizedState===null?p4:m4,d=E(w,b),Xf){D=0;do{if(Xf=!1,jf=0,25<=D)throw Error(a(301));D+=1,Hi=cr=null,m.updateQueue=null,Zm.current=g4,d=E(w,b)}while(Xf)}if(Zm.current=ng,m=cr!==null&&cr.next!==null,Uu=0,Hi=cr=si=null,Qm=!1,m)throw Error(a(300));return d}function $_(){var d=jf!==0;return jf=0,d}function ra(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hi===null?si.memoizedState=Hi=d:Hi=Hi.next=d,Hi}function Mo(){if(cr===null){var d=si.alternate;d=d!==null?d.memoizedState:null}else d=cr.next;var m=Hi===null?si.memoizedState:Hi.next;if(m!==null)Hi=m,cr=d;else{if(d===null)throw Error(a(310));cr=d,d={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},Hi===null?si.memoizedState=Hi=d:Hi=Hi.next=d}return Hi}function tc(d,m){return typeof m=="function"?m(d):m}function qm(d){var m=Mo(),E=m.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=d;var w=cr,b=w.baseQueue,D=E.pending;if(D!==null){if(b!==null){var ie=b.next;b.next=D.next,D.next=ie}w.baseQueue=b=D,E.pending=null}if(b!==null){D=b.next,w=w.baseState;var pe=ie=null,Ue=null,qe=D;do{var vt=qe.lane;if((Uu&vt)===vt)Ue!==null&&(Ue=Ue.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),w=qe.hasEagerState?qe.eagerState:d(w,qe.action);else{var Ht={lane:vt,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Ue===null?(pe=Ue=Ht,ie=w):Ue=Ue.next=Ht,si.lanes|=vt,Ou|=vt}qe=qe.next}while(qe!==null&&qe!==D);Ue===null?ie=w:Ue.next=pe,ns(w,m.memoizedState)||(os=!0),m.memoizedState=w,m.baseState=ie,m.baseQueue=Ue,E.lastRenderedState=w}if(d=E.interleaved,d!==null){b=d;do D=b.lane,si.lanes|=D,Ou|=D,b=b.next;while(b!==d)}else b===null&&(E.lanes=0);return[m.memoizedState,E.dispatch]}function $m(d){var m=Mo(),E=m.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=d;var w=E.dispatch,b=E.pending,D=m.memoizedState;if(b!==null){E.pending=null;var ie=b=b.next;do D=d(D,ie.action),ie=ie.next;while(ie!==b);ns(D,m.memoizedState)||(os=!0),m.memoizedState=D,m.baseQueue===null&&(m.baseState=D),E.lastRenderedState=D}return[D,w]}function xC(){}function SC(d,m){var E=si,w=Mo(),b=m(),D=!ns(w.memoizedState,b);if(D&&(w.memoizedState=b,os=!0),w=w.queue,Jf(MC.bind(null,E,w,d),[d]),w.getSnapshot!==m||D||Hi!==null&&Hi.memoizedState.tag&1){if(E.flags|=2048,Yf(9,EC.bind(null,E,w,b,m),void 0,null),Si===null)throw Error(a(349));Uu&30||AC(E,m,b)}return b}function AC(d,m,E){d.flags|=16384,d={getSnapshot:m,value:E},m=si.updateQueue,m===null?(m={lastEffect:null,stores:null},si.updateQueue=m,m.stores=[d]):(E=m.stores,E===null?m.stores=[d]:E.push(d))}function EC(d,m,E,w){m.value=E,m.getSnapshot=w,wC(m)&&Ts(d,1,-1)}function MC(d,m,E){return E(function(){wC(m)&&Ts(d,1,-1)})}function wC(d){var m=d.getSnapshot;d=d.value;try{var E=m();return!ns(d,E)}catch{return!0}}function ex(d){var m=ra();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:d},m.queue=d,d=d.dispatch=d4.bind(null,si,d),[m.memoizedState,d]}function Yf(d,m,E,w){return d={tag:d,create:m,destroy:E,deps:w,next:null},m=si.updateQueue,m===null?(m={lastEffect:null,stores:null},si.updateQueue=m,m.lastEffect=d.next=d):(E=m.lastEffect,E===null?m.lastEffect=d.next=d:(w=E.next,E.next=d,d.next=w,m.lastEffect=d)),d}function TC(){return Mo().memoizedState}function eg(d,m,E,w){var b=ra();si.flags|=d,b.memoizedState=Yf(1|m,E,void 0,w===void 0?null:w)}function tg(d,m,E,w){var b=Mo();w=w===void 0?null:w;var D=void 0;if(cr!==null){var ie=cr.memoizedState;if(D=ie.destroy,w!==null&&Q_(w,ie.deps)){b.memoizedState=Yf(m,E,D,w);return}}si.flags|=d,b.memoizedState=Yf(1|m,E,D,w)}function tx(d,m){return eg(8390656,8,d,m)}function Jf(d,m){return tg(2048,8,d,m)}function CC(d,m){return tg(4,2,d,m)}function bC(d,m){return tg(4,4,d,m)}function RC(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function PC(d,m,E){return E=E!=null?E.concat([d]):null,tg(4,4,RC.bind(null,m,d),E)}function nx(){}function BC(d,m){var E=Mo();m=m===void 0?null:m;var w=E.memoizedState;return w!==null&&m!==null&&Q_(m,w[1])?w[0]:(E.memoizedState=[d,m],d)}function IC(d,m){var E=Mo();m=m===void 0?null:m;var w=E.memoizedState;return w!==null&&m!==null&&Q_(m,w[1])?w[0]:(d=d(),E.memoizedState=[d,m],d)}function h4(d,m){var E=rn;rn=E!==0&&4>E?E:4,d(!0);var w=ws.transition;ws.transition={};try{d(!1),m()}finally{rn=E,ws.transition=w}}function DC(){return Mo().memoizedState}function f4(d,m,E){var w=Ha(d);E={lane:w,action:E,hasEagerState:!1,eagerState:null,next:null},LC(d)?UC(m,E):(FC(d,m,E),E=Rr(),d=Ts(d,w,E),d!==null&&OC(d,m,w))}function d4(d,m,E){var w=Ha(d),b={lane:w,action:E,hasEagerState:!1,eagerState:null,next:null};if(LC(d))UC(m,b);else{FC(d,m,b);var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=m.lastRenderedReducer,D!==null))try{var ie=m.lastRenderedState,pe=D(ie,E);if(b.hasEagerState=!0,b.eagerState=pe,ns(pe,ie))return}catch{}finally{}E=Rr(),d=Ts(d,w,E),d!==null&&OC(d,m,w)}}function LC(d){var m=d.alternate;return d===si||m!==null&&m===si}function UC(d,m){Xf=Qm=!0;var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}function FC(d,m,E){Si!==null&&d.mode&1&&!(en&2)?(d=m.interleaved,d===null?(E.next=E,is===null?is=[m]:is.push(m)):(E.next=d.next,d.next=E),m.interleaved=E):(d=m.pending,d===null?E.next=E:(E.next=d.next,d.next=E),m.pending=E)}function OC(d,m,E){if(E&4194240){var w=m.lanes;w&=d.pendingLanes,E|=w,m.lanes=E,So(d,E)}}var ng={readContext:fi,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useInsertionEffect:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useSyncExternalStore:ur,useId:ur,unstable_isNewReconciler:!1},p4={readContext:fi,useCallback:function(d,m){return ra().memoizedState=[d,m===void 0?null:m],d},useContext:fi,useEffect:tx,useImperativeHandle:function(d,m,E){return E=E!=null?E.concat([d]):null,eg(4194308,4,RC.bind(null,m,d),E)},useLayoutEffect:function(d,m){return eg(4194308,4,d,m)},useInsertionEffect:function(d,m){return eg(4,2,d,m)},useMemo:function(d,m){var E=ra();return m=m===void 0?null:m,d=d(),E.memoizedState=[d,m],d},useReducer:function(d,m,E){var w=ra();return m=E!==void 0?E(m):m,w.memoizedState=w.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},w.queue=d,d=d.dispatch=f4.bind(null,si,d),[w.memoizedState,d]},useRef:function(d){var m=ra();return d={current:d},m.memoizedState=d},useState:ex,useDebugValue:nx,useDeferredValue:function(d){var m=ex(d),E=m[0],w=m[1];return tx(function(){var b=ws.transition;ws.transition={};try{w(d)}finally{ws.transition=b}},[d]),E},useTransition:function(){var d=ex(!1),m=d[0];return d=h4.bind(null,d[1]),ra().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,E){var w=si,b=ra();if(Xn){if(E===void 0)throw Error(a(407));E=E()}else{if(E=m(),Si===null)throw Error(a(349));Uu&30||AC(w,m,E)}b.memoizedState=E;var D={value:E,getSnapshot:m};return b.queue=D,tx(MC.bind(null,w,D,d),[d]),w.flags|=2048,Yf(9,EC.bind(null,w,D,E,m),void 0,null),E},useId:function(){var d=ra(),m=Si.identifierPrefix;if(Xn){var E=ia,w=na;E=(w&~(1<<32-bn(w)-1)).toString(32)+E,m=":"+m+"R"+E,E=jf++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=u4++,m=":"+m+"r"+E.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},m4={readContext:fi,useCallback:BC,useContext:fi,useEffect:Jf,useImperativeHandle:PC,useInsertionEffect:CC,useLayoutEffect:bC,useMemo:IC,useReducer:qm,useRef:TC,useState:function(){return qm(tc)},useDebugValue:nx,useDeferredValue:function(d){var m=qm(tc),E=m[0],w=m[1];return Jf(function(){var b=ws.transition;ws.transition={};try{w(d)}finally{ws.transition=b}},[d]),E},useTransition:function(){var d=qm(tc)[0],m=Mo().memoizedState;return[d,m]},useMutableSource:xC,useSyncExternalStore:SC,useId:DC,unstable_isNewReconciler:!1},g4={readContext:fi,useCallback:BC,useContext:fi,useEffect:Jf,useImperativeHandle:PC,useInsertionEffect:CC,useLayoutEffect:bC,useMemo:IC,useReducer:$m,useRef:TC,useState:function(){return $m(tc)},useDebugValue:nx,useDeferredValue:function(d){var m=$m(tc),E=m[0],w=m[1];return Jf(function(){var b=ws.transition;ws.transition={};try{w(d)}finally{ws.transition=b}},[d]),E},useTransition:function(){var d=$m(tc)[0],m=Mo().memoizedState;return[d,m]},useMutableSource:xC,useSyncExternalStore:SC,useId:DC,unstable_isNewReconciler:!1};function ix(d,m){try{var E="",w=m;do E+=ql(w),w=w.return;while(w);var b=E}catch(D){b=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:m,stack:b}}function rx(d,m){try{console.error(m.value)}catch(E){setTimeout(function(){throw E})}}var v4=typeof WeakMap=="function"?WeakMap:Map;function NC(d,m,E){E=ta(-1,E),E.tag=3,E.payload={element:null};var w=m.value;return E.callback=function(){yg||(yg=!0,Ax=w),rx(d,m)},E}function kC(d,m,E){E=ta(-1,E),E.tag=3;var w=d.type.getDerivedStateFromError;if(typeof w=="function"){var b=m.value;E.payload=function(){return w(b)},E.callback=function(){rx(d,m)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(E.callback=function(){rx(d,m),typeof w!="function"&&(za===null?za=new Set([this]):za.add(this));var ie=m.stack;this.componentDidCatch(m.value,{componentStack:ie!==null?ie:""})}),E}function zC(d,m,E){var w=d.pingCache;if(w===null){w=d.pingCache=new v4;var b=new Set;w.set(m,b)}else b=w.get(m),b===void 0&&(b=new Set,w.set(m,b));b.has(E)||(b.add(E),d=B4.bind(null,d,m,E),m.then(d,d))}function GC(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function HC(d,m,E,w,b){return d.mode&1?(d.flags|=65536,d.lanes=b,d):(d===m?d.flags|=65536:(d.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(m=ta(-1,1),m.tag=2,ka(E,m))),E.lanes|=1),d)}function wo(d){d.flags|=4}function VC(d,m){if(d!==null&&d.child===m.child)return!0;if(m.flags&16)return!1;for(d=m.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var Kf,Zf,ig,rg;if(Ae)Kf=function(d,m){for(var E=m.child;E!==null;){if(E.tag===5||E.tag===6)Z(d,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},Zf=function(){},ig=function(d,m,E,w,b){if(d=d.memoizedProps,d!==w){var D=m.stateNode,ie=Eo(Ms.current);E=se(D,E,d,w,b,ie),(m.updateQueue=E)&&wo(m)}},rg=function(d,m,E,w){E!==w&&wo(m)};else if(W){Kf=function(d,m,E,w){for(var b=m.child;b!==null;){if(b.tag===5){var D=b.stateNode;E&&w&&(D=An(D,b.type,b.memoizedProps,b)),Z(d,D)}else if(b.tag===6)D=b.stateNode,E&&w&&(D=Wt(D,b.memoizedProps,b)),Z(d,D);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)D=b.child,D!==null&&(D.return=b),Kf(d,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var WC=function(d,m,E,w){for(var b=m.child;b!==null;){if(b.tag===5){var D=b.stateNode;E&&w&&(D=An(D,b.type,b.memoizedProps,b)),mt(d,D)}else if(b.tag===6)D=b.stateNode,E&&w&&(D=Wt(D,b.memoizedProps,b)),mt(d,D);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)D=b.child,D!==null&&(D.return=b),WC(d,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};Zf=function(d,m){var E=m.stateNode;if(!VC(d,m)){d=E.containerInfo;var w=St(d);WC(w,m,!1,!1),E.pendingChildren=w,wo(m),kt(d,w)}},ig=function(d,m,E,w,b){var D=d.stateNode,ie=d.memoizedProps;if((d=VC(d,m))&&ie===w)m.stateNode=D;else{var pe=m.stateNode,Ue=Eo(Ms.current),qe=null;ie!==w&&(qe=se(pe,E,ie,w,b,Ue)),d&&qe===null?m.stateNode=D:(D=et(D,qe,E,ie,w,m,d,pe),Q(D,E,w,b,Ue)&&wo(m),m.stateNode=D,d?wo(m):Kf(D,m,!1,!1))}},rg=function(d,m,E,w){E!==w?(d=Eo(Du.current),E=Eo(Ms.current),m.stateNode=fe(w,d,E,m),wo(m)):m.stateNode=d.stateNode}}else Zf=function(){},ig=function(){},rg=function(){};function Qf(d,m){if(!Xn)switch(d.tailMode){case"hidden":m=d.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var w=null;E!==null;)E.alternate!==null&&(w=E),E=E.sibling;w===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:w.sibling=null}}function hr(d){var m=d.alternate!==null&&d.alternate.child===d.child,E=0,w=0;if(m)for(var b=d.child;b!==null;)E|=b.lanes|b.childLanes,w|=b.subtreeFlags&14680064,w|=b.flags&14680064,b.return=d,b=b.sibling;else for(b=d.child;b!==null;)E|=b.lanes|b.childLanes,w|=b.subtreeFlags,w|=b.flags,b.return=d,b=b.sibling;return d.subtreeFlags|=w,d.childLanes=E,m}function y4(d,m,E){var w=m.pendingProps;switch(V_(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(m),null;case 1:return Cn(m.type)&&Jt(),hr(m),null;case 3:return w=m.stateNode,Lu(),ct(Rt),ct(bt),Z_(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(d===null||d.child===null)&&(Gf(m)?wo(m):d===null||d.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Zs!==null&&(wx(Zs),Zs=null))),Zf(d,m),hr(m),null;case 5:J_(m),E=Eo(Du.current);var b=m.type;if(d!==null&&m.stateNode!=null)ig(d,m,b,w,E),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!w){if(m.stateNode===null)throw Error(a(166));return hr(m),null}if(d=Eo(Ms.current),Gf(m)){if(!Re)throw Error(a(175));d=U(m.stateNode,m.type,m.memoizedProps,E,d,m,!zf),m.updateQueue=d,d!==null&&wo(m)}else{var D=k(b,w,E,d,m);Kf(D,m,!1,!1),m.stateNode=D,Q(D,b,w,E,d)&&wo(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return hr(m),null;case 6:if(d&&m.stateNode!=null)rg(d,m,d.memoizedProps,w);else{if(typeof w!="string"&&m.stateNode===null)throw Error(a(166));if(d=Eo(Du.current),E=Eo(Ms.current),Gf(m)){if(!Re)throw Error(a(176));if(d=m.stateNode,w=m.memoizedProps,(E=V(d,w,m,!zf))&&(b=rs,b!==null))switch(D=(b.mode&1)!==0,b.tag){case 3:Pe(b.stateNode.containerInfo,d,w,D);break;case 5:Le(b.type,b.memoizedProps,b.stateNode,d,w,D)}E&&wo(m)}else m.stateNode=fe(w,d,E,m)}return hr(m),null;case 13:if(ct(qn),w=m.memoizedState,Xn&&ss!==null&&m.mode&1&&!(m.flags&128)){for(d=ss;d;)d=yn(d);return Bu(),m.flags|=98560,m}if(w!==null&&w.dehydrated!==null){if(w=Gf(m),d===null){if(!w)throw Error(a(318));if(!Re)throw Error(a(344));if(d=m.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));ce(d,m)}else Bu(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;return hr(m),null}return Zs!==null&&(wx(Zs),Zs=null),m.flags&128?(m.lanes=E,m):(w=w!==null,E=!1,d===null?Gf(m):E=d.memoizedState!==null,w&&!E&&(m.child.flags|=8192,m.mode&1&&(d===null||qn.current&1?Ii===0&&(Ii=3):Cx())),m.updateQueue!==null&&(m.flags|=4),hr(m),null);case 4:return Lu(),Zf(d,m),d===null&&Ce(m.stateNode.containerInfo),hr(m),null;case 10:return Gi(m.type._context),hr(m),null;case 17:return Cn(m.type)&&Jt(),hr(m),null;case 19:if(ct(qn),b=m.memoizedState,b===null)return hr(m),null;if(w=(m.flags&128)!==0,D=b.rendering,D===null)if(w)Qf(b,!1);else{if(Ii!==0||d!==null&&d.flags&128)for(d=m.child;d!==null;){if(D=Km(d),D!==null){for(m.flags|=128,Qf(b,!1),d=D.updateQueue,d!==null&&(m.updateQueue=d,m.flags|=4),m.subtreeFlags=0,d=E,w=m.child;w!==null;)E=w,b=d,E.flags&=14680066,D=E.alternate,D===null?(E.childLanes=0,E.lanes=b,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=D.childLanes,E.lanes=D.lanes,E.child=D.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=D.memoizedProps,E.memoizedState=D.memoizedState,E.updateQueue=D.updateQueue,E.type=D.type,b=D.dependencies,E.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),w=w.sibling;return nt(qn,qn.current&1|2),m.child}d=d.sibling}b.tail!==null&&Qn()>Sx&&(m.flags|=128,w=!0,Qf(b,!1),m.lanes=4194304)}else{if(!w)if(d=Km(D),d!==null){if(m.flags|=128,w=!0,d=d.updateQueue,d!==null&&(m.updateQueue=d,m.flags|=4),Qf(b,!0),b.tail===null&&b.tailMode==="hidden"&&!D.alternate&&!Xn)return hr(m),null}else 2*Qn()-b.renderingStartTime>Sx&&E!==1073741824&&(m.flags|=128,w=!0,Qf(b,!1),m.lanes=4194304);b.isBackwards?(D.sibling=m.child,m.child=D):(d=b.last,d!==null?d.sibling=D:m.child=D,b.last=D)}return b.tail!==null?(m=b.tail,b.rendering=m,b.tail=m.sibling,b.renderingStartTime=Qn(),m.sibling=null,d=qn.current,nt(qn,w?d&1|2:d&1),m):(hr(m),null);case 22:case 23:return Tx(),w=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==w&&(m.flags|=8192),w&&m.mode&1?as&1073741824&&(hr(m),Ae&&m.subtreeFlags&6&&(m.flags|=8192)):hr(m),null;case 24:return null;case 25:return null}throw Error(a(156,m.tag))}var _4=l.ReactCurrentOwner,os=!1;function br(d,m,E,w){m.child=d===null?yC(m,null,E,w):Iu(m,d.child,E,w)}function XC(d,m,E,w,b){E=E.render;var D=m.ref;return hi(m,b),w=q_(d,m,E,w,D,b),E=$_(),d!==null&&!os?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~b,sa(d,m,b)):(Xn&&E&&H_(m),m.flags|=1,br(d,m,w,b),m.child)}function jC(d,m,E,w,b){if(d===null){var D=E.type;return typeof D=="function"&&!bx(D)&&D.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(m.tag=15,m.type=D,YC(d,m,D,w,b)):(d=wg(E.type,null,w,m,m.mode,b),d.ref=m.ref,d.return=m,m.child=d)}if(D=d.child,!(d.lanes&b)){var ie=D.memoizedProps;if(E=E.compare,E=E!==null?E:Ql,E(ie,w)&&d.ref===m.ref)return sa(d,m,b)}return m.flags|=1,d=Wa(D,w),d.ref=m.ref,d.return=m,m.child=d}function YC(d,m,E,w,b){if(d!==null&&Ql(d.memoizedProps,w)&&d.ref===m.ref)if(os=!1,(d.lanes&b)!==0)d.flags&131072&&(os=!0);else return m.lanes=d.lanes,sa(d,m,b);return sx(d,m,E,w,b)}function JC(d,m,E){var w=m.pendingProps,b=w.children,D=d!==null?d.memoizedState:null;if(w.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null},nt(Fu,as),as|=E;else if(E&1073741824)m.memoizedState={baseLanes:0,cachePool:null},w=D!==null?D.baseLanes:E,nt(Fu,as),as|=w;else return d=D!==null?D.baseLanes|E:E,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null},m.updateQueue=null,nt(Fu,as),as|=d,null;else D!==null?(w=D.baseLanes|E,m.memoizedState=null):w=E,nt(Fu,as),as|=w;return br(d,m,b,E),m.child}function KC(d,m){var E=m.ref;(d===null&&E!==null||d!==null&&d.ref!==E)&&(m.flags|=512,m.flags|=2097152)}function sx(d,m,E,w,b){var D=Cn(E)?fn:bt.current;return D=Tn(m,D),hi(m,b),E=q_(d,m,E,w,D,b),w=$_(),d!==null&&!os?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~b,sa(d,m,b)):(Xn&&w&&H_(m),m.flags|=1,br(d,m,E,b),m.child)}function ZC(d,m,E,w,b){if(Cn(E)){var D=!0;Ot(m)}else D=!1;if(hi(m,b),m.stateNode===null)d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2),uC(m,E,w),G_(m,E,w,b),w=!0;else if(d===null){var ie=m.stateNode,pe=m.memoizedProps;ie.props=pe;var Ue=ie.context,qe=E.contextType;typeof qe=="object"&&qe!==null?qe=fi(qe):(qe=Cn(E)?fn:bt.current,qe=Tn(m,qe));var vt=E.getDerivedStateFromProps,Ht=typeof vt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Ht||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(pe!==w||Ue!==qe)&&hC(m,ie,w,qe),Na=!1;var Pt=m.memoizedState;ie.state=Pt,Wm(m,w,ie,b),Ue=m.memoizedState,pe!==w||Pt!==Ue||Rt.current||Na?(typeof vt=="function"&&(z_(m,E,vt,w),Ue=m.memoizedState),(pe=Na||cC(m,E,pe,w,Pt,Ue,qe))?(Ht||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=w,m.memoizedState=Ue),ie.props=w,ie.state=Ue,ie.context=qe,w=pe):(typeof ie.componentDidMount=="function"&&(m.flags|=4194308),w=!1)}else{ie=m.stateNode,sC(d,m),pe=m.memoizedProps,qe=m.type===m.elementType?pe:Tr(m.type,pe),ie.props=qe,Ht=m.pendingProps,Pt=ie.context,Ue=E.contextType,typeof Ue=="object"&&Ue!==null?Ue=fi(Ue):(Ue=Cn(E)?fn:bt.current,Ue=Tn(m,Ue));var Bn=E.getDerivedStateFromProps;(vt=typeof Bn=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(pe!==Ht||Pt!==Ue)&&hC(m,ie,w,Ue),Na=!1,Pt=m.memoizedState,ie.state=Pt,Wm(m,w,ie,b);var wt=m.memoizedState;pe!==Ht||Pt!==wt||Rt.current||Na?(typeof Bn=="function"&&(z_(m,E,Bn,w),wt=m.memoizedState),(qe=Na||cC(m,E,qe,w,Pt,wt,Ue)||!1)?(vt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(w,wt,Ue),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(w,wt,Ue)),typeof ie.componentDidUpdate=="function"&&(m.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ie.componentDidUpdate!="function"||pe===d.memoizedProps&&Pt===d.memoizedState||(m.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||pe===d.memoizedProps&&Pt===d.memoizedState||(m.flags|=1024),m.memoizedProps=w,m.memoizedState=wt),ie.props=w,ie.state=wt,ie.context=Ue,w=qe):(typeof ie.componentDidUpdate!="function"||pe===d.memoizedProps&&Pt===d.memoizedState||(m.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||pe===d.memoizedProps&&Pt===d.memoizedState||(m.flags|=1024),w=!1)}return ox(d,m,E,w,D,b)}function ox(d,m,E,w,b,D){KC(d,m);var ie=(m.flags&128)!==0;if(!w&&!ie)return b&&Ut(m,E,!1),sa(d,m,D);w=m.stateNode,_4.current=m;var pe=ie&&typeof E.getDerivedStateFromError!="function"?null:w.render();return m.flags|=1,d!==null&&ie?(m.child=Iu(m,d.child,null,D),m.child=Iu(m,null,pe,D)):br(d,m,pe,D),m.memoizedState=w.state,b&&Ut(m,E,!0),m.child}function QC(d){var m=d.stateNode;m.pendingContext?Xt(d,m.pendingContext,m.pendingContext!==m.context):m.context&&Xt(d,m.context,!1),Y_(d,m.containerInfo)}function qC(d,m,E,w,b){return Bu(),j_(b),m.flags|=256,br(d,m,E,w),m.child}var sg={dehydrated:null,treeContext:null,retryLane:0};function og(d){return{baseLanes:d,cachePool:null}}function $C(d,m,E){var w=m.pendingProps,b=qn.current,D=!1,ie=(m.flags&128)!==0,pe;if((pe=ie)||(pe=d!==null&&d.memoizedState===null?!1:(b&2)!==0),pe?(D=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(b|=1),nt(qn,b&1),d===null)return X_(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(m.mode&1?On(d)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(b=w.children,d=w.fallback,D?(w=m.mode,D=m.child,b={mode:"hidden",children:b},!(w&1)&&D!==null?(D.childLanes=0,D.pendingProps=b):D=Tg(b,w,0,null),d=ac(d,w,E,null),D.return=m,d.return=m,D.sibling=d,m.child=D,m.child.memoizedState=og(E),m.memoizedState=sg,d):ax(m,b));if(b=d.memoizedState,b!==null){if(pe=b.dehydrated,pe!==null){if(ie)return m.flags&256?(m.flags&=-257,ag(d,m,E,Error(a(422)))):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(D=w.fallback,b=m.mode,w=Tg({mode:"visible",children:w.children},b,0,null),D=ac(D,b,E,null),D.flags|=2,w.return=m,D.return=m,w.sibling=D,m.child=w,m.mode&1&&Iu(m,d.child,null,E),m.child.memoizedState=og(E),m.memoizedState=sg,D);if(!(m.mode&1))m=ag(d,m,E,null);else if(On(pe))m=ag(d,m,E,Error(a(419)));else if(w=(E&d.childLanes)!==0,os||w){if(w=Si,w!==null){switch(E&-E){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}w=D&(w.suspendedLanes|E)?0:D,w!==0&&w!==b.retryLane&&(b.retryLane=w,Ts(d,w,-1))}Cx(),m=ag(d,m,E,Error(a(421)))}else nn(pe)?(m.flags|=128,m.child=d.child,m=I4.bind(null,d),Nn(pe,m),m=null):(E=b.treeContext,Re&&(ss=Er(pe),rs=m,Xn=!0,Zs=null,zf=!1,E!==null&&(As[Es++]=na,As[Es++]=ia,As[Es++]=$l,na=E.id,ia=E.overflow,$l=m)),m=ax(m,m.pendingProps.children),m.flags|=4096);return m}return D?(w=tb(d,m,w.children,w.fallback,E),D=m.child,b=d.child.memoizedState,D.memoizedState=b===null?og(E):{baseLanes:b.baseLanes|E,cachePool:null},D.childLanes=d.childLanes&~E,m.memoizedState=sg,w):(E=eb(d,m,w.children,E),m.memoizedState=null,E)}return D?(w=tb(d,m,w.children,w.fallback,E),D=m.child,b=d.child.memoizedState,D.memoizedState=b===null?og(E):{baseLanes:b.baseLanes|E,cachePool:null},D.childLanes=d.childLanes&~E,m.memoizedState=sg,w):(E=eb(d,m,w.children,E),m.memoizedState=null,E)}function ax(d,m){return m=Tg({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function eb(d,m,E,w){var b=d.child;return d=b.sibling,E=Wa(b,{mode:"visible",children:E}),!(m.mode&1)&&(E.lanes=w),E.return=m,E.sibling=null,d!==null&&(w=m.deletions,w===null?(m.deletions=[d],m.flags|=16):w.push(d)),m.child=E}function tb(d,m,E,w,b){var D=m.mode;d=d.child;var ie=d.sibling,pe={mode:"hidden",children:E};return!(D&1)&&m.child!==d?(E=m.child,E.childLanes=0,E.pendingProps=pe,m.deletions=null):(E=Wa(d,pe),E.subtreeFlags=d.subtreeFlags&14680064),ie!==null?w=Wa(ie,w):(w=ac(w,D,b,null),w.flags|=2),w.return=m,E.return=m,E.sibling=w,m.child=E,w}function ag(d,m,E,w){return w!==null&&j_(w),Iu(m,d.child,null,E),d=ax(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function nb(d,m,E){d.lanes|=m;var w=d.alternate;w!==null&&(w.lanes|=m),Cr(d.return,m,E)}function lx(d,m,E,w,b){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:w,tail:E,tailMode:b}:(D.isBackwards=m,D.rendering=null,D.renderingStartTime=0,D.last=w,D.tail=E,D.tailMode=b)}function ib(d,m,E){var w=m.pendingProps,b=w.revealOrder,D=w.tail;if(br(d,m,w.children,E),w=qn.current,w&2)w=w&1|2,m.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&nb(d,E,m);else if(d.tag===19)nb(d,E,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}w&=1}if(nt(qn,w),!(m.mode&1))m.memoizedState=null;else switch(b){case"forwards":for(E=m.child,b=null;E!==null;)d=E.alternate,d!==null&&Km(d)===null&&(b=E),E=E.sibling;E=b,E===null?(b=m.child,m.child=null):(b=E.sibling,E.sibling=null),lx(m,!1,b,E,D);break;case"backwards":for(E=null,b=m.child,m.child=null;b!==null;){if(d=b.alternate,d!==null&&Km(d)===null){m.child=b;break}d=b.sibling,b.sibling=E,E=b,b=d}lx(m,!0,E,null,D);break;case"together":lx(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function sa(d,m,E){if(d!==null&&(m.dependencies=d.dependencies),Ou|=m.lanes,!(E&m.childLanes))return null;if(d!==null&&m.child!==d.child)throw Error(a(153));if(m.child!==null){for(d=m.child,E=Wa(d,d.pendingProps),m.child=E,E.return=m;d.sibling!==null;)d=d.sibling,E=E.sibling=Wa(d,d.pendingProps),E.return=m;E.sibling=null}return m.child}function x4(d,m,E){switch(m.tag){case 3:QC(m),Bu();break;case 5:_C(m);break;case 1:Cn(m.type)&&Ot(m);break;case 4:Y_(m,m.stateNode.containerInfo);break;case 10:Hm(m,m.type._context,m.memoizedProps.value);break;case 13:var w=m.memoizedState;if(w!==null)return w.dehydrated!==null?(nt(qn,qn.current&1),m.flags|=128,null):E&m.child.childLanes?$C(d,m,E):(nt(qn,qn.current&1),d=sa(d,m,E),d!==null?d.sibling:null);nt(qn,qn.current&1);break;case 19:if(w=(E&m.childLanes)!==0,d.flags&128){if(w)return ib(d,m,E);m.flags|=128}var b=m.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),nt(qn,qn.current),w)break;return null;case 22:case 23:return m.lanes=0,JC(d,m,E)}return sa(d,m,E)}function S4(d,m){switch(V_(m),m.tag){case 1:return Cn(m.type)&&Jt(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return Lu(),ct(Rt),ct(bt),Z_(),d=m.flags,d&65536&&!(d&128)?(m.flags=d&-65537|128,m):null;case 5:return J_(m),null;case 13:if(ct(qn),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(a(340));Bu()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return ct(qn),null;case 4:return Lu(),null;case 10:return Gi(m.type._context),null;case 22:case 23:return Tx(),null;case 24:return null;default:return null}}var lg=!1,nc=!1,A4=typeof WeakSet=="function"?WeakSet:Set,ut=null;function cg(d,m){var E=d.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(w){Vr(d,m,w)}else E.current=null}function cx(d,m,E){try{E()}catch(w){Vr(d,m,w)}}var rb=!1;function E4(d,m){for(X(d.containerInfo),ut=m;ut!==null;)if(d=ut,m=d.child,(d.subtreeFlags&1028)!==0&&m!==null)m.return=d,ut=m;else for(;ut!==null;){d=ut;try{var E=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,b=E.memoizedState,D=d.stateNode,ie=D.getSnapshotBeforeUpdate(d.elementType===d.type?w:Tr(d.type,w),b);D.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:Ae&&$e(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(pe){Vr(d,d.return,pe)}if(m=d.sibling,m!==null){m.return=d.return,ut=m;break}ut=d.return}return E=rb,rb=!1,E}function ic(d,m,E){var w=m.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var b=w=w.next;do{if((b.tag&d)===d){var D=b.destroy;b.destroy=void 0,D!==void 0&&cx(m,E,D)}b=b.next}while(b!==w)}}function qf(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&d)===d){var w=E.create;E.destroy=w()}E=E.next}while(E!==m)}}function ux(d){var m=d.ref;if(m!==null){var E=d.stateNode;switch(d.tag){case 5:d=q(E);break;default:d=E}typeof m=="function"?m(d):m.current=d}}function sb(d,m,E){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(Kl,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(d=m.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var w=d=d.next;do{var b=w,D=b.destroy;b=b.tag,D!==void 0&&(b&2||b&4)&&cx(m,E,D),w=w.next}while(w!==d)}break;case 1:if(cg(m,E),d=m.stateNode,typeof d.componentWillUnmount=="function")try{d.props=m.memoizedProps,d.state=m.memoizedState,d.componentWillUnmount()}catch(ie){Vr(m,E,ie)}break;case 5:cg(m,E);break;case 4:Ae?hb(d,m,E):W&&W&&(m=m.stateNode.containerInfo,E=St(m),Tt(m,E))}}function ob(d,m,E){for(var w=m;;)if(sb(d,w,E),w.child===null||Ae&&w.tag===4){if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function ab(d){var m=d.alternate;m!==null&&(d.alternate=null,ab(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&Ye(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function lb(d){return d.tag===5||d.tag===3||d.tag===4}function cb(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||lb(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function ub(d){if(Ae){e:{for(var m=d.return;m!==null;){if(lb(m))break e;m=m.return}throw Error(a(160))}var E=m;switch(E.tag){case 5:m=E.stateNode,E.flags&32&&(ht(m),E.flags&=-33),E=cb(d),fx(d,E,m);break;case 3:case 4:m=E.stateNode.containerInfo,E=cb(d),hx(d,E,m);break;default:throw Error(a(161))}}}function hx(d,m,E){var w=d.tag;if(w===5||w===6)d=d.stateNode,m?Ge(E,d,m):tt(E,d);else if(w!==4&&(d=d.child,d!==null))for(hx(d,m,E),d=d.sibling;d!==null;)hx(d,m,E),d=d.sibling}function fx(d,m,E){var w=d.tag;if(w===5||w===6)d=d.stateNode,m?it(E,d,m):je(E,d);else if(w!==4&&(d=d.child,d!==null))for(fx(d,m,E),d=d.sibling;d!==null;)fx(d,m,E),d=d.sibling}function hb(d,m,E){for(var w=m,b=!1,D,ie;;){if(!b){b=w.return;e:for(;;){if(b===null)throw Error(a(160));switch(D=b.stateNode,b.tag){case 5:ie=!1;break e;case 3:D=D.containerInfo,ie=!0;break e;case 4:D=D.containerInfo,ie=!0;break e}b=b.return}b=!0}if(w.tag===5||w.tag===6)ob(d,w,E),ie?Ze(D,w.stateNode):ze(D,w.stateNode);else if(w.tag===18)ie?re(D,w.stateNode):oe(D,w.stateNode);else if(w.tag===4){if(w.child!==null){D=w.stateNode.containerInfo,ie=!0,w.child.return=w,w=w.child;continue}}else if(sb(d,w,E),w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return,w.tag===4&&(b=!1)}w.sibling.return=w.return,w=w.sibling}}function dx(d,m){if(Ae){switch(m.tag){case 0:case 11:case 14:case 15:ic(3,m,m.return),qf(3,m),ic(5,m,m.return);return;case 1:return;case 5:var E=m.stateNode;if(E!=null){var w=m.memoizedProps;d=d!==null?d.memoizedProps:w;var b=m.type,D=m.updateQueue;m.updateQueue=null,D!==null&&Qe(E,D,b,d,w,m)}return;case 6:if(m.stateNode===null)throw Error(a(162));E=m.memoizedProps,Oe(m.stateNode,d!==null?d.memoizedProps:E,E);return;case 3:Re&&d!==null&&d.memoizedState.isDehydrated&&J(m.stateNode.containerInfo);return;case 12:return;case 13:ug(m);return;case 19:ug(m);return;case 17:return}throw Error(a(163))}switch(m.tag){case 0:case 11:case 14:case 15:ic(3,m,m.return),qf(3,m),ic(5,m,m.return);return;case 12:return;case 13:ug(m);return;case 19:ug(m);return;case 3:Re&&d!==null&&d.memoizedState.isDehydrated&&J(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(W){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,Tt(m.containerInfo,m.pendingChildren);break e}throw Error(a(163))}}function ug(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var E=d.stateNode;E===null&&(E=d.stateNode=new A4),m.forEach(function(w){var b=D4.bind(null,d,w);E.has(w)||(E.add(w),w.then(b,b))})}}function M4(d,m){for(ut=m;ut!==null;){m=ut;var E=m.deletions;if(E!==null)for(var w=0;w<E.length;w++){var b=E[w];try{var D=d;Ae?hb(D,b,m):ob(D,b,m);var ie=b.alternate;ie!==null&&(ie.return=null),b.return=null}catch(Et){Vr(b,m,Et)}}if(E=m.child,m.subtreeFlags&12854&&E!==null)E.return=m,ut=E;else for(;ut!==null;){m=ut;try{var pe=m.flags;if(pe&32&&Ae&&ht(m.stateNode),pe&512){var Ue=m.alternate;if(Ue!==null){var qe=Ue.ref;qe!==null&&(typeof qe=="function"?qe(null):qe.current=null)}}if(pe&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var vt=m.alternate;(vt===null||vt.memoizedState===null)&&(xx=Qn())}break;case 22:var Ht=m.memoizedState!==null,Pt=m.alternate,Bn=Pt!==null&&Pt.memoizedState!==null;if(E=m,Ae){e:if(w=E,b=Ht,D=null,Ae)for(var wt=w;;){if(wt.tag===5){if(D===null){D=wt;var fr=wt.stateNode;b?_t(fr):ve(wt.stateNode,wt.memoizedProps)}}else if(wt.tag===6){if(D===null){var bs=wt.stateNode;b?rt(bs):ae(bs,wt.memoizedProps)}}else if((wt.tag!==22&&wt.tag!==23||wt.memoizedState===null||wt===w)&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===w)break;for(;wt.sibling===null;){if(wt.return===null||wt.return===w)break e;D===wt&&(D=null),wt=wt.return}D===wt&&(D=null),wt.sibling.return=wt.return,wt=wt.sibling}}if(Ht&&!Bn&&E.mode&1){ut=E;for(var be=E.child;be!==null;){for(E=ut=be;ut!==null;){w=ut;var me=w.child;switch(w.tag){case 0:case 11:case 14:case 15:ic(4,w,w.return);break;case 1:cg(w,w.return);var Ie=w.stateNode;if(typeof Ie.componentWillUnmount=="function"){var ft=w.return;try{Ie.props=w.memoizedProps,Ie.state=w.memoizedState,Ie.componentWillUnmount()}catch(Et){Vr(w,ft,Et)}}break;case 5:cg(w,w.return);break;case 22:if(w.memoizedState!==null){pb(E);continue}}me!==null?(me.return=w,ut=me):pb(E)}be=be.sibling}}}switch(pe&4102){case 2:ub(m),m.flags&=-3;break;case 6:ub(m),m.flags&=-3,dx(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,dx(m.alternate,m);break;case 4:dx(m.alternate,m)}}catch(Et){Vr(m,m.return,Et)}if(E=m.sibling,E!==null){E.return=m.return,ut=E;break}ut=m.return}}}function w4(d,m,E){ut=d,fb(d)}function fb(d,m,E){for(var w=(d.mode&1)!==0;ut!==null;){var b=ut,D=b.child;if(b.tag===22&&w){var ie=b.memoizedState!==null||lg;if(!ie){var pe=b.alternate,Ue=pe!==null&&pe.memoizedState!==null||nc;pe=lg;var qe=nc;if(lg=ie,(nc=Ue)&&!qe)for(ut=b;ut!==null;)ie=ut,Ue=ie.child,ie.tag===22&&ie.memoizedState!==null?mb(b):Ue!==null?(Ue.return=ie,ut=Ue):mb(b);for(;D!==null;)ut=D,fb(D),D=D.sibling;ut=b,lg=pe,nc=qe}db(d)}else b.subtreeFlags&8772&&D!==null?(D.return=b,ut=D):db(d)}}function db(d){for(;ut!==null;){var m=ut;if(m.flags&8772){var E=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:nc||qf(5,m);break;case 1:var w=m.stateNode;if(m.flags&4&&!nc)if(E===null)w.componentDidMount();else{var b=m.elementType===m.type?E.memoizedProps:Tr(m.type,E.memoizedProps);w.componentDidUpdate(b,E.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var D=m.updateQueue;D!==null&&aC(m,D,w);break;case 3:var ie=m.updateQueue;if(ie!==null){if(E=null,m.child!==null)switch(m.child.tag){case 5:E=q(m.child.stateNode);break;case 1:E=m.child.stateNode}aC(m,ie,E)}break;case 5:var pe=m.stateNode;E===null&&m.flags&4&&yt(pe,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&m.memoizedState===null){var Ue=m.alternate;if(Ue!==null){var qe=Ue.memoizedState;if(qe!==null){var vt=qe.dehydrated;vt!==null&&$(vt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}nc||m.flags&512&&ux(m)}catch(Ht){Vr(m,m.return,Ht)}}if(m===d){ut=null;break}if(E=m.sibling,E!==null){E.return=m.return,ut=E;break}ut=m.return}}function pb(d){for(;ut!==null;){var m=ut;if(m===d){ut=null;break}var E=m.sibling;if(E!==null){E.return=m.return,ut=E;break}ut=m.return}}function mb(d){for(;ut!==null;){var m=ut;try{switch(m.tag){case 0:case 11:case 15:var E=m.return;try{qf(4,m)}catch(Ue){Vr(m,E,Ue)}break;case 1:var w=m.stateNode;if(typeof w.componentDidMount=="function"){var b=m.return;try{w.componentDidMount()}catch(Ue){Vr(m,b,Ue)}}var D=m.return;try{ux(m)}catch(Ue){Vr(m,D,Ue)}break;case 5:var ie=m.return;try{ux(m)}catch(Ue){Vr(m,ie,Ue)}}}catch(Ue){Vr(m,m.return,Ue)}if(m===d){ut=null;break}var pe=m.sibling;if(pe!==null){pe.return=m.return,ut=pe;break}ut=m.return}}var hg=0,fg=1,dg=2,pg=3,mg=4;if(typeof Symbol=="function"&&Symbol.for){var $f=Symbol.for;hg=$f("selector.component"),fg=$f("selector.has_pseudo_class"),dg=$f("selector.role"),pg=$f("selector.test_id"),mg=$f("selector.text")}function px(d){var m=Ee(d);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(a(364));return m}if(d=te(d),d===null)throw Error(a(362));return d.stateNode.current}function mx(d,m){switch(m.$$typeof){case hg:if(d.type===m.value)return!0;break;case fg:e:{m=m.value,d=[d,0];for(var E=0;E<d.length;){var w=d[E++],b=d[E++],D=m[b];if(w.tag!==5||!ye(w)){for(;D!=null&&mx(w,D);)b++,D=m[b];if(b===m.length){m=!0;break e}else for(w=w.child;w!==null;)d.push(w,b),w=w.sibling}}m=!1}return m;case dg:if(d.tag===5&&Fe(d.stateNode,m.value))return!0;break;case mg:if((d.tag===5||d.tag===6)&&(d=ge(d),d!==null&&0<=d.indexOf(m.value)))return!0;break;case pg:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function gx(d){switch(d.$$typeof){case hg:return"<"+(R(d.value)||"Unknown")+">";case fg:return":has("+(gx(d)||"")+")";case dg:return'[role="'+d.value+'"]';case mg:return'"'+d.value+'"';case pg:return'[data-testname="'+d.value+'"]';default:throw Error(a(365))}}function gb(d,m){var E=[];d=[d,0];for(var w=0;w<d.length;){var b=d[w++],D=d[w++],ie=m[D];if(b.tag!==5||!ye(b)){for(;ie!=null&&mx(b,ie);)D++,ie=m[D];if(D===m.length)E.push(b);else for(b=b.child;b!==null;)d.push(b,D),b=b.sibling}}return E}function vx(d,m){if(!F)throw Error(a(363));d=px(d),d=gb(d,m),m=[],d=Array.from(d);for(var E=0;E<d.length;){var w=d[E++];if(w.tag===5)ye(w)||m.push(w.stateNode);else for(w=w.child;w!==null;)d.push(w),w=w.sibling}return m}var T4=Math.ceil,gg=l.ReactCurrentDispatcher,yx=l.ReactCurrentOwner,di=l.ReactCurrentBatchConfig,en=0,Si=null,Ai=null,er=0,as=0,Fu=Bt(0),Ii=0,ed=null,Ou=0,vg=0,_x=0,td=null,Gr=null,xx=0,Sx=1/0;function Nu(){Sx=Qn()+500}var yg=!1,Ax=null,za=null,_g=!1,Ga=null,xg=0,nd=0,Ex=null,Sg=-1,Ag=0;function Rr(){return en&6?Qn():Sg!==-1?Sg:Sg=Qn()}function Ha(d){return d.mode&1?en&2&&er!==0?er&-er:Zl.transition!==null?(Ag===0&&(d=Zo,Zo<<=1,!(Zo&4194240)&&(Zo=64),Ag=d),Ag):(d=rn,d!==0?d:_e()):1}function Ts(d,m,E){if(50<nd)throw nd=0,Ex=null,Error(a(185));var w=Eg(d,m);return w===null?null:(xo(w,m,E),(!(en&2)||w!==Si)&&(w===Si&&(!(en&2)&&(vg|=m),Ii===4&&Va(w,er)),Hr(w,E),m===1&&en===0&&!(d.mode&1)&&(Nu(),Ao&&zr())),w)}function Eg(d,m){d.lanes|=m;var E=d.alternate;for(E!==null&&(E.lanes|=m),E=d,d=d.return;d!==null;)d.childLanes|=m,E=d.alternate,E!==null&&(E.childLanes|=m),E=d,d=d.return;return E.tag===3?E.stateNode:null}function Hr(d,m){var E=d.callbackNode;Df(d,m);var w=Yl(d,d===Si?er:0);if(w===0)E!==null&&Tu(E),d.callbackNode=null,d.callbackPriority=0;else if(m=w&-w,d.callbackPriority!==m){if(E!=null&&Tu(E),m===1)d.tag===0?kf(yb.bind(null,d)):Nf(yb.bind(null,d)),we?G(function(){en===0&&zr()}):ea(Jl,zr),E=null;else{switch(Lf(w)){case 1:E=Jl;break;case 4:E=zm;break;case 16:E=Mr;break;case 536870912:E=Ff;break;default:E=Mr}E=Cb(E,vb.bind(null,d))}d.callbackPriority=m,d.callbackNode=E}}function vb(d,m){if(Sg=-1,Ag=0,en&6)throw Error(a(327));var E=d.callbackNode;if(oc()&&d.callbackNode!==E)return null;var w=Yl(d,d===Si?er:0);if(w===0)return null;if(w&30||w&d.expiredLanes||m)m=Mg(d,w);else{m=w;var b=en;en|=2;var D=Sb();(Si!==d||er!==m)&&(Nu(),rc(d,m));do try{R4();break}catch(pe){xb(d,pe)}while(!0);bu(),gg.current=D,en=b,Ai!==null?m=0:(Si=null,er=0,m=Ii)}if(m!==0){if(m===2&&(b=$o(d),b!==0&&(w=b,m=Mx(d,b))),m===1)throw E=ed,rc(d,0),Va(d,w),Hr(d,Qn()),E;if(m===6)Va(d,w);else{if(b=d.current.alternate,!(w&30)&&!C4(b)&&(m=Mg(d,w),m===2&&(D=$o(d),D!==0&&(w=D,m=Mx(d,D))),m===1))throw E=ed,rc(d,0),Va(d,w),Hr(d,Qn()),E;switch(d.finishedWork=b,d.finishedLanes=w,m){case 0:case 1:throw Error(a(345));case 2:sc(d,Gr);break;case 3:if(Va(d,w),(w&130023424)===w&&(m=xx+500-Qn(),10<m)){if(Yl(d,0)!==0)break;if(b=d.suspendedLanes,(b&w)!==w){Rr(),d.pingedLanes|=d.suspendedLanes&b;break}d.timeoutHandle=ue(sc.bind(null,d,Gr),m);break}sc(d,Gr);break;case 4:if(Va(d,w),(w&4194240)===w)break;for(m=d.eventTimes,b=-1;0<w;){var ie=31-bn(w);D=1<<ie,ie=m[ie],ie>b&&(b=ie),w&=~D}if(w=b,w=Qn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*T4(w/1960))-w,10<w){d.timeoutHandle=ue(sc.bind(null,d,Gr),w);break}sc(d,Gr);break;case 5:sc(d,Gr);break;default:throw Error(a(329))}}}return Hr(d,Qn()),d.callbackNode===E?vb.bind(null,d):null}function Mx(d,m){var E=td;return d.current.memoizedState.isDehydrated&&(rc(d,m).flags|=256),d=Mg(d,m),d!==2&&(m=Gr,Gr=E,m!==null&&wx(m)),d}function wx(d){Gr===null?Gr=d:Gr.push.apply(Gr,d)}function C4(d){for(var m=d;;){if(m.flags&16384){var E=m.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var w=0;w<E.length;w++){var b=E[w],D=b.getSnapshot;b=b.value;try{if(!ns(D(),b))return!1}catch{return!1}}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Va(d,m){for(m&=~_x,m&=~vg,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var E=31-bn(m),w=1<<E;d[E]=-1,m&=~w}}function yb(d){if(en&6)throw Error(a(327));oc();var m=Yl(d,0);if(!(m&1))return Hr(d,Qn()),null;var E=Mg(d,m);if(d.tag!==0&&E===2){var w=$o(d);w!==0&&(m=w,E=Mx(d,w))}if(E===1)throw E=ed,rc(d,0),Va(d,m),Hr(d,Qn()),E;if(E===6)throw Error(a(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,sc(d,Gr),Hr(d,Qn()),null}function _b(d){Ga!==null&&Ga.tag===0&&!(en&6)&&oc();var m=en;en|=1;var E=di.transition,w=rn;try{if(di.transition=null,rn=1,d)return d()}finally{rn=w,di.transition=E,en=m,!(en&6)&&zr()}}function Tx(){as=Fu.current,ct(Fu)}function rc(d,m){d.finishedWork=null,d.finishedLanes=0;var E=d.timeoutHandle;if(E!==ke&&(d.timeoutHandle=ke,Se(E)),Ai!==null)for(E=Ai.return;E!==null;){var w=E;switch(V_(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Jt();break;case 3:Lu(),ct(Rt),ct(bt),Z_();break;case 5:J_(w);break;case 4:Lu();break;case 13:ct(qn);break;case 19:ct(qn);break;case 10:Gi(w.type._context);break;case 22:case 23:Tx()}E=E.return}if(Si=d,Ai=d=Wa(d.current,null),er=as=m,Ii=0,ed=null,_x=vg=Ou=0,Gr=td=null,is!==null){for(m=0;m<is.length;m++)if(E=is[m],w=E.interleaved,w!==null){E.interleaved=null;var b=w.next,D=E.pending;if(D!==null){var ie=D.next;D.next=b,w.next=ie}E.pending=w}is=null}return d}function xb(d,m){do{var E=Ai;try{if(bu(),Zm.current=ng,Qm){for(var w=si.memoizedState;w!==null;){var b=w.queue;b!==null&&(b.pending=null),w=w.next}Qm=!1}if(Uu=0,Hi=cr=si=null,Xf=!1,jf=0,yx.current=null,E===null||E.return===null){Ii=1,ed=m,Ai=null;break}e:{var D=d,ie=E.return,pe=E,Ue=m;if(m=er,pe.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var qe=Ue,vt=pe,Ht=vt.tag;if(!(vt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Pt=vt.alternate;Pt?(vt.updateQueue=Pt.updateQueue,vt.memoizedState=Pt.memoizedState,vt.lanes=Pt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Bn=GC(ie);if(Bn!==null){Bn.flags&=-257,HC(Bn,ie,pe,D,m),Bn.mode&1&&zC(D,qe,m),m=Bn,Ue=qe;var wt=m.updateQueue;if(wt===null){var fr=new Set;fr.add(Ue),m.updateQueue=fr}else wt.add(Ue);break e}else{if(!(m&1)){zC(D,qe,m),Cx();break e}Ue=Error(a(426))}}else if(Xn&&pe.mode&1){var bs=GC(ie);if(bs!==null){!(bs.flags&65536)&&(bs.flags|=256),HC(bs,ie,pe,D,m),j_(Ue);break e}}D=Ue,Ii!==4&&(Ii=2),td===null?td=[D]:td.push(D),Ue=ix(Ue,pe),pe=ie;do{switch(pe.tag){case 3:pe.flags|=65536,m&=-m,pe.lanes|=m;var be=NC(pe,Ue,m);oC(pe,be);break e;case 1:D=Ue;var me=pe.type,Ie=pe.stateNode;if(!(pe.flags&128)&&(typeof me.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(za===null||!za.has(Ie)))){pe.flags|=65536,m&=-m,pe.lanes|=m;var ft=kC(pe,D,m);oC(pe,ft);break e}}pe=pe.return}while(pe!==null)}Eb(E)}catch(Et){m=Et,Ai===E&&E!==null&&(Ai=E=E.return);continue}break}while(!0)}function Sb(){var d=gg.current;return gg.current=ng,d===null?ng:d}function Cx(){(Ii===0||Ii===3||Ii===2)&&(Ii=4),Si===null||!(Ou&268435455)&&!(vg&268435455)||Va(Si,er)}function Mg(d,m){var E=en;en|=2;var w=Sb();Si===d&&er===m||rc(d,m);do try{b4();break}catch(b){xb(d,b)}while(!0);if(bu(),en=E,gg.current=w,Ai!==null)throw Error(a(261));return Si=null,er=0,Ii}function b4(){for(;Ai!==null;)Ab(Ai)}function R4(){for(;Ai!==null&&!Uf();)Ab(Ai)}function Ab(d){var m=Tb(d.alternate,d,as);d.memoizedProps=d.pendingProps,m===null?Eb(d):Ai=m,yx.current=null}function Eb(d){var m=d;do{var E=m.alternate;if(d=m.return,m.flags&32768){if(E=S4(E,m),E!==null){E.flags&=32767,Ai=E;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Ii=6,Ai=null;return}}else if(E=y4(E,m,as),E!==null){Ai=E;return}if(m=m.sibling,m!==null){Ai=m;return}Ai=m=d}while(m!==null);Ii===0&&(Ii=5)}function sc(d,m){var E=rn,w=di.transition;try{di.transition=null,rn=1,P4(d,m,E)}finally{di.transition=w,rn=E}return null}function P4(d,m,E){do oc();while(Ga!==null);if(en&6)throw Error(a(327));var w=d.finishedWork,b=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(a(177));d.callbackNode=null,d.callbackPriority=0;var D=w.lanes|w.childLanes;if(Fa(d,D),d===Si&&(Ai=Si=null,er=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||_g||(_g=!0,Cb(Mr,function(){return oc(),null})),D=(w.flags&15990)!==0,w.subtreeFlags&15990||D){D=di.transition,di.transition=null;var ie=rn;rn=1;var pe=en;en|=4,yx.current=null,E4(d,w),M4(d,w),K(d.containerInfo),d.current=w,w4(w),km(),en=pe,rn=ie,di.transition=D}else d.current=w;if(_g&&(_g=!1,Ga=d,xg=b),D=d.pendingLanes,D===0&&(za=null),Of(w.stateNode),Hr(d,Qn()),m!==null)for(E=d.onRecoverableError,w=0;w<m.length;w++)E(m[w]);if(yg)throw yg=!1,d=Ax,Ax=null,d;return xg&1&&d.tag!==0&&oc(),D=d.pendingLanes,D&1?d===Ex?nd++:(nd=0,Ex=d):nd=0,zr(),null}function oc(){if(Ga!==null){var d=Lf(xg),m=di.transition,E=rn;try{if(di.transition=null,rn=16>d?16:d,Ga===null)var w=!1;else{if(d=Ga,Ga=null,xg=0,en&6)throw Error(a(331));var b=en;for(en|=4,ut=d.current;ut!==null;){var D=ut,ie=D.child;if(ut.flags&16){var pe=D.deletions;if(pe!==null){for(var Ue=0;Ue<pe.length;Ue++){var qe=pe[Ue];for(ut=qe;ut!==null;){var vt=ut;switch(vt.tag){case 0:case 11:case 15:ic(8,vt,D)}var Ht=vt.child;if(Ht!==null)Ht.return=vt,ut=Ht;else for(;ut!==null;){vt=ut;var Pt=vt.sibling,Bn=vt.return;if(ab(vt),vt===qe){ut=null;break}if(Pt!==null){Pt.return=Bn,ut=Pt;break}ut=Bn}}}var wt=D.alternate;if(wt!==null){var fr=wt.child;if(fr!==null){wt.child=null;do{var bs=fr.sibling;fr.sibling=null,fr=bs}while(fr!==null)}}ut=D}}if(D.subtreeFlags&2064&&ie!==null)ie.return=D,ut=ie;else e:for(;ut!==null;){if(D=ut,D.flags&2048)switch(D.tag){case 0:case 11:case 15:ic(9,D,D.return)}var be=D.sibling;if(be!==null){be.return=D.return,ut=be;break e}ut=D.return}}var me=d.current;for(ut=me;ut!==null;){ie=ut;var Ie=ie.child;if(ie.subtreeFlags&2064&&Ie!==null)Ie.return=ie,ut=Ie;else e:for(ie=me;ut!==null;){if(pe=ut,pe.flags&2048)try{switch(pe.tag){case 0:case 11:case 15:qf(9,pe)}}catch(Et){Vr(pe,pe.return,Et)}if(pe===ie){ut=null;break e}var ft=pe.sibling;if(ft!==null){ft.return=pe.return,ut=ft;break e}ut=pe.return}}if(en=b,zr(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(Kl,d)}catch{}w=!0}return w}finally{rn=E,di.transition=m}}return!1}function Mb(d,m,E){m=ix(E,m),m=NC(d,m,1),ka(d,m),m=Rr(),d=Eg(d,1),d!==null&&(xo(d,1,m),Hr(d,m))}function Vr(d,m,E){if(d.tag===3)Mb(d,d,E);else for(;m!==null;){if(m.tag===3){Mb(m,d,E);break}else if(m.tag===1){var w=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(za===null||!za.has(w))){d=ix(E,d),d=kC(m,d,1),ka(m,d),d=Rr(),m=Eg(m,1),m!==null&&(xo(m,1,d),Hr(m,d));break}}m=m.return}}function B4(d,m,E){var w=d.pingCache;w!==null&&w.delete(m),m=Rr(),d.pingedLanes|=d.suspendedLanes&E,Si===d&&(er&E)===E&&(Ii===4||Ii===3&&(er&130023424)===er&&500>Qn()-xx?rc(d,0):_x|=E),Hr(d,m)}function wb(d,m){m===0&&(d.mode&1?(m=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):m=1);var E=Rr();d=Eg(d,m),d!==null&&(xo(d,m,E),Hr(d,E))}function I4(d){var m=d.memoizedState,E=0;m!==null&&(E=m.retryLane),wb(d,E)}function D4(d,m){var E=0;switch(d.tag){case 13:var w=d.stateNode,b=d.memoizedState;b!==null&&(E=b.retryLane);break;case 19:w=d.stateNode;break;default:throw Error(a(314))}w!==null&&w.delete(m),wb(d,E)}var Tb;Tb=function(d,m,E){if(d!==null)if(d.memoizedProps!==m.pendingProps||Rt.current)os=!0;else{if(!(d.lanes&E)&&!(m.flags&128))return os=!1,x4(d,m,E);os=!!(d.flags&131072)}else os=!1,Xn&&m.flags&1048576&&fC(m,Ym,m.index);switch(m.lanes=0,m.tag){case 2:var w=m.type;d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2),d=m.pendingProps;var b=Tn(m,bt.current);hi(m,E),b=q_(null,m,w,d,b,E);var D=$_();return m.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Cn(w)?(D=!0,Ot(m)):D=!1,m.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,k_(m),b.updater=Xm,m.stateNode=b,b._reactInternals=m,G_(m,w,d,E),m=ox(null,m,w,!0,D,E)):(m.tag=0,Xn&&D&&H_(m),br(null,m,b,E),m=m.child),m;case 16:w=m.elementType;e:{switch(d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2),d=m.pendingProps,b=w._init,w=b(w._payload),m.type=w,b=m.tag=U4(w),d=Tr(w,d),b){case 0:m=sx(null,m,w,d,E);break e;case 1:m=ZC(null,m,w,d,E);break e;case 11:m=XC(null,m,w,d,E);break e;case 14:m=jC(null,m,w,Tr(w.type,d),E);break e}throw Error(a(306,w,""))}return m;case 0:return w=m.type,b=m.pendingProps,b=m.elementType===w?b:Tr(w,b),sx(d,m,w,b,E);case 1:return w=m.type,b=m.pendingProps,b=m.elementType===w?b:Tr(w,b),ZC(d,m,w,b,E);case 3:e:{if(QC(m),d===null)throw Error(a(387));w=m.pendingProps,D=m.memoizedState,b=D.element,sC(d,m),Wm(m,w,null,E);var ie=m.memoizedState;if(w=ie.element,Re&&D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:ie.cache,transitions:ie.transitions},m.updateQueue.baseState=D,m.memoizedState=D,m.flags&256){b=Error(a(423)),m=qC(d,m,w,E,b);break e}else if(w!==b){b=Error(a(424)),m=qC(d,m,w,E,b);break e}else for(Re&&(ss=Zn(m.stateNode.containerInfo),rs=m,Xn=!0,Zs=null,zf=!1),E=yC(m,null,w,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Bu(),w===b){m=sa(d,m,E);break e}br(d,m,w,E)}m=m.child}return m;case 5:return _C(m),d===null&&X_(m),w=m.type,b=m.pendingProps,D=d!==null?d.memoizedProps:null,ie=b.children,le(w,b)?ie=null:D!==null&&le(w,D)&&(m.flags|=32),KC(d,m),br(d,m,ie,E),m.child;case 6:return d===null&&X_(m),null;case 13:return $C(d,m,E);case 4:return Y_(m,m.stateNode.containerInfo),w=m.pendingProps,d===null?m.child=Iu(m,null,w,E):br(d,m,w,E),m.child;case 11:return w=m.type,b=m.pendingProps,b=m.elementType===w?b:Tr(w,b),XC(d,m,w,b,E);case 7:return br(d,m,m.pendingProps,E),m.child;case 8:return br(d,m,m.pendingProps.children,E),m.child;case 12:return br(d,m,m.pendingProps.children,E),m.child;case 10:e:{if(w=m.type._context,b=m.pendingProps,D=m.memoizedProps,ie=b.value,Hm(m,w,ie),D!==null)if(ns(D.value,ie)){if(D.children===b.children&&!Rt.current){m=sa(d,m,E);break e}}else for(D=m.child,D!==null&&(D.return=m);D!==null;){var pe=D.dependencies;if(pe!==null){ie=D.child;for(var Ue=pe.firstContext;Ue!==null;){if(Ue.context===w){if(D.tag===1){Ue=ta(-1,E&-E),Ue.tag=2;var qe=D.updateQueue;if(qe!==null){qe=qe.shared;var vt=qe.pending;vt===null?Ue.next=Ue:(Ue.next=vt.next,vt.next=Ue),qe.pending=Ue}}D.lanes|=E,Ue=D.alternate,Ue!==null&&(Ue.lanes|=E),Cr(D.return,E,m),pe.lanes|=E;break}Ue=Ue.next}}else if(D.tag===10)ie=D.type===m.type?null:D.child;else if(D.tag===18){if(ie=D.return,ie===null)throw Error(a(341));ie.lanes|=E,pe=ie.alternate,pe!==null&&(pe.lanes|=E),Cr(ie,E,m),ie=D.sibling}else ie=D.child;if(ie!==null)ie.return=D;else for(ie=D;ie!==null;){if(ie===m){ie=null;break}if(D=ie.sibling,D!==null){D.return=ie.return,ie=D;break}ie=ie.return}D=ie}br(d,m,b.children,E),m=m.child}return m;case 9:return b=m.type,w=m.pendingProps.children,hi(m,E),b=fi(b),w=w(b),m.flags|=1,br(d,m,w,E),m.child;case 14:return w=m.type,b=Tr(w,m.pendingProps),b=Tr(w.type,b),jC(d,m,w,b,E);case 15:return YC(d,m,m.type,m.pendingProps,E);case 17:return w=m.type,b=m.pendingProps,b=m.elementType===w?b:Tr(w,b),d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,Cn(w)?(d=!0,Ot(m)):d=!1,hi(m,E),uC(m,w,b),G_(m,w,b,E),ox(null,m,w,!0,d,E);case 19:return ib(d,m,E);case 22:return JC(d,m,E)}throw Error(a(156,m.tag))};function Cb(d,m){return ea(d,m)}function L4(d,m,E,w){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(d,m,E,w){return new L4(d,m,E,w)}function bx(d){return d=d.prototype,!(!d||!d.isReactComponent)}function U4(d){if(typeof d=="function")return bx(d)?1:0;if(d!=null){if(d=d.$$typeof,d===_)return 11;if(d===S)return 14}return 2}function Wa(d,m){var E=d.alternate;return E===null?(E=Cs(d.tag,m,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=m,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&14680064,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,m=d.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E}function wg(d,m,E,w,b,D){var ie=2;if(w=d,typeof d=="function")bx(d)&&(ie=1);else if(typeof d=="string")ie=5;else e:switch(d){case h:return ac(E.children,b,D,m);case f:ie=8,b|=8;break;case p:return d=Cs(12,E,m,b|2),d.elementType=p,d.lanes=D,d;case x:return d=Cs(13,E,m,b),d.elementType=x,d.lanes=D,d;case y:return d=Cs(19,E,m,b),d.elementType=y,d.lanes=D,d;case M:return Tg(E,b,D,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case g:ie=10;break e;case v:ie=9;break e;case _:ie=11;break e;case S:ie=14;break e;case A:ie=16,w=null;break e}throw Error(a(130,d==null?d:typeof d,""))}return m=Cs(ie,E,m,b),m.elementType=d,m.type=w,m.lanes=D,m}function ac(d,m,E,w){return d=Cs(7,d,w,m),d.lanes=E,d}function Tg(d,m,E,w){return d=Cs(22,d,w,m),d.elementType=M,d.lanes=E,d.stateNode={},d}function Rx(d,m,E){return d=Cs(6,d,null,m),d.lanes=E,d}function Px(d,m,E){return m=Cs(4,d.children!==null?d.children:[],d.key,m),m.lanes=E,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function F4(d,m,E,w,b){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ke,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=w,this.onRecoverableError=b,Re&&(this.mutableSourceEagerHydrationData=null)}function bb(d,m,E,w,b,D,ie,pe,Ue){return d=new F4(d,m,E,pe,Ue),m===1?(m=1,D===!0&&(m|=8)):m=0,D=Cs(3,null,null,m),d.current=D,D.stateNode=d,D.memoizedState={element:w,isDehydrated:E,cache:null,transitions:null},k_(D),d}function Rb(d){if(!d)return zt;d=d._reactInternals;e:{if(P(d)!==d||d.tag!==1)throw Error(a(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Cn(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(a(171))}if(d.tag===1){var E=d.type;if(Cn(E))return Pn(d,E,m)}return m}function Pb(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=N(m),d===null?null:d.stateNode}function Bb(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<m?E:m}}function Bx(d,m){Bb(d,m),(d=d.alternate)&&Bb(d,m)}function O4(d){return d=N(d),d===null?null:d.stateNode}function N4(){return null}return n.attemptContinuousHydration=function(d){if(d.tag===13){var m=Rr();Ts(d,134217728,m),Bx(d,134217728)}},n.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var m=Rr(),E=Ha(d);Ts(d,E,m),Bx(d,E)}},n.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var E=qo(m.pendingLanes);E!==0&&(So(m,E|1),Hr(m,Qn()),!(en&6)&&(Nu(),zr()))}break;case 13:var w=Rr();_b(function(){return Ts(d,1,w)}),Bx(d,1)}},n.batchedUpdates=function(d,m){var E=en;en|=1;try{return d(m)}finally{en=E,en===0&&(Nu(),Ao&&zr())}},n.createComponentSelector=function(d){return{$$typeof:hg,value:d}},n.createContainer=function(d,m,E,w,b,D,ie){return bb(d,m,!1,null,E,w,b,D,ie)},n.createHasPseudoClassSelector=function(d){return{$$typeof:fg,value:d}},n.createHydrationContainer=function(d,m,E,w,b,D,ie,pe,Ue){return d=bb(E,w,!0,d,b,D,ie,pe,Ue),d.context=Rb(null),E=d.current,w=Rr(),b=Ha(E),D=ta(w,b),D.callback=m??null,ka(E,D),d.current.lanes=b,xo(d,b,w),Hr(d,w),d},n.createPortal=function(d,m,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:w==null?null:""+w,children:d,containerInfo:m,implementation:E}},n.createRoleSelector=function(d){return{$$typeof:dg,value:d}},n.createTestNameSelector=function(d){return{$$typeof:pg,value:d}},n.createTextSelector=function(d){return{$$typeof:mg,value:d}},n.deferredUpdates=function(d){var m=rn,E=di.transition;try{return di.transition=null,rn=16,d()}finally{rn=m,di.transition=E}},n.discreteUpdates=function(d,m,E,w,b){var D=rn,ie=di.transition;try{return di.transition=null,rn=1,d(m,E,w,b)}finally{rn=D,di.transition=ie,en===0&&Nu()}},n.findAllNodes=vx,n.findBoundingRects=function(d,m){if(!F)throw Error(a(363));m=vx(d,m),d=[];for(var E=0;E<m.length;E++)d.push(xe(m[E]));for(m=d.length-1;0<m;m--){E=d[m];for(var w=E.x,b=w+E.width,D=E.y,ie=D+E.height,pe=m-1;0<=pe;pe--)if(m!==pe){var Ue=d[pe],qe=Ue.x,vt=qe+Ue.width,Ht=Ue.y,Pt=Ht+Ue.height;if(w>=qe&&D>=Ht&&b<=vt&&ie<=Pt){d.splice(m,1);break}else if(w!==qe||E.width!==Ue.width||Pt<D||Ht>ie){if(!(D!==Ht||E.height!==Ue.height||vt<w||qe>b)){qe>w&&(Ue.width+=qe-w,Ue.x=w),vt<b&&(Ue.width=b-qe),d.splice(m,1);break}}else{Ht>D&&(Ue.height+=Ht-D,Ue.y=D),Pt<ie&&(Ue.height=ie-Ht),d.splice(m,1);break}}}return d},n.findHostInstance=Pb,n.findHostInstanceWithNoPortals=function(d){return d=O(d),d=d!==null?z(d):null,d===null?null:d.stateNode},n.findHostInstanceWithWarning=function(d){return Pb(d)},n.flushControlled=function(d){var m=en;en|=1;var E=di.transition,w=rn;try{di.transition=null,rn=1,d()}finally{rn=w,di.transition=E,en=m,en===0&&(Nu(),zr())}},n.flushPassiveEffects=oc,n.flushSync=_b,n.focusWithin=function(d,m){if(!F)throw Error(a(363));for(d=px(d),m=gb(d,m),m=Array.from(m),d=0;d<m.length;){var E=m[d++];if(!ye(E)){if(E.tag===5&&Ve(E.stateNode))return!0;for(E=E.child;E!==null;)m.push(E),E=E.sibling}}return!1},n.getCurrentUpdatePriority=function(){return rn},n.getFindAllNodesFailureDescription=function(d,m){if(!F)throw Error(a(363));var E=0,w=[];d=[px(d),0];for(var b=0;b<d.length;){var D=d[b++],ie=d[b++],pe=m[ie];if((D.tag!==5||!ye(D))&&(mx(D,pe)&&(w.push(gx(pe)),ie++,ie>E&&(E=ie)),ie<m.length))for(D=D.child;D!==null;)d.push(D,ie),D=D.sibling}if(E<m.length){for(d=[];E<m.length;E++)d.push(gx(m[E]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},n.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return q(d.child.stateNode);default:return d.child.stateNode}},n.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:O4,findFiberByHostInstance:d.findFiberByHostInstance||N4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)d=!0;else{try{Kl=m.inject(d),ts=m}catch{}d=!!m.checkDCE}}return d},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(d,m,E,w){if(!F)throw Error(a(363));d=vx(d,m);var b=He(d,E,w).disconnect;return{disconnect:function(){b()}}},n.registerMutableSourceForHydration=function(d,m){var E=m._getVersion;E=E(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,E]:d.mutableSourceEagerHydrationData.push(m,E)},n.runWithPriority=function(d,m){var E=rn;try{return rn=d,m()}finally{rn=E}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(d,m,E,w){var b=m.current,D=Rr(),ie=Ha(b);return E=Rb(E),m.context===null?m.context=E:m.pendingContext=E,m=ta(D,ie),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),ka(b,m),d=Ts(b,ie,D),d!==null&&Vm(d,b,ie),ie},n};PF.exports=K7;var Z7=PF.exports;const Q7=Cy(Z7),q7=i=>typeof i=="object"&&typeof i.then=="function",Hc=[];function DF(i,t,n=(r,s)=>r===s){if(i===t)return!0;if(!i||!t)return!1;const r=i.length;if(t.length!==r)return!1;for(let s=0;s<r;s++)if(!n(i[s],t[s]))return!1;return!0}function LF(i,t=null,n=!1,r={}){t===null&&(t=[i]);for(const o of Hc)if(DF(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}const s={keys:t,equal:r.equal,remove:()=>{const o=Hc.indexOf(s);o!==-1&&Hc.splice(o,1)},promise:(q7(i)?i:i(...t)).then(o=>{s.response=o,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(o=>s.error=o)};if(Hc.push(s),!n)throw s.promise}const tT=(i,t,n)=>LF(i,t,!1,n),UF=(i,t,n)=>void LF(i,t,!0,n),FF=i=>{if(i===void 0||i.length===0)Hc.splice(0,Hc.length);else{const t=Hc.find(n=>DF(i,n.keys,n.equal));t&&t.remove()}},nT={},Mm=i=>void Object.assign(nT,i);function $7(i,t){function n(h,{args:f=[],attach:p,...g},v){let _=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=g.object;x=vh(y,{type:h,root:v,attach:p,primitive:!0})}else{const y=nT[_];if(!y)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=vh(new y(...f),{type:h,root:v,attach:p,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x instanceof It?x.__r3f.attach="geometry":x instanceof ci&&(x.__r3f.attach="material")),_!=="inject"&&V1(x,g),x}function r(h,f){let p=!1;if(f){var g,v;(g=f.__r3f)!=null&&g.attach?H1(h,f,f.__r3f.attach):f.isObject3D&&h.isObject3D&&(h.add(f),p=!0),p||(v=h.__r3f)==null||v.objects.push(f),f.__r3f||vh(f,{}),f.__r3f.parent=h,bE(f),yh(f)}}function s(h,f,p){let g=!1;if(f){var v,_;if((v=f.__r3f)!=null&&v.attach)H1(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){f.parent=h,f.dispatchEvent({type:"added"});const x=h.children.filter(S=>S!==f),y=x.indexOf(p);h.children=[...x.slice(0,y),f,...x.slice(y)],g=!0}g||(_=h.__r3f)==null||_.objects.push(f),f.__r3f||vh(f,{}),f.__r3f.parent=h,bE(f),yh(f)}}function o(h,f,p=!1){h&&[...h].forEach(g=>a(f,g,p))}function a(h,f,p){if(f){var g,v,_;if(f.__r3f&&(f.__r3f.parent=null),(g=h.__r3f)!=null&&g.objects&&(h.__r3f.objects=h.__r3f.objects.filter(M=>M!==f)),(v=f.__r3f)!=null&&v.attach)SP(h,f,f.__r3f.attach);else if(f.isObject3D&&h.isObject3D){var x;h.remove(f),(x=f.__r3f)!=null&&x.root&&aX(A0(f),f)}const S=(_=f.__r3f)==null?void 0:_.primitive,A=!S&&(p===void 0?f.dispose!==null:p);if(!S){var y;o((y=f.__r3f)==null?void 0:y.objects,f,A),o(f.children,f,A)}if(delete f.__r3f,A&&f.dispose&&f.type!=="Scene"){const M=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?TE.unstable_scheduleCallback(TE.unstable_IdlePriority,M):M()}yh(h)}}function l(h,f,p,g){var v;const _=(v=h.__r3f)==null?void 0:v.parent;if(!_)return;const x=n(f,p,h.__r3f.root);if(h.children){for(const y of h.children)y.__r3f&&r(x,y);h.children=h.children.filter(y=>!y.__r3f)}h.__r3f.objects.forEach(y=>r(x,y)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||a(_,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(_,x),x.raycast&&x.__r3f.eventCount&&A0(x).getState().internal.interaction.push(x),[g,g.alternate].forEach(y=>{y!==null&&(y.stateNode=x,y.ref&&(typeof y.ref=="function"?y.ref(x):y.ref.current=x))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Q7({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,f)=>{if(!f)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,r(p,f))},removeChildFromContainer:(h,f)=>{f&&a(h.getState().scene,f)},insertInContainerBefore:(h,f,p)=>{if(!f||!p)return;const g=h.getState().scene;g.__r3f&&s(g,f,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var f;return!!((f=h==null?void 0:h.__r3f)!=null?f:{}).handlers},prepareUpdate(h,f,p,g){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&g.object&&g.object!==h)return[!0];{const{args:x=[],children:y,...S}=g,{args:A=[],children:M,...C}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((R,I)=>R!==A[I]))return[!0];const T=VF(h,S,C,!0);return T.changes.length?[!1,T]:null}},commitUpdate(h,[f,p],g,v,_,x){f?l(h,g,_,x):V1(h,p)},commitMount(h,f,p,g){var v;const _=(v=h.__r3f)!=null?v:{};h.raycast&&_.handlers&&_.eventCount&&A0(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>vh(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var f;const{attach:p,parent:g}=(f=h.__r3f)!=null?f:{};p&&g&&SP(g,h,p),h.isObject3D&&(h.visible=!1),yh(h)},unhideInstance(h,f){var p;const{attach:g,parent:v}=(p=h.__r3f)!=null?p:{};g&&v&&H1(v,h,g),(h.isObject3D&&f.visible==null||f.visible)&&(h.visible=!0),yh(h)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>t?t():Fh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&zn.fun(performance.now)?performance.now:zn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:zn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:zn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:V1}}var vP,yP;const G1=i=>"colorSpace"in i||"outputColorSpace"in i,OF=()=>{var i;return(i=nT.ColorManagement)!=null?i:null},NF=i=>i&&i.isOrthographicCamera,eX=i=>i&&i.hasOwnProperty("current"),Pf=typeof window<"u"&&((vP=window.document)!=null&&vP.createElement||((yP=window.navigator)==null?void 0:yP.product)==="ReactNative")?ee.useLayoutEffect:ee.useEffect;function kF(i){const t=ee.useRef(i);return Pf(()=>void(t.current=i),[i]),t}function tX({set:i}){return Pf(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class zF extends ee.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}zF.getDerivedStateFromError=()=>({error:!0});const GF="__default",_P=new Map,nX=i=>i&&!!i.memoized&&!!i.changes;function HF(i){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],n),i[1]):i}const Ad=i=>{var t;return(t=i.__r3f)==null?void 0:t.root.getState()};function A0(i){let t=i.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const zn={obj:i=>i===Object(i)&&!zn.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,t,{arrays:n="shallow",objects:r="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(zn.str(i)||zn.num(i))return i===t;const o=zn.obj(i);if(o&&r==="reference")return i===t;const a=zn.arr(i);if(a&&n==="reference")return i===t;if((a||o)&&i===t)return!0;let l;for(l in i)if(!(l in t))return!1;if(o&&n==="shallow"&&r==="shallow"){for(l in s?t:i)if(!zn.equ(i[l],t[l],{strict:s,objects:"reference"}))return!1}else for(l in s?t:i)if(i[l]!==t[l])return!1;if(zn.und(l)){if(a&&i.length===0&&t.length===0||o&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function iX(i){const t={nodes:{},materials:{}};return i&&i.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function rX(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const t in i)t.dispose==null||t.dispose(),delete i[t]}function vh(i,t){const n=i;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},i}function CE(i,t){let n=i;if(t.includes("-")){const r=t.split("-"),s=r.pop();return n=r.reduce((o,a)=>o[a],i),{target:n,key:s}}else return{target:n,key:t}}const xP=/-\d+$/;function H1(i,t,n){if(zn.str(n)){if(xP.test(n)){const o=n.replace(xP,""),{target:a,key:l}=CE(i,o);Array.isArray(a[l])||(a[l]=[])}const{target:r,key:s}=CE(i,n);t.__r3f.previousAttach=r[s],r[s]=t}else t.__r3f.previousAttach=n(i,t)}function SP(i,t,n){var r,s;if(zn.str(n)){const{target:o,key:a}=CE(i,n),l=t.__r3f.previousAttach;l===void 0?delete o[a]:o[a]=l}else(r=t.__r3f)==null||r.previousAttach==null||r.previousAttach(i,t);(s=t.__r3f)==null||delete s.previousAttach}function VF(i,{children:t,key:n,ref:r,...s},{children:o,key:a,ref:l,...c}={},u=!1){var h;const f=(h=i==null?void 0:i.__r3f)!=null?h:{},p=Object.entries(s),g=[];if(u){const _=Object.keys(c);for(let x=0;x<_.length;x++)s.hasOwnProperty(_[x])||p.unshift([_[x],GF+"remove"])}p.forEach(([_,x])=>{var y;if((y=i.__r3f)!=null&&y.primitive&&_==="object"||zn.equ(x,c[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,x,!0,[]]);let S=[];_.includes("-")&&(S=_.split("-")),g.push([_,x,!1,S]);for(const A in s){const M=s[A];A.startsWith(`${_}-`)&&g.push([A,M,!1,A.split("-")])}});const v={...s};return f.memoizedProps&&f.memoizedProps.args&&(v.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(v.attach=f.memoizedProps.attach),{memoized:v,changes:g}}const sX=typeof process<"u"&&!1;function V1(i,t){var n,r,s;const o=(n=i.__r3f)!=null?n:{},a=o.root,l=(r=a==null||a.getState==null?void 0:a.getState())!=null?r:{},{memoized:c,changes:u}=nX(t)?t:VF(i,t),h=o.eventCount;i.__r3f&&(i.__r3f.memoizedProps=c);for(let p=0;p<u.length;p++){let[g,v,_,x]=u[p];if(G1(i)){const M="srgb",C="srgb-linear";g==="encoding"?(g="colorSpace",v=v===3001?M:C):g==="outputEncoding"&&(g="outputColorSpace",v=v===3001?M:C)}let y=i,S=y[g];if(x.length&&(S=x.reduce((A,M)=>A[M],i),!(S&&S.set))){const[A,...M]=x.reverse();y=M.reverse().reduce((C,T)=>C[T],i),g=A}if(v===GF+"remove")if(y.constructor){let A=_P.get(y.constructor);A||(A=new y.constructor,_P.set(y.constructor,A)),v=A[g]}else v=0;if(_)v?o.handlers[g]=v:delete o.handlers[g],o.eventCount=Object.keys(o.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Jc)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&(sX?S.constructor.name===v.constructor.name:S.constructor===v.constructor))S.copy(v);else if(v!==void 0){const A=S instanceof Ke;!A&&S.setScalar?S.setScalar(v):S instanceof Jc&&v instanceof Jc?S.mask=v.mask:S.set(v),!OF()&&!l.linear&&A&&S.convertSRGBToLinear()}}else if(y[g]=v,y[g]instanceof Sn&&y[g].format===xr&&y[g].type===or){const A=y[g];G1(A)&&G1(l.gl)?A.colorSpace=l.gl.outputColorSpace:A.encoding=l.gl.outputEncoding}yh(i)}if(o.parent&&i.raycast&&h!==o.eventCount){const p=A0(i).getState().internal,g=p.interaction.indexOf(i);g>-1&&p.interaction.splice(g,1),o.eventCount&&p.interaction.push(i)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(s=i.__r3f)!=null&&s.parent&&bE(i),i}function yh(i){var t,n;const r=(t=i.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function bE(i){i.onUpdate==null||i.onUpdate(i)}function WF(i,t){i.manual||(NF(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Fv(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function oX(){var i;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Fh.DefaultEventPriority;switch((i=t.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Fh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Fh.ContinuousEventPriority;default:return Fh.DefaultEventPriority}}function XF(i,t,n,r){const s=n.get(t);s&&(n.delete(t),n.size===0&&(i.delete(r),s.target.releasePointerCapture(r)))}function aX(i,t){const{internal:n}=i.getState();n.interaction=n.interaction.filter(r=>r!==t),n.initialHits=n.initialHits.filter(r=>r!==t),n.hovered.forEach((r,s)=>{(r.eventObject===t||r.object===t)&&n.hovered.delete(s)}),n.capturedMap.forEach((r,s)=>{XF(n.capturedMap,t,r,s)})}function lX(i){function t(c){const{internal:u}=i.getState(),h=c.offsetX-u.initialClick[0],f=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+f*f))}function n(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+h]}))}function r(c,u){const h=i.getState(),f=new Set,p=[],g=u?u(h.internal.interaction):h.internal.interaction;for(let y=0;y<g.length;y++){const S=Ad(g[y]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function v(y){const S=Ad(y);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var A;S.events.compute==null||S.events.compute(c,S,(A=S.previousRoot)==null?void 0:A.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(y,!0):[]}let _=g.flatMap(v).sort((y,S)=>{const A=Ad(y.object),M=Ad(S.object);return!A||!M?y.distance-S.distance:M.events.priority-A.events.priority||y.distance-S.distance}).filter(y=>{const S=Fv(y);return f.has(S)?!1:(f.add(S),!0)});h.events.filter&&(_=h.events.filter(_,h));for(const y of _){let S=y.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&p.push({...y,eventObject:S}),S=S.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let y of h.internal.capturedMap.get(c.pointerId).values())f.has(Fv(y.intersection))||p.push(y.intersection);return p}function s(c,u,h,f){const p=i.getState();if(c.length){const g={stopped:!1};for(const v of c){const _=Ad(v.object)||p,{raycaster:x,pointer:y,camera:S,internal:A}=_,M=new Y(y.x,y.y,0).unproject(S),C=B=>{var O,N;return(O=(N=A.capturedMap.get(B))==null?void 0:N.has(v.eventObject))!=null?O:!1},T=B=>{const O={intersection:v,target:u.target};A.capturedMap.has(B)?A.capturedMap.get(B).set(v.eventObject,O):A.capturedMap.set(B,new Map([[v.eventObject,O]])),u.target.setPointerCapture(B)},R=B=>{const O=A.capturedMap.get(B);O&&XF(A.capturedMap,v.eventObject,O,B)};let I={};for(let B in u){let O=u[B];typeof O!="function"&&(I[B]=O)}let P={...v,...I,pointer:y,intersections:c,stopped:g.stopped,delta:h,unprojectedPoint:M,ray:x.ray,camera:S,stopPropagation(){const B="pointerId"in u&&A.capturedMap.get(u.pointerId);if((!B||B.has(v.eventObject))&&(P.stopped=g.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=c.slice(0,c.indexOf(v));o([...O,v])}},target:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:R},nativeEvent:u};if(f(P),g.stopped===!0)break}}return c}function o(c){const{internal:u}=i.getState();for(const h of u.hovered.values())if(!c.length||!c.find(f=>f.object===h.object&&f.index===h.index&&f.instanceId===h.instanceId)){const p=h.eventObject.__r3f,g=p==null?void 0:p.handlers;if(u.hovered.delete(Fv(h)),p!=null&&p.eventCount){const v={...h,intersections:c};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function a(c,u){for(let h=0;h<u.length;h++){const f=u[h].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:h}=i.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),o([]))})}}return function(h){const{onPointerMissed:f,internal:p}=i.getState();p.lastEvent.current=h;const g=c==="onPointerMove",v=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",x=r(h,g?n:void 0),y=v?t(h):0;c==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(A=>A.eventObject)),v&&!x.length&&y<=2&&(a(h,p.interaction),f&&f(h)),g&&o(x);function S(A){const M=A.eventObject,C=M.__r3f,T=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(g){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const R=Fv(A),I=p.hovered.get(R);I?I.stopped&&A.stopPropagation():(p.hovered.set(R,A),T.onPointerOver==null||T.onPointerOver(A),T.onPointerEnter==null||T.onPointerEnter(A))}T.onPointerMove==null||T.onPointerMove(A)}else{const R=T[c];R?(!v||p.initialHits.includes(M))&&(a(h,p.interaction.filter(I=>!p.initialHits.includes(I))),R(A)):v&&p.initialHits.includes(M)&&a(h,p.interaction.filter(I=>!p.initialHits.includes(I)))}}s(x,h,y,S)}}return{handlePointer:l}}const cX=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],jF=i=>!!(i!=null&&i.render),iT=ee.createContext(null),uX=(i,t)=>{const n=eT((l,c)=>{const u=new Y,h=new Y,f=new Y;function p(y=c().camera,S=h,A=c().size){const{width:M,height:C,top:T,left:R}=A,I=M/C;S instanceof Y?f.copy(S):f.set(...S);const P=y.getWorldPosition(u).distanceTo(f);if(NF(y))return{width:M/y.zoom,height:C/y.zoom,top:T,left:R,factor:1,distance:P,aspect:I};{const B=y.fov*Math.PI/180,O=2*Math.tan(B/2)*P,N=O*(M/C);return{width:N,height:O,top:T,left:R,factor:M/N,distance:P,aspect:I}}}let g;const v=y=>l(S=>({performance:{...S.performance,current:y}})),_=new De;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>i(c(),y),advance:(y,S)=>t(y,S,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Qw,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=c();g&&clearTimeout(g),y.performance.current!==y.performance.min&&v(y.performance.min),g=setTimeout(()=>v(c().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:y=>l(S=>({...S,events:{...S.events,...y}})),setSize:(y,S,A,M,C)=>{const T=c().camera,R={width:y,height:S,top:M||0,left:C||0,updateStyle:A};l(I=>({size:R,viewport:{...I.viewport,...p(T,h,R)}}))},setDpr:y=>l(S=>{const A=HF(y);return{viewport:{...S.viewport,dpr:A,initialDpr:S.viewport.initialDpr||A}}}),setFrameloop:(y="always")=>{const S=c().clock;S.stop(),S.elapsedTime=0,y!=="never"&&(S.start(),S.elapsedTime=0),l(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ee.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,S,A)=>{const M=c().internal;return M.priority=M.priority+(S>0?1:0),M.subscribers.push({ref:y,priority:S,store:A}),M.subscribers=M.subscribers.sort((C,T)=>C.priority-T.priority),()=>{const C=c().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(S>0?1:0),C.subscribers=C.subscribers.filter(T=>T.ref!==y))}}}}}),r=n.getState();let s=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:l,size:c,viewport:u,gl:h,set:f}=n.getState();if(c.width!==s.width||c.height!==s.height||u.dpr!==o){var p;s=c,o=u.dpr,WF(l,c),h.setPixelRatio(u.dpr);const g=(p=c.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,g)}l!==a&&(a=l,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(l)}})))}),n.subscribe(l=>i(l)),n};function hX(i,t){const n={callback:i};return t.add(n),()=>void t.delete(n)}let Ov,YF=new Set,fX=new Set,dX=new Set;const pX=i=>hX(i,YF);function W1(i,t){if(i.size)for(const{callback:n}of i.values())n(t)}function Ed(i,t){switch(i){case"before":return W1(YF,t);case"after":return W1(fX,t);case"tail":return W1(dX,t)}}let X1,j1;function Y1(i,t,n){let r=t.clock.getDelta();for(t.frameloop==="never"&&typeof i=="number"&&(r=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),X1=t.internal.subscribers,Ov=0;Ov<X1.length;Ov++)j1=X1[Ov],j1.ref.current(j1.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function mX(i){let t=!1,n,r,s;function o(c){r=requestAnimationFrame(o),t=!0,n=0,Ed("before",c);for(const h of i.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(n+=Y1(c,s))}if(Ed("after",c),n===0)return Ed("tail",c),t=!1,cancelAnimationFrame(r)}function a(c,u=1){var h;if(!c)return i.forEach(f=>a(f.store.getState()),u);(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+u),t||(t=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,f){if(u&&Ed("before",c),h)Y1(c,h,f);else for(const p of i.values())Y1(c,p.store.getState());u&&Ed("after",c)}return{loop:o,invalidate:a,advance:l}}function gX(i){const t=ee.useRef(null);return Pf(()=>void(t.current=i.current.__r3f),[i]),t}function rT(){const i=ee.useContext(iT);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function jn(i=n=>n,t){return rT()(i,t)}function Bf(i,t=0){const n=rT(),r=n.getState().internal.subscribe,s=kF(i);return Pf(()=>r(s,t,n),[t,r,n]),null}const AP=new WeakMap;function JF(i,t){return function(n,...r){let s=AP.get(n);return s||(s=new n,AP.set(n,s)),i&&i(s),Promise.all(r.map(o=>new Promise((a,l)=>s.load(o,c=>{c.scene&&Object.assign(c,iX(c.scene)),a(c)},t,c=>l(new Error(`Could not load ${o}: ${c==null?void 0:c.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function Js(i,t,n,r){const s=Array.isArray(t)?t:[t],o=tT(JF(n,r),[i,...s],{equal:zn.equ});return Array.isArray(t)?o:o[0]}Js.preload=function(i,t,n){const r=Array.isArray(t)?t:[t];return UF(JF(n),[i,...r])};Js.clear=function(i,t){const n=Array.isArray(t)?t:[t];return FF([i,...n])};const df=new Map,{invalidate:EP,advance:MP}=mX(df),{reconciler:qp,applyProps:bc}=$7(df,oX),ah={objects:"shallow",strict:!1},vX=(i,t)=>{const n=typeof i=="function"?i(t):i;return jF(n)?n:new Rw({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...i})};function yX(i,t){const n=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(t){const{width:r,height:s,top:o,left:a,updateStyle:l=n}=t;return{width:r,height:s,top:o,left:a,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:r,height:s,top:o,left:a}=i.parentElement.getBoundingClientRect();return{width:r,height:s,top:o,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function _X(i){const t=df.get(i),n=t==null?void 0:t.fiber,r=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=r||uX(EP,MP),a=n||qp.createContainer(o,Fh.ConcurrentRoot,null,!1,null,"",s,null);t||df.set(i,{fiber:a,store:o});let l,c=!1,u;return{configure(h={}){let{gl:f,size:p,scene:g,events:v,onCreated:_,shadows:x=!1,linear:y=!1,flat:S=!1,legacy:A=!1,orthographic:M=!1,frameloop:C="always",dpr:T=[1,2],performance:R,raycaster:I,camera:P,onPointerMissed:B}=h,O=o.getState(),N=O.gl;O.gl||O.set({gl:N=vX(f,i)});let ne=O.raycaster;ne||O.set({raycaster:ne=new S_});const{params:z,...j}=I||{};if(zn.equ(j,ne,ah)||bc(ne,{...j}),zn.equ(z,ne.params,ah)||bc(ne,{params:{...ne.params,...z}}),!O.camera||O.camera===u&&!zn.equ(u,P,ah)){u=P;const Z=P instanceof gu,Q=Z?P:M?new Ua(0,0,0,0,.1,1e3):new Jn(75,0,.1,1e3);Z||(Q.position.z=5,P&&bc(Q,P),!O.camera&&!(P!=null&&P.rotation)&&Q.lookAt(0,0,0)),O.set({camera:Q}),ne.camera=Q}if(!O.scene){let Z;g instanceof Ll?Z=g:(Z=new Ll,g&&bc(Z,g)),O.set({scene:vh(Z)})}if(!O.xr){var q;const Z=(le,fe)=>{const ue=o.getState();ue.frameloop!=="never"&&MP(le,!0,ue,fe)},Q=()=>{const le=o.getState();le.gl.xr.enabled=le.gl.xr.isPresenting,le.gl.xr.setAnimationLoop(le.gl.xr.isPresenting?Z:null),le.gl.xr.isPresenting||EP(le)},se={connect(){const le=o.getState().gl;le.xr.addEventListener("sessionstart",Q),le.xr.addEventListener("sessionend",Q)},disconnect(){const le=o.getState().gl;le.xr.removeEventListener("sessionstart",Q),le.xr.removeEventListener("sessionend",Q)}};typeof((q=N.xr)==null?void 0:q.addEventListener)=="function"&&se.connect(),O.set({xr:se})}if(N.shadowMap){const Z=N.shadowMap.enabled,Q=N.shadowMap.type;if(N.shadowMap.enabled=!!x,zn.boo(x))N.shadowMap.type=ip;else if(zn.str(x)){var he;const se={basic:IU,percentage:Wy,soft:ip,variance:ro};N.shadowMap.type=(he=se[x])!=null?he:ip}else zn.obj(x)&&Object.assign(N.shadowMap,x);(Z!==N.shadowMap.enabled||Q!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const H=OF();H&&("enabled"in H?H.enabled=!A:"legacyMode"in H&&(H.legacyMode=A)),bc(N,{outputEncoding:y?3e3:3001,toneMapping:S?Oo:cw}),O.legacy!==A&&O.set(()=>({legacy:A})),O.linear!==y&&O.set(()=>({linear:y})),O.flat!==S&&O.set(()=>({flat:S})),f&&!zn.fun(f)&&!jF(f)&&!zn.equ(f,N,ah)&&bc(N,f),v&&!O.events.handlers&&O.set({events:v(o)});const k=yX(i,p);return zn.equ(k,O.size,ah)||O.setSize(k.width,k.height,k.updateStyle,k.top,k.left),T&&O.viewport.dpr!==HF(T)&&O.setDpr(T),O.frameloop!==C&&O.setFrameloop(C),O.onPointerMissed||O.set({onPointerMissed:B}),R&&!zn.equ(R,O.performance,ah)&&O.set(Z=>({performance:{...Z.performance,...R}})),l=_,c=!0,this},render(h){return c||this.configure(),qp.updateContainer(ee.createElement(xX,{store:o,children:h,onCreated:l,rootElement:i}),a,null,()=>{}),o},unmount(){KF(i)}}}function xX({store:i,children:t,onCreated:n,rootElement:r}){return Pf(()=>{const s=i.getState();s.set(o=>({internal:{...o.internal,active:!0}})),n&&n(s),i.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),ee.createElement(iT.Provider,{value:i},t)}function KF(i,t){const n=df.get(i),r=n==null?void 0:n.fiber;if(r){const s=n==null?void 0:n.store.getState();s&&(s.internal.active=!1),qp.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var o,a,l,c;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=s.gl)!=null&&c.xr&&s.xr.disconnect(),rX(s),df.delete(i),t&&t(i)}catch{}},500)})}}function SX(i,t,n){return ee.createElement(AX,{key:t.uuid,children:i,container:t,state:n})}function AX({state:i={},children:t,container:n}){const{events:r,size:s,...o}=i,a=rT(),[l]=ee.useState(()=>new S_),[c]=ee.useState(()=>new De),u=ee.useCallback((f,p)=>{const g={...f};Object.keys(f).forEach(_=>{(cX.includes(_)||f[_]!==p[_]&&p[_])&&delete g[_]});let v;if(p&&s){const _=p.camera;v=f.viewport.getCurrentViewport(_,new Y,s),_!==f.camera&&WF(_,s)}return{...g,scene:n,raycaster:l,pointer:c,mouse:c,previousRoot:a,events:{...f.events,...p==null?void 0:p.events,...r},size:{...f.size,...s},viewport:{...f.viewport,...v},...o}},[i]),[h]=ee.useState(()=>{const f=a.getState();return eT((g,v)=>({...f,scene:n,raycaster:l,pointer:c,mouse:c,previousRoot:a,events:{...f.events,...r},size:{...f.size,...s},...o,set:g,get:v,setEvents:_=>g(x=>({...x,events:{...x.events,..._}}))}))});return ee.useEffect(()=>{const f=a.subscribe(p=>h.setState(g=>u(p,g)));return()=>{f(),h.destroy()}},[]),ee.useEffect(()=>{h.setState(f=>u(a.getState(),f))},[u]),ee.createElement(ee.Fragment,null,qp.createPortal(ee.createElement(iT.Provider,{value:h},t),h,null))}qp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ee.version});function jo(){return jo=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},jo.apply(this,arguments)}function RE(i,t,n){var r,s,o,a,l;t==null&&(t=100);function c(){var h=Date.now()-a;h<t&&h>=0?r=setTimeout(c,t-h):(r=null,n||(l=i.apply(o,s),o=s=null))}var u=function(){o=this,s=arguments,a=Date.now();var h=n&&!r;return r||(r=setTimeout(c,t)),h&&(l=i.apply(o,s),o=s=null),l};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(l=i.apply(o,s),o=s=null,clearTimeout(r),r=null)},u}RE.debounce=RE;var EX=RE;const wP=Cy(EX);function MX(i){let{debounce:t,scroll:n,polyfill:r,offsetSize:s}=i===void 0?{debounce:0,scroll:!1,offsetSize:!1}:i;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=ee.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=ee.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),u=t?typeof t=="number"?t:t.scroll:null,h=t?typeof t=="number"?t:t.resize:null,f=ee.useRef(!1);ee.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,g,v]=ee.useMemo(()=>{const S=()=>{if(!c.current.element)return;const{left:A,top:M,width:C,height:T,bottom:R,right:I,x:P,y:B}=c.current.element.getBoundingClientRect(),O={left:A,top:M,width:C,height:T,bottom:R,right:I,x:P,y:B};c.current.element instanceof HTMLElement&&s&&(O.height=c.current.element.offsetHeight,O.width=c.current.element.offsetWidth),Object.freeze(O),f.current&&!bX(c.current.lastBounds,O)&&l(c.current.lastBounds=O)};return[S,h?wP(S,h):S,u?wP(S,u):S]},[l,s,u,h]);function _(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",v,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function x(){c.current.element&&(c.current.resizeObserver=new o(v),c.current.resizeObserver.observe(c.current.element),n&&c.current.scrollContainers&&c.current.scrollContainers.forEach(S=>S.addEventListener("scroll",v,{capture:!0,passive:!0})))}const y=S=>{!S||S===c.current.element||(_(),c.current.element=S,c.current.scrollContainers=ZF(S),x())};return TX(v,!!n),wX(g),ee.useEffect(()=>{_(),x()},[n,v,g]),ee.useEffect(()=>_,[]),[y,a,p]}function wX(i){ee.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function TX(i,t){ee.useEffect(()=>{if(t){const n=i;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[i,t])}function ZF(i){const t=[];if(!i||i===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(i);return[n,r,s].some(o=>o==="auto"||o==="scroll")&&t.push(i),[...t,...ZF(i.parentElement)]}const CX=["x","y","top","bottom","left","right","width","height"],bX=(i,t)=>CX.every(n=>i[n]===t[n]);var RX=Object.defineProperty,PX=Object.defineProperties,BX=Object.getOwnPropertyDescriptors,TP=Object.getOwnPropertySymbols,IX=Object.prototype.hasOwnProperty,DX=Object.prototype.propertyIsEnumerable,CP=(i,t,n)=>t in i?RX(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,bP=(i,t)=>{for(var n in t||(t={}))IX.call(t,n)&&CP(i,n,t[n]);if(TP)for(var n of TP(t))DX.call(t,n)&&CP(i,n,t[n]);return i},LX=(i,t)=>PX(i,BX(t));function QF(i,t,n){if(!i)return;if(n(i)===!0)return i;let r=t?i.return:i.child;for(;r;){const s=QF(r,t,n);if(s)return s;r=t?null:r.sibling}}function qF(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const sT=qF(ee.createContext(null));class $F extends ee.Component{render(){return ee.createElement(sT.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:RP,ReactCurrentDispatcher:PP}=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function UX(){const i=ee.useContext(sT);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ee.useId();return ee.useMemo(()=>{for(const r of[RP==null?void 0:RP.current,i,i==null?void 0:i.alternate]){if(!r)continue;const s=QF(r,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===t)return!0;a=a.next}});if(s)return s}},[i,t])}function FX(){var i,t;const n=UX(),[r]=ee.useState(()=>new Map);r.clear();let s=n;for(;s;){const o=(i=s.type)==null?void 0:i._context;o&&o!==sT&&!r.has(o)&&r.set(o,(t=PP==null?void 0:PP.current)==null?void 0:t.readContext(qF(o))),s=s.return}return r}function OX(){const i=FX();return ee.useMemo(()=>Array.from(i.keys()).reduce((t,n)=>r=>ee.createElement(t,null,ee.createElement(n.Provider,LX(bP({},r),{value:i.get(n)}))),t=>ee.createElement($F,bP({},t))),[i])}const J1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function NX(i){const{handlePointer:t}=lX(i);return{priority:1,enabled:!0,compute(n,r,s){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(J1).reduce((n,r)=>({...n,[r]:t(r)}),{}),update:()=>{var n;const{events:r,internal:s}=i.getState();(n=s.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:n=>{var r;const{set:s,events:o}=i.getState();o.disconnect==null||o.disconnect(),s(a=>({events:{...a.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([a,l])=>{const[c,u]=J1[a];n.addEventListener(c,l,{passive:u})})},disconnect:()=>{const{set:n,events:r}=i.getState();if(r.connected){var s;Object.entries((s=r.handlers)!=null?s:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[l]=J1[o];r.connected.removeEventListener(l,a)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}const kX=ee.forwardRef(function({children:t,fallback:n,resize:r,style:s,gl:o,events:a=NX,eventSource:l,eventPrefix:c,shadows:u,linear:h,flat:f,legacy:p,orthographic:g,frameloop:v,dpr:_,performance:x,raycaster:y,camera:S,scene:A,onPointerMissed:M,onCreated:C,...T},R){ee.useMemo(()=>Mm(bF),[]);const I=OX(),[P,B]=MX({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=ee.useRef(null),N=ee.useRef(null);ee.useImperativeHandle(R,()=>O.current);const ne=kF(M),[z,j]=ee.useState(!1),[q,he]=ee.useState(!1);if(z)throw z;if(q)throw q;const H=ee.useRef(null);Pf(()=>{const K=O.current;B.width>0&&B.height>0&&K&&(H.current||(H.current=_X(K)),H.current.configure({gl:o,events:a,shadows:u,linear:h,flat:f,legacy:p,orthographic:g,frameloop:v,dpr:_,performance:x,raycaster:y,camera:S,scene:A,size:B,onPointerMissed:(...k)=>ne.current==null?void 0:ne.current(...k),onCreated:k=>{k.events.connect==null||k.events.connect(l?eX(l)?l.current:l:N.current),c&&k.setEvents({compute:(Z,Q)=>{const se=Z[c+"X"],le=Z[c+"Y"];Q.pointer.set(se/Q.size.width*2-1,-(le/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),C==null||C(k)}}),H.current.render(ee.createElement(I,null,ee.createElement(zF,{set:he},ee.createElement(ee.Suspense,{fallback:ee.createElement(tX,{set:j})},t)))))}),ee.useEffect(()=>{const K=O.current;if(K)return()=>KF(K)},[]);const X=l?"none":"auto";return ee.createElement("div",jo({ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...s}},T),ee.createElement("div",{ref:P,style:{width:"100%",height:"100%"}},ee.createElement("canvas",{ref:O,style:{display:"block"}},n)))}),zX=ee.forwardRef(function(t,n){return ee.createElement($F,null,ee.createElement(kX,jo({},t,{ref:n})))}),wm=new Y,oT=new Y,GX=new Y;function HX(i,t,n){const r=wm.setFromMatrixPosition(i.matrixWorld);r.project(t);const s=n.width/2,o=n.height/2;return[r.x*s+s,-(r.y*o)+o]}function VX(i,t){const n=wm.setFromMatrixPosition(i.matrixWorld),r=oT.setFromMatrixPosition(t.matrixWorld),s=n.sub(r),o=t.getWorldDirection(GX);return s.angleTo(o)>Math.PI/2}function WX(i,t,n,r){const s=wm.setFromMatrixPosition(i.matrixWorld),o=s.clone();o.project(t),n.setFromCamera(o,t);const a=n.intersectObjects(r,!0);if(a.length){const l=a[0].distance;return s.distanceTo(n.ray.origin)<l}return!0}function XX(i,t){if(t instanceof Ua)return t.zoom;if(t instanceof Jn){const n=wm.setFromMatrixPosition(i.matrixWorld),r=oT.setFromMatrixPosition(t.matrixWorld),s=t.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(s/2)*o)}else return 1}function jX(i,t,n){if(t instanceof Jn||t instanceof Ua){const r=wm.setFromMatrixPosition(i.matrixWorld),s=oT.setFromMatrixPosition(t.matrixWorld),o=r.distanceTo(s),a=(n[1]-n[0])/(t.far-t.near),l=n[1]-a*t.far;return Math.round(a*o+l)}}const PE=i=>Math.abs(i)<1e-10?0:i;function eO(i,t,n=""){let r="matrix3d(";for(let s=0;s!==16;s++)r+=PE(t[s]*i.elements[s])+(s!==15?",":")");return n+r}const YX=(i=>t=>eO(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),JX=(i=>(t,n)=>eO(t,i(n),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function KX(i){return i&&typeof i=="object"&&"current"in i}const ZX=ee.forwardRef(({children:i,eps:t=.001,style:n,className:r,prepend:s,center:o,fullscreen:a,portal:l,distanceFactor:c,sprite:u=!1,transform:h=!1,occlude:f,onOcclude:p,castShadow:g,receiveShadow:v,material:_,geometry:x,zIndexRange:y=[16777271,0],calculatePosition:S=HX,as:A="div",wrapperClass:M,pointerEvents:C="auto",...T},R)=>{const{gl:I,camera:P,scene:B,size:O,raycaster:N,events:ne,viewport:z}=jn(),[j]=ee.useState(()=>document.createElement(A)),q=ee.useRef(),he=ee.useRef(null),H=ee.useRef(0),X=ee.useRef([0,0]),K=ee.useRef(null),k=ee.useRef(null),Z=(l==null?void 0:l.current)||ne.connected||I.domElement.parentNode,Q=ee.useRef(null),se=ee.useRef(!1),le=ee.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&KX(f[0]),[f]);ee.useLayoutEffect(()=>{const Be=I.domElement;f&&f==="blending"?(Be.style.zIndex=`${Math.floor(y[0]/2)}`,Be.style.position="absolute",Be.style.pointerEvents="none"):(Be.style.zIndex=null,Be.style.position=null,Be.style.pointerEvents=null)},[f]),ee.useLayoutEffect(()=>{if(he.current){const Be=q.current=RU(j);if(B.updateMatrixWorld(),h)j.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ae=S(he.current,P,O);j.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ae[0]}px,${Ae[1]}px,0);transform-origin:0 0;`}return Z&&(s?Z.prepend(j):Z.appendChild(j)),()=>{Z&&Z.removeChild(j),Be.unmount()}}},[Z,h]),ee.useLayoutEffect(()=>{M&&(j.className=M)},[M]);const fe=ee.useMemo(()=>h?{position:"absolute",top:0,left:0,width:O.width,height:O.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...a&&{top:-O.height/2,left:-O.width/2,width:O.width,height:O.height},...n},[n,o,a,O,h]),ue=ee.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);ee.useLayoutEffect(()=>{if(se.current=!1,h){var Be;(Be=q.current)==null||Be.render(ee.createElement("div",{ref:K,style:fe},ee.createElement("div",{ref:k,style:ue},ee.createElement("div",{ref:R,className:r,style:n,children:i}))))}else{var Ae;(Ae=q.current)==null||Ae.render(ee.createElement("div",{ref:R,style:fe,className:r,children:i}))}});const Se=ee.useRef(!0);Bf(Be=>{if(he.current){P.updateMatrixWorld(),he.current.updateWorldMatrix(!0,!1);const Ae=h?X.current:S(he.current,P,O);if(h||Math.abs(H.current-P.zoom)>t||Math.abs(X.current[0]-Ae[0])>t||Math.abs(X.current[1]-Ae[1])>t){const W=VX(he.current,P);let Re=!1;le&&(Array.isArray(f)?Re=f.map(Ye=>Ye.current):f!=="blending"&&(Re=[B]));const Ee=Se.current;if(Re){const Ye=WX(he.current,P,N,Re);Se.current=Ye&&!W}else Se.current=!W;Ee!==Se.current&&(p?p(!Se.current):j.style.display=Se.current?"block":"none");const Ce=Math.floor(y[0]/2),_e=f?le?[y[0],Ce]:[Ce-1,0]:y;if(j.style.zIndex=`${jX(he.current,P,_e)}`,h){const[Ye,we]=[O.width/2,O.height/2],G=P.projectionMatrix.elements[5]*we,{isOrthographicCamera:F,top:te,left:xe,bottom:ge,right:ye}=P,Fe=YX(P.matrixWorldInverse),Ve=F?`scale(${G})translate(${PE(-(ye+xe)/2)}px,${PE((te+ge)/2)}px)`:`translateZ(${G}px)`;let He=he.current.matrixWorld;u&&(He=P.matrixWorldInverse.clone().transpose().copyPosition(He).scale(he.current.scale),He.elements[3]=He.elements[7]=He.elements[11]=0,He.elements[15]=1),j.style.width=O.width+"px",j.style.height=O.height+"px",j.style.perspective=F?"":`${G}px`,K.current&&k.current&&(K.current.style.transform=`${Ve}${Fe}translate(${Ye}px,${we}px)`,k.current.style.transform=JX(He,1/((c||10)/400)))}else{const Ye=c===void 0?1:XX(he.current,P)*c;j.style.transform=`translate3d(${Ae[0]}px,${Ae[1]}px,0) scale(${Ye})`}X.current=Ae,H.current=P.zoom}}if(!le&&Q.current&&!se.current)if(h){if(K.current){const Ae=K.current.children[0];if(Ae!=null&&Ae.clientWidth&&Ae!=null&&Ae.clientHeight){const{isOrthographicCamera:W}=P;if(W||x)T.scale&&(Array.isArray(T.scale)?T.scale instanceof Y?Q.current.scale.copy(T.scale.clone().divideScalar(1)):Q.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Q.current.scale.setScalar(1/T.scale));else{const Re=(c||10)/400,Ee=Ae.clientWidth*Re,Ce=Ae.clientHeight*Re;Q.current.scale.set(Ee,Ce,1)}se.current=!0}}}else{const Ae=j.children[0];if(Ae!=null&&Ae.clientWidth&&Ae!=null&&Ae.clientHeight){const W=1/z.factor,Re=Ae.clientWidth*W,Ee=Ae.clientHeight*W;Q.current.scale.set(Re,Ee,1),se.current=!0}Q.current.lookAt(Be.camera.position)}});const ke=ee.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return ee.createElement("group",jo({},T,{ref:he}),f&&!le&&ee.createElement("mesh",{castShadow:g,receiveShadow:v,ref:Q},x||ee.createElement("planeGeometry",null),_||ee.createElement("shaderMaterial",{side:Li,vertexShader:ke.vertexShader,fragmentShader:ke.fragmentShader})))});let Md=0;const QX=eT(i=>(Uh.onStart=(t,n,r)=>{i({active:!0,item:t,loaded:n,total:r,progress:(n-Md)/(r-Md)*100})},Uh.onLoad=()=>{i({active:!1})},Uh.onError=t=>i(n=>({errors:[...n.errors,t]})),Uh.onProgress=(t,n,r)=>{n===r&&(Md=r),i({active:!0,item:t,loaded:n,total:r,progress:(n-Md)/(r-Md)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function qX(i){return function(t){i.forEach(function(n){typeof n=="function"?n(t):n!=null&&(n.current=t)})}}let aT=Cm();const Gt=i=>Tm(i,aT);let lT=Cm();Gt.write=i=>Tm(i,lT);let A_=Cm();Gt.onStart=i=>Tm(i,A_);let cT=Cm();Gt.onFrame=i=>Tm(i,cT);let uT=Cm();Gt.onFinish=i=>Tm(i,uT);let Zh=[];Gt.setTimeout=(i,t)=>{let n=Gt.now()+t,r=()=>{let o=Zh.findIndex(a=>a.cancel==r);~o&&Zh.splice(o,1),vl-=~o?1:0},s={time:n,handler:i,cancel:r};return Zh.splice(tO(n),0,s),vl+=1,nO(),s};let tO=i=>~(~Zh.findIndex(t=>t.time>i)||~Zh.length);Gt.cancel=i=>{A_.delete(i),cT.delete(i),uT.delete(i),aT.delete(i),lT.delete(i)};Gt.sync=i=>{BE=!0,Gt.batchedUpdates(i),BE=!1};Gt.throttle=i=>{let t;function n(){try{i(...t)}finally{t=null}}function r(...s){t=s,Gt.onStart(n)}return r.handler=i,r.cancel=()=>{A_.delete(n),t=null},r};let hT=typeof window<"u"?window.requestAnimationFrame:()=>{};Gt.use=i=>hT=i;Gt.now=typeof performance<"u"?()=>performance.now():Date.now;Gt.batchedUpdates=i=>i();Gt.catch=console.error;Gt.frameLoop="always";Gt.advance=()=>{Gt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):rO()};let gl=-1,vl=0,BE=!1;function Tm(i,t){BE?(t.delete(i),i(0)):(t.add(i),nO())}function nO(){gl<0&&(gl=0,Gt.frameLoop!=="demand"&&hT(iO))}function $X(){gl=-1}function iO(){~gl&&(hT(iO),Gt.batchedUpdates(rO))}function rO(){let i=gl;gl=Gt.now();let t=tO(gl);if(t&&(sO(Zh.splice(0,t),n=>n.handler()),vl-=t),!vl){$X();return}A_.flush(),aT.flush(i?Math.min(64,gl-i):16.667),cT.flush(),lT.flush(),uT.flush()}function Cm(){let i=new Set,t=i;return{add(n){vl+=t==i&&!i.has(n)?1:0,i.add(n)},delete(n){return vl-=t==i&&i.has(n)?1:0,i.delete(n)},flush(n){t.size&&(i=new Set,vl-=t.size,sO(t,r=>r(n)&&i.add(r)),vl+=i.size,t=i)}}}function sO(i,t){i.forEach(n=>{try{t(n)}catch(r){Gt.catch(r)}})}function IE(){}const ej=(i,t,n)=>Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0}),ot={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function da(i,t){if(ot.arr(i)){if(!ot.arr(t)||i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==t[n])return!1;return!0}return i===t}const xn=(i,t)=>i.forEach(t);function Ia(i,t,n){if(ot.arr(i)){for(let r=0;r<i.length;r++)t.call(n,i[r],`${r}`);return}for(const r in i)i.hasOwnProperty(r)&&t.call(n,i[r],r)}const Gs=i=>ot.und(i)?[]:ot.arr(i)?i:[i];function cp(i,t){if(i.size){const n=Array.from(i);i.clear(),xn(n,t)}}const Wd=(i,...t)=>cp(i,n=>n(...t)),fT=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let dT,oO,bl=null,aO=!1,pT=IE;const tj=i=>{i.to&&(oO=i.to),i.now&&(Gt.now=i.now),i.colors!==void 0&&(bl=i.colors),i.skipAnimation!=null&&(aO=i.skipAnimation),i.createStringInterpolator&&(dT=i.createStringInterpolator),i.requestAnimationFrame&&Gt.use(i.requestAnimationFrame),i.batchedUpdates&&(Gt.batchedUpdates=i.batchedUpdates),i.willAdvance&&(pT=i.willAdvance),i.frameLoop&&(Gt.frameLoop=i.frameLoop)};var Yo=Object.freeze({__proto__:null,get createStringInterpolator(){return dT},get to(){return oO},get colors(){return bl},get skipAnimation(){return aO},get willAdvance(){return pT},assign:tj});const up=new Set;let Ns=[],K1=[],ly=0;const E_={get idle(){return!up.size&&!Ns.length},start(i){ly>i.priority?(up.add(i),Gt.onStart(nj)):(lO(i),Gt(DE))},advance:DE,sort(i){if(ly)Gt.onFrame(()=>E_.sort(i));else{const t=Ns.indexOf(i);~t&&(Ns.splice(t,1),cO(i))}},clear(){Ns=[],up.clear()}};function nj(){up.forEach(lO),up.clear(),Gt(DE)}function lO(i){Ns.includes(i)||cO(i)}function cO(i){Ns.splice(ij(Ns,t=>t.priority>i.priority),0,i)}function DE(i){const t=K1;for(let n=0;n<Ns.length;n++){const r=Ns[n];ly=r.priority,r.idle||(pT(r),r.advance(i),r.idle||t.push(r))}return ly=0,K1=Ns,K1.length=0,Ns=t,Ns.length>0}function ij(i,t){const n=i.findIndex(t);return n<0?i.length:n}const rj=(i,t,n)=>Math.min(Math.max(n,i),t),sj={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},fo="[-+]?\\d*\\.?\\d+",cy=fo+"%";function M_(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}const oj=new RegExp("rgb"+M_(fo,fo,fo)),aj=new RegExp("rgba"+M_(fo,fo,fo,fo)),lj=new RegExp("hsl"+M_(fo,cy,cy)),cj=new RegExp("hsla"+M_(fo,cy,cy,fo)),uj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fj=/^#([0-9a-fA-F]{6})$/,dj=/^#([0-9a-fA-F]{8})$/;function pj(i){let t;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(t=fj.exec(i))?parseInt(t[1]+"ff",16)>>>0:bl&&bl[i]!==void 0?bl[i]:(t=oj.exec(i))?(lh(t[1])<<24|lh(t[2])<<16|lh(t[3])<<8|255)>>>0:(t=aj.exec(i))?(lh(t[1])<<24|lh(t[2])<<16|lh(t[3])<<8|DP(t[4]))>>>0:(t=uj.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=dj.exec(i))?parseInt(t[1],16)>>>0:(t=hj.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=lj.exec(i))?(BP(IP(t[1]),Nv(t[2]),Nv(t[3]))|255)>>>0:(t=cj.exec(i))?(BP(IP(t[1]),Nv(t[2]),Nv(t[3]))|DP(t[4]))>>>0:null}function Z1(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(t-i)*6*n:n<1/2?t:n<2/3?i+(t-i)*(2/3-n)*6:i}function BP(i,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,o=Z1(s,r,i+1/3),a=Z1(s,r,i),l=Z1(s,r,i-1/3);return Math.round(o*255)<<24|Math.round(a*255)<<16|Math.round(l*255)<<8}function lh(i){const t=parseInt(i,10);return t<0?0:t>255?255:t}function IP(i){return(parseFloat(i)%360+360)%360/360}function DP(i){const t=parseFloat(i);return t<0?0:t>1?255:Math.round(t*255)}function Nv(i){const t=parseFloat(i);return t<0?0:t>100?1:t/100}function LP(i){let t=pj(i);if(t===null)return i;t=t||0;let n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,o=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}const $p=(i,t,n)=>{if(ot.fun(i))return i;if(ot.arr(i))return $p({range:i,output:t,extrapolate:n});if(ot.str(i.output[0]))return dT(i);const r=i,s=r.output,o=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const h=gj(u,o);return mj(u,o[h],o[h+1],s[h],s[h+1],c,a,l,r.map)}};function mj(i,t,n,r,s,o,a,l,c){let u=c?c(i):i;if(u<t){if(a==="identity")return u;a==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?i<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=o(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function gj(i,t){for(var n=1;n<t.length-1&&!(t[n]>=i);++n);return n-1}const vj=(i,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*i,s=t==="end"?Math.floor(r):Math.ceil(r);return rj(0,1,s/i)},uy=1.70158,kv=uy*1.525,UP=uy+1,FP=2*Math.PI/3,OP=2*Math.PI/4.5,zv=i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,yj={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>1-(1-i)*(1-i),easeInOutQuad:i=>i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2,easeInCubic:i=>i*i*i,easeOutCubic:i=>1-Math.pow(1-i,3),easeInOutCubic:i=>i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,easeInQuart:i=>i*i*i*i,easeOutQuart:i=>1-Math.pow(1-i,4),easeInOutQuart:i=>i<.5?8*i*i*i*i:1-Math.pow(-2*i+2,4)/2,easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>1-Math.pow(1-i,5),easeInOutQuint:i=>i<.5?16*i*i*i*i*i:1-Math.pow(-2*i+2,5)/2,easeInSine:i=>1-Math.cos(i*Math.PI/2),easeOutSine:i=>Math.sin(i*Math.PI/2),easeInOutSine:i=>-(Math.cos(Math.PI*i)-1)/2,easeInExpo:i=>i===0?0:Math.pow(2,10*i-10),easeOutExpo:i=>i===1?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,easeInCirc:i=>1-Math.sqrt(1-Math.pow(i,2)),easeOutCirc:i=>Math.sqrt(1-Math.pow(i-1,2)),easeInOutCirc:i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,easeInBack:i=>UP*i*i*i-uy*i*i,easeOutBack:i=>1+UP*Math.pow(i-1,3)+uy*Math.pow(i-1,2),easeInOutBack:i=>i<.5?Math.pow(2*i,2)*((kv+1)*2*i-kv)/2:(Math.pow(2*i-2,2)*((kv+1)*(i*2-2)+kv)+2)/2,easeInElastic:i=>i===0?0:i===1?1:-Math.pow(2,10*i-10)*Math.sin((i*10-10.75)*FP),easeOutElastic:i=>i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i*10-.75)*FP)+1,easeInOutElastic:i=>i===0?0:i===1?1:i<.5?-(Math.pow(2,20*i-10)*Math.sin((20*i-11.125)*OP))/2:Math.pow(2,-20*i+10)*Math.sin((20*i-11.125)*OP)/2+1,easeInBounce:i=>1-zv(1-i),easeOutBounce:zv,easeInOutBounce:i=>i<.5?(1-zv(1-2*i))/2:(1+zv(2*i-1))/2,steps:vj};function LE(){return LE=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},LE.apply(this,arguments)}const pf=Symbol.for("FluidValue.get"),hu=Symbol.for("FluidValue.observers"),Bo=i=>!!(i&&i[pf]),Ls=i=>i&&i[pf]?i[pf]():i,NP=i=>i[hu]||null;function _j(i,t){i.eventObserved?i.eventObserved(t):i(t)}function hy(i,t){let n=i[hu];n&&n.forEach(r=>{_j(r,t)})}class xj{constructor(t){if(this[pf]=void 0,this[hu]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");Sj(this,t)}}const Sj=(i,t)=>uO(i,pf,t);function bm(i,t){if(i[pf]){let n=i[hu];n||uO(i,hu,n=new Set),n.has(t)||(n.add(t),i.observerAdded&&i.observerAdded(n.size,t))}return t}function fy(i,t){let n=i[hu];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):i[hu]=null,i.observerRemoved&&i.observerRemoved(r,t)}}const uO=(i,t,n)=>Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0}),E0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Aj=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,kP=new RegExp(`(${E0.source})(%|[a-z]+)`,"i"),Ej=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,w_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,hO=i=>{const[t,n]=Mj(i);if(!t||fT())return i;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||i}else{if(n&&w_.test(n))return hO(n);if(n)return n}return i},Mj=i=>{const t=w_.exec(i);if(!t)return[,];const[,n,r]=t;return[n,r]};let Q1;const wj=(i,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,fO=i=>{Q1||(Q1=bl?new RegExp(`(${Object.keys(bl).join("|")})(?!\\w)`,"g"):/^\b$/);const t=i.output.map(o=>Ls(o).replace(w_,hO).replace(Aj,LP).replace(Q1,LP)),n=t.map(o=>o.match(E0).map(Number)),s=n[0].map((o,a)=>n.map(l=>{if(!(a in l))throw Error('The arity of each "output" value must be equal');return l[a]})).map(o=>$p(LE({},i,{output:o})));return o=>{var a;const l=!kP.test(t[0])&&((a=t.find(u=>kP.test(u)))==null?void 0:a.replace(E0,""));let c=0;return t[0].replace(E0,()=>`${s[c++](o)}${l||""}`).replace(Ej,wj)}},mT="react-spring: ",dO=i=>{const t=i;let n=!1;if(typeof t!="function")throw new TypeError(`${mT}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Tj=dO(console.warn);function Cj(){Tj(`${mT}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const bj=dO(console.warn);function Rj(){bj(`${mT}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function T_(i){return ot.str(i)&&(i[0]=="#"||/\d/.test(i)||!fT()&&w_.test(i)||i in(bl||{}))}const gT=fT()?ee.useEffect:ee.useLayoutEffect,Pj=()=>{const i=ee.useRef(!1);return gT(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function pO(){const i=ee.useState()[1],t=Pj();return()=>{t.current&&i(Math.random())}}function Bj(i,t){const[n]=ee.useState(()=>({inputs:t,result:i()})),r=ee.useRef(),s=r.current;let o=s;return o?t&&o.inputs&&Ij(t,o.inputs)||(o={inputs:t,result:i()}):o=n,ee.useEffect(()=>{r.current=o,s==n&&(n.inputs=n.result=void 0)},[o]),o.result}function Ij(i,t){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==t[n])return!1;return!0}const mO=i=>ee.useEffect(i,Dj),Dj=[];function zP(i){const t=ee.useRef();return ee.useEffect(()=>{t.current=i}),t.current}const em=Symbol.for("Animated:node"),Lj=i=>!!i&&i[em]===i,Po=i=>i&&i[em],vT=(i,t)=>ej(i,em,t),C_=i=>i&&i[em]&&i[em].getPayload();class gO{constructor(){this.payload=void 0,vT(this,this)}getPayload(){return this.payload||[]}}class If extends gO{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,ot.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new If(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,n){return ot.num(t)&&(this.lastPosition=t,n&&(t=Math.round(t/n)*n,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ot.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class mf extends If{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=$p({output:[t,t]})}static create(t){return new mf(t)}getValue(){let t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ot.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=$p({output:[this.getValue(),t]})),this._value=0,super.reset()}}const dy={dependencies:null};class yT extends gO{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const n={};return Ia(this.source,(r,s)=>{Lj(r)?n[s]=r.getValue(t):Bo(r)?n[s]=Ls(r):t||(n[s]=r)}),n}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&xn(this.payload,t=>t.reset())}_makePayload(t){if(t){const n=new Set;return Ia(t,this._addToPayload,n),Array.from(n)}}_addToPayload(t){dy.dependencies&&Bo(t)&&dy.dependencies.add(t);const n=C_(t);n&&xn(n,r=>this.add(r))}}class _T extends yT{constructor(t){super(t)}static create(t){return new _T(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const n=this.getPayload();return t.length==n.length?n.map((r,s)=>r.setValue(t[s])).some(Boolean):(super.setValue(t.map(Uj)),!0)}}function Uj(i){return(T_(i)?mf:If).create(i)}function UE(i){const t=Po(i);return t?t.constructor:ot.arr(i)?_T:T_(i)?mf:If}function py(){return py=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},py.apply(this,arguments)}const GP=(i,t)=>{const n=!ot.fun(i)||i.prototype&&i.prototype.isReactComponent;return ee.forwardRef((r,s)=>{const o=ee.useRef(null),a=n&&ee.useCallback(v=>{o.current=Nj(s,v)},[s]),[l,c]=Oj(r,t),u=pO(),h=()=>{const v=o.current;if(n&&!v)return;(v?t.applyAnimatedValues(v,l.getValue(!0)):!1)===!1&&u()},f=new Fj(h,c),p=ee.useRef();gT(()=>(p.current=f,xn(c,v=>bm(v,f)),()=>{p.current&&(xn(p.current.deps,v=>fy(v,p.current)),Gt.cancel(p.current.update))})),ee.useEffect(h,[]),mO(()=>()=>{const v=p.current;xn(v.deps,_=>fy(_,v))});const g=t.getComponentProps(l.getValue());return ee.createElement(i,py({},g,{ref:a}))})};class Fj{constructor(t,n){this.update=t,this.deps=n}eventObserved(t){t.type=="change"&&Gt.write(this.update)}}function Oj(i,t){const n=new Set;return dy.dependencies=n,i.style&&(i=py({},i,{style:t.createAnimatedStyle(i.style)})),i=new yT(i),dy.dependencies=null,[i,n]}function Nj(i,t){return i&&(ot.fun(i)?i(t):i.current=t),t}const HP=Symbol.for("AnimatedComponent"),kj=(i,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new yT(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=a=>{const l=VP(a)||"Anonymous";return ot.str(a)?a=o[a]||(o[a]=GP(a,s)):a=a[HP]||(a[HP]=GP(a,s)),a.displayName=`Animated(${l})`,a};return Ia(i,(a,l)=>{ot.arr(i)&&(l=VP(a)),o[l]=o(a)}),{animated:o}},VP=i=>ot.str(i)?i:i&&ot.str(i.displayName)?i.displayName:ot.fun(i)&&i.name||null;function Ki(){return Ki=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Ki.apply(this,arguments)}function Dc(i,...t){return ot.fun(i)?i(...t):i}const hp=(i,t)=>i===!0||!!(t&&i&&(ot.fun(i)?i(t):Gs(i).includes(t))),vO=(i,t)=>ot.obj(i)?t&&i[t]:i,yO=(i,t)=>i.default===!0?i[t]:i.default?i.default[t]:void 0,zj=i=>i,xT=(i,t=zj)=>{let n=Gj;i.default&&i.default!==!0&&(i=i.default,n=Object.keys(i));const r={};for(const s of n){const o=t(i[s],s);ot.und(o)||(r[s]=o)}return r},Gj=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Hj={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Vj(i){const t={};let n=0;if(Ia(i,(r,s)=>{Hj[s]||(t[s]=r,n++)}),n)return t}function _O(i){const t=Vj(i);if(t){const n={to:t};return Ia(i,(r,s)=>s in t||(n[s]=r)),n}return Ki({},i)}function tm(i){return i=Ls(i),ot.arr(i)?i.map(tm):T_(i)?Yo.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function Wj(i){for(const t in i)return!0;return!1}function FE(i){return ot.fun(i)||ot.arr(i)&&ot.obj(i[0])}function Xj(i,t){var n;(n=i.ref)==null||n.delete(i),t==null||t.delete(i)}function jj(i,t){if(t&&i.ref!==t){var n;(n=i.ref)==null||n.delete(i),t.add(i),i.ref=t}}const Yj={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},OE=Ki({},Yj.default,{mass:1,damping:1,easing:yj.linear,clamp:!1});class Jj{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,OE)}}function Kj(i,t,n){n&&(n=Ki({},n),WP(n,t),t=Ki({},n,t)),WP(i,t),Object.assign(i,t);for(const a in OE)i[a]==null&&(i[a]=OE[a]);let{mass:r,frequency:s,damping:o}=i;return ot.und(s)||(s<.01&&(s=.01),o<0&&(o=0),i.tension=Math.pow(2*Math.PI/s,2)*r,i.friction=4*Math.PI*o*r/s),i}function WP(i,t){if(!ot.und(t.decay))i.duration=void 0;else{const n=!ot.und(t.tension)||!ot.und(t.friction);(n||!ot.und(t.frequency)||!ot.und(t.damping)||!ot.und(t.mass))&&(i.duration=void 0,i.decay=void 0),n&&(i.frequency=void 0)}}const XP=[];class Zj{constructor(){this.changed=!1,this.values=XP,this.toValues=null,this.fromValues=XP,this.to=void 0,this.from=void 0,this.config=new Jj,this.immediate=!1}}function xO(i,{key:t,props:n,defaultProps:r,state:s,actions:o}){return new Promise((a,l)=>{var c;let u,h,f=hp((c=n.cancel)!=null?c:r==null?void 0:r.cancel,t);if(f)v();else{ot.und(n.pause)||(s.paused=hp(n.pause,t));let _=r==null?void 0:r.pause;_!==!0&&(_=s.paused||hp(_,t)),u=Dc(n.delay||0,t),_?(s.resumeQueue.add(g),o.pause()):(o.resume(),g())}function p(){s.resumeQueue.add(g),s.timeouts.delete(h),h.cancel(),u=h.time-Gt.now()}function g(){u>0&&!Yo.skipAnimation?(s.delayed=!0,h=Gt.setTimeout(v,u),s.pauseQueue.add(p),s.timeouts.add(h)):v()}function v(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(p),s.timeouts.delete(h),i<=(s.cancelId||0)&&(f=!0);try{o.start(Ki({},n,{callId:i,cancel:f}),a)}catch(_){l(_)}}})}const ST=(i,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Qh(i.get()):t.every(n=>n.noop)?SO(i.get()):lo(i.get(),t.every(n=>n.finished)),SO=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),lo=(i,t,n=!1)=>({value:i,finished:t,cancelled:n}),Qh=i=>({value:i,cancelled:!0,finished:!1});function AO(i,t,n,r){const{callId:s,parentId:o,onRest:a}=t,{asyncTo:l,promise:c}=n;return!o&&i===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=i;const u=xT(t,(x,y)=>y==="onRest"?void 0:x);let h,f;const p=new Promise((x,y)=>(h=x,f=y)),g=x=>{const y=s<=(n.cancelId||0)&&Qh(r)||s!==n.asyncId&&lo(r,!1);if(y)throw x.result=y,f(x),x},v=(x,y)=>{const S=new jP,A=new YP;return(async()=>{if(Yo.skipAnimation)throw nm(n),A.result=lo(r,!1),f(A),A;g(S);const M=ot.obj(x)?Ki({},x):Ki({},y,{to:x});M.parentId=s,Ia(u,(T,R)=>{ot.und(M[R])&&(M[R]=T)});const C=await r.start(M);return g(S),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),C})()};let _;if(Yo.skipAnimation)return nm(n),lo(r,!1);try{let x;ot.arr(i)?x=(async y=>{for(const S of y)await v(S)})(i):x=Promise.resolve(i(v,r.stop.bind(r))),await Promise.all([x.then(h),p]),_=lo(r.get(),!0,!1)}catch(x){if(x instanceof jP)_=x.result;else if(x instanceof YP)_=x.result;else throw x}finally{s==n.asyncId&&(n.asyncId=o,n.asyncTo=o?l:void 0,n.promise=o?c:void 0)}return ot.fun(a)&&Gt.batchedUpdates(()=>{a(_,r,r.item)}),_})()}function nm(i,t){cp(i.timeouts,n=>n.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,t&&(i.cancelId=t)}class jP extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class YP extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const NE=i=>i instanceof AT;let Qj=1;class AT extends xj{constructor(...t){super(...t),this.id=Qj++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Po(this);return t&&t.getValue()}to(...t){return Yo.to(this,t)}interpolate(...t){return Cj(),Yo.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,n=!1){hy(this,{type:"change",parent:this,value:t,idle:n})}_onPriorityChange(t){this.idle||E_.sort(this),hy(this,{type:"priority",parent:this,priority:t})}}const fu=Symbol.for("SpringPhase"),EO=1,kE=2,zE=4,q1=i=>(i[fu]&EO)>0,el=i=>(i[fu]&kE)>0,wd=i=>(i[fu]&zE)>0,JP=(i,t)=>t?i[fu]|=kE|EO:i[fu]&=~kE,KP=(i,t)=>t?i[fu]|=zE:i[fu]&=~zE;class qj extends AT{constructor(t,n){if(super(),this.key=void 0,this.animation=new Zj,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ot.und(t)||!ot.und(n)){const r=ot.obj(t)?Ki({},t):Ki({},n,{from:t});ot.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(el(this)||this._state.asyncTo)||wd(this)}get goal(){return Ls(this.animation.to)}get velocity(){const t=Po(this);return t instanceof If?t.lastVelocity||0:t.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return q1(this)}get isAnimating(){return el(this)}get isPaused(){return wd(this)}get isDelayed(){return this._state.delayed}advance(t){let n=!0,r=!1;const s=this.animation;let{config:o,toValues:a}=s;const l=C_(s.to);!l&&Bo(s.to)&&(a=Gs(Ls(s.to))),s.values.forEach((h,f)=>{if(h.done)return;const p=h.constructor==mf?1:l?l[f].lastPosition:a[f];let g=s.immediate,v=p;if(!g){if(v=h.lastPosition,o.tension<=0){h.done=!0;return}let _=h.elapsedTime+=t;const x=s.fromValues[f],y=h.v0!=null?h.v0:h.v0=ot.arr(o.velocity)?o.velocity[f]:o.velocity;let S;const A=o.precision||(x==p?.005:Math.min(1,Math.abs(p-x)*.001));if(ot.und(o.duration))if(o.decay){const M=o.decay===!0?.998:o.decay,C=Math.exp(-(1-M)*_);v=x+y/(1-M)*(1-C),g=Math.abs(h.lastPosition-v)<=A,S=y*C}else{S=h.lastVelocity==null?y:h.lastVelocity;const M=o.restVelocity||A/10,C=o.clamp?0:o.bounce,T=!ot.und(C),R=x==p?h.v0>0:x<p;let I,P=!1;const B=1,O=Math.ceil(t/B);for(let N=0;N<O&&(I=Math.abs(S)>M,!(!I&&(g=Math.abs(p-v)<=A,g)));++N){T&&(P=v==p||v>p==R,P&&(S=-S*C,v=p));const ne=-o.tension*1e-6*(v-p),z=-o.friction*.001*S,j=(ne+z)/o.mass;S=S+j*B,v=v+S*B}}else{let M=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,h.durationProgress>0&&(h.elapsedTime=o.duration*h.durationProgress,_=h.elapsedTime+=t)),M=(o.progress||0)+_/this._memoizedDuration,M=M>1?1:M<0?0:M,h.durationProgress=M),v=x+o.easing(M)*(p-x),S=(v-h.lastPosition)/t,g=M==1}h.lastVelocity=S,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),g=!0)}l&&!l[f].done&&(g=!1),g?h.done=!0:n=!1,h.setValue(v,o.round)&&(r=!0)});const c=Po(this),u=c.getValue();if(n){const h=Ls(s.to);(u!==h||r)&&!o.decay?(c.setValue(h),this._onChange(h)):r&&o.decay&&this._onChange(u),this._stop()}else r&&this._onChange(u)}set(t){return Gt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(el(this)){const{to:t,config:n}=this.animation;Gt.batchedUpdates(()=>{this._onStart(),n.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,n){let r;return ot.und(t)?(r=this.queue||[],this.queue=[]):r=[ot.obj(t)?t:Ki({},n,{to:t})],Promise.all(r.map(s=>this._update(s))).then(s=>ST(this,s))}stop(t){const{to:n}=this.animation;return this._focus(this.get()),nm(this._state,t&&this._lastCallId),Gt.batchedUpdates(()=>this._stop(n,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const n=this.key||"";let{to:r,from:s}=t;r=ot.obj(r)?r[n]:r,(r==null||FE(r))&&(r=void 0),s=ot.obj(s)?s[n]:s,s==null&&(s=void 0);const o={to:r,from:s};return q1(this)||(t.reverse&&([r,s]=[s,r]),s=Ls(s),ot.und(s)?Po(this)||this._set(r):this._set(s)),o}_update(t,n){let r=Ki({},t);const{key:s,defaultProps:o}=this;r.default&&Object.assign(o,xT(r,(c,u)=>/^on/.test(u)?vO(c,s):c)),QP(this,r,"onProps"),Cd(this,"onProps",r,this);const a=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const l=this._state;return xO(++this._lastCallId,{key:s,props:r,defaultProps:o,state:l,actions:{pause:()=>{wd(this)||(KP(this,!0),Wd(l.pauseQueue),Cd(this,"onPause",lo(this,Td(this,this.animation.to)),this))},resume:()=>{wd(this)&&(KP(this,!1),el(this)&&this._resume(),Wd(l.resumeQueue),Cd(this,"onResume",lo(this,Td(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(c=>{if(r.loop&&c.finished&&!(n&&c.noop)){const u=MO(r);if(u)return this._update(u,!0)}return c})}_merge(t,n,r){if(n.cancel)return this.stop(!0),r(Qh(this));const s=!ot.und(t.to),o=!ot.und(t.from);if(s||o)if(n.callId>this._lastToId)this._lastToId=n.callId;else return r(Qh(this));const{key:a,defaultProps:l,animation:c}=this,{to:u,from:h}=c;let{to:f=u,from:p=h}=t;o&&!s&&(!n.default||ot.und(f))&&(f=p),n.reverse&&([f,p]=[p,f]);const g=!da(p,h);g&&(c.from=p),p=Ls(p);const v=!da(f,u);v&&this._focus(f);const _=FE(n.to),{config:x}=c,{decay:y,velocity:S}=x;(s||o)&&(x.velocity=0),n.config&&!_&&Kj(x,Dc(n.config,a),n.config!==l.config?Dc(l.config,a):void 0);let A=Po(this);if(!A||ot.und(f))return r(lo(this,!0));const M=ot.und(n.reset)?o&&!n.default:!ot.und(p)&&hp(n.reset,a),C=M?p:this.get(),T=tm(f),R=ot.num(T)||ot.arr(T)||T_(T),I=!_&&(!R||hp(l.immediate||n.immediate,a));if(v){const N=UE(f);if(N!==A.constructor)if(I)A=this._set(T);else throw Error(`Cannot animate between ${A.constructor.name} and ${N.name}, as the "to" prop suggests`)}const P=A.constructor;let B=Bo(f),O=!1;if(!B){const N=M||!q1(this)&&g;(v||N)&&(O=da(tm(C),T),B=!O),(!da(c.immediate,I)&&!I||!da(x.decay,y)||!da(x.velocity,S))&&(B=!0)}if(O&&el(this)&&(c.changed&&!M?B=!0:B||this._stop(u)),!_&&((B||Bo(u))&&(c.values=A.getPayload(),c.toValues=Bo(f)?null:P==mf?[1]:Gs(T)),c.immediate!=I&&(c.immediate=I,!I&&!M&&this._set(u)),B)){const{onRest:N}=c;xn(eY,z=>QP(this,n,z));const ne=lo(this,Td(this,u));Wd(this._pendingCalls,ne),this._pendingCalls.add(r),c.changed&&Gt.batchedUpdates(()=>{c.changed=!M,N==null||N(ne,this),M?Dc(l.onRest,ne):c.onStart==null||c.onStart(ne,this)})}M&&this._set(C),_?r(AO(n.to,n,this._state,this)):B?this._start():el(this)&&!v?this._pendingCalls.add(r):r(SO(C))}_focus(t){const n=this.animation;t!==n.to&&(NP(this)&&this._detach(),n.to=t,NP(this)&&this._attach())}_attach(){let t=0;const{to:n}=this.animation;Bo(n)&&(bm(n,this),NE(n)&&(t=n.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Bo(t)&&fy(t,this)}_set(t,n=!0){const r=Ls(t);if(!ot.und(r)){const s=Po(this);if(!s||!da(r,s.getValue())){const o=UE(r);!s||s.constructor!=o?vT(this,o.create(r)):s.setValue(r),s&&Gt.batchedUpdates(()=>{this._onChange(r,n)})}}return Po(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Cd(this,"onStart",lo(this,Td(this,t.to)),this))}_onChange(t,n){n||(this._onStart(),Dc(this.animation.onChange,t,this)),Dc(this.defaultProps.onChange,t,this),super._onChange(t,n)}_start(){const t=this.animation;Po(this).reset(Ls(t.to)),t.immediate||(t.fromValues=t.values.map(n=>n.lastPosition)),el(this)||(JP(this,!0),wd(this)||this._resume())}_resume(){Yo.skipAnimation?this.finish():E_.start(this)}_stop(t,n){if(el(this)){JP(this,!1);const r=this.animation;xn(r.values,o=>{o.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),hy(this,{type:"idle",parent:this});const s=n?Qh(this.get()):lo(this.get(),Td(this,t??r.to));Wd(this._pendingCalls,s),r.changed&&(r.changed=!1,Cd(this,"onRest",s,this))}}}function Td(i,t){const n=tm(t),r=tm(i.get());return da(r,n)}function MO(i,t=i.loop,n=i.to){let r=Dc(t);if(r){const s=r!==!0&&_O(r),o=(s||i).reverse,a=!s||s.reset;return im(Ki({},i,{loop:t,default:!1,pause:void 0,to:!o||FE(n)?n:void 0,from:a?i.from:void 0,reset:a},s))}}function im(i){const{to:t,from:n}=i=_O(i),r=new Set;return ot.obj(t)&&ZP(t,r),ot.obj(n)&&ZP(n,r),i.keys=r.size?Array.from(r):null,i}function $j(i){const t=im(i);return ot.und(t.default)&&(t.default=xT(t)),t}function ZP(i,t){Ia(i,(n,r)=>n!=null&&t.add(r))}const eY=["onStart","onRest","onChange","onPause","onResume"];function QP(i,t,n){i.animation[n]=t[n]!==yO(t,n)?vO(t[n],i.key):void 0}function Cd(i,t,...n){var r,s,o,a;(r=(s=i.animation)[t])==null||r.call(s,...n),(o=(a=i.defaultProps)[t])==null||o.call(a,...n)}const tY=["onStart","onChange","onRest"];let nY=1,iY=class{constructor(t,n){this.id=nY++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start(Ki({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((n,r)=>t[r]=n.get()),t}set(t){for(const n in t){const r=t[n];ot.und(r)||this.springs[n].set(r)}}update(t){return t&&this.queue.push(im(t)),this}start(t){let{queue:n}=this;return t?n=Gs(t).map(im):this.queue=[],this._flush?this._flush(this,n):(RO(this,n),GE(this,n))}stop(t,n){if(t!==!!t&&(n=t),n){const r=this.springs;xn(Gs(n),s=>r[s].stop(!!t))}else nm(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(ot.und(t))this.start({pause:!0});else{const n=this.springs;xn(Gs(t),r=>n[r].pause())}return this}resume(t){if(ot.und(t))this.start({pause:!1});else{const n=this.springs;xn(Gs(t),r=>n[r].resume())}return this}each(t){Ia(this.springs,t)}_onFrame(){const{onStart:t,onChange:n,onRest:r}=this._events,s=this._active.size>0,o=this._changed.size>0;(s&&!this._started||o&&!this._started)&&(this._started=!0,cp(t,([c,u])=>{u.value=this.get(),c(u,this,this._item)}));const a=!s&&this._started,l=o||a&&r.size?this.get():null;o&&n.size&&cp(n,([c,u])=>{u.value=l,c(u,this,this._item)}),a&&(this._started=!1,cp(r,([c,u])=>{u.value=l,c(u,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Gt.onFrame(this._onFrame)}};function GE(i,t){return Promise.all(t.map(n=>wO(i,n))).then(n=>ST(i,n))}async function wO(i,t,n){const{keys:r,to:s,from:o,loop:a,onRest:l,onResolve:c}=t,u=ot.obj(t.default)&&t.default;a&&(t.loop=!1),s===!1&&(t.to=null),o===!1&&(t.from=null);const h=ot.arr(s)||ot.fun(s)?s:void 0;h?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):xn(tY,_=>{const x=t[_];if(ot.fun(x)){const y=i._events[_];t[_]=({finished:S,cancelled:A})=>{const M=y.get(x);M?(S||(M.finished=!1),A&&(M.cancelled=!0)):y.set(x,{value:null,finished:S||!1,cancelled:A||!1})},u&&(u[_]=t[_])}});const f=i._state;t.pause===!f.paused?(f.paused=t.pause,Wd(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const p=(r||Object.keys(i.springs)).map(_=>i.springs[_].start(t)),g=t.cancel===!0||yO(t,"cancel")===!0;(h||g&&f.asyncId)&&p.push(xO(++i._lastAsyncId,{props:t,state:f,actions:{pause:IE,resume:IE,start(_,x){g?(nm(f,i._lastAsyncId),x(Qh(i))):(_.onRest=l,x(AO(h,_,f,i)))}}})),f.paused&&await new Promise(_=>{f.resumeQueue.add(_)});const v=ST(i,await Promise.all(p));if(a&&v.finished&&!(n&&v.noop)){const _=MO(t,a,s);if(_)return RO(i,[_]),wO(i,_,!0)}return c&&Gt.batchedUpdates(()=>c(v,i,i.item)),v}function qP(i,t){const n=Ki({},i.springs);return t&&xn(Gs(t),r=>{ot.und(r.keys)&&(r=im(r)),ot.obj(r.to)||(r=Ki({},r,{to:void 0})),bO(n,r,s=>CO(s))}),TO(i,n),n}function TO(i,t){Ia(t,(n,r)=>{i.springs[r]||(i.springs[r]=n,bm(n,i))})}function CO(i,t){const n=new qj;return n.key=i,t&&bm(n,t),n}function bO(i,t,n){t.keys&&xn(t.keys,r=>{(i[r]||(i[r]=n(r)))._prepareNode(t)})}function RO(i,t){xn(t,n=>{bO(i.springs,n,r=>CO(r,i))})}function rY(i,t){if(i==null)return{};var n={},r=Object.keys(i),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=i[s]);return n}const sY=["children"],b_=i=>{let{children:t}=i,n=rY(i,sY);const r=ee.useContext(my),s=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=Bj(()=>({pause:s,immediate:o}),[s,o]);const{Provider:a}=my;return ee.createElement(a,{value:n},t)},my=oY(b_,{});b_.Provider=my.Provider;b_.Consumer=my.Consumer;function oY(i,t){return Object.assign(i,ee.createContext(t)),i.Provider._context=i,i.Consumer._context=i,i}const aY=()=>{const i=[],t=function(s){Rj();const o=[];return xn(i,(a,l)=>{if(ot.und(s))o.push(a.start());else{const c=n(s,a,l);c&&o.push(a.start(c))}}),o};t.current=i,t.add=function(r){i.includes(r)||i.push(r)},t.delete=function(r){const s=i.indexOf(r);~s&&i.splice(s,1)},t.pause=function(){return xn(i,r=>r.pause(...arguments)),this},t.resume=function(){return xn(i,r=>r.resume(...arguments)),this},t.set=function(r){xn(i,s=>s.set(r))},t.start=function(r){const s=[];return xn(i,(o,a)=>{if(ot.und(r))s.push(o.start());else{const l=this._getProps(r,o,a);l&&s.push(o.start(l))}}),s},t.stop=function(){return xn(i,r=>r.stop(...arguments)),this},t.update=function(r){return xn(i,(s,o)=>s.update(this._getProps(r,s,o))),this};const n=function(s,o,a){return ot.fun(s)?s(a,o):s};return t._getProps=n,t};function lY(i,t,n){const r=ot.fun(t)&&t;r&&!n&&(n=[]);const s=ee.useMemo(()=>r||arguments.length==3?aY():void 0,[]),o=ee.useRef(0),a=pO(),l=ee.useMemo(()=>({ctrls:[],queue:[],flush(y,S){const A=qP(y,S);return o.current>0&&!l.queue.length&&!Object.keys(A).some(C=>!y.springs[C])?GE(y,S):new Promise(C=>{TO(y,A),l.queue.push(()=>{C(GE(y,S))}),a()})}}),[]),c=ee.useRef([...l.ctrls]),u=[],h=zP(i)||0;ee.useMemo(()=>{xn(c.current.slice(i,h),y=>{Xj(y,s),y.stop(!0)}),c.current.length=i,f(h,i)},[i]),ee.useMemo(()=>{f(0,Math.min(h,i))},n);function f(y,S){for(let A=y;A<S;A++){const M=c.current[A]||(c.current[A]=new iY(null,l.flush)),C=r?r(A,M):t[A];C&&(u[A]=$j(C))}}const p=c.current.map((y,S)=>qP(y,u[S])),g=ee.useContext(b_),v=zP(g),_=g!==v&&Wj(g);gT(()=>{o.current++,l.ctrls=c.current;const{queue:y}=l;y.length&&(l.queue=[],xn(y,S=>S())),xn(c.current,(S,A)=>{s==null||s.add(S),_&&S.start({default:g});const M=u[A];M&&(jj(S,M.ref),S.ref?S.queue.push(M):S.start(M))})}),mO(()=>()=>{xn(l.ctrls,y=>y.stop(!0))});const x=p.map(y=>Ki({},y));return s?[x,s]:x}function cY(i,t){const n=ot.fun(i),[[r],s]=lY(1,n?i:[i],n?t||[]:t);return n||arguments.length==2?[r,s]:r}let $P;(function(i){i.MOUNT="mount",i.ENTER="enter",i.UPDATE="update",i.LEAVE="leave"})($P||($P={}));class uY extends AT{constructor(t,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=$p(...n);const r=this._get(),s=UE(r);vT(this,s.create(r))}advance(t){const n=this._get(),r=this.get();da(n,r)||(Po(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&eB(this._active)&&$1(this)}_get(){const t=ot.arr(this.source)?this.source.map(Ls):Gs(Ls(this.source));return this.calc(...t)}_start(){this.idle&&!eB(this._active)&&(this.idle=!1,xn(C_(this),t=>{t.done=!1}),Yo.skipAnimation?(Gt.batchedUpdates(()=>this.advance()),$1(this)):E_.start(this))}_attach(){let t=1;xn(Gs(this.source),n=>{Bo(n)&&bm(n,this),NE(n)&&(n.idle||this._active.add(n),t=Math.max(t,n.priority+1))}),this.priority=t,this._start()}_detach(){xn(Gs(this.source),t=>{Bo(t)&&fy(t,this)}),this._active.clear(),$1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Gs(this.source).reduce((n,r)=>Math.max(n,(NE(r)?r.priority:0)+1),0))}}function hY(i){return i.idle!==!1}function eB(i){return!i.size||Array.from(i).every(hY)}function $1(i){i.idle||(i.idle=!0,xn(C_(i),t=>{t.done=!0}),hy(i,{type:"idle",parent:i}))}Yo.assign({createStringInterpolator:fO,to:(i,t)=>new uY(i,t)});const fY=["primitive"].concat(Object.keys(bF).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));Yo.assign({createStringInterpolator:fO,colors:sj,frameLoop:"demand"});pX(()=>{Gt.advance()});const dY=kj(fY,{applyAnimatedValues:bc}),pY=dY.animated;function mY(i,t,n){return Math.max(t,Math.min(i,n))}const Vn={toVector(i,t){return i===void 0&&(i=t),Array.isArray(i)?i:[i,i]},add(i,t){return[i[0]+t[0],i[1]+t[1]]},sub(i,t){return[i[0]-t[0],i[1]-t[1]]},addTo(i,t){i[0]+=t[0],i[1]+=t[1]},subTo(i,t){i[0]-=t[0],i[1]-=t[1]}};function tB(i,t,n){return t===0||Math.abs(t)===1/0?Math.pow(i,n*5):i*t*n/(t+n*i)}function nB(i,t,n,r=.15){return r===0?mY(i,t,n):i<t?-tB(t-i,n-t,r)+t:i>n?+tB(i-n,n-t,r)+n:i}function gY(i,[t,n],[r,s]){const[[o,a],[l,c]]=i;return[nB(t,o,a,r),nB(n,l,c,s)]}function vY(i,t){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function yY(i){var t=vY(i,"string");return typeof t=="symbol"?t:String(t)}function Mi(i,t,n){return t=yY(t),t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function iB(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function ni(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iB(Object(n),!0).forEach(function(r){Mi(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):iB(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}const PO={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function rB(i){return i?i[0].toUpperCase()+i.slice(1):""}const _Y=["enter","leave"];function xY(i=!1,t){return i&&!_Y.includes(t)}function SY(i,t="",n=!1){const r=PO[i],s=r&&r[t]||t;return"on"+rB(i)+rB(s)+(xY(n,s)?"Capture":"")}const AY=["gotpointercapture","lostpointercapture"];function EY(i){let t=i.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=AY.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function MY(i,t=""){const n=PO[i],r=n&&n[t]||t;return i+r}function R_(i){return"touches"in i}function BO(i){return R_(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function wY(i){return Array.from(i.touches).filter(t=>{var n,r;return t.target===i.currentTarget||((n=i.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function TY(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function IO(i){return R_(i)?TY(i)[0]:i}function HE(i,t){try{const n=t.clientX-i.clientX,r=t.clientY-i.clientY,s=(t.clientX+i.clientX)/2,o=(t.clientY+i.clientY)/2,a=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:a,origin:[s,o]}}catch{}return null}function CY(i){return wY(i).map(t=>t.identifier)}function sB(i,t){const[n,r]=Array.from(i.touches).filter(s=>t.includes(s.identifier));return HE(n,r)}function eS(i){const t=IO(i);return R_(i)?t.identifier:t.pointerId}function gf(i){const t=IO(i);return[t.clientX,t.clientY]}const oB=40,aB=800;function DO(i){let{deltaX:t,deltaY:n,deltaMode:r}=i;return r===1?(t*=oB,n*=oB):r===2&&(t*=aB,n*=aB),[t,n]}function bY(i){var t,n;const{scrollX:r,scrollY:s,scrollLeft:o,scrollTop:a}=i.currentTarget;return[(t=r??o)!==null&&t!==void 0?t:0,(n=s??a)!==null&&n!==void 0?n:0]}function RY(i){const t={};if("buttons"in i&&(t.buttons=i.buttons),"shiftKey"in i){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:o}=i;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:o})}return t}function gy(i,...t){return typeof i=="function"?i(...t):i}function PY(){}function BY(...i){return i.length===0?PY:i.length===1?i[0]:function(){let t;for(const n of i)t=n.apply(this,arguments)||t;return t}}function lB(i,t){return Object.assign({},t,i||{})}const IY=32;class LO{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?gy(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let o=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,RY(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,o=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const T=n._delta.map(Math.abs);Vn.addTo(n._distance,T)}this.axisIntent&&this.axisIntent(t);const[a,l]=n._movement,[c,u]=r.threshold,{_step:h,values:f}=n;if(r.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(a)>=c&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=u&&f[1])):(h[0]===!1&&(h[0]=Math.abs(a)>=c&&Math.sign(a)*c),h[1]===!1&&(h[1]=Math.abs(l)>=u&&Math.sign(l)*u)),n.intentional=h[0]!==!1||h[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[T,R]=f;p[0]=h[0]!==!1?T-h[0]:0,p[1]=h[1]!==!1?R-h[1]:0}else p[0]=h[0]!==!1?a-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const g=n.offset,v=n._active&&!n._blocked||n.active;v&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=gy(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[_,x]=n.offset,[[y,S],[A,M]]=n._bounds;n.overflow=[_<y?-1:_>S?1:0,x<A?-1:x>M?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=gY(n._bounds,n.offset,C),n.delta=Vn.sub(n.offset,g),this.computeMovement(),v&&(!n.last||o>IY)){n.delta=Vn.sub(n.offset,g);const T=n.delta.map(Math.abs);Vn.addTo(n.distance,T),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&o>0&&(n.velocity=[T[0]/o,T[1]/o],n.timeDelta=o)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler(ni(ni(ni({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function DY([i,t],n){const r=Math.abs(i),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class Rm extends LO{constructor(...t){super(...t),Mi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Vn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Vn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[BO(t)]:r.axisThreshold;n.axis=DY(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const LY=i=>i,cB=.15,UO={enabled(i=!0){return i},eventOptions(i,t,n){return ni(ni({},n.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[cB,cB];case!1:return[0,0];default:return Vn.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return Vn.toVector(i)},transform(i,t,n){const r=i||n.shared.transform;return this.hasCustomTransform=!!r,r||LY},threshold(i){return Vn.toVector(i,0)}},UY=0,Su=ni(ni({},UO),{},{axis(i,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(i=UY){return i},bounds(i={}){if(typeof i=="function")return o=>Su.bounds(i(o));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=i;return[[t,n],[r,s]]}}),uB={ArrowRight:(i,t=1)=>[i*t,0],ArrowLeft:(i,t=1)=>[-1*i*t,0],ArrowUp:(i,t=1)=>[0,-1*i*t],ArrowDown:(i,t=1)=>[0,i*t]};class FY extends Rm{constructor(...t){super(...t),Mi(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Su.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=eS(t),r._pointerActive=!0,this.computeValues(gf(t)),this.computeInitial(),n.preventScrollAxis&&BO(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=eS(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const o=gf(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=Vn.sub(o,n._values),this.computeValues(o)),Vn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=eS(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[o,a]=n._distance;if(n.tap=o<=r.tapsThreshold&&a<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[l,c]=n._delta,[u,h]=n._movement,[f,p]=r.swipe.velocity,[g,v]=r.swipe.distance,_=r.swipe.duration;if(n.elapsedTime<_){const x=Math.abs(l/n.timeDelta),y=Math.abs(c/n.timeDelta);x>f&&Math.abs(u)>g&&(n.swipe[0]=Math.sign(l)),y>p&&Math.abs(h)>v&&(n.swipe[1]=Math.sign(c))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,OY(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=uB[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,Vn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in uB&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function OY(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const Pm=typeof window<"u"&&window.document&&window.document.createElement;function FO(){return Pm&&"ontouchstart"in window}function NY(){return FO()||Pm&&window.navigator.maxTouchPoints>1}function kY(){return Pm&&"onpointerdown"in window}function zY(){return Pm&&"exitPointerLock"in window.document}function GY(){try{return"constructor"in GestureEvent}catch{return!1}}const Os={isBrowser:Pm,gesture:GY(),touch:FO(),touchscreen:NY(),pointer:kY(),pointerLock:zY()},HY=250,VY=180,WY=.5,XY=50,jY=250,YY=10,hB={mouse:0,touch:0,pen:8},JY=ni(ni({},Su),{},{device(i,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&Os.pointerLock,Os.touch&&n?"touch":this.pointerLock?"mouse":Os.pointer&&!s?"pointer":Os.touch?"touch":"mouse"},preventScrollAxis(i,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&i?HY:void 0,!(!Os.touchscreen||n===!1))return i||(n!==void 0?"y":void 0)},pointerCapture(i,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(i,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const o=Vn.toVector(i,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:i=WY,distance:t=XY,duration:n=jY}={}){return{velocity:this.transform(Vn.toVector(i)),distance:this.transform(Vn.toVector(t)),duration:n}},delay(i=0){switch(i){case!0:return VY;case!1:return 0;default:return i}},axisThreshold(i){return i?ni(ni({},hB),i):hB},keyboardDisplacement(i=YY){return i}});function OO(i){const[t,n]=i.overflow,[r,s]=i._delta,[o,a]=i._direction;(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(i._movement[0]=i._movementBound[0]),(n<0&&s>0&&a<0||n>0&&s<0&&a>0)&&(i._movement[1]=i._movementBound[1])}const KY=30,ZY=100;class QY extends LO{constructor(...t){super(...t),Mi(this,"ingKey","pinching"),Mi(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:n,lastOffset:r}=this.state;t==="wheel"?this.state.offset=Vn.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:n}=this.state;this.state.movement=[t[0]/n[0],t[1]-n[1]]}axisIntent(){const t=this.state,[n,r]=t._movement;if(!t.axis){const s=Math.abs(n)*KY-Math.abs(r);s<0?t.axis="angle":s>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(o=>r.has(o))||r.size<2)return;this.start(t),n._touchIds=Array.from(r).slice(0,2);const s=sB(t,n._touchIds);s&&this.pinchStart(t,s)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const n=this.state,r=n._pointerEvents,s=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(a=>s.has(a))||(r.size<2&&r.set(t.pointerId,t),n._pointerEvents.size<2))return;this.start(t);const o=HE(...Array.from(r.values()));o&&this.pinchStart(t,o)}pinchStart(t,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const n=sB(t,this.state._touchIds);n&&this.pinchMove(t,n)}pointerMove(t){const n=this.state._pointerEvents;if(n.has(t.pointerId)&&n.set(t.pointerId,t),!this.state._active)return;const r=HE(...Array.from(n.values()));r&&this.pinchMove(t,r)}pinchMove(t,n){const r=this.state,s=r._values[1],o=n.angle-s;let a=0;Math.abs(o)>270&&(a+=Math.sign(o)),this.computeValues([n.distance,n.angle-360*a]),r.origin=n.origin,r.turns=a,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const n=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}n._pointerEvents.has(t.pointerId)&&n._pointerEvents.delete(t.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const n=this.state;n._active||(this.start(t),this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY];const r=n._movement;n._movement=[t.scale-1,t.rotation],n._delta=Vn.sub(n._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>t[r]):!t[n])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-DO(t)[1]/ZY*r.offset[0],0],Vn.addTo(r._movement,r._delta),OO(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const n=this.config.device;n&&(t(n,"start",this[n+"Start"].bind(this)),t(n,"change",this[n+"Move"].bind(this)),t(n,"end",this[n+"End"].bind(this)),t(n,"cancel",this[n+"End"].bind(this)),t("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const qY=ni(ni({},UO),{},{device(i,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Os.touch&&Os.gesture)return"gesture";if(Os.touch&&r)return"touch";if(Os.touchscreen){if(Os.pointer)return"pointer";if(Os.touch)return"touch"}},bounds(i,t,{scaleBounds:n={},angleBounds:r={}}){const s=a=>{const l=lB(gy(n,a),{min:-1/0,max:1/0});return[l.min,l.max]},o=a=>{const l=lB(gy(r,a),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof n!="function"&&typeof r!="function"?[s(),o()]:a=>[s(a),o(a)]},threshold(i,t,n){return this.lockDirection=n.axis==="lock",Vn.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});class $Y extends Rm{constructor(...t){super(...t),Mi(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(gf(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const n=gf(t),r=this.state;r._delta=Vn.sub(n,r._values),Vn.addTo(r._movement,r._delta),this.computeValues(n),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const eJ=ni(ni({},Su),{},{mouseOnly:(i=!0)=>i});class tJ extends Rm{constructor(...t){super(...t),Mi(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const n=this.state,r=bY(t);n._delta=Vn.sub(r,n._values),Vn.addTo(n._movement,n._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const nJ=Su;class iJ extends Rm{constructor(...t){super(...t),Mi(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const n=this.state;n._delta=DO(t),Vn.addTo(n._movement,n._delta),OO(n),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const rJ=Su;class sJ extends Rm{constructor(...t){super(...t),Mi(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(gf(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const n=this.state;if(!n._active)return;n._active=!1;const r=gf(t);n._movement=n._delta=Vn.sub(r,n._values),this.computeValues(r),this.compute(t),n.delta=n.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const oJ=ni(ni({},Su),{},{mouseOnly:(i=!0)=>i}),ET=new Map,VE=new Map;function aJ(i){ET.set(i.key,i.engine),VE.set(i.key,i.resolver)}const lJ={key:"drag",engine:FY,resolver:JY},cJ={key:"hover",engine:sJ,resolver:oJ},uJ={key:"move",engine:$Y,resolver:eJ},hJ={key:"pinch",engine:QY,resolver:qY},fJ={key:"scroll",engine:tJ,resolver:nJ},dJ={key:"wheel",engine:iJ,resolver:rJ};function pJ(i,t){if(i==null)return{};var n={},r=Object.keys(i),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=i[s]);return n}function mJ(i,t){if(i==null)return{};var n=pJ(i,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(n[r]=i[r])}return n}const gJ={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=Os.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:t=!1}={}){return{passive:i,capture:t}},transform(i){return i}},vJ=["target","eventOptions","window","enabled","transform"];function M0(i={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,i[r],r,i);break;case"object":n[r]=M0(i[r],s);break;case"boolean":s&&(n[r]=i[r]);break}return n}function yJ(i,t,n={}){const r=i,{target:s,eventOptions:o,window:a,enabled:l,transform:c}=r,u=mJ(r,vJ);if(n.shared=M0({target:s,eventOptions:o,window:a,enabled:l,transform:c},gJ),t){const h=VE.get(t);n[t]=M0(ni({shared:n.shared},u),h)}else for(const h in u){const f=VE.get(h);f&&(n[h]=M0(ni({shared:n.shared},u[h]),f))}return n}class NO{constructor(t,n){Mi(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,o){const a=this._listeners,l=MY(n,r),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=ni(ni({},c),o);t.addEventListener(l,s,u);const h=()=>{t.removeEventListener(l,s,u),a.delete(h)};return a.add(h),h}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class _J{constructor(){Mi(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class xJ{constructor(t){Mi(this,"gestures",new Set),Mi(this,"_targetEventStore",new NO(this)),Mi(this,"gestureEventStores",{}),Mi(this,"gestureTimeoutStores",{}),Mi(this,"handlers",{}),Mi(this,"config",{}),Mi(this,"pointerIds",new Set),Mi(this,"touchIds",new Set),Mi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),SJ(this,t)}setEventIds(t){if(R_(t))return this.touchIds=new Set(CY(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=yJ(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const a of this.gestures){const l=this.config[a],c=fB(r,l.eventOptions,!!s);if(l.enabled){const u=ET.get(a);new u(this,t,a).bind(c)}}const o=fB(r,n.eventOptions,!!s);for(const a in this.nativeHandlers)o(a,"",l=>this.nativeHandlers[a](ni(ni({},this.state.shared),{},{event:l,args:t})),void 0,!0)}for(const o in r)r[o]=BY(...r[o]);if(!s)return r;for(const o in r){const{device:a,capture:l,passive:c}=EY(o);this._targetEventStore.add(s,a,"",r[o],{capture:l,passive:c})}}}}function ch(i,t){i.gestures.add(t),i.gestureEventStores[t]=new NO(i,t),i.gestureTimeoutStores[t]=new _J}function SJ(i,t){t.drag&&ch(i,"drag"),t.wheel&&ch(i,"wheel"),t.scroll&&ch(i,"scroll"),t.move&&ch(i,"move"),t.pinch&&ch(i,"pinch"),t.hover&&ch(i,"hover")}const fB=(i,t,n)=>(r,s,o,a={},l=!1)=>{var c,u;const h=(c=a.capture)!==null&&c!==void 0?c:t.capture,f=(u=a.passive)!==null&&u!==void 0?u:t.passive;let p=l?r:SY(r,s,h);n&&f&&(p+="Passive"),i[p]=i[p]||[],i[p].push(o)},AJ=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function EJ(i){const t={},n={},r=new Set;for(let s in i)AJ.test(s)?(r.add(RegExp.lastMatch),n[s]=i[s]):t[s]=i[s];return[n,t,r]}function uh(i,t,n,r,s,o){if(!i.has(n)||!ET.has(r))return;const a=n+"Start",l=n+"End",c=u=>{let h;return u.first&&a in t&&t[a](u),n in t&&(h=t[n](u)),u.last&&l in t&&t[l](u),h};s[r]=c,o[r]=o[r]||{}}function MJ(i,t){const[n,r,s]=EJ(i),o={};return uh(s,n,"onDrag","drag",o,t),uh(s,n,"onWheel","wheel",o,t),uh(s,n,"onScroll","scroll",o,t),uh(s,n,"onPinch","pinch",o,t),uh(s,n,"onMove","move",o,t),uh(s,n,"onHover","hover",o,t),{handlers:o,config:t,nativeHandlers:r}}function wJ(i,t={},n,r){const s=Rn.useMemo(()=>new xJ(i),[]);if(s.applyHandlers(i,r),s.applyConfig(t,n),Rn.useEffect(s.effect.bind(s)),Rn.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function TJ(i){return i.forEach(aJ),function(n,r){const{handlers:s,nativeHandlers:o,config:a}=MJ(n,r||{});return wJ(s,a,void 0,o)}}function CJ(i,t){return TJ([lJ,hJ,fJ,dJ,uJ,cJ])(i,t||{})}function bJ({enabled:i=!0,snap:t,global:n,domElement:r,cursor:s=!0,children:o,speed:a=1,rotation:l=[0,0,0],zoom:c=1,polar:u=[0,Math.PI/2],azimuth:h=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}){const p=jn(T=>T.events),g=jn(T=>T.gl),v=r||p.connected||g.domElement,{size:_}=jn(),x=ee.useMemo(()=>[l[0]+u[0],l[0]+u[1]],[l[0],u[0],u[1]]),y=ee.useMemo(()=>[l[1]+h[0],l[1]+h[1]],[l[1],h[0],h[1]]),S=ee.useMemo(()=>[ir.clamp(l[0],...x),ir.clamp(l[1],...y),l[2]],[l[0],l[1],l[2],x,y]),[A,M]=cY(()=>({scale:1,rotation:S,config:f}));ee.useEffect(()=>void M.start({scale:1,rotation:S,config:f}),[S]),ee.useEffect(()=>{if(n&&s&&i)return v.style.cursor="grab",g.domElement.style.cursor="",()=>{v.style.cursor="default",g.domElement.style.cursor="default"}},[n,s,v,i]);const C=CJ({onHover:({last:T})=>{s&&!n&&i&&(v.style.cursor=T?"auto":"grab")},onDrag:({down:T,delta:[R,I],memo:[P,B]=A.rotation.animation.to||S})=>{if(!i)return[I,R];s&&(v.style.cursor=T?"grabbing":"grab"),R=ir.clamp(B+R/_.width*Math.PI*a,...y),I=ir.clamp(P+I/_.height*Math.PI*a,...x);const O=t&&!T&&typeof t!="boolean"?t:f;return M.start({scale:T&&I>x[1]/2?c:1,rotation:t&&!T?S:[I,R,0],config:N=>N==="scale"?{...O,friction:O.friction*3}:O}),[I,R]}},{target:n?v:void 0});return ee.createElement(pY.group,jo({},C==null?void 0:C(),A),o)}let bd;function RJ(){var i;if(bd!==void 0)return bd;try{let t;const n=document.createElement("canvas");return bd=!!(window.WebGL2RenderingContext&&(t=n.getContext("webgl2"))),t&&((i=t.getExtension("WEBGL_lose_context"))==null||i.loseContext()),bd}catch{return bd=!1}}function dB(i,t){if(t===x3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===ry||t===_w){let n=i.getIndex();if(n===null){const a=[],l=i.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)a.push(c);i.setIndex(a),n=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=n.count-2,s=[];if(n)if(t===ry)for(let a=1;a<=r;a++)s.push(n.getX(0)),s.push(n.getX(a)),s.push(n.getX(a+1));else for(let a=0;a<r;a++)a%2===0?(s.push(n.getX(a)),s.push(n.getX(a+1)),s.push(n.getX(a+2))):(s.push(n.getX(a+2)),s.push(n.getX(a+1)),s.push(n.getX(a)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=i.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}const PJ=parseInt(Jo.replace(/\D+/g,""));var ks=Uint8Array,yl=Uint16Array,WE=Uint32Array,kO=new ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zO=new ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),BJ=new ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GO=function(i,t){for(var n=new yl(31),r=0;r<31;++r)n[r]=t+=1<<i[r-1];for(var s=new WE(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)s[o]=o-n[r]<<5|r;return[n,s]},HO=GO(kO,2),VO=HO[0],IJ=HO[1];VO[28]=258,IJ[258]=28;var DJ=GO(zO,0),LJ=DJ[0],XE=new yl(32768);for(var Gn=0;Gn<32768;++Gn){var tl=(Gn&43690)>>>1|(Gn&21845)<<1;tl=(tl&52428)>>>2|(tl&13107)<<2,tl=(tl&61680)>>>4|(tl&3855)<<4,XE[Gn]=((tl&65280)>>>8|(tl&255)<<8)>>>1}var fp=function(i,t,n){for(var r=i.length,s=0,o=new yl(t);s<r;++s)++o[i[s]-1];var a=new yl(t);for(s=0;s<t;++s)a[s]=a[s-1]+o[s-1]<<1;var l;if(n){l=new yl(1<<t);var c=15-t;for(s=0;s<r;++s)if(i[s])for(var u=s<<4|i[s],h=t-i[s],f=a[i[s]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)l[XE[f]>>>c]=u}else for(l=new yl(r),s=0;s<r;++s)i[s]&&(l[s]=XE[a[i[s]-1]++]>>>15-i[s]);return l},Bm=new ks(288);for(var Gn=0;Gn<144;++Gn)Bm[Gn]=8;for(var Gn=144;Gn<256;++Gn)Bm[Gn]=9;for(var Gn=256;Gn<280;++Gn)Bm[Gn]=7;for(var Gn=280;Gn<288;++Gn)Bm[Gn]=8;var WO=new ks(32);for(var Gn=0;Gn<32;++Gn)WO[Gn]=5;var UJ=fp(Bm,9,1),FJ=fp(WO,5,1),tS=function(i){for(var t=i[0],n=1;n<i.length;++n)i[n]>t&&(t=i[n]);return t},to=function(i,t,n){var r=t/8|0;return(i[r]|i[r+1]<<8)>>(t&7)&n},nS=function(i,t){var n=t/8|0;return(i[n]|i[n+1]<<8|i[n+2]<<16)>>(t&7)},OJ=function(i){return(i/8|0)+(i&7&&1)},NJ=function(i,t,n){(t==null||t<0)&&(t=0),(n==null||n>i.length)&&(n=i.length);var r=new(i instanceof yl?yl:i instanceof WE?WE:ks)(n-t);return r.set(i.subarray(t,n)),r},kJ=function(i,t,n){var r=i.length;if(!r||n&&!n.l&&r<5)return t||new ks(0);var s=!t||n,o=!n||n.i;n||(n={}),t||(t=new ks(r*3));var a=function(fe){var ue=t.length;if(fe>ue){var Se=new ks(Math.max(ue*2,fe));Se.set(t),t=Se}},l=n.f||0,c=n.p||0,u=n.b||0,h=n.l,f=n.d,p=n.m,g=n.n,v=r*8;do{if(!h){n.f=l=to(i,c,1);var _=to(i,c+1,3);if(c+=3,_)if(_==1)h=UJ,f=FJ,p=9,g=5;else if(_==2){var A=to(i,c,31)+257,M=to(i,c+10,15)+4,C=A+to(i,c+5,31)+1;c+=14;for(var T=new ks(C),R=new ks(19),I=0;I<M;++I)R[BJ[I]]=to(i,c+I*3,7);c+=M*3;for(var P=tS(R),B=(1<<P)-1,O=fp(R,P,1),I=0;I<C;){var N=O[to(i,c,B)];c+=N&15;var x=N>>>4;if(x<16)T[I++]=x;else{var ne=0,z=0;for(x==16?(z=3+to(i,c,3),c+=2,ne=T[I-1]):x==17?(z=3+to(i,c,7),c+=3):x==18&&(z=11+to(i,c,127),c+=7);z--;)T[I++]=ne}}var j=T.subarray(0,A),q=T.subarray(A);p=tS(j),g=tS(q),h=fp(j,p,1),f=fp(q,g,1)}else throw"invalid block type";else{var x=OJ(c)+4,y=i[x-4]|i[x-3]<<8,S=x+y;if(S>r){if(o)throw"unexpected EOF";break}s&&a(u+y),t.set(i.subarray(x,S),u),n.b=u+=y,n.p=c=S*8;continue}if(c>v){if(o)throw"unexpected EOF";break}}s&&a(u+131072);for(var he=(1<<p)-1,H=(1<<g)-1,X=c;;X=c){var ne=h[nS(i,c)&he],K=ne>>>4;if(c+=ne&15,c>v){if(o)throw"unexpected EOF";break}if(!ne)throw"invalid length/literal";if(K<256)t[u++]=K;else if(K==256){X=c,h=null;break}else{var k=K-254;if(K>264){var I=K-257,Z=kO[I];k=to(i,c,(1<<Z)-1)+VO[I],c+=Z}var Q=f[nS(i,c)&H],se=Q>>>4;if(!Q)throw"invalid distance";c+=Q&15;var q=LJ[se];if(se>3){var Z=zO[se];q+=nS(i,c)&(1<<Z)-1,c+=Z}if(c>v){if(o)throw"unexpected EOF";break}s&&a(u+131072);for(var le=u+k;u<le;u+=4)t[u]=t[u-q],t[u+1]=t[u+1-q],t[u+2]=t[u+2-q],t[u+3]=t[u+3-q];u=le}}n.l=h,n.p=X,n.b=u,h&&(l=1,n.m=p,n.d=f,n.n=g)}while(!l);return u==t.length?t:NJ(t,0,u)},zJ=new ks(0),GJ=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Xd(i,t){return kJ((GJ(i),i.subarray(2,-4)),t)}var HJ=typeof TextDecoder<"u"&&new TextDecoder,VJ=0;try{HJ.decode(zJ,{stream:!0}),VJ=1}catch{}const WJ=i=>i&&i.isCubeTexture;class XJ extends In{constructor(t,n){var r,s;const o=WJ(t),l=((s=o?(r=t.image[0])==null?void 0:r.width:t.image.width)!=null?s:1024)/4,c=Math.floor(Math.log2(l)),u=Math.pow(2,c),h=3*Math.max(u,16*7),f=4*u,p=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${c}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Jo.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,_={map:{value:t},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},x=new Sm(1,16),y=new Ri({uniforms:_,fragmentShader:v,vertexShader:g,side:Li});super(x,y)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}class MT extends qi{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new ZJ(n)}),this.register(function(n){return new rK(n)}),this.register(function(n){return new sK(n)}),this.register(function(n){return new oK(n)}),this.register(function(n){return new qJ(n)}),this.register(function(n){return new $J(n)}),this.register(function(n){return new eK(n)}),this.register(function(n){return new tK(n)}),this.register(function(n){return new KJ(n)}),this.register(function(n){return new nK(n)}),this.register(function(n){return new QJ(n)}),this.register(function(n){return new iK(n)}),this.register(function(n){return new YJ(n)}),this.register(function(n){return new aK(n)}),this.register(function(n){return new lK(n)})}load(t,n,r,s){const o=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=ms.extractUrlBase(t),this.manager.itemStart(t);const l=function(u){s?s(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},c=new Or(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(u){try{o.parse(u,a,function(h){n(h),o.manager.itemEnd(t)},l)}catch(h){l(h)}},r,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,r,s){let o;const a={},l={};if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(ms.decodeText(new Uint8Array(t.slice(0,4)))===XO){try{a[un.KHR_BINARY_GLTF]=new cK(t)}catch(h){s&&s(h);return}o=JSON.parse(a[un.KHR_BINARY_GLTF].content)}else o=JSON.parse(ms.decodeText(new Uint8Array(t)));else o=t;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new AK(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);l[h.name]=h,a[h.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const h=o.extensionsUsed[u],f=o.extensionsRequired||[];switch(h){case un.KHR_MATERIALS_UNLIT:a[h]=new JJ;break;case un.KHR_DRACO_MESH_COMPRESSION:a[h]=new uK(o,this.dracoLoader);break;case un.KHR_TEXTURE_TRANSFORM:a[h]=new hK;break;case un.KHR_MESH_QUANTIZATION:a[h]=new fK;break;default:f.indexOf(h)>=0&&l[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(a),c.setPlugins(l),c.parse(r,s)}parseAsync(t,n){const r=this;return new Promise(function(s,o){r.parse(t,n,s,o)})}}function jJ(){let i={};return{get:function(t){return i[t]},add:function(t,n){i[t]=n},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class YJ{constructor(t){this.parser=t,this.name=un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let r=0,s=n.length;r<s;r++){const o=n[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,r="light:"+t;let s=n.cache.get(r);if(s)return s;const o=n.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let u;const h=new Ke(16777215);c.color!==void 0&&h.fromArray(c.color);const f=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new __(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Qp(h),u.distance=f;break;case"spot":u=new y_(h),u.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,cl(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=n.createUniqueName(c.name||"light_"+t),s=Promise.resolve(u),n.cache.add(r,s),s}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,r=this.parser,o=r.json.nodes[t],l=(o.extensions&&o.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return r._getNodeRef(n.cache,l,c)})}}class JJ{constructor(){this.name=un.KHR_MATERIALS_UNLIT}getMaterialType(){return Ur}extendParams(t,n,r){const s=[];t.color=new Ke(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const a=o.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}o.baseColorTexture!==void 0&&s.push(r.assignTexture(t,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class KJ{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class ZJ{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(n.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(n,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new De(l,l)}return Promise.all(o)}}class QJ{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(n.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(n.iridescenceIOR=a.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(o)}}class qJ{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_SHEEN}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new Ke(0,0,0),n.sheenRoughness=0,n.sheen=1;const a=s.extensions[this.name];return a.sheenColorFactor!==void 0&&n.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&o.push(r.assignTexture(n,"sheenColorMap",a.sheenColorTexture,3001)),a.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class $J{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(n.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&o.push(r.assignTexture(n,"transmissionMap",a.transmissionTexture)),Promise.all(o)}}class eK{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_VOLUME}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];n.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&o.push(r.assignTexture(n,"thicknessMap",a.thicknessTexture)),n.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return n.attenuationColor=new Ke(l[0],l[1],l[2]),Promise.all(o)}}class tK{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_IOR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class nK{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_SPECULAR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];n.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&o.push(r.assignTexture(n,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return n.specularColor=new Ke(l[0],l[1],l[2]),a.specularColorTexture!==void 0&&o.push(r.assignTexture(n,"specularColorMap",a.specularColorTexture,3001)),Promise.all(o)}}class iK{constructor(t){this.parser=t,this.name=un.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:Ko}extendMaterialParams(t,n){const r=this.parser,s=r.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(n.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(n.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&o.push(r.assignTexture(n,"anisotropyMap",a.anisotropyTexture)),Promise.all(o)}}class rK{constructor(t){this.parser=t,this.name=un.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],a=n.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,a)}}class sK{constructor(t){this.parser=t,this.name=un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,s=r.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const a=o.extensions[n],l=s.images[a.source];let c=r.textureLoader;if(l.uri){const u=r.options.manager.getHandler(l.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(t,a.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class oK{constructor(t){this.parser=t,this.name=un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,s=r.json,o=s.textures[t];if(!o.extensions||!o.extensions[n])return null;const a=o.extensions[n],l=s.images[a.source];let c=r.textureLoader;if(l.uri){const u=r.options.manager.getHandler(l.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(t,a.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class aK{constructor(t){this.name=un.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,r=n.bufferViews[t];if(r.extensions&&r.extensions[this.name]){const s=r.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(l){const c=s.byteOffset||0,u=s.byteLength||0,h=s.count,f=s.byteStride,p=new Uint8Array(l,c,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(h,f,p,s.mode,s.filter).then(function(g){return g.buffer}):a.ready.then(function(){const g=new ArrayBuffer(h*f);return a.decodeGltfBuffer(new Uint8Array(g),h,f,p,s.mode,s.filter),g})})}else return null}}class lK{constructor(t){this.name=un.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,r=n.nodes[t];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const s=n.meshes[r.mesh];for(const u of s.primitives)if(u.mode!==Ds.TRIANGLES&&u.mode!==Ds.TRIANGLE_STRIP&&u.mode!==Ds.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=r.extensions[this.name].attributes,l=[],c={};for(const u in a)l.push(this.parser.getDependency("accessor",a[u]).then(h=>(c[u]=h,c[u])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(u=>{const h=u.pop(),f=h.isGroup?h.children:[h],p=u[0].count,g=[];for(const v of f){const _=new at,x=new Y,y=new xi,S=new Y(1,1,1),A=new Bw(v.geometry,v.material,p);for(let M=0;M<p;M++)c.TRANSLATION&&x.fromBufferAttribute(c.TRANSLATION,M),c.ROTATION&&y.fromBufferAttribute(c.ROTATION,M),c.SCALE&&S.fromBufferAttribute(c.SCALE,M),A.setMatrixAt(M,_.compose(x,y,S));for(const M in c)M!=="TRANSLATION"&&M!=="ROTATION"&&M!=="SCALE"&&v.geometry.setAttribute(M,c[M]);tn.prototype.copy.call(A,v),this.parser.assignFinalMaterial(A),g.push(A)}return h.isGroup?(h.clear(),h.add(...g),h):g[0]}))}}const XO="glTF",Rd=12,pB={JSON:1313821514,BIN:5130562};class cK{constructor(t){this.name=un.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,Rd);if(this.header={magic:ms.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==XO)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Rd,s=new DataView(t,Rd);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===pB.JSON){const c=new Uint8Array(t,Rd+o,a);this.content=ms.decodeText(c)}else if(l===pB.BIN){const c=Rd+o;this.body=t.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class uK{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=un.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const r=this.json,s=this.dracoLoader,o=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,l={},c={},u={};for(const h in a){const f=jE[h]||h.toLowerCase();l[f]=a[h]}for(const h in t.attributes){const f=jE[h]||h.toLowerCase();if(a[h]!==void 0){const p=r.accessors[t.attributes[h]],g=qh[p.componentType];u[f]=g.name,c[f]=p.normalized===!0}}return n.getDependency("bufferView",o).then(function(h){return new Promise(function(f){s.decodeDracoFile(h,function(p){for(const g in p.attributes){const v=p.attributes[g],_=c[g];_!==void 0&&(v.normalized=_)}f(p)},l,u)})})}}class hK{constructor(){this.name=un.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class fK{constructor(){this.name=un.KHR_MESH_QUANTIZATION}}class jO extends bf{constructor(t,n,r,s){super(t,n,r,s)}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=t*s*3+s;for(let a=0;a!==s;a++)n[a]=r[o+a];return n}interpolate_(t,n,r,s){const o=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=l*2,u=l*3,h=s-n,f=(r-n)/h,p=f*f,g=p*f,v=t*u,_=v-u,x=-2*g+3*p,y=g-p,S=1-x,A=y-p+f;for(let M=0;M!==l;M++){const C=a[_+M+l],T=a[_+M+c]*h,R=a[v+M+l],I=a[v+M]*h;o[M]=S*C+A*T+x*R+y*I}return o}}const dK=new xi;class pK extends jO{interpolate_(t,n,r,s){const o=super.interpolate_(t,n,r,s);return dK.fromArray(o).normalize().toArray(o),o}}const Ds={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},qh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mB={9728:Un,9729:ln,9984:kp,9985:jy,9986:Jh,9987:Vo},gB={33071:Ui,33648:af,10497:Ho},iS={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...PJ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mK={CUBICSPLINE:void 0,LINEAR:su,STEP:lf},rS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function gK(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new vu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Xs})),i.DefaultMaterial}function yc(i,t,n){for(const r in n.extensions)i[r]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function cl(i,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function vK(i,t,n){let r=!1,s=!1,o=!1;for(let u=0,h=t.length;u<h;u++){const f=t[u];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(s=!0),f.COLOR_0!==void 0&&(o=!0),r&&s&&o)break}if(!r&&!s&&!o)return Promise.resolve(i);const a=[],l=[],c=[];for(let u=0,h=t.length;u<h;u++){const f=t[u];if(r){const p=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):i.attributes.position;a.push(p)}if(s){const p=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):i.attributes.normal;l.push(p)}if(o){const p=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):i.attributes.color;c.push(p)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const h=u[0],f=u[1],p=u[2];return r&&(i.morphAttributes.position=h),s&&(i.morphAttributes.normal=f),o&&(i.morphAttributes.color=p),i.morphTargetsRelative=!0,i})}function yK(i,t){if(i.updateMorphTargets(),t.weights!==void 0)for(let n=0,r=t.weights.length;n<r;n++)i.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(i.morphTargetInfluences.length===n.length){i.morphTargetDictionary={};for(let r=0,s=n.length;r<s;r++)i.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _K(i){let t;const n=i.extensions&&i.extensions[un.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+sS(n.attributes):t=i.indices+":"+sS(i.attributes)+":"+i.mode,i.targets!==void 0)for(let r=0,s=i.targets.length;r<s;r++)t+=":"+sS(i.targets[r]);return t}function sS(i){let t="";const n=Object.keys(i).sort();for(let r=0,s=n.length;r<s;r++)t+=n[r]+":"+i[n[r]]+";";return t}function YE(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function xK(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const SK=new at;class AK{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new jJ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||s&&o<98?this.textureLoader=new Rf(this.options.manager):this.textureLoader=new xF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Or(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const r=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(a){const l={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:r,userData:{}};yc(o,l,s),cl(l,s),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){t(l)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let s=0,o=n.length;s<o;s++){const a=n[s].joints;for(let l=0,c=a.length;l<c;l++)t[a[l]].isBone=!0}for(let s=0,o=t.length;s<o;s++){const a=t[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(r[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,r){if(t.refs[n]<=1)return r;const s=r.clone(),o=(a,l)=>{const c=this.associations.get(a);c!=null&&this.associations.set(l,c);for(const[u,h]of a.children.entries())o(h,l.children[u])};return o(r,s),s.name+="_instance_"+t.uses[n]++,s}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const s=t(n[r]);if(s)return s}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let s=0;s<n.length;s++){const o=t(n[s]);o&&r.push(o)}return r}getDependency(t,n){const r=t+":"+n;let s=this.cache.get(r);if(!s){switch(t){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(r,s)}return s}getDependencies(t){let n=this.cache.get(t);if(!n){const r=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(o,a){return r.getDependency(t,a)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[un.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,a){r.load(ms.resolveURL(n.uri,s.path),o,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(r){const s=n.byteLength||0,o=n.byteOffset||0;return r.slice(o,o+s)})}loadAccessor(t){const n=this,r=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const a=iS[s.type],l=qh[s.componentType],c=s.normalized===!0,u=new l(s.count*a);return Promise.resolve(new $t(u,a,c))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(a){const l=a[0],c=iS[s.type],u=qh[s.componentType],h=u.BYTES_PER_ELEMENT,f=h*c,p=s.byteOffset||0,g=s.bufferView!==void 0?r.bufferViews[s.bufferView].byteStride:void 0,v=s.normalized===!0;let _,x;if(g&&g!==f){const y=Math.floor(p/g),S="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+y+":"+s.count;let A=n.cache.get(S);A||(_=new u(l,y*g,s.count*g/h),A=new _m(_,g/h),n.cache.add(S,A)),x=new Ul(A,c,p%g/h,v)}else l===null?_=new u(s.count*c):_=new u(l,p,s.count*c),x=new $t(_,c,v);if(s.sparse!==void 0){const y=iS.SCALAR,S=qh[s.sparse.indices.componentType],A=s.sparse.indices.byteOffset||0,M=s.sparse.values.byteOffset||0,C=new S(a[1],A,s.sparse.count*y),T=new u(a[2],M,s.sparse.count*c);l!==null&&(x=new $t(x.array.slice(),x.itemSize,x.normalized));for(let R=0,I=C.length;R<I;R++){const P=C[R];if(x.setX(P,T[R*c]),c>=2&&x.setY(P,T[R*c+1]),c>=3&&x.setZ(P,T[R*c+2]),c>=4&&x.setW(P,T[R*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(t){const n=this.json,r=this.options,o=n.textures[t].source,a=n.images[o];let l=this.textureLoader;if(a.uri){const c=r.manager.getHandler(a.uri);c!==null&&(l=c)}return this.loadTextureImage(t,o,l)}loadTextureImage(t,n,r){const s=this,o=this.json,a=o.textures[t],l=o.images[n],c=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(n,r).then(function(h){h.flipY=!1,h.name=a.name||l.name||"",h.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(h.name=l.uri);const p=(o.samplers||{})[a.sampler]||{};return h.magFilter=mB[p.magFilter]||ln,h.minFilter=mB[p.minFilter]||Vo,h.wrapS=gB[p.wrapS]||Ho,h.wrapT=gB[p.wrapT]||Ho,s.associations.set(h,{textures:t}),h}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(t,n){const r=this,s=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(f=>f.clone());const a=s.images[t],l=self.URL||self.webkitURL;let c=a.uri||"",u=!1;if(a.bufferView!==void 0)c=r.getDependency("bufferView",a.bufferView).then(function(f){u=!0;const p=new Blob([f],{type:a.mimeType});return c=l.createObjectURL(p),c});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const h=Promise.resolve(c).then(function(f){return new Promise(function(p,g){let v=p;n.isImageBitmapLoader===!0&&(v=function(_){const x=new Sn(_);x.needsUpdate=!0,p(x)}),n.load(ms.resolveURL(f,o.path),v,void 0,g)})}).then(function(f){return u===!0&&l.revokeObjectURL(c),f.userData.mimeType=a.mimeType||xK(a.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[t]=h,h}assignTexture(t,n,r,s){const o=this;return this.getDependency("texture",r.index).then(function(a){if(!a)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(a=a.clone(),a.channel=r.texCoord),o.extensions[un.KHR_TEXTURE_TRANSFORM]){const l=r.extensions!==void 0?r.extensions[un.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=o.associations.get(a);a=o.extensions[un.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),o.associations.set(a,c)}}return s!==void 0&&("colorSpace"in a?a.colorSpace=s===3001?"srgb":"srgb-linear":a.encoding=s),t[n]=a,a})}assignFinalMaterial(t){const n=t.geometry;let r=t.material;const s=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,a=n.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+r.uuid;let c=this.cache.get(l);c||(c=new i_,ci.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(l,c)),r=c}else if(t.isLine){const l="LineBasicMaterial:"+r.uuid;let c=this.cache.get(l);c||(c=new lr,ci.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,this.cache.add(l,c)),r=c}if(s||o||a){let l="ClonedMaterial:"+r.uuid+":";s&&(l+="derivative-tangents:"),o&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=r.clone(),o&&(c.vertexColors=!0),a&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(r))),r=c}t.material=r}getMaterialType(){return vu}loadMaterial(t){const n=this,r=this.json,s=this.extensions,o=r.materials[t];let a;const l={},c=o.extensions||{},u=[];if(c[un.KHR_MATERIALS_UNLIT]){const f=s[un.KHR_MATERIALS_UNLIT];a=f.getMaterialType(),u.push(f.extendParams(l,o,n))}else{const f=o.pbrMetallicRoughness||{};if(l.color=new Ke(1,1,1),l.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;l.color.fromArray(p),l.opacity=p[3]}f.baseColorTexture!==void 0&&u.push(n.assignTexture(l,"map",f.baseColorTexture,3001)),l.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,l.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(l,"metalnessMap",f.metallicRoughnessTexture)),u.push(n.assignTexture(l,"roughnessMap",f.metallicRoughnessTexture))),a=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,l)})))}o.doubleSided===!0&&(l.side=Li);const h=o.alphaMode||rS.OPAQUE;if(h===rS.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,h===rS.MASK&&(l.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&a!==Ur&&(u.push(n.assignTexture(l,"normalMap",o.normalTexture)),l.normalScale=new De(1,1),o.normalTexture.scale!==void 0)){const f=o.normalTexture.scale;l.normalScale.set(f,f)}return o.occlusionTexture!==void 0&&a!==Ur&&(u.push(n.assignTexture(l,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&a!==Ur&&(l.emissive=new Ke().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&a!==Ur&&u.push(n.assignTexture(l,"emissiveMap",o.emissiveTexture,3001)),Promise.all(u).then(function(){const f=new a(l);return o.name&&(f.name=o.name),cl(f,o),n.associations.set(f,{materials:t}),o.extensions&&yc(s,f,o),f})}createUniqueName(t){const n=sn.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,r=this.extensions,s=this.primitiveCache;function o(l){return r[un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,n).then(function(c){return vB(c,l,n)})}const a=[];for(let l=0,c=t.length;l<c;l++){const u=t[l],h=_K(u),f=s[h];if(f)a.push(f.promise);else{let p;u.extensions&&u.extensions[un.KHR_DRACO_MESH_COMPRESSION]?p=o(u):p=vB(new It,u,n),s[h]={primitive:u,promise:p},a.push(p)}}return Promise.all(a)}loadMesh(t){const n=this,r=this.json,s=this.extensions,o=r.meshes[t],a=o.primitives,l=[];for(let c=0,u=a.length;c<u;c++){const h=a[c].material===void 0?gK(this.cache):this.getDependency("material",a[c].material);l.push(h)}return l.push(n.loadGeometries(a)),Promise.all(l).then(function(c){const u=c.slice(0,c.length-1),h=c[c.length-1],f=[];for(let g=0,v=h.length;g<v;g++){const _=h[g],x=a[g];let y;const S=u[g];if(x.mode===Ds.TRIANGLES||x.mode===Ds.TRIANGLE_STRIP||x.mode===Ds.TRIANGLE_FAN||x.mode===void 0)y=o.isSkinnedMesh===!0?new n_(_,S):new In(_,S),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),x.mode===Ds.TRIANGLE_STRIP?y.geometry=dB(y.geometry,_w):x.mode===Ds.TRIANGLE_FAN&&(y.geometry=dB(y.geometry,ry));else if(x.mode===Ds.LINES)y=new yo(_,S);else if(x.mode===Ds.LINE_STRIP)y=new Xo(_,S);else if(x.mode===Ds.LINE_LOOP)y=new Iw(_,S);else if(x.mode===Ds.POINTS)y=new Dw(_,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(y.geometry.morphAttributes).length>0&&yK(y,o),y.name=n.createUniqueName(o.name||"mesh_"+t),cl(y,o),x.extensions&&yc(s,y,x),n.assignFinalMaterial(y),f.push(y)}for(let g=0,v=f.length;g<v;g++)n.associations.set(f[g],{meshes:t,primitives:g});if(f.length===1)return o.extensions&&yc(s,f[0],o),f[0];const p=new ho;o.extensions&&yc(s,p,o),n.associations.set(p,{meshes:t});for(let g=0,v=f.length;g<v;g++)p.add(f[g]);return p})}loadCamera(t){let n;const r=this.json.cameras[t],s=r[r.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new Jn(ir.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):r.type==="orthographic"&&(n=new Ua(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),cl(n,r),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],r=[];for(let s=0,o=n.joints.length;s<o;s++)r.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(s){const o=s.pop(),a=s,l=[],c=[];for(let u=0,h=a.length;u<h;u++){const f=a[u];if(f){l.push(f);const p=new at;o!==null&&p.fromArray(o.array,u*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new Tf(l,c)})}loadAnimation(t){const r=this.json.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],l=[],c=[],u=[];for(let h=0,f=r.channels.length;h<f;h++){const p=r.channels[h],g=r.samplers[p.sampler],v=p.target,_=v.node,x=r.parameters!==void 0?r.parameters[g.input]:g.input,y=r.parameters!==void 0?r.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",_)),a.push(this.getDependency("accessor",x)),l.push(this.getDependency("accessor",y)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const f=h[0],p=h[1],g=h[2],v=h[3],_=h[4],x=[];for(let y=0,S=f.length;y<S;y++){const A=f[y],M=p[y],C=g[y],T=v[y],R=_[y];if(A===void 0)continue;A.updateMatrix();let I;switch(nl[R.path]){case nl.weights:I=lu;break;case nl.rotation:I=Ba;break;case nl.position:case nl.scale:default:I=cu;break}const P=A.name?A.name:A.uuid,B=T.interpolation!==void 0?mK[T.interpolation]:su,O=[];nl[R.path]===nl.weights?A.traverse(function(ne){ne.morphTargetInfluences&&O.push(ne.name?ne.name:ne.uuid)}):O.push(P);let N=C.array;if(C.normalized){const ne=YE(N.constructor),z=new Float32Array(N.length);for(let j=0,q=N.length;j<q;j++)z[j]=N[j]*ne;N=z}for(let ne=0,z=O.length;ne<z;ne++){const j=new I(O[ne]+"."+nl[R.path],M.array,N,B);T.interpolation==="CUBICSPLINE"&&(j.createInterpolant=function(he){const H=this instanceof Ba?pK:jO;return new H(this.times,this.values,this.getValueSize()/3,he)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),x.push(j)}}return new uu(s,void 0,x)})}createNodeMesh(t){const n=this.json,r=this,s=n.nodes[t];return s.mesh===void 0?null:r.getDependency("mesh",s.mesh).then(function(o){const a=r._getNodeRef(r.meshCache,s.mesh,o);return s.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let c=0,u=s.weights.length;c<u;c++)l.morphTargetInfluences[c]=s.weights[c]}),a})}loadNode(t){const n=this.json,r=this,s=n.nodes[t],o=r._loadNodeShallow(t),a=[],l=s.children||[];for(let u=0,h=l.length;u<h;u++)a.push(r.getDependency("node",l[u]));const c=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([o,Promise.all(a),c]).then(function(u){const h=u[0],f=u[1],p=u[2];p!==null&&h.traverse(function(g){g.isSkinnedMesh&&g.bind(p,SK)});for(let g=0,v=f.length;g<v;g++)h.add(f[g]);return h})}_loadNodeShallow(t){const n=this.json,r=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],a=o.name?s.createUniqueName(o.name):"",l=[],c=s._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return c&&l.push(c),o.camera!==void 0&&l.push(s.getDependency("camera",o.camera).then(function(u){return s._getNodeRef(s.cameraCache,o.camera,u)})),s._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){l.push(u)}),this.nodeCache[t]=Promise.all(l).then(function(u){let h;if(o.isBone===!0?h=new ff:u.length>1?h=new ho:u.length===1?h=u[0]:h=new tn,h!==u[0])for(let f=0,p=u.length;f<p;f++)h.add(u[f]);if(o.name&&(h.userData.name=o.name,h.name=a),cl(h,o),o.extensions&&yc(r,h,o),o.matrix!==void 0){const f=new at;f.fromArray(o.matrix),h.applyMatrix4(f)}else o.translation!==void 0&&h.position.fromArray(o.translation),o.rotation!==void 0&&h.quaternion.fromArray(o.rotation),o.scale!==void 0&&h.scale.fromArray(o.scale);return s.associations.has(h)||s.associations.set(h,{}),s.associations.get(h).nodes=t,h}),this.nodeCache[t]}loadScene(t){const n=this.extensions,r=this.json.scenes[t],s=this,o=new ho;r.name&&(o.name=s.createUniqueName(r.name)),cl(o,r),r.extensions&&yc(n,o,r);const a=r.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(s.getDependency("node",a[c]));return Promise.all(l).then(function(c){for(let h=0,f=c.length;h<f;h++)o.add(c[h]);const u=h=>{const f=new Map;for(const[p,g]of s.associations)(p instanceof ci||p instanceof Sn)&&f.set(p,g);return h.traverse(p=>{const g=s.associations.get(p);g!=null&&f.set(p,g)}),f};return s.associations=u(o),o})}}function EK(i,t,n){const r=t.attributes,s=new Qi;if(r.POSITION!==void 0){const l=n.json.accessors[r.POSITION],c=l.min,u=l.max;if(c!==void 0&&u!==void 0){if(s.set(new Y(c[0],c[1],c[2]),new Y(u[0],u[1],u[2])),l.normalized){const h=YE(qh[l.componentType]);s.min.multiplyScalar(h),s.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const l=new Y,c=new Y;for(let u=0,h=o.length;u<h;u++){const f=o[u];if(f.POSITION!==void 0){const p=n.json.accessors[f.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){const _=YE(qh[p.componentType]);c.multiplyScalar(_)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}i.boundingBox=s;const a=new Oi;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function vB(i,t,n){const r=t.attributes,s=[];function o(a,l){return n.getDependency("accessor",a).then(function(c){i.setAttribute(l,c)})}for(const a in r){const l=jE[a]||a.toLowerCase();l in i.attributes||s.push(o(r[a],l))}if(t.indices!==void 0&&!i.index){const a=n.getDependency("accessor",t.indices).then(function(l){i.setIndex(l)});s.push(a)}return cl(i,t),EK(i,t,n),Promise.all(s).then(function(){return t.targets!==void 0?vK(i,t.targets,n):i})}function YO(i,t,n){const r=n.length-i-1;if(t>=n[r])return r-1;if(t<=n[i])return i;let s=i,o=r,a=Math.floor((s+o)/2);for(;t<n[a]||t>=n[a+1];)t<n[a]?o=a:s=a,a=Math.floor((s+o)/2);return a}function MK(i,t,n,r){const s=[],o=[],a=[];s[0]=1;for(let l=1;l<=n;++l){o[l]=t-r[i+1-l],a[l]=r[i+l]-t;let c=0;for(let u=0;u<l;++u){const h=a[u+1],f=o[l-u],p=s[u]/(h+f);s[u]=c+h*p,c=f*p}s[l]=c}return s}function wK(i,t,n,r){const s=YO(i,r,t),o=MK(s,r,i,t),a=new qt(0,0,0,0);for(let l=0;l<=i;++l){const c=n[s-i+l],u=o[l],h=c.w*u;a.x+=c.x*h,a.y+=c.y*h,a.z+=c.z*h,a.w+=c.w*u}return a}function TK(i,t,n,r,s){const o=[];for(let f=0;f<=n;++f)o[f]=0;const a=[];for(let f=0;f<=r;++f)a[f]=o.slice(0);const l=[];for(let f=0;f<=n;++f)l[f]=o.slice(0);l[0][0]=1;const c=o.slice(0),u=o.slice(0);for(let f=1;f<=n;++f){c[f]=t-s[i+1-f],u[f]=s[i+f]-t;let p=0;for(let g=0;g<f;++g){const v=u[g+1],_=c[f-g];l[f][g]=v+_;const x=l[g][f-1]/l[f][g];l[g][f]=p+v*x,p=_*x}l[f][f]=p}for(let f=0;f<=n;++f)a[0][f]=l[f][n];for(let f=0;f<=n;++f){let p=0,g=1;const v=[];for(let _=0;_<=n;++_)v[_]=o.slice(0);v[0][0]=1;for(let _=1;_<=r;++_){let x=0;const y=f-_,S=n-_;f>=_&&(v[g][0]=v[p][0]/l[S+1][y],x=v[g][0]*l[y][S]);const A=y>=-1?1:-y,M=f-1<=S?_-1:n-f;for(let T=A;T<=M;++T)v[g][T]=(v[p][T]-v[p][T-1])/l[S+1][y+T],x+=v[g][T]*l[y+T][S];f<=S&&(v[g][_]=-v[p][_-1]/l[S+1][f],x+=v[g][_]*l[f][S]),a[_][f]=x;const C=p;p=g,g=C}}let h=n;for(let f=1;f<=r;++f){for(let p=0;p<=n;++p)a[f][p]*=h;h*=n-f}return a}function CK(i,t,n,r,s){const o=s<i?s:i,a=[],l=YO(i,r,t),c=TK(l,r,i,o,t),u=[];for(let h=0;h<n.length;++h){const f=n[h].clone(),p=f.w;f.x*=p,f.y*=p,f.z*=p,u[h]=f}for(let h=0;h<=o;++h){const f=u[l-i].clone().multiplyScalar(c[h][0]);for(let p=1;p<=i;++p)f.add(u[l-i+p].clone().multiplyScalar(c[h][p]));a[h]=f}for(let h=o+1;h<=s+1;++h)a[h]=new qt(0,0,0);return a}function bK(i,t){let n=1;for(let s=2;s<=i;++s)n*=s;let r=1;for(let s=2;s<=t;++s)r*=s;for(let s=2;s<=i-t;++s)r*=s;return n/r}function RK(i){const t=i.length,n=[],r=[];for(let o=0;o<t;++o){const a=i[o];n[o]=new Y(a.x,a.y,a.z),r[o]=a.w}const s=[];for(let o=0;o<t;++o){const a=n[o].clone();for(let l=1;l<=o;++l)a.sub(s[o-l].clone().multiplyScalar(bK(o,l)*r[l]));s[o]=a.divideScalar(r[0])}return s}function PK(i,t,n,r,s){const o=CK(i,t,n,r,s);return RK(o)}class yB extends Ys{constructor(t,n,r,s,o){super(),this.degree=t,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let a=0;a<r.length;++a){const l=r[a];this.controlPoints[a]=new qt(l.x,l.y,l.z,l.w)}}getPoint(t,n){const r=n||new Y,s=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=wK(this.degree,this.knots,this.controlPoints,s);return o.w!=1&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)}getTangent(t,n){const r=n||new Y,s=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),o=PK(this.degree,this.knots,this.controlPoints,s,1);return r.copy(o[1]).normalize(),r}}let an,vi,jr;class wT extends qi{constructor(t){super(t)}load(t,n,r,s){const o=this,a=o.path===""?ms.extractUrlBase(t):o.path,l=new Or(this.manager);l.setPath(o.path),l.setResponseType("arraybuffer"),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(t,function(c){try{n(o.parse(c,a))}catch(u){s?s(u):console.error(u),o.manager.itemError(t)}},r,s)}parse(t,n){if(FK(t))an=new UK().parse(t);else{const s=QO(t);if(!OK(s))throw new Error("THREE.FBXLoader: Unknown format.");if(xB(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+xB(s));an=new LK().parse(s)}const r=new Rf(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new BK(r,this.manager).parse(an)}}class BK{constructor(t,n){this.textureLoader=t,this.manager=n}parse(){vi=this.parseConnections();const t=this.parseImages(),n=this.parseTextures(t),r=this.parseMaterials(n),s=this.parseDeformers(),o=new IK().parse(s);return this.parseScene(s,o,r),jr}parseConnections(){const t=new Map;return"Connections"in an&&an.Connections.connections.forEach(function(r){const s=r[0],o=r[1],a=r[2];t.has(s)||t.set(s,{parents:[],children:[]});const l={ID:o,relationship:a};t.get(s).parents.push(l),t.has(o)||t.set(o,{parents:[],children:[]});const c={ID:s,relationship:a};t.get(o).children.push(c)}),t}parseImages(){const t={},n={};if("Video"in an.Objects){const r=an.Objects.Video;for(const s in r){const o=r[s],a=parseInt(s);if(t[a]=o.RelativeFilename||o.Filename,"Content"in o){const l=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,c=typeof o.Content=="string"&&o.Content!=="";if(l||c){const u=this.parseImage(r[s]);n[o.RelativeFilename||o.Filename]=u}}}}for(const r in t){const s=t[r];n[s]!==void 0?t[r]=n[s]:t[r]=t[r].split("\\").pop()}return t}parseImage(t){const n=t.Content,r=t.RelativeFilename||t.Filename,s=r.slice(r.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const a=new Uint8Array(n);return window.URL.createObjectURL(new Blob([a],{type:o}))}}parseTextures(t){const n=new Map;if("Texture"in an.Objects){const r=an.Objects.Texture;for(const s in r){const o=this.parseTexture(r[s],t);n.set(parseInt(s),o)}}return n}parseTexture(t,n){const r=this.loadTexture(t,n);r.ID=t.id,r.name=t.attrName;const s=t.WrapModeU,o=t.WrapModeV,a=s!==void 0?s.value:0,l=o!==void 0?o.value:0;if(r.wrapS=a===0?Ho:Ui,r.wrapT=l===0?Ho:Ui,"Scaling"in t){const c=t.Scaling.value;r.repeat.x=c[0],r.repeat.y=c[1]}return r}loadTexture(t,n){let r;const s=this.textureLoader.path,o=vi.get(t.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(r=n[o[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const l=t.FileName.slice(-3).toLowerCase();if(l==="tga"){const c=this.manager.getHandler(".tga");c===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),a=new Sn):(c.setPath(this.textureLoader.path),a=c.load(r))}else l==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),a=new Sn):a=this.textureLoader.load(r);return this.textureLoader.setPath(s),a}parseMaterials(t){const n=new Map;if("Material"in an.Objects){const r=an.Objects.Material;for(const s in r){const o=this.parseMaterial(r[s],t);o!==null&&n.set(parseInt(s),o)}}return n}parseMaterial(t,n){const r=t.id,s=t.attrName;let o=t.ShadingModel;if(typeof o=="object"&&(o=o.value),!vi.has(r))return null;const a=this.parseParameters(t,n,r);let l;switch(o.toLowerCase()){case"phong":l=new lp;break;case"lambert":l=new Gw;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),l=new lp;break}return l.setValues(a),l.name=s,l}parseParameters(t,n,r){const s={};t.BumpFactor&&(s.bumpScale=t.BumpFactor.value),t.Diffuse?s.color=new Ke().fromArray(t.Diffuse.value):t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(s.color=new Ke().fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(s.displacementScale=t.DisplacementFactor.value),t.Emissive?s.emissive=new Ke().fromArray(t.Emissive.value):t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(s.emissive=new Ke().fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(s.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(s.opacity=parseFloat(t.Opacity.value)),s.opacity<1&&(s.transparent=!0),t.ReflectionFactor&&(s.reflectivity=t.ReflectionFactor.value),t.Shininess&&(s.shininess=t.Shininess.value),t.Specular?s.specular=new Ke().fromArray(t.Specular.value):t.SpecularColor&&t.SpecularColor.type==="Color"&&(s.specular=new Ke().fromArray(t.SpecularColor.value));const o=this;return vi.get(r).children.forEach(function(a){const l=a.relationship;switch(l){case"Bump":s.bumpMap=o.getTexture(n,a.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(n,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(n,a.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=o.getTexture(n,a.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(n,a.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(n,a.ID);break;case"ReflectionColor":s.envMap=o.getTexture(n,a.ID),s.envMap!==void 0&&(s.envMap.mapping=ru,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=o.getTexture(n,a.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(n,a.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",l);break}}),s}getTexture(t,n){return"LayeredTexture"in an.Objects&&n in an.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=vi.get(n).children[0].ID),t.get(n)}parseDeformers(){const t={},n={};if("Deformer"in an.Objects){const r=an.Objects.Deformer;for(const s in r){const o=r[s],a=vi.get(parseInt(s));if(o.attrType==="Skin"){const l=this.parseSkeleton(a,r);l.ID=s,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=a.parents[0].ID,t[s]=l}else if(o.attrType==="BlendShape"){const l={id:s};l.rawTargets=this.parseMorphTargets(a,r),l.id=s,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=l}}}return{skeletons:t,morphTargets:n}}parseSkeleton(t,n){const r=[];return t.children.forEach(function(s){const o=n[s.ID];if(o.attrType!=="Cluster")return;const a={ID:s.ID,indices:[],weights:[],transformLink:new at().fromArray(o.TransformLink.a)};"Indexes"in o&&(a.indices=o.Indexes.a,a.weights=o.Weights.a),r.push(a)}),{rawBones:r,bones:[]}}parseMorphTargets(t,n){const r=[];for(let s=0;s<t.children.length;s++){const o=t.children[s],a=n[o.ID],l={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;l.geoID=vi.get(parseInt(o.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,r.push(l)}return r}parseScene(t,n,r){jr=new ho;const s=this.parseModels(t.skeletons,n,r),o=an.Objects.Model,a=this;s.forEach(function(c){const u=o[c.ID];a.setLookAtProperties(c,u),vi.get(c.ID).parents.forEach(function(f){const p=s.get(f.ID);p!==void 0&&p.add(c)}),c.parent===null&&jr.add(c)}),this.bindSkeleton(t.skeletons,n,s),this.createAmbientLight(),jr.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);const u=KO(c.userData.transformData);c.applyMatrix4(u),c.updateWorldMatrix()}});const l=new DK().parse();jr.children.length===1&&jr.children[0].isGroup&&(jr.children[0].animations=l,jr=jr.children[0]),jr.animations=l}parseModels(t,n,r){const s=new Map,o=an.Objects.Model;for(const a in o){const l=parseInt(a),c=o[a],u=vi.get(l);let h=this.buildSkeleton(u,t,l,c.attrName);if(!h){switch(c.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,n,r);break;case"NurbsCurve":h=this.createCurve(u,n);break;case"LimbNode":case"Root":h=new ff;break;case"Null":default:h=new ho;break}h.name=c.attrName?sn.sanitizeNodeName(c.attrName):"",h.ID=l}this.getTransformData(h,c),s.set(l,h)}return s}buildSkeleton(t,n,r,s){let o=null;return t.parents.forEach(function(a){for(const l in n){const c=n[l];c.rawBones.forEach(function(u,h){if(u.ID===a.ID){const f=o;o=new ff,o.matrixWorld.copy(u.transformLink),o.name=s?sn.sanitizeNodeName(s):"",o.ID=r,c.bones[h]=o,f!==null&&o.add(f)}})}}),o}createCamera(t){let n,r;if(t.children.forEach(function(s){const o=an.Objects.NodeAttribute[s.ID];o!==void 0&&(r=o)}),r===void 0)n=new tn;else{let s=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(s=1);let o=1;r.NearPlane!==void 0&&(o=r.NearPlane.value/1e3);let a=1e3;r.FarPlane!==void 0&&(a=r.FarPlane.value/1e3);let l=window.innerWidth,c=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(l=r.AspectWidth.value,c=r.AspectHeight.value);const u=l/c;let h=45;r.FieldOfView!==void 0&&(h=r.FieldOfView.value);const f=r.FocalLength?r.FocalLength.value:null;switch(s){case 0:n=new Jn(h,u,o,a),f!==null&&n.setFocalLength(f);break;case 1:n=new Ua(-l/2,l/2,c/2,-c/2,o,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new tn;break}}return n}createLight(t){let n,r;if(t.children.forEach(function(s){const o=an.Objects.NodeAttribute[s.ID];o!==void 0&&(r=o)}),r===void 0)n=new tn;else{let s;r.LightType===void 0?s=0:s=r.LightType.value;let o=16777215;r.Color!==void 0&&(o=new Ke().fromArray(r.Color.value));let a=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(a=0);let l=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?l=0:l=r.FarAttenuationEnd.value);const c=1;switch(s){case 0:n=new Qp(o,a,l,c);break;case 1:n=new __(o,a);break;case 2:let u=Math.PI/3;r.InnerAngle!==void 0&&(u=ir.degToRad(r.InnerAngle.value));let h=0;r.OuterAngle!==void 0&&(h=ir.degToRad(r.OuterAngle.value),h=Math.max(h,1)),n=new y_(o,a,l,u,h,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new Qp(o,a);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(t,n,r){let s,o=null,a=null;const l=[];return t.children.forEach(function(c){n.has(c.ID)&&(o=n.get(c.ID)),r.has(c.ID)&&l.push(r.get(c.ID))}),l.length>1?a=l:l.length>0?a=l[0]:(a=new lp({color:13421772}),l.push(a)),"color"in o.attributes&&l.forEach(function(c){c.vertexColors=!0}),o.FBX_Deformer?(s=new n_(o,a),s.normalizeSkinWeights()):s=new In(o,a),s}createCurve(t,n){const r=t.children.reduce(function(o,a){return n.has(a.ID)&&(o=n.get(a.ID)),o},null),s=new lr({color:3342591,linewidth:1});return new Xo(r,s)}getTransformData(t,n){const r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=ZO(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),t.userData.transformData=r}setLookAtProperties(t,n){"LookAtProperty"in n&&vi.get(t.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const o=an.Objects.Model[s.ID];if("Lcl_Translation"in o){const a=o.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(a),jr.add(t.target)):t.lookAt(new Y().fromArray(a))}}})}bindSkeleton(t,n,r){const s=this.parsePoseNodes();for(const o in t){const a=t[o];vi.get(parseInt(a.ID)).parents.forEach(function(c){if(n.has(c.ID)){const u=c.ID;vi.get(u).parents.forEach(function(f){r.has(f.ID)&&r.get(f.ID).bind(new Tf(a.bones),s[f.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in an.Objects){const n=an.Objects.Pose;for(const r in n)if(n[r].attrType==="BindPose"&&n[r].NbPoseNodes>0){const s=n[r].PoseNode;Array.isArray(s)?s.forEach(function(o){t[o.Node]=new at().fromArray(o.Matrix.a)}):t[s.Node]=new at().fromArray(s.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in an&&"AmbientColor"in an.GlobalSettings){const t=an.GlobalSettings.AmbientColor.value,n=t[0],r=t[1],s=t[2];if(n!==0||r!==0||s!==0){const o=new Ke(n,r,s);jr.add(new Jw(o,1))}}}}class IK{parse(t){const n=new Map;if("Geometry"in an.Objects){const r=an.Objects.Geometry;for(const s in r){const o=vi.get(parseInt(s)),a=this.parseGeometry(o,r[s],t);n.set(parseInt(s),a)}}return n}parseGeometry(t,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(t,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(t,n,r){const s=r.skeletons,o=[],a=t.parents.map(function(f){return an.Objects.Model[f.ID]});if(a.length===0)return;const l=t.children.reduce(function(f,p){return s[p.ID]!==void 0&&(f=s[p.ID]),f},null);t.children.forEach(function(f){r.morphTargets[f.ID]!==void 0&&o.push(r.morphTargets[f.ID])});const c=a[0],u={};"RotationOrder"in c&&(u.eulerOrder=ZO(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);const h=KO(u);return this.genGeometry(n,l,o,h)}genGeometry(t,n,r,s){const o=new It;t.attrName&&(o.name=t.attrName);const a=this.parseGeoNode(t,n),l=this.genBuffers(a),c=new pt(l.vertex,3);if(c.applyMatrix4(s),o.setAttribute("position",c),l.colors.length>0&&o.setAttribute("color",new pt(l.colors,3)),n&&(o.setAttribute("skinIndex",new Zy(l.weightsIndices,4)),o.setAttribute("skinWeight",new pt(l.vertexWeights,4)),o.FBX_Deformer=n),l.normal.length>0){const u=new Yt().getNormalMatrix(s),h=new pt(l.normal,3);h.applyNormalMatrix(u),o.setAttribute("normal",h)}if(l.uvs.forEach(function(u,h){let f="uv"+(h+1).toString();h===0&&(f="uv"),o.setAttribute(f,new pt(l.uvs[h],2))}),a.material&&a.material.mappingType!=="AllSame"){let u=l.materialIndex[0],h=0;if(l.materialIndex.forEach(function(f,p){f!==u&&(o.addGroup(h,p-h,u),u=f,h=p)}),o.groups.length>0){const f=o.groups[o.groups.length-1],p=f.start+f.count;p!==l.materialIndex.length&&o.addGroup(p,l.materialIndex.length-p,u)}o.groups.length===0&&o.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(o,t,r,s),o}parseGeoNode(t,n){const r={};if(r.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],r.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(r.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(r.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(r.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){r.uv=[];let s=0;for(;t.LayerElementUV[s];)t.LayerElementUV[s].UV&&r.uv.push(this.parseUVs(t.LayerElementUV[s])),s++}return r.weightTable={},n!==null&&(r.skeleton=n,n.rawBones.forEach(function(s,o){s.indices.forEach(function(a,l){r.weightTable[a]===void 0&&(r.weightTable[a]=[]),r.weightTable[a].push({id:o,weight:s.weights[l]})})})),r}genBuffers(t){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,s=0,o=!1,a=[],l=[],c=[],u=[],h=[],f=[];const p=this;return t.vertexIndices.forEach(function(g,v){let _,x=!1;g<0&&(g=g^-1,x=!0);let y=[],S=[];if(a.push(g*3,g*3+1,g*3+2),t.color){const A=Gv(v,r,g,t.color);c.push(A[0],A[1],A[2])}if(t.skeleton){if(t.weightTable[g]!==void 0&&t.weightTable[g].forEach(function(A){S.push(A.weight),y.push(A.id)}),S.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const A=[0,0,0,0],M=[0,0,0,0];S.forEach(function(C,T){let R=C,I=y[T];M.forEach(function(P,B,O){if(R>P){O[B]=R,R=P;const N=A[B];A[B]=I,I=N}})}),y=A,S=M}for(;S.length<4;)S.push(0),y.push(0);for(let A=0;A<4;++A)h.push(S[A]),f.push(y[A])}if(t.normal){const A=Gv(v,r,g,t.normal);l.push(A[0],A[1],A[2])}t.material&&t.material.mappingType!=="AllSame"&&(_=Gv(v,r,g,t.material)[0]),t.uv&&t.uv.forEach(function(A,M){const C=Gv(v,r,g,A);u[M]===void 0&&(u[M]=[]),u[M].push(C[0]),u[M].push(C[1])}),s++,x&&(p.genFace(n,t,a,_,l,c,u,h,f,s),r++,s=0,a=[],l=[],c=[],u=[],h=[],f=[])}),n}genFace(t,n,r,s,o,a,l,c,u,h){for(let f=2;f<h;f++)t.vertex.push(n.vertexPositions[r[0]]),t.vertex.push(n.vertexPositions[r[1]]),t.vertex.push(n.vertexPositions[r[2]]),t.vertex.push(n.vertexPositions[r[(f-1)*3]]),t.vertex.push(n.vertexPositions[r[(f-1)*3+1]]),t.vertex.push(n.vertexPositions[r[(f-1)*3+2]]),t.vertex.push(n.vertexPositions[r[f*3]]),t.vertex.push(n.vertexPositions[r[f*3+1]]),t.vertex.push(n.vertexPositions[r[f*3+2]]),n.skeleton&&(t.vertexWeights.push(c[0]),t.vertexWeights.push(c[1]),t.vertexWeights.push(c[2]),t.vertexWeights.push(c[3]),t.vertexWeights.push(c[(f-1)*4]),t.vertexWeights.push(c[(f-1)*4+1]),t.vertexWeights.push(c[(f-1)*4+2]),t.vertexWeights.push(c[(f-1)*4+3]),t.vertexWeights.push(c[f*4]),t.vertexWeights.push(c[f*4+1]),t.vertexWeights.push(c[f*4+2]),t.vertexWeights.push(c[f*4+3]),t.weightsIndices.push(u[0]),t.weightsIndices.push(u[1]),t.weightsIndices.push(u[2]),t.weightsIndices.push(u[3]),t.weightsIndices.push(u[(f-1)*4]),t.weightsIndices.push(u[(f-1)*4+1]),t.weightsIndices.push(u[(f-1)*4+2]),t.weightsIndices.push(u[(f-1)*4+3]),t.weightsIndices.push(u[f*4]),t.weightsIndices.push(u[f*4+1]),t.weightsIndices.push(u[f*4+2]),t.weightsIndices.push(u[f*4+3])),n.color&&(t.colors.push(a[0]),t.colors.push(a[1]),t.colors.push(a[2]),t.colors.push(a[(f-1)*3]),t.colors.push(a[(f-1)*3+1]),t.colors.push(a[(f-1)*3+2]),t.colors.push(a[f*3]),t.colors.push(a[f*3+1]),t.colors.push(a[f*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(t.materialIndex.push(s),t.materialIndex.push(s),t.materialIndex.push(s)),n.normal&&(t.normal.push(o[0]),t.normal.push(o[1]),t.normal.push(o[2]),t.normal.push(o[(f-1)*3]),t.normal.push(o[(f-1)*3+1]),t.normal.push(o[(f-1)*3+2]),t.normal.push(o[f*3]),t.normal.push(o[f*3+1]),t.normal.push(o[f*3+2])),n.uv&&n.uv.forEach(function(p,g){t.uvs[g]===void 0&&(t.uvs[g]=[]),t.uvs[g].push(l[g][0]),t.uvs[g].push(l[g][1]),t.uvs[g].push(l[g][(f-1)*2]),t.uvs[g].push(l[g][(f-1)*2+1]),t.uvs[g].push(l[g][f*2]),t.uvs[g].push(l[g][f*2+1])})}addMorphTargets(t,n,r,s){if(r.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const o=this;r.forEach(function(a){a.rawTargets.forEach(function(l){const c=an.Objects.Geometry[l.geoID];c!==void 0&&o.genMorphGeometry(t,n,c,s,l.name)})})}genMorphGeometry(t,n,r,s,o){const a=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],l=r.Vertices!==void 0?r.Vertices.a:[],c=r.Indexes!==void 0?r.Indexes.a:[],u=t.attributes.position.count*3,h=new Float32Array(u);for(let v=0;v<c.length;v++){const _=c[v]*3;h[_]=l[v*3],h[_+1]=l[v*3+1],h[_+2]=l[v*3+2]}const f={vertexIndices:a,vertexPositions:h},p=this.genBuffers(f),g=new pt(p.vertex,3);g.name=o||r.attrName,g.applyMatrix4(s),t.morphAttributes.position.push(g)}parseNormals(t){const n=t.MappingInformationType,r=t.ReferenceInformationType,s=t.Normals.a;let o=[];return r==="IndexToDirect"&&("NormalIndex"in t?o=t.NormalIndex.a:"NormalsIndex"in t&&(o=t.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:n,referenceType:r}}parseUVs(t){const n=t.MappingInformationType,r=t.ReferenceInformationType,s=t.UV.a;let o=[];return r==="IndexToDirect"&&(o=t.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:n,referenceType:r}}parseVertexColors(t){const n=t.MappingInformationType,r=t.ReferenceInformationType,s=t.Colors.a;let o=[];return r==="IndexToDirect"&&(o=t.ColorIndex.a),{dataSize:4,buffer:s,indices:o,mappingType:n,referenceType:r}}parseMaterialIndices(t){const n=t.MappingInformationType,r=t.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const s=t.Materials.a,o=[];for(let a=0;a<s.length;++a)o.push(a);return{dataSize:1,buffer:s,indices:o,mappingType:n,referenceType:r}}parseNurbsGeometry(t){if(yB===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new It;const n=parseInt(t.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new It;const r=n-1,s=t.KnotVector.a,o=[],a=t.Points.a;for(let f=0,p=a.length;f<p;f+=4)o.push(new qt().fromArray(a,f));let l,c;if(t.Form==="Closed")o.push(o[0]);else if(t.Form==="Periodic"){l=r,c=s.length-1-l;for(let f=0;f<r;++f)o.push(o[f])}const h=new yB(r,s,o,l,c).getPoints(o.length*12);return new It().setFromPoints(h)}}class DK{parse(){const t=[],n=this.parseClips();if(n!==void 0)for(const r in n){const s=n[r],o=this.addClip(s);t.push(o)}return t}parseClips(){if(an.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const t=an.Objects.AnimationCurveNode,n=new Map;for(const r in t){const s=t[r];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(t){const n=an.Objects.AnimationCurve;for(const r in n){const s={id:n[r].id,times:n[r].KeyTime.a.map(NK),values:n[r].KeyValueFloat.a},o=vi.get(s.id);if(o!==void 0){const a=o.parents[0].ID,l=o.parents[0].relationship;l.match(/X/)?t.get(a).curves.x=s:l.match(/Y/)?t.get(a).curves.y=s:l.match(/Z/)?t.get(a).curves.z=s:l.match(/d|DeformPercent/)&&t.has(a)&&(t.get(a).curves.morph=s)}}}parseAnimationLayers(t){const n=an.Objects.AnimationLayer,r=new Map;for(const s in n){const o=[],a=vi.get(parseInt(s));a!==void 0&&(a.children.forEach(function(c,u){if(t.has(c.ID)){const h=t.get(c.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(o[u]===void 0){const f=vi.get(c.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(f!==void 0){const p=an.Objects.Model[f.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}const g={modelName:p.attrName?sn.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};jr.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new at),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),o[u]=g}}o[u]&&(o[u][h.attr]=h)}else if(h.curves.morph!==void 0){if(o[u]===void 0){const f=vi.get(c.ID).parents.filter(function(y){return y.relationship!==void 0})[0].ID,p=vi.get(f).parents[0].ID,g=vi.get(p).parents[0].ID,v=vi.get(g).parents[0].ID,_=an.Objects.Model[v],x={modelName:_.attrName?sn.sanitizeNodeName(_.attrName):"",morphName:an.Objects.Deformer[f].attrName};o[u]=x}o[u][h.attr]=h}}}),r.set(parseInt(s),o))}return r}parseAnimStacks(t){const n=an.Objects.AnimationStack,r={};for(const s in n){const o=vi.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=t.get(o[0].ID);r[s]={name:n[s].attrName,layer:a}}return r}addClip(t){let n=[];const r=this;return t.layer.forEach(function(s){n=n.concat(r.generateTracks(s))}),new uu(t.name,-1,n)}generateTracks(t){const n=[];let r=new Y,s=new xi,o=new Y;if(t.transform&&t.transform.decompose(r,s,o),r=r.toArray(),s=new uo().setFromQuaternion(s,t.eulerOrder).toArray(),o=o.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const a=this.generateVectorTrack(t.modelName,t.T.curves,r,"position");a!==void 0&&n.push(a)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const a=this.generateRotationTrack(t.modelName,t.R.curves,s,t.preRotation,t.postRotation,t.eulerOrder);a!==void 0&&n.push(a)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const a=this.generateVectorTrack(t.modelName,t.S.curves,o,"scale");a!==void 0&&n.push(a)}if(t.DeformPercent!==void 0){const a=this.generateMorphTrack(t);a!==void 0&&n.push(a)}return n}generateVectorTrack(t,n,r,s){const o=this.getTimesForAllAxes(n),a=this.getKeyframeTrackValues(o,n,r);return new cu(t+"."+s,o,a)}generateRotationTrack(t,n,r,s,o,a){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(ir.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(ir.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(ir.degToRad));const l=this.getTimesForAllAxes(n),c=this.getKeyframeTrackValues(l,n,r);s!==void 0&&(s=s.map(ir.degToRad),s.push(a),s=new uo().fromArray(s),s=new xi().setFromEuler(s)),o!==void 0&&(o=o.map(ir.degToRad),o.push(a),o=new uo().fromArray(o),o=new xi().setFromEuler(o).invert());const u=new xi,h=new uo,f=[];for(let p=0;p<c.length;p+=3)h.set(c[p],c[p+1],c[p+2],a),u.setFromEuler(h),s!==void 0&&u.premultiply(s),o!==void 0&&u.multiply(o),u.toArray(f,p/3*4);return new Ba(t+".quaternion",l,f)}generateMorphTrack(t){const n=t.DeformPercent.curves.morph,r=n.values.map(function(o){return o/100}),s=jr.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new lu(t.modelName+".morphTargetInfluences["+s+"]",n.times,r)}getTimesForAllAxes(t){let n=[];if(t.x!==void 0&&(n=n.concat(t.x.times)),t.y!==void 0&&(n=n.concat(t.y.times)),t.z!==void 0&&(n=n.concat(t.z.times)),n=n.sort(function(r,s){return r-s}),n.length>1){let r=1,s=n[0];for(let o=1;o<n.length;o++){const a=n[o];a!==s&&(n[r]=a,s=a,r++)}n=n.slice(0,r)}return n}getKeyframeTrackValues(t,n,r){const s=r,o=[];let a=-1,l=-1,c=-1;return t.forEach(function(u){if(n.x&&(a=n.x.times.indexOf(u)),n.y&&(l=n.y.times.indexOf(u)),n.z&&(c=n.z.times.indexOf(u)),a!==-1){const h=n.x.values[a];o.push(h),s[0]=h}else o.push(s[0]);if(l!==-1){const h=n.y.values[l];o.push(h),s[1]=h}else o.push(s[1]);if(c!==-1){const h=n.z.values[c];o.push(h),s[2]=h}else o.push(s[2])}),o}interpolateRotations(t){for(let n=1;n<t.values.length;n++){const r=t.values[n-1],s=t.values[n]-r,o=Math.abs(s);if(o>=180){const a=o/180,l=s/a;let c=r+l;const u=t.times[n-1],f=(t.times[n]-u)/a;let p=u+f;const g=[],v=[];for(;p<t.times[n];)g.push(p),p+=f,v.push(c),c+=l;t.times=SB(t.times,n,g),t.values=SB(t.values,n,v)}}}}class LK{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,n){this.currentProp=t,this.currentPropName=n}parse(t){this.currentIndent=0,this.allNodes=new JO,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,r=t.split(/[\r\n]+/);return r.forEach(function(s,o){const a=s.match(/^[\s\t]*;/),l=s.match(/^[\s\t]*$/);if(a||l)return;const c=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),u=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=s.match("^\\t{"+(n.currentIndent-1)+"}}");c?n.parseNodeBegin(s,c):u?n.parseNodeProperty(s,u,r[++o]):h?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(t,n){const r=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},a=this.parseNodeAttr(s),l=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,o):r in l?(r==="PoseNode"?l.PoseNode.push(o):l[r].id!==void 0&&(l[r]={},l[r][l[r].id]=l[r]),a.id!==""&&(l[r][a.id]=o)):typeof a.id=="number"?(l[r]={},l[r][a.id]=o):r!=="Properties70"&&(r==="PoseNode"?l[r]=[o]:l[r]=o),typeof a.id=="number"&&(o.id=a.id),a.name!==""&&(o.attrName=a.name),a.type!==""&&(o.attrType=a.type),this.pushStack(o)}parseNodeAttr(t){let n=t[0];t[0]!==""&&(n=parseInt(t[0]),isNaN(n)&&(n=t[0]));let r="",s="";return t.length>1&&(r=t[1].replace(/^(\w+)::/,""),s=t[2]),{id:n,name:r,type:s}}parseNodeProperty(t,n,r){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(t,s,o);return}if(s==="C"){const c=o.split(",").slice(1),u=parseInt(c[0]),h=parseInt(c[1]);let f=o.split(",").slice(3);f=f.map(function(p){return p.trim().replace(/^"/,"")}),s="connections",o=[u,h],zK(o,f),a[s]===void 0&&(a[s]=[])}s==="Node"&&(a.id=o),s in a&&Array.isArray(a[s])?a[s].push(o):s!=="a"?a[s]=o:a.a=o,this.setCurrentProp(a,s),s==="a"&&o.slice(-1)!==","&&(a.a=aS(o))}parseNodePropertyContinued(t){const n=this.getCurrentNode();n.a+=t,t.slice(-1)!==","&&(n.a=aS(n.a))}parseNodeSpecialProperty(t,n,r){const s=r.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],a=s[1],l=s[2],c=s[3];let u=s[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=aS(u);break}this.getPrevNode()[o]={type:a,type2:l,flag:c,value:u},this.setCurrentProp(this.getPrevNode(),o)}}class UK{parse(t){const n=new _B(t);n.skip(23);const r=n.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const s=new JO;for(;!this.endOfContent(n);){const o=this.parseNode(n,r);o!==null&&s.add(o.name,o)}return s}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,n){const r={},s=n>=7500?t.getUint64():t.getUint32(),o=n>=7500?t.getUint64():t.getUint32();n>=7500?t.getUint64():t.getUint32();const a=t.getUint8(),l=t.getString(a);if(s===0)return null;const c=[];for(let p=0;p<o;p++)c.push(this.parseProperty(t));const u=c.length>0?c[0]:"",h=c.length>1?c[1]:"",f=c.length>2?c[2]:"";for(r.singleProperty=o===1&&t.getOffset()===s;s>t.getOffset();){const p=this.parseNode(t,n);p!==null&&this.parseSubNode(l,r,p)}return r.propertyList=c,typeof u=="number"&&(r.id=u),h!==""&&(r.attrName=h),f!==""&&(r.attrType=f),l!==""&&(r.name=l),r}parseSubNode(t,n,r){if(r.singleProperty===!0){const s=r.propertyList[0];Array.isArray(s)?(n[r.name]=r,r.a=s):n[r.name]=s}else if(t==="Connections"&&r.name==="C"){const s=[];r.propertyList.forEach(function(o,a){a!==0&&s.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(r.name==="Properties70")Object.keys(r).forEach(function(o){n[o]=r[o]});else if(t==="Properties70"&&r.name==="P"){let s=r.propertyList[0],o=r.propertyList[1];const a=r.propertyList[2],l=r.propertyList[3];let c;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?c=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:c=r.propertyList[4],n[s]={type:o,type2:a,flag:l,value:c}}else n[r.name]===void 0?typeof r.id=="number"?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:r.name==="PoseNode"?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):n[r.name][r.id]===void 0&&(n[r.name][r.id]=r)}parseProperty(t){const n=t.getString(1);let r;switch(n){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return r=t.getUint32(),t.getArrayBuffer(r);case"S":return r=t.getUint32(),t.getString(r);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=t.getUint32(),o=t.getUint32(),a=t.getUint32();if(o===0)switch(n){case"b":case"c":return t.getBooleanArray(s);case"d":return t.getFloat64Array(s);case"f":return t.getFloat32Array(s);case"i":return t.getInt32Array(s);case"l":return t.getInt64Array(s)}const l=Xd(new Uint8Array(t.getArrayBuffer(a))),c=new _B(l.buffer);switch(n){case"b":case"c":return c.getBooleanArray(s);case"d":return c.getFloat64Array(s);case"f":return c.getFloat32Array(s);case"i":return c.getInt32Array(s);case"l":return c.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class _B{constructor(t,n){this.dv=new DataView(t),this.offset=0,this.littleEndian=n!==void 0?n:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const n=[];for(let r=0;r<t;r++)n.push(this.getBoolean());return n}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getInt32());return n}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,n;return this.littleEndian?(t=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),t=this.getUint32()),n&2147483648?(n=~n&4294967295,t=~t&4294967295,t===4294967295&&(n=n+1&4294967295),t=t+1&4294967295,-(n*4294967296+t)):n*4294967296+t}getInt64Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getInt64());return n}getUint64(){let t,n;return this.littleEndian?(t=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),t=this.getUint32()),n*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getFloat32());return n}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const n=[];for(let r=0;r<t;r++)n.push(this.getFloat64());return n}getArrayBuffer(t){const n=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,n}getString(t){let n=[];for(let s=0;s<t;s++)n[s]=this.getUint8();const r=n.indexOf(0);return r>=0&&(n=n.slice(0,r)),ms.decodeText(new Uint8Array(n))}}class JO{add(t,n){this[t]=n}}function FK(i){const t="Kaydara FBX Binary  \0";return i.byteLength>=t.length&&t===QO(i,0,t.length)}function OK(i){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(s){const o=i[s-1];return i=i.slice(n+s),n++,o}for(let s=0;s<t.length;++s)if(r(1)===t[s])return!1;return!0}function xB(i){const t=/FBXVersion: (\d+)/,n=i.match(t);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function NK(i){return i/46186158e3}const kK=[];function Gv(i,t,n,r){let s;switch(r.mappingType){case"ByPolygonVertex":s=i;break;case"ByPolygon":s=t;break;case"ByVertice":s=n;break;case"AllSame":s=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(s=r.indices[s]);const o=s*r.dataSize,a=o+r.dataSize;return GK(kK,r.buffer,o,a)}const oS=new uo,hh=new Y;function KO(i){const t=new at,n=new at,r=new at,s=new at,o=new at,a=new at,l=new at,c=new at,u=new at,h=new at,f=new at,p=new at,g=i.inheritType?i.inheritType:0;if(i.translation&&t.setPosition(hh.fromArray(i.translation)),i.preRotation){const B=i.preRotation.map(ir.degToRad);B.push(i.eulerOrder),n.makeRotationFromEuler(oS.fromArray(B))}if(i.rotation){const B=i.rotation.map(ir.degToRad);B.push(i.eulerOrder),r.makeRotationFromEuler(oS.fromArray(B))}if(i.postRotation){const B=i.postRotation.map(ir.degToRad);B.push(i.eulerOrder),s.makeRotationFromEuler(oS.fromArray(B)),s.invert()}i.scale&&o.scale(hh.fromArray(i.scale)),i.scalingOffset&&l.setPosition(hh.fromArray(i.scalingOffset)),i.scalingPivot&&a.setPosition(hh.fromArray(i.scalingPivot)),i.rotationOffset&&c.setPosition(hh.fromArray(i.rotationOffset)),i.rotationPivot&&u.setPosition(hh.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(f.copy(i.parentMatrix),h.copy(i.parentMatrixWorld));const v=n.clone().multiply(r).multiply(s),_=new at;_.extractRotation(h);const x=new at;x.copyPosition(h);const y=x.clone().invert().multiply(h),S=_.clone().invert().multiply(y),A=o,M=new at;if(g===0)M.copy(_).multiply(v).multiply(S).multiply(A);else if(g===1)M.copy(_).multiply(S).multiply(v).multiply(A);else{const O=new at().scale(new Y().setFromMatrixScale(f)).clone().invert(),N=S.clone().multiply(O);M.copy(_).multiply(v).multiply(N).multiply(A)}const C=u.clone().invert(),T=a.clone().invert();let R=t.clone().multiply(c).multiply(u).multiply(n).multiply(r).multiply(s).multiply(C).multiply(l).multiply(a).multiply(o).multiply(T);const I=new at().copyPosition(R),P=h.clone().multiply(I);return p.copyPosition(P),R=p.clone().multiply(M),R.premultiply(h.invert()),R}function ZO(i){i=i||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[i]}function aS(i){return i.split(",").map(function(n){return parseFloat(n)})}function QO(i,t,n){return t===void 0&&(t=0),n===void 0&&(n=i.byteLength),ms.decodeText(new Uint8Array(i,t,n))}function zK(i,t){for(let n=0,r=i.length,s=t.length;n<s;n++,r++)i[r]=t[n]}function GK(i,t,n,r){for(let s=n,o=0;s<r;s++,o++)i[o]=t[s];return i}function SB(i,t,n){return i.slice(0,t).concat(n).concat(i.slice(t))}var HK=Object.defineProperty,VK=(i,t,n)=>t in i?HK(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,TT=(i,t,n)=>(VK(i,typeof t!="symbol"?t+"":t,n),n);class WK extends qi{constructor(t){super(t)}load(t,n,r,s){const o=new Or(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,a=>{if(typeof a!="string")throw new Error("unsupported data type");const l=JSON.parse(a),c=this.parse(l);n&&n(c)},r,s)}loadAsync(t,n){return super.loadAsync(t,n)}parse(t){return new CT(t)}}class CT{constructor(t){TT(this,"data"),this.data=t}generateShapes(t,n=100,r){const s=[],o={letterSpacing:0,lineHeight:1,...r},a=XK(t,n,this.data,o);for(let l=0,c=a.length;l<c;l++)Array.prototype.push.apply(s,a[l].toShapes(!1));return s}}TT(CT,"isFont");TT(CT,"type");function XK(i,t,n,r){const s=Array.from(i),o=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,l=[];let c=0,u=0;for(let h=0;h<s.length;h++){const f=s[h];if(f===`
`)c=0,u-=a*r.lineHeight;else{const p=jK(f,o,c,u,n);p&&(c+=p.offsetX+r.letterSpacing,l.push(p.path))}}return l}function jK(i,t,n,r,s){const o=s.glyphs[i]||s.glyphs["?"];if(!o){console.error('THREE.Font: character "'+i+'" does not exists in font family '+s.familyName+".");return}const a=new CF;let l,c,u,h,f,p,g,v;if(o.o){const _=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let x=0,y=_.length;x<y;)switch(_[x++]){case"m":l=parseInt(_[x++])*t+n,c=parseInt(_[x++])*t+r,a.moveTo(l,c);break;case"l":l=parseInt(_[x++])*t+n,c=parseInt(_[x++])*t+r,a.lineTo(l,c);break;case"q":u=parseInt(_[x++])*t+n,h=parseInt(_[x++])*t+r,f=parseInt(_[x++])*t+n,p=parseInt(_[x++])*t+r,a.quadraticCurveTo(f,p,u,h);break;case"b":u=parseInt(_[x++])*t+n,h=parseInt(_[x++])*t+r,f=parseInt(_[x++])*t+n,p=parseInt(_[x++])*t+r,g=parseInt(_[x++])*t+n,v=parseInt(_[x++])*t+r,a.bezierCurveTo(f,p,g,v,u,h);break}}return{offsetX:o.ha*t,path:a}}class YK extends jw{constructor(t){super(t),this.type=Ji}parse(t){const l=function(A,M){switch(A){case 1:console.error("THREE.RGBELoader Read Error: "+(M||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(M||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(M||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(M||""))}return-1},f=`
`,p=function(A,M,C){M=M||1024;let R=A.pos,I=-1,P=0,B="",O=String.fromCharCode.apply(null,new Uint16Array(A.subarray(R,R+128)));for(;0>(I=O.indexOf(f))&&P<M&&R<A.byteLength;)B+=O,P+=O.length,R+=128,O+=String.fromCharCode.apply(null,new Uint16Array(A.subarray(R,R+128)));return-1<I?(C!==!1&&(A.pos+=P+I+1),B+O.slice(0,I)):!1},g=function(A){const M=/^#\?(\S+)/,C=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,I=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,P={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let B,O;if(A.pos>=A.byteLength||!(B=p(A)))return l(1,"no header found");if(!(O=B.match(M)))return l(3,"bad initial token");for(P.valid|=1,P.programtype=O[1],P.string+=B+`
`;B=p(A),B!==!1;){if(P.string+=B+`
`,B.charAt(0)==="#"){P.comments+=B+`
`;continue}if((O=B.match(C))&&(P.gamma=parseFloat(O[1])),(O=B.match(T))&&(P.exposure=parseFloat(O[1])),(O=B.match(R))&&(P.valid|=2,P.format=O[1]),(O=B.match(I))&&(P.valid|=4,P.height=parseInt(O[1],10),P.width=parseInt(O[2],10)),P.valid&2&&P.valid&4)break}return P.valid&2?P.valid&4?P:l(3,"missing image size specifier"):l(3,"missing format specifier")},v=function(A,M,C){const T=M;if(T<8||T>32767||A[0]!==2||A[1]!==2||A[2]&128)return new Uint8Array(A);if(T!==(A[2]<<8|A[3]))return l(3,"wrong scanline width");const R=new Uint8Array(4*M*C);if(!R.length)return l(4,"unable to allocate buffer space");let I=0,P=0;const B=4*T,O=new Uint8Array(4),N=new Uint8Array(B);let ne=C;for(;ne>0&&P<A.byteLength;){if(P+4>A.byteLength)return l(1);if(O[0]=A[P++],O[1]=A[P++],O[2]=A[P++],O[3]=A[P++],O[0]!=2||O[1]!=2||(O[2]<<8|O[3])!=T)return l(3,"bad rgbe scanline format");let z=0,j;for(;z<B&&P<A.byteLength;){j=A[P++];const he=j>128;if(he&&(j-=128),j===0||z+j>B)return l(3,"bad scanline data");if(he){const H=A[P++];for(let X=0;X<j;X++)N[z++]=H}else N.set(A.subarray(P,P+j),z),z+=j,P+=j}const q=T;for(let he=0;he<q;he++){let H=0;R[I]=N[he+H],H+=T,R[I+1]=N[he+H],H+=T,R[I+2]=N[he+H],H+=T,R[I+3]=N[he+H],I+=4}ne--}return R},_=function(A,M,C,T){const R=A[M+3],I=Math.pow(2,R-128)/255;C[T+0]=A[M+0]*I,C[T+1]=A[M+1]*I,C[T+2]=A[M+2]*I,C[T+3]=1},x=function(A,M,C,T){const R=A[M+3],I=Math.pow(2,R-128)/255;C[T+0]=zc.toHalfFloat(Math.min(A[M+0]*I,65504)),C[T+1]=zc.toHalfFloat(Math.min(A[M+1]*I,65504)),C[T+2]=zc.toHalfFloat(Math.min(A[M+2]*I,65504)),C[T+3]=zc.toHalfFloat(1)},y=new Uint8Array(t);y.pos=0;const S=g(y);if(S!==-1){const A=S.width,M=S.height,C=v(y.subarray(y.pos),A,M);if(C!==-1){let T,R,I;switch(this.type){case Yi:I=C.length/4;const P=new Float32Array(I*4);for(let O=0;O<I;O++)_(C,O*4,P,O*4);T=P,R=Yi;break;case Ji:I=C.length/4;const B=new Uint16Array(I*4);for(let O=0;O<I;O++)x(C,O*4,B,O*4);T=B,R=Ji;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:A,height:M,data:T,header:S.string,gamma:S.gamma,exposure:S.exposure,type:R}}}return null}setDataType(t){return this.type=t,this}load(t,n,r,s){function o(a,l){switch(a.type){case Yi:case Ji:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=ln,a.magFilter=ln,a.generateMipmaps=!1,a.flipY=!0;break}n&&n(a,l)}return super.load(t,o,r,s)}}const Pd="colorSpace"in new Sn;class JK extends jw{constructor(t){super(t),this.type=Ji}parse(t){const P=Math.pow(2.7182818,2.2);function B(U,V){for(var ce=0,L=0;L<65536;++L)(L==0||U[L>>3]&1<<(L&7))&&(V[ce++]=L);for(var J=ce-1;ce<65536;)V[ce++]=0;return J}function O(U){for(var V=0;V<16384;V++)U[V]={},U[V].len=0,U[V].lit=0,U[V].p=null}const N={l:0,c:0,lc:0};function ne(U,V,ce,L,J){for(;ce<U;)V=V<<8|ze(L,J),ce+=8;ce-=U,N.l=V>>ce&(1<<U)-1,N.c=V,N.lc=ce}const z=new Array(59);function j(U){for(var V=0;V<=58;++V)z[V]=0;for(var V=0;V<65537;++V)z[U[V]]+=1;for(var ce=0,V=58;V>0;--V){var L=ce+z[V]>>1;z[V]=ce,ce=L}for(var V=0;V<65537;++V){var J=U[V];J>0&&(U[V]=J|z[J]++<<6)}}function q(U,V,ce,L,J,$,oe){for(var re=ce,Te=0,Pe=0;J<=$;J++){if(re.value-ce.value>L)return!1;ne(6,Te,Pe,U,re);var Le=N.l;if(Te=N.c,Pe=N.lc,oe[J]=Le,Le==63){if(re.value-ce.value>L)throw"Something wrong with hufUnpackEncTable";ne(8,Te,Pe,U,re);var de=N.l+6;if(Te=N.c,Pe=N.lc,J+de>$+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)oe[J++]=0;J--}else if(Le>=59){var de=Le-59+2;if(J+de>$+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)oe[J++]=0;J--}}j(oe)}function he(U){return U&63}function H(U){return U>>6}function X(U,V,ce,L){for(;V<=ce;V++){var J=H(U[V]),$=he(U[V]);if(J>>$)throw"Invalid table entry";if($>14){var oe=L[J>>$-14];if(oe.len)throw"Invalid table entry";if(oe.lit++,oe.p){var re=oe.p;oe.p=new Array(oe.lit);for(var Te=0;Te<oe.lit-1;++Te)oe.p[Te]=re[Te]}else oe.p=new Array(1);oe.p[oe.lit-1]=V}else if($)for(var Pe=0,Te=1<<14-$;Te>0;Te--){var oe=L[(J<<14-$)+Pe];if(oe.len||oe.p)throw"Invalid table entry";oe.len=$,oe.lit=V,Pe++}}return!0}const K={c:0,lc:0};function k(U,V,ce,L){U=U<<8|ze(ce,L),V+=8,K.c=U,K.lc=V}const Z={c:0,lc:0};function Q(U,V,ce,L,J,$,oe,re,Te,Pe){if(U==V){L<8&&(k(ce,L,J,oe),ce=K.c,L=K.lc),L-=8;var Le=ce>>L,Le=new Uint8Array([Le])[0];if(Te.value+Le>Pe)return!1;for(var de=re[Te.value-1];Le-- >0;)re[Te.value++]=de}else if(Te.value<Pe)re[Te.value++]=U;else return!1;Z.c=ce,Z.lc=L}function se(U){return U&65535}function le(U){var V=se(U);return V>32767?V-65536:V}const fe={a:0,b:0};function ue(U,V){var ce=le(U),L=le(V),J=L,$=ce+(J&1)+(J>>1),oe=$,re=$-J;fe.a=oe,fe.b=re}function Se(U,V){var ce=se(U),L=se(V),J=ce-(L>>1)&65535,$=L+J-32768&65535;fe.a=$,fe.b=J}function ke(U,V,ce,L,J,$,oe){for(var re=oe<16384,Te=ce>J?J:ce,Pe=1,Le;Pe<=Te;)Pe<<=1;for(Pe>>=1,Le=Pe,Pe>>=1;Pe>=1;){for(var de=0,lt=de+$*(J-Le),Xe=$*Pe,We=$*Le,dt=L*Pe,At=L*Le,Mt,Bt,ct,nt;de<=lt;de+=We){for(var zt=de,bt=de+L*(ce-Le);zt<=bt;zt+=At){var Rt=zt+dt,fn=zt+Xe,Tn=fn+dt;re?(ue(U[zt+V],U[fn+V]),Mt=fe.a,ct=fe.b,ue(U[Rt+V],U[Tn+V]),Bt=fe.a,nt=fe.b,ue(Mt,Bt),U[zt+V]=fe.a,U[Rt+V]=fe.b,ue(ct,nt),U[fn+V]=fe.a,U[Tn+V]=fe.b):(Se(U[zt+V],U[fn+V]),Mt=fe.a,ct=fe.b,Se(U[Rt+V],U[Tn+V]),Bt=fe.a,nt=fe.b,Se(Mt,Bt),U[zt+V]=fe.a,U[Rt+V]=fe.b,Se(ct,nt),U[fn+V]=fe.a,U[Tn+V]=fe.b)}if(ce&Pe){var fn=zt+Xe;re?ue(U[zt+V],U[fn+V]):Se(U[zt+V],U[fn+V]),Mt=fe.a,U[fn+V]=fe.b,U[zt+V]=Mt}}if(J&Pe)for(var zt=de,bt=de+L*(ce-Le);zt<=bt;zt+=At){var Rt=zt+dt;re?ue(U[zt+V],U[Rt+V]):Se(U[zt+V],U[Rt+V]),Mt=fe.a,U[Rt+V]=fe.b,U[zt+V]=Mt}Le=Pe,Pe>>=1}return de}function Be(U,V,ce,L,J,$,oe,re,Te,Pe){for(var Le=0,de=0,lt=re,Xe=Math.trunc(J.value+($+7)/8);J.value<Xe;)for(k(Le,de,ce,J),Le=K.c,de=K.lc;de>=14;){var We=Le>>de-14&16383,dt=V[We];if(dt.len)de-=dt.len,Q(dt.lit,oe,Le,de,ce,L,J,Te,Pe,lt),Le=Z.c,de=Z.lc;else{if(!dt.p)throw"hufDecode issues";var At;for(At=0;At<dt.lit;At++){for(var Mt=he(U[dt.p[At]]);de<Mt&&J.value<Xe;)k(Le,de,ce,J),Le=K.c,de=K.lc;if(de>=Mt&&H(U[dt.p[At]])==(Le>>de-Mt&(1<<Mt)-1)){de-=Mt,Q(dt.p[At],oe,Le,de,ce,L,J,Te,Pe,lt),Le=Z.c,de=Z.lc;break}}if(At==dt.lit)throw"hufDecode issues"}}var Bt=8-$&7;for(Le>>=Bt,de-=Bt;de>0;){var dt=V[Le<<14-de&16383];if(dt.len)de-=dt.len,Q(dt.lit,oe,Le,de,ce,L,J,Te,Pe,lt),Le=Z.c,de=Z.lc;else throw"hufDecode issues"}return!0}function Ae(U,V,ce,L,J,$){var oe={value:0},re=ce.value,Te=Ge(V,ce),Pe=Ge(V,ce);ce.value+=4;var Le=Ge(V,ce);if(ce.value+=4,Te<0||Te>=65537||Pe<0||Pe>=65537)throw"Something wrong with HUF_ENCSIZE";var de=new Array(65537),lt=new Array(16384);O(lt);var Xe=L-(ce.value-re);if(q(U,V,ce,Xe,Te,Pe,de),Le>8*(L-(ce.value-re)))throw"Something wrong with hufUncompress";X(de,Te,Pe,lt),Be(de,lt,U,V,ce,Le,Pe,$,J,oe)}function W(U,V,ce){for(var L=0;L<ce;++L)V[L]=U[V[L]]}function Re(U){for(var V=1;V<U.length;V++){var ce=U[V-1]+U[V]-128;U[V]=ce}}function Ee(U,V){for(var ce=0,L=Math.floor((U.length+1)/2),J=0,$=U.length-1;!(J>$||(V[J++]=U[ce++],J>$));)V[J++]=U[L++]}function Ce(U){for(var V=U.byteLength,ce=new Array,L=0,J=new DataView(U);V>0;){var $=J.getInt8(L++);if($<0){var oe=-$;V-=oe+1;for(var re=0;re<oe;re++)ce.push(J.getUint8(L++))}else{var oe=$;V-=2;for(var Te=J.getUint8(L++),re=0;re<oe+1;re++)ce.push(Te)}}return ce}function _e(U,V,ce,L,J,$){var Rt=new DataView($.buffer),oe=ce[U.idx[0]].width,re=ce[U.idx[0]].height,Te=3,Pe=Math.floor(oe/8),Le=Math.ceil(oe/8),de=Math.ceil(re/8),lt=oe-(Le-1)*8,Xe=re-(de-1)*8,We={value:0},dt=new Array(Te),At=new Array(Te),Mt=new Array(Te),Bt=new Array(Te),ct=new Array(Te);for(let Xt=0;Xt<Te;++Xt)ct[Xt]=V[U.idx[Xt]],dt[Xt]=Xt<1?0:dt[Xt-1]+Le*de,At[Xt]=new Float32Array(64),Mt[Xt]=new Uint16Array(64),Bt[Xt]=new Uint16Array(Le*64);for(let Xt=0;Xt<de;++Xt){var nt=8;Xt==de-1&&(nt=Xe);var zt=8;for(let Ot=0;Ot<Le;++Ot){Ot==Le-1&&(zt=lt);for(let Ut=0;Ut<Te;++Ut)Mt[Ut].fill(0),Mt[Ut][0]=J[dt[Ut]++],Ye(We,L,Mt[Ut]),we(Mt[Ut],At[Ut]),G(At[Ut]);F(At);for(let Ut=0;Ut<Te;++Ut)te(At[Ut],Bt[Ut],Ot*64)}let Pn=0;for(let Ot=0;Ot<Te;++Ot){const Ut=ce[U.idx[Ot]].type;for(let bn=8*Xt;bn<8*Xt+nt;++bn){Pn=ct[Ot][bn];for(let $i=0;$i<Pe;++$i){const ui=$i*64+(bn&7)*8;Rt.setUint16(Pn+0*2*Ut,Bt[Ot][ui+0],!0),Rt.setUint16(Pn+1*2*Ut,Bt[Ot][ui+1],!0),Rt.setUint16(Pn+2*2*Ut,Bt[Ot][ui+2],!0),Rt.setUint16(Pn+3*2*Ut,Bt[Ot][ui+3],!0),Rt.setUint16(Pn+4*2*Ut,Bt[Ot][ui+4],!0),Rt.setUint16(Pn+5*2*Ut,Bt[Ot][ui+5],!0),Rt.setUint16(Pn+6*2*Ut,Bt[Ot][ui+6],!0),Rt.setUint16(Pn+7*2*Ut,Bt[Ot][ui+7],!0),Pn+=8*2*Ut}}if(Pe!=Le)for(let bn=8*Xt;bn<8*Xt+nt;++bn){const $i=ct[Ot][bn]+8*Pe*2*Ut,ui=Pe*64+(bn&7)*8;for(let es=0;es<zt;++es)Rt.setUint16($i+es*2*Ut,Bt[Ot][ui+es],!0)}}}for(var bt=new Uint16Array(oe),Rt=new DataView($.buffer),fn=0;fn<Te;++fn){ce[U.idx[fn]].decoded=!0;var Tn=ce[U.idx[fn]].type;if(ce[fn].type==2)for(var Cn=0;Cn<re;++Cn){const Xt=ct[fn][Cn];for(var Jt=0;Jt<oe;++Jt)bt[Jt]=Rt.getUint16(Xt+Jt*2*Tn,!0);for(var Jt=0;Jt<oe;++Jt)Rt.setFloat32(Xt+Jt*2*Tn,ve(bt[Jt]),!0)}}}function Ye(U,V,ce){for(var L,J=1;J<64;)L=V[U.value],L==65280?J=64:L>>8==255?J+=L&255:(ce[J]=L,J++),U.value++}function we(U,V){V[0]=ve(U[0]),V[1]=ve(U[1]),V[2]=ve(U[5]),V[3]=ve(U[6]),V[4]=ve(U[14]),V[5]=ve(U[15]),V[6]=ve(U[27]),V[7]=ve(U[28]),V[8]=ve(U[2]),V[9]=ve(U[4]),V[10]=ve(U[7]),V[11]=ve(U[13]),V[12]=ve(U[16]),V[13]=ve(U[26]),V[14]=ve(U[29]),V[15]=ve(U[42]),V[16]=ve(U[3]),V[17]=ve(U[8]),V[18]=ve(U[12]),V[19]=ve(U[17]),V[20]=ve(U[25]),V[21]=ve(U[30]),V[22]=ve(U[41]),V[23]=ve(U[43]),V[24]=ve(U[9]),V[25]=ve(U[11]),V[26]=ve(U[18]),V[27]=ve(U[24]),V[28]=ve(U[31]),V[29]=ve(U[40]),V[30]=ve(U[44]),V[31]=ve(U[53]),V[32]=ve(U[10]),V[33]=ve(U[19]),V[34]=ve(U[23]),V[35]=ve(U[32]),V[36]=ve(U[39]),V[37]=ve(U[45]),V[38]=ve(U[52]),V[39]=ve(U[54]),V[40]=ve(U[20]),V[41]=ve(U[22]),V[42]=ve(U[33]),V[43]=ve(U[38]),V[44]=ve(U[46]),V[45]=ve(U[51]),V[46]=ve(U[55]),V[47]=ve(U[60]),V[48]=ve(U[21]),V[49]=ve(U[34]),V[50]=ve(U[37]),V[51]=ve(U[47]),V[52]=ve(U[50]),V[53]=ve(U[56]),V[54]=ve(U[59]),V[55]=ve(U[61]),V[56]=ve(U[35]),V[57]=ve(U[36]),V[58]=ve(U[48]),V[59]=ve(U[49]),V[60]=ve(U[57]),V[61]=ve(U[58]),V[62]=ve(U[62]),V[63]=ve(U[63])}function G(U){const V=.5*Math.cos(.7853975),ce=.5*Math.cos(3.14159/16),L=.5*Math.cos(3.14159/8),J=.5*Math.cos(3*3.14159/16),$=.5*Math.cos(5*3.14159/16),oe=.5*Math.cos(3*3.14159/8),re=.5*Math.cos(7*3.14159/16);for(var Te=new Array(4),Pe=new Array(4),Le=new Array(4),de=new Array(4),lt=0;lt<8;++lt){var Xe=lt*8;Te[0]=L*U[Xe+2],Te[1]=oe*U[Xe+2],Te[2]=L*U[Xe+6],Te[3]=oe*U[Xe+6],Pe[0]=ce*U[Xe+1]+J*U[Xe+3]+$*U[Xe+5]+re*U[Xe+7],Pe[1]=J*U[Xe+1]-re*U[Xe+3]-ce*U[Xe+5]-$*U[Xe+7],Pe[2]=$*U[Xe+1]-ce*U[Xe+3]+re*U[Xe+5]+J*U[Xe+7],Pe[3]=re*U[Xe+1]-$*U[Xe+3]+J*U[Xe+5]-ce*U[Xe+7],Le[0]=V*(U[Xe+0]+U[Xe+4]),Le[3]=V*(U[Xe+0]-U[Xe+4]),Le[1]=Te[0]+Te[3],Le[2]=Te[1]-Te[2],de[0]=Le[0]+Le[1],de[1]=Le[3]+Le[2],de[2]=Le[3]-Le[2],de[3]=Le[0]-Le[1],U[Xe+0]=de[0]+Pe[0],U[Xe+1]=de[1]+Pe[1],U[Xe+2]=de[2]+Pe[2],U[Xe+3]=de[3]+Pe[3],U[Xe+4]=de[3]-Pe[3],U[Xe+5]=de[2]-Pe[2],U[Xe+6]=de[1]-Pe[1],U[Xe+7]=de[0]-Pe[0]}for(var We=0;We<8;++We)Te[0]=L*U[16+We],Te[1]=oe*U[16+We],Te[2]=L*U[48+We],Te[3]=oe*U[48+We],Pe[0]=ce*U[8+We]+J*U[24+We]+$*U[40+We]+re*U[56+We],Pe[1]=J*U[8+We]-re*U[24+We]-ce*U[40+We]-$*U[56+We],Pe[2]=$*U[8+We]-ce*U[24+We]+re*U[40+We]+J*U[56+We],Pe[3]=re*U[8+We]-$*U[24+We]+J*U[40+We]-ce*U[56+We],Le[0]=V*(U[We]+U[32+We]),Le[3]=V*(U[We]-U[32+We]),Le[1]=Te[0]+Te[3],Le[2]=Te[1]-Te[2],de[0]=Le[0]+Le[1],de[1]=Le[3]+Le[2],de[2]=Le[3]-Le[2],de[3]=Le[0]-Le[1],U[0+We]=de[0]+Pe[0],U[8+We]=de[1]+Pe[1],U[16+We]=de[2]+Pe[2],U[24+We]=de[3]+Pe[3],U[32+We]=de[3]-Pe[3],U[40+We]=de[2]-Pe[2],U[48+We]=de[1]-Pe[1],U[56+We]=de[0]-Pe[0]}function F(U){for(var V=0;V<64;++V){var ce=U[0][V],L=U[1][V],J=U[2][V];U[0][V]=ce+1.5747*J,U[1][V]=ce-.1873*L-.4682*J,U[2][V]=ce+1.8556*L}}function te(U,V,ce){for(var L=0;L<64;++L)V[ce+L]=zc.toHalfFloat(xe(U[L]))}function xe(U){return U<=1?Math.sign(U)*Math.pow(Math.abs(U),2.2):Math.sign(U)*Math.pow(P,Math.abs(U)-1)}function ge(U){return new DataView(U.array.buffer,U.offset.value,U.size)}function ye(U){var V=U.viewer.buffer.slice(U.offset.value,U.offset.value+U.size),ce=new Uint8Array(Ce(V)),L=new Uint8Array(ce.length);return Re(ce),Ee(ce,L),new DataView(L.buffer)}function Fe(U){var V=U.array.slice(U.offset.value,U.offset.value+U.size),ce=Xd(V),L=new Uint8Array(ce.length);return Re(ce),Ee(ce,L),new DataView(L.buffer)}function Ve(U){for(var V=U.viewer,ce={value:U.offset.value},L=new Uint16Array(U.width*U.scanlineBlockSize*(U.channels*U.type)),J=new Uint8Array(8192),$=0,oe=new Array(U.channels),re=0;re<U.channels;re++)oe[re]={},oe[re].start=$,oe[re].end=oe[re].start,oe[re].nx=U.width,oe[re].ny=U.lines,oe[re].size=U.type,$+=oe[re].nx*oe[re].ny*oe[re].size;var Te=ae(V,ce),Pe=ae(V,ce);if(Pe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Te<=Pe)for(var re=0;re<Pe-Te+1;re++)J[re+Te]=Ze(V,ce);var Le=new Uint16Array(65536),de=B(J,Le),lt=Ge(V,ce);Ae(U.array,V,ce,lt,L,$);for(var re=0;re<U.channels;++re)for(var Xe=oe[re],We=0;We<oe[re].size;++We)ke(L,Xe.start+We,Xe.nx,Xe.size,Xe.ny,Xe.nx*Xe.size,de);W(Le,L,$);for(var dt=0,At=new Uint8Array(L.buffer.byteLength),Mt=0;Mt<U.lines;Mt++)for(var Bt=0;Bt<U.channels;Bt++){var Xe=oe[Bt],ct=Xe.nx*Xe.size,nt=new Uint8Array(L.buffer,Xe.end*2,ct*2);At.set(nt,dt),dt+=ct*2,Xe.end+=ct}return new DataView(At.buffer)}function He(U){var V=U.array.slice(U.offset.value,U.offset.value+U.size),ce=Xd(V);const L=U.lines*U.channels*U.width,J=U.type==1?new Uint16Array(L):new Uint32Array(L);let $=0,oe=0;const re=new Array(4);for(let Te=0;Te<U.lines;Te++)for(let Pe=0;Pe<U.channels;Pe++){let Le=0;switch(U.type){case 1:re[0]=$,re[1]=re[0]+U.width,$=re[1]+U.width;for(let de=0;de<U.width;++de){const lt=ce[re[0]++]<<8|ce[re[1]++];Le+=lt,J[oe]=Le,oe++}break;case 2:re[0]=$,re[1]=re[0]+U.width,re[2]=re[1]+U.width,$=re[2]+U.width;for(let de=0;de<U.width;++de){const lt=ce[re[0]++]<<24|ce[re[1]++]<<16|ce[re[2]++]<<8;Le+=lt,J[oe]=Le,oe++}break}}return new DataView(J.buffer)}function je(U){var V=U.viewer,ce={value:U.offset.value},L=new Uint8Array(U.width*U.lines*(U.channels*U.type*2)),J={version:ht(V,ce),unknownUncompressedSize:ht(V,ce),unknownCompressedSize:ht(V,ce),acCompressedSize:ht(V,ce),dcCompressedSize:ht(V,ce),rleCompressedSize:ht(V,ce),rleUncompressedSize:ht(V,ce),rleRawSize:ht(V,ce),totalAcUncompressedCount:ht(V,ce),totalDcUncompressedCount:ht(V,ce),acCompression:ht(V,ce)};if(J.version<2)throw"EXRLoader.parse: "+yn.compression+" version "+J.version+" is unsupported";for(var $=new Array,oe=ae(V,ce)-2;oe>0;){var re=tt(V.buffer,ce),Te=Ze(V,ce),Pe=Te>>2&3,Le=(Te>>4)-1,de=new Int8Array([Le])[0],lt=Ze(V,ce);$.push({name:re,index:de,type:lt,compression:Pe}),oe-=re.length+3}for(var Xe=yn.channels,We=new Array(U.channels),dt=0;dt<U.channels;++dt){var At=We[dt]={},Mt=Xe[dt];At.name=Mt.name,At.compression=0,At.decoded=!1,At.type=Mt.pixelType,At.pLinear=Mt.pLinear,At.width=U.width,At.height=U.lines}for(var Bt={idx:new Array(3)},ct=0;ct<U.channels;++ct)for(var At=We[ct],dt=0;dt<$.length;++dt){var nt=$[dt];At.name==nt.name&&(At.compression=nt.compression,nt.index>=0&&(Bt.idx[nt.index]=ct),At.offset=ct)}if(J.acCompressedSize>0)switch(J.acCompression){case 0:var Rt=new Uint16Array(J.totalAcUncompressedCount);Ae(U.array,V,ce,J.acCompressedSize,Rt,J.totalAcUncompressedCount);break;case 1:var zt=U.array.slice(ce.value,ce.value+J.totalAcUncompressedCount),bt=Xd(zt),Rt=new Uint16Array(bt.buffer);ce.value+=J.totalAcUncompressedCount;break}if(J.dcCompressedSize>0){var fn={array:U.array,offset:ce,size:J.dcCompressedSize},Tn=new Uint16Array(Fe(fn).buffer);ce.value+=J.dcCompressedSize}if(J.rleRawSize>0){var zt=U.array.slice(ce.value,ce.value+J.rleCompressedSize),bt=Xd(zt),Cn=Ce(bt.buffer);ce.value+=J.rleCompressedSize}for(var Jt=0,Xt=new Array(We.length),dt=0;dt<Xt.length;++dt)Xt[dt]=new Array;for(var Pn=0;Pn<U.lines;++Pn)for(var Ot=0;Ot<We.length;++Ot)Xt[Ot].push(Jt),Jt+=We[Ot].width*U.type*2;_e(Bt,Xt,We,Rt,Tn,L);for(var dt=0;dt<We.length;++dt){var At=We[dt];if(!At.decoded)switch(At.compression){case 2:for(var Ut=0,bn=0,Pn=0;Pn<U.lines;++Pn){for(var $i=Xt[dt][Ut],ui=0;ui<At.width;++ui){for(var es=0;es<2*At.type;++es)L[$i++]=Cn[bn+es*At.width*At.height];bn++}Ut++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(L.buffer)}function tt(U,V){for(var ce=new Uint8Array(U),L=0;ce[V.value+L]!=0;)L+=1;var J=new TextDecoder().decode(ce.slice(V.value,V.value+L));return V.value=V.value+L+1,J}function Oe(U,V,ce){var L=new TextDecoder().decode(new Uint8Array(U).slice(V.value,V.value+ce));return V.value=V.value+ce,L}function yt(U,V){var ce=it(U,V),L=Ge(U,V);return[ce,L]}function Qe(U,V){var ce=Ge(U,V),L=Ge(U,V);return[ce,L]}function it(U,V){var ce=U.getInt32(V.value,!0);return V.value=V.value+4,ce}function Ge(U,V){var ce=U.getUint32(V.value,!0);return V.value=V.value+4,ce}function ze(U,V){var ce=U[V.value];return V.value=V.value+1,ce}function Ze(U,V){var ce=U.getUint8(V.value);return V.value=V.value+1,ce}const ht=function(U,V){let ce;return"getBigInt64"in DataView.prototype?ce=Number(U.getBigInt64(V.value,!0)):ce=U.getUint32(V.value+4,!0)+Number(U.getUint32(V.value,!0)<<32),V.value+=8,ce};function _t(U,V){var ce=U.getFloat32(V.value,!0);return V.value+=4,ce}function rt(U,V){return zc.toHalfFloat(_t(U,V))}function ve(U){var V=(U&31744)>>10,ce=U&1023;return(U>>15?-1:1)*(V?V===31?ce?NaN:1/0:Math.pow(2,V-15)*(1+ce/1024):6103515625e-14*(ce/1024))}function ae(U,V){var ce=U.getUint16(V.value,!0);return V.value+=2,ce}function $e(U,V){return ve(ae(U,V))}function et(U,V,ce,L){for(var J=ce.value,$=[];ce.value<J+L-1;){var oe=tt(V,ce),re=it(U,ce),Te=Ze(U,ce);ce.value+=3;var Pe=it(U,ce),Le=it(U,ce);$.push({name:oe,pixelType:re,pLinear:Te,xSampling:Pe,ySampling:Le})}return ce.value+=1,$}function St(U,V){var ce=_t(U,V),L=_t(U,V),J=_t(U,V),$=_t(U,V),oe=_t(U,V),re=_t(U,V),Te=_t(U,V),Pe=_t(U,V);return{redX:ce,redY:L,greenX:J,greenY:$,blueX:oe,blueY:re,whiteX:Te,whiteY:Pe}}function mt(U,V){var ce=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],L=Ze(U,V);return ce[L]}function kt(U,V){var ce=Ge(U,V),L=Ge(U,V),J=Ge(U,V),$=Ge(U,V);return{xMin:ce,yMin:L,xMax:J,yMax:$}}function Tt(U,V){var ce=["INCREASING_Y"],L=Ze(U,V);return ce[L]}function An(U,V){var ce=_t(U,V),L=_t(U,V);return[ce,L]}function Wt(U,V){var ce=_t(U,V),L=_t(U,V),J=_t(U,V);return[ce,L,J]}function Ct(U,V,ce,L,J){if(L==="string"||L==="stringvector"||L==="iccProfile")return Oe(V,ce,J);if(L==="chlist")return et(U,V,ce,J);if(L==="chromaticities")return St(U,ce);if(L==="compression")return mt(U,ce);if(L==="box2i")return kt(U,ce);if(L==="lineOrder")return Tt(U,ce);if(L==="float")return _t(U,ce);if(L==="v2f")return An(U,ce);if(L==="v3f")return Wt(U,ce);if(L==="int")return it(U,ce);if(L==="rational")return yt(U,ce);if(L==="timecode")return Qe(U,ce);if(L==="preview")return ce.value+=J,"skipped";ce.value+=J}function vn(U,V,ce){const L={};if(U.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";L.version=U.getUint8(4);const J=U.getUint8(5);L.spec={singleTile:!!(J&2),longName:!!(J&4),deepFormat:!!(J&8),multiPart:!!(J&16)},ce.value=8;for(var $=!0;$;){var oe=tt(V,ce);if(oe==0)$=!1;else{var re=tt(V,ce),Te=Ge(U,ce),Pe=Ct(U,V,ce,re,Te);Pe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${re}'.`):L[oe]=Pe}}if(J&-5)throw console.error("EXRHeader:",L),"THREE.EXRLoader: provided file is currently unsupported.";return L}function wn(U,V,ce,L,J){const $={size:0,viewer:V,array:ce,offset:L,width:U.dataWindow.xMax-U.dataWindow.xMin+1,height:U.dataWindow.yMax-U.dataWindow.yMin+1,channels:U.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:U.channels[0].pixelType,uncompress:null,getter:null,format:null,[Pd?"colorSpace":"encoding"]:null};switch(U.compression){case"NO_COMPRESSION":$.lines=1,$.uncompress=ge;break;case"RLE_COMPRESSION":$.lines=1,$.uncompress=ye;break;case"ZIPS_COMPRESSION":$.lines=1,$.uncompress=Fe;break;case"ZIP_COMPRESSION":$.lines=16,$.uncompress=Fe;break;case"PIZ_COMPRESSION":$.lines=32,$.uncompress=Ve;break;case"PXR24_COMPRESSION":$.lines=16,$.uncompress=He;break;case"DWAA_COMPRESSION":$.lines=32,$.uncompress=je;break;case"DWAB_COMPRESSION":$.lines=256,$.uncompress=je;break;default:throw"EXRLoader.parse: "+U.compression+" is unsupported"}if($.scanlineBlockSize=$.lines,$.type==1)switch(J){case Yi:$.getter=$e,$.inputSize=2;break;case Ji:$.getter=ae,$.inputSize=2;break}else if($.type==2)switch(J){case Yi:$.getter=_t,$.inputSize=4;break;case Ji:$.getter=rt,$.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+$.type+" for "+U.compression+".";$.blockCount=(U.dataWindow.yMax+1)/$.scanlineBlockSize;for(var oe=0;oe<$.blockCount;oe++)ht(V,L);$.outputChannels=$.channels==3?4:$.channels;const re=$.width*$.height*$.outputChannels;switch(J){case Yi:$.byteArray=new Float32Array(re),$.channels<$.outputChannels&&$.byteArray.fill(1,0,re);break;case Ji:$.byteArray=new Uint16Array(re),$.channels<$.outputChannels&&$.byteArray.fill(15360,0,re);break;default:console.error("THREE.EXRLoader: unsupported type: ",J);break}return $.bytesPerLine=$.width*$.inputSize*$.channels,$.outputChannels==4?$.format=xr:$.format=dw,Pd?$.colorSpace="srgb-linear":$.encoding=3e3,$}const nn=new DataView(t),On=new Uint8Array(t),Nn={value:0},yn=vn(nn,t,Nn),xt=wn(yn,nn,On,Nn,this.type),Zn={value:0},Er={R:0,G:1,B:2,A:3,Y:0};for(let U=0;U<xt.height/xt.scanlineBlockSize;U++){const V=Ge(nn,Nn);xt.size=Ge(nn,Nn),xt.lines=V+xt.scanlineBlockSize>xt.height?xt.height-V:xt.scanlineBlockSize;const L=xt.size<xt.lines*xt.bytesPerLine?xt.uncompress(xt):ge(xt);Nn.value+=xt.size;for(let J=0;J<xt.scanlineBlockSize;J++){const $=J+U*xt.scanlineBlockSize;if($>=xt.height)break;for(let oe=0;oe<xt.channels;oe++){const re=Er[yn.channels[oe].name];for(let Te=0;Te<xt.width;Te++){Zn.value=(J*(xt.channels*xt.width)+oe*xt.width+Te)*xt.inputSize;const Pe=(xt.height-1-$)*(xt.width*xt.outputChannels)+Te*xt.outputChannels+re;xt.byteArray[Pe]=xt.getter(L,Zn)}}}}return{header:yn,width:xt.width,height:xt.height,data:xt.byteArray,format:xt.format,[Pd?"colorSpace":"encoding"]:xt[Pd?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,n,r,s){function o(a,l){Pd?a.colorSpace=l.colorSpace:a.encoding=l.encoding,a.minFilter=ln,a.magFilter=ln,a.generateMipmaps=!1,a.flipY=!1,n&&n(a,l)}return super.load(t,o,r,s)}}const lS=new WeakMap;class KK extends qi{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,r,s){const o=new Or(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(n).catch(s)},r,s)}decodeDracoFile(t,n,r,s){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(t,o).then(n)}decodeGeometry(t,n){for(const c in n.attributeTypes){const u=n.attributeTypes[c];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[c]=u.name)}const r=JSON.stringify(n);if(lS.has(t)){const c=lS.get(t);if(c.key===r)return c.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,a=t.byteLength,l=this._getWorker(o,a).then(c=>(s=c,new Promise((u,h)=>{s._callbacks[o]={resolve:u,reject:h},s.postMessage({type:"decode",id:o,taskConfig:n,buffer:t},[t])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),lS.set(t,{key:r,promise:l}),l}_createGeometry(t){const n=new It;t.index&&n.setIndex(new $t(t.index.array,1));for(let r=0;r<t.attributes.length;r++){const s=t.attributes[r],o=s.name,a=s.array,l=s.itemSize;n.setAttribute(o,new $t(a,l))}return n}_loadLibrary(t,n){const r=new Or(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((s,o)=>{r.load(t,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const s=r[0];t||(this.decoderConfig.wasmBinary=r[1]);const o=ZK.toString(),a=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const a=o.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[t]=n,r._taskLoad+=n,r})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function ZK(){let i,t;onmessage=function(a){const l=a.data;switch(l.type){case"init":i=l.decoderConfig,t=new Promise(function(h){i.onModuleLoaded=function(f){h({draco:f})},DracoDecoderModule(i)});break;case"decode":const c=l.buffer,u=l.taskConfig;t.then(h=>{const f=h.draco,p=new f.Decoder,g=new f.DecoderBuffer;g.Init(new Int8Array(c),c.byteLength);try{const v=n(f,p,g,u),_=v.attributes.map(x=>x.array.buffer);v.index&&_.push(v.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:v},_)}catch(v){console.error(v),self.postMessage({type:"error",id:l.id,error:v.message})}finally{f.destroy(g),f.destroy(p)}});break}};function n(a,l,c,u){const h=u.attributeIDs,f=u.attributeTypes;let p,g;const v=l.GetEncodedGeometryType(c);if(v===a.TRIANGULAR_MESH)p=new a.Mesh,g=l.DecodeBufferToMesh(c,p);else if(v===a.POINT_CLOUD)p=new a.PointCloud,g=l.DecodeBufferToPointCloud(c,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const _={index:null,attributes:[]};for(const x in h){const y=self[f[x]];let S,A;if(u.useUniqueIDs)A=h[x],S=l.GetAttributeByUniqueId(p,A);else{if(A=l.GetAttributeId(p,a[h[x]]),A===-1)continue;S=l.GetAttribute(p,A)}_.attributes.push(s(a,l,p,x,y,S))}return v===a.TRIANGULAR_MESH&&(_.index=r(a,l,p)),a.destroy(p),_}function r(a,l,c){const h=c.num_faces()*3,f=h*4,p=a._malloc(f);l.GetTrianglesUInt32Array(c,f,p);const g=new Uint32Array(a.HEAPF32.buffer,p,h).slice();return a._free(p),{array:g,itemSize:1}}function s(a,l,c,u,h,f){const p=f.num_components(),v=c.num_points()*p,_=v*h.BYTES_PER_ELEMENT,x=o(a,h),y=a._malloc(_);l.GetAttributeDataArrayForAllPoints(c,f,x,_,y);const S=new h(a.HEAPF32.buffer,y,v).slice();return a._free(y),{name:u,array:S,itemSize:p}}function o(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let Hv;const cS=()=>{if(Hv)return Hv;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(n)&&(s=t);let o;const a=WebAssembly.instantiate(l(s),{}).then(f=>{o=f.instance,o.exports.__wasm_call_ctors()});function l(f){const p=new Uint8Array(f.length);for(let v=0;v<f.length;++v){const _=f.charCodeAt(v);p[v]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let g=0;for(let v=0;v<f.length;++v)p[g++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,g)}function c(f,p,g,v,_,x){const y=o.exports.sbrk,S=g+3&-4,A=y(S*v),M=y(_.length),C=new Uint8Array(o.exports.memory.buffer);C.set(_,M);const T=f(A,g,v,M,_.length);if(T===0&&x&&x(A,S,v),p.set(C.subarray(A,A+g*v)),y(A-y(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Hv={ready:a,supported:!0,decodeVertexBuffer(f,p,g,v,_){c(o.exports.meshopt_decodeVertexBuffer,f,p,g,v,o.exports[u[_]])},decodeIndexBuffer(f,p,g,v){c(o.exports.meshopt_decodeIndexBuffer,f,p,g,v)},decodeIndexSequence(f,p,g,v){c(o.exports.meshopt_decodeIndexSequence,f,p,g,v)},decodeGltfBuffer(f,p,g,v,_,x){c(o.exports[h[_]],f,p,g,v,o.exports[u[x]])}},Hv};function QK(){var i=Object.create(null);function t(s,o){var a=s.id,l=s.name,c=s.dependencies;c===void 0&&(c=[]);var u=s.init;u===void 0&&(u=function(){});var h=s.getTransferables;if(h===void 0&&(h=null),!i[a])try{c=c.map(function(p){return p&&p.isWorkerModule&&(t(p,function(g){if(g instanceof Error)throw g}),p=i[p.id].value),p}),u=r("<"+l+">.init",u),h&&(h=r("<"+l+">.getTransferables",h));var f=null;typeof u=="function"?f=u.apply(void 0,c):console.error("worker module init function failed to rehydrate"),i[a]={id:a,value:f,getTransferables:h},o(f)}catch(p){p&&p.noLog||console.error(p),o(p)}}function n(s,o){var a,l=s.id,c=s.args;(!i[l]||typeof i[l].value!="function")&&o(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var u=(a=i[l]).value.apply(a,c);u&&typeof u.then=="function"?u.then(h,function(f){return o(f instanceof Error?f:new Error(""+f))}):h(u)}catch(f){o(f)}function h(f){try{var p=i[l].getTransferables&&i[l].getTransferables(f);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),o(f,p)}catch(g){console.error(g),o(g)}}}function r(s,o){var a=void 0;self.troikaDefine=function(c){return a=c};var l=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(c){console.error(c)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(s){var o=s.data,a=o.messageId,l=o.action,c=o.data;try{l==="registerModule"&&t(c,function(u){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof u=="function"}})}),l==="callModule"&&n(c,function(u,h){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:a,success:!1,error:u.stack})}})}function qK(i){var t=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var n=i.dependencies,r=i.init;n=Array.isArray(n)?n.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(n).then(function(o){return r.apply(null,o)});return t._getInitResult=function(){return s},s},t}var qO=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return qO=function(){return i},i},$K=0,eZ=0,uS=!1,dp=Object.create(null),pp=Object.create(null),JE=Object.create(null);function Im(i){if((!i||typeof i.init!="function")&&!uS)throw new Error("requires `options.init` function");var t=i.dependencies,n=i.init,r=i.getTransferables,s=i.workerId;if(!qO())return qK(i);s==null&&(s="#default");var o="workerModule"+ ++$K,a=i.name||o,l=null;t=t&&t.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(uS=!0,u=Im({workerId:s,name:"<"+a+"> function dependency: "+u.name,init:`function(){return (
`+w0(u)+`
)}`}),uS=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function c(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];if(!l){l=AB(s,"registerModule",c.workerModuleData);var f=function(){l=null,pp[s].delete(f)};(pp[s]||(pp[s]=new Set)).add(f)}return l.then(function(p){var g=p.isCallable;if(g)return AB(s,"callModule",{id:o,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return c.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:w0(n),getTransferables:r&&w0(r)},c}function tZ(i){pp[i]&&pp[i].forEach(function(t){t()}),dp[i]&&(dp[i].terminate(),delete dp[i])}function w0(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function nZ(i){var t=dp[i];if(!t){var n=w0(QK);t=dp[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),t.onmessage=function(r){var s=r.data,o=s.messageId,a=JE[o];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete JE[o],a(s)}}return t}function AB(i,t,n){return new Promise(function(r,s){var o=++eZ;JE[o]=function(a){a.success?r(a.result):s(new Error("Error in worker "+t+" call: "+a.error))},nZ(i).postMessage({messageId:o,action:t,data:n})})}function $O(){var i=function(t){function n(X,K,k,Z,Q,se,le,fe){var ue=1-le;fe.x=ue*ue*X+2*ue*le*k+le*le*Q,fe.y=ue*ue*K+2*ue*le*Z+le*le*se}function r(X,K,k,Z,Q,se,le,fe,ue,Se){var ke=1-ue;Se.x=ke*ke*ke*X+3*ke*ke*ue*k+3*ke*ue*ue*Q+ue*ue*ue*le,Se.y=ke*ke*ke*K+3*ke*ke*ue*Z+3*ke*ue*ue*se+ue*ue*ue*fe}function s(X,K){for(var k=/([MLQCZ])([^MLQCZ]*)/g,Z,Q,se,le,fe;Z=k.exec(X);){var ue=Z[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Se){return parseFloat(Se)});switch(Z[1]){case"M":le=Q=ue[0],fe=se=ue[1];break;case"L":(ue[0]!==le||ue[1]!==fe)&&K("L",le,fe,le=ue[0],fe=ue[1]);break;case"Q":{K("Q",le,fe,le=ue[2],fe=ue[3],ue[0],ue[1]);break}case"C":{K("C",le,fe,le=ue[4],fe=ue[5],ue[0],ue[1],ue[2],ue[3]);break}case"Z":(le!==Q||fe!==se)&&K("L",le,fe,Q,se);break}}}function o(X,K,k){k===void 0&&(k=16);var Z={x:0,y:0};s(X,function(Q,se,le,fe,ue,Se,ke,Be,Ae){switch(Q){case"L":K(se,le,fe,ue);break;case"Q":{for(var W=se,Re=le,Ee=1;Ee<k;Ee++)n(se,le,Se,ke,fe,ue,Ee/(k-1),Z),K(W,Re,Z.x,Z.y),W=Z.x,Re=Z.y;break}case"C":{for(var Ce=se,_e=le,Ye=1;Ye<k;Ye++)r(se,le,Se,ke,Be,Ae,fe,ue,Ye/(k-1),Z),K(Ce,_e,Z.x,Z.y),Ce=Z.x,_e=Z.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(X,K){var k=X.getContext?X.getContext("webgl",u):X,Z=c.get(k);if(!Z){let Ce=function(te){var xe=se[te];if(!xe&&(xe=se[te]=k.getExtension(te),!xe))throw new Error(te+" not supported");return xe},_e=function(te,xe){var ge=k.createShader(xe);return k.shaderSource(ge,te),k.compileShader(ge),ge},Ye=function(te,xe,ge,ye){if(!le[te]){var Fe={},Ve={},He=k.createProgram();k.attachShader(He,_e(xe,k.VERTEX_SHADER)),k.attachShader(He,_e(ge,k.FRAGMENT_SHADER)),k.linkProgram(He),le[te]={program:He,transaction:function(tt){k.useProgram(He),tt({setUniform:function(yt,Qe){for(var it=[],Ge=arguments.length-2;Ge-- >0;)it[Ge]=arguments[Ge+2];var ze=Ve[Qe]||(Ve[Qe]=k.getUniformLocation(He,Qe));k["uniform"+yt].apply(k,[ze].concat(it))},setAttribute:function(yt,Qe,it,Ge,ze){var Ze=Fe[yt];Ze||(Ze=Fe[yt]={buf:k.createBuffer(),loc:k.getAttribLocation(He,yt),data:null}),k.bindBuffer(k.ARRAY_BUFFER,Ze.buf),k.vertexAttribPointer(Ze.loc,Qe,k.FLOAT,!1,0,0),k.enableVertexAttribArray(Ze.loc),Q?k.vertexAttribDivisor(Ze.loc,Ge):Ce("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ze.loc,Ge),ze!==Ze.data&&(k.bufferData(k.ARRAY_BUFFER,ze,it),Ze.data=ze)}})}}}le[te].transaction(ye)},we=function(te,xe){ue++;try{k.activeTexture(k.TEXTURE0+ue);var ge=fe[te];ge||(ge=fe[te]=k.createTexture(),k.bindTexture(k.TEXTURE_2D,ge),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST)),k.bindTexture(k.TEXTURE_2D,ge),xe(ge,ue)}finally{ue--}},G=function(te,xe,ge){var ye=k.createFramebuffer();Se.push(ye),k.bindFramebuffer(k.FRAMEBUFFER,ye),k.activeTexture(k.TEXTURE0+xe),k.bindTexture(k.TEXTURE_2D,te),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,te,0);try{ge(ye)}finally{k.deleteFramebuffer(ye),k.bindFramebuffer(k.FRAMEBUFFER,Se[--Se.length-1]||null)}},F=function(){se={},le={},fe={},ue=-1,Se.length=0};var ke=Ce,Be=_e,Ae=Ye,W=we,Re=G,Ee=F,Q=typeof WebGL2RenderingContext<"u"&&k instanceof WebGL2RenderingContext,se={},le={},fe={},ue=-1,Se=[];k.canvas.addEventListener("webglcontextlost",function(te){F(),te.preventDefault()},!1),c.set(k,Z={gl:k,isWebGL2:Q,getExtension:Ce,withProgram:Ye,withTexture:we,withTextureFramebuffer:G,handleContextLoss:F})}K(Z)}function f(X,K,k,Z,Q,se,le,fe){le===void 0&&(le=15),fe===void 0&&(fe=null),h(X,function(ue){var Se=ue.gl,ke=ue.withProgram,Be=ue.withTexture;Be("copy",function(Ae,W){Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,Q,se,0,Se.RGBA,Se.UNSIGNED_BYTE,K),ke("copy",a,l,function(Re){var Ee=Re.setUniform,Ce=Re.setAttribute;Ce("aUV",2,Se.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ee("1i","image",W),Se.bindFramebuffer(Se.FRAMEBUFFER,fe||null),Se.disable(Se.BLEND),Se.colorMask(le&8,le&4,le&2,le&1),Se.viewport(k,Z,Q,se),Se.scissor(k,Z,Q,se),Se.drawArrays(Se.TRIANGLES,0,3)})})})}function p(X,K,k){var Z=X.width,Q=X.height;h(X,function(se){var le=se.gl,fe=new Uint8Array(Z*Q*4);le.readPixels(0,0,Z,Q,le.RGBA,le.UNSIGNED_BYTE,fe),X.width=K,X.height=k,f(le,fe,0,0,Z,Q)})}var g=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:f,resizeWebGLCanvasWithoutClearing:p});function v(X,K,k,Z,Q,se){se===void 0&&(se=1);var le=new Uint8Array(X*K),fe=Z[2]-Z[0],ue=Z[3]-Z[1],Se=[];o(k,function(Ce,_e,Ye,we){Se.push({x1:Ce,y1:_e,x2:Ye,y2:we,minX:Math.min(Ce,Ye),minY:Math.min(_e,we),maxX:Math.max(Ce,Ye),maxY:Math.max(_e,we)})}),Se.sort(function(Ce,_e){return Ce.maxX-_e.maxX});for(var ke=0;ke<X;ke++)for(var Be=0;Be<K;Be++){var Ae=Re(Z[0]+fe*(ke+.5)/X,Z[1]+ue*(Be+.5)/K),W=Math.pow(1-Math.abs(Ae)/Q,se)/2;Ae<0&&(W=1-W),W=Math.max(0,Math.min(255,Math.round(W*255))),le[Be*X+ke]=W}return le;function Re(Ce,_e){for(var Ye=1/0,we=1/0,G=Se.length;G--;){var F=Se[G];if(F.maxX+we<=Ce)break;if(Ce+we>F.minX&&_e-we<F.maxY&&_e+we>F.minY){var te=y(Ce,_e,F.x1,F.y1,F.x2,F.y2);te<Ye&&(Ye=te,we=Math.sqrt(Ye))}}return Ee(Ce,_e)&&(we=-we),we}function Ee(Ce,_e){for(var Ye=0,we=Se.length;we--;){var G=Se[we];if(G.maxX<=Ce)break;var F=G.y1>_e!=G.y2>_e&&Ce<(G.x2-G.x1)*(_e-G.y1)/(G.y2-G.y1)+G.x1;F&&(Ye+=G.y1<G.y2?1:-1)}return Ye!==0}}function _(X,K,k,Z,Q,se,le,fe,ue,Se){se===void 0&&(se=1),fe===void 0&&(fe=0),ue===void 0&&(ue=0),Se===void 0&&(Se=0),x(X,K,k,Z,Q,se,le,null,fe,ue,Se)}function x(X,K,k,Z,Q,se,le,fe,ue,Se,ke){se===void 0&&(se=1),ue===void 0&&(ue=0),Se===void 0&&(Se=0),ke===void 0&&(ke=0);for(var Be=v(X,K,k,Z,Q,se),Ae=new Uint8Array(Be.length*4),W=0;W<Be.length;W++)Ae[W*4+ke]=Be[W];f(le,Ae,ue,Se,X,K,1<<3-ke,fe)}function y(X,K,k,Z,Q,se){var le=Q-k,fe=se-Z,ue=le*le+fe*fe,Se=ue?Math.max(0,Math.min(1,((X-k)*le+(K-Z)*fe)/ue)):0,ke=X-(k+Se*le),Be=K-(Z+Se*fe);return ke*ke+Be*Be}var S=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:_,generateIntoFramebuffer:x}),A="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",M="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",C="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",T=new Float32Array([0,0,2,0,0,2]),R=null,I=!1,P={},B=new WeakMap;function O(X){if(!I&&!j(X))throw new Error("WebGL generation not supported")}function N(X,K,k,Z,Q,se,le){if(se===void 0&&(se=1),le===void 0&&(le=null),!le&&(le=R,!le)){var fe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!fe)throw new Error("OffscreenCanvas or DOM canvas not supported");le=R=fe.getContext("webgl",{depth:!1})}O(le);var ue=new Uint8Array(X*K*4);h(le,function(Ae){var W=Ae.gl,Re=Ae.withTexture,Ee=Ae.withTextureFramebuffer;Re("readable",function(Ce,_e){W.texImage2D(W.TEXTURE_2D,0,W.RGBA,X,K,0,W.RGBA,W.UNSIGNED_BYTE,null),Ee(Ce,_e,function(Ye){z(X,K,k,Z,Q,se,W,Ye,0,0,0),W.readPixels(0,0,X,K,W.RGBA,W.UNSIGNED_BYTE,ue)})})});for(var Se=new Uint8Array(X*K),ke=0,Be=0;ke<ue.length;ke+=4)Se[Be++]=ue[ke];return Se}function ne(X,K,k,Z,Q,se,le,fe,ue,Se){se===void 0&&(se=1),fe===void 0&&(fe=0),ue===void 0&&(ue=0),Se===void 0&&(Se=0),z(X,K,k,Z,Q,se,le,null,fe,ue,Se)}function z(X,K,k,Z,Q,se,le,fe,ue,Se,ke){se===void 0&&(se=1),ue===void 0&&(ue=0),Se===void 0&&(Se=0),ke===void 0&&(ke=0),O(le);var Be=[];o(k,function(Ae,W,Re,Ee){Be.push(Ae,W,Re,Ee)}),Be=new Float32Array(Be),h(le,function(Ae){var W=Ae.gl,Re=Ae.isWebGL2,Ee=Ae.getExtension,Ce=Ae.withProgram,_e=Ae.withTexture,Ye=Ae.withTextureFramebuffer,we=Ae.handleContextLoss;if(_e("rawDistances",function(G,F){(X!==G._lastWidth||K!==G._lastHeight)&&W.texImage2D(W.TEXTURE_2D,0,W.RGBA,G._lastWidth=X,G._lastHeight=K,0,W.RGBA,W.UNSIGNED_BYTE,null),Ce("main",A,M,function(te){var xe=te.setAttribute,ge=te.setUniform,ye=!Re&&Ee("ANGLE_instanced_arrays"),Fe=!Re&&Ee("EXT_blend_minmax");xe("aUV",2,W.STATIC_DRAW,0,T),xe("aLineSegment",4,W.DYNAMIC_DRAW,1,Be),ge.apply(void 0,["4f","uGlyphBounds"].concat(Z)),ge("1f","uMaxDistance",Q),ge("1f","uExponent",se),Ye(G,F,function(Ve){W.enable(W.BLEND),W.colorMask(!0,!0,!0,!0),W.viewport(0,0,X,K),W.scissor(0,0,X,K),W.blendFunc(W.ONE,W.ONE),W.blendEquationSeparate(W.FUNC_ADD,Re?W.MAX:Fe.MAX_EXT),W.clear(W.COLOR_BUFFER_BIT),Re?W.drawArraysInstanced(W.TRIANGLES,0,3,Be.length/4):ye.drawArraysInstancedANGLE(W.TRIANGLES,0,3,Be.length/4)})}),Ce("post",a,C,function(te){te.setAttribute("aUV",2,W.STATIC_DRAW,0,T),te.setUniform("1i","tex",F),W.bindFramebuffer(W.FRAMEBUFFER,fe),W.disable(W.BLEND),W.colorMask(ke===0,ke===1,ke===2,ke===3),W.viewport(ue,Se,X,K),W.scissor(ue,Se,X,K),W.drawArrays(W.TRIANGLES,0,3)})}),W.isContextLost())throw we(),new Error("webgl context lost")})}function j(X){var K=!X||X===R?P:X.canvas||X,k=B.get(K);if(k===void 0){I=!0;var Z=null;try{var Q=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],se=N(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,X);k=se&&Q.length===se.length&&se.every(function(le,fe){return le===Q[fe]}),k||(Z="bad trial run results",console.info(Q,se))}catch(le){k=!1,Z=le.message}Z&&console.warn("WebGL SDF generation not supported:",Z),I=!1,B.set(K,k)}return k}var q=Object.freeze({__proto__:null,generate:N,generateIntoCanvas:ne,generateIntoFramebuffer:z,isSupported:j});function he(X,K,k,Z,Q,se){Q===void 0&&(Q=Math.max(Z[2]-Z[0],Z[3]-Z[1])/2),se===void 0&&(se=1);try{return N.apply(q,arguments)}catch(le){return console.info("WebGL SDF generation failed, falling back to JS",le),v.apply(S,arguments)}}function H(X,K,k,Z,Q,se,le,fe,ue,Se){Q===void 0&&(Q=Math.max(Z[2]-Z[0],Z[3]-Z[1])/2),se===void 0&&(se=1),fe===void 0&&(fe=0),ue===void 0&&(ue=0),Se===void 0&&(Se=0);try{return ne.apply(q,arguments)}catch(ke){return console.info("WebGL SDF generation failed, falling back to JS",ke),_.apply(S,arguments)}}return t.forEachPathCommand=s,t.generate=he,t.generateIntoCanvas=H,t.javascript=S,t.pathToLineSegments=o,t.webgl=q,t.webglUtils=g,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}function iZ(){var i=function(t){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},s={};r.L=1,s[1]="L",Object.keys(n).forEach(function(we,G){r[we]=1<<G+1,s[r[we]]=we}),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,a=r.L|r.R|r.AL,l=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,c=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|o|r.PDI|c,h=null;function f(){if(!h){h=new Map;var we=function(F){if(n.hasOwnProperty(F)){var te=0;n[F].split(",").forEach(function(xe){var ge=xe.split("+"),ye=ge[0],Fe=ge[1];ye=parseInt(ye,36),Fe=Fe?parseInt(Fe,36):0,h.set(te+=ye,r[F]);for(var Ve=0;Ve<Fe;Ve++)h.set(++te,r[F])})}};for(var G in n)we(G)}}function p(we){return f(),h.get(we.codePointAt(0))||r.L}function g(we){return s[p(we)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(we,G){var F=36,te=0,xe=new Map,ge=G&&new Map,ye;return we.split(",").forEach(function Fe(Ve){if(Ve.indexOf("+")!==-1)for(var He=+Ve;He--;)Fe(ye);else{ye=Ve;var je=Ve.split(">"),tt=je[0],Oe=je[1];tt=String.fromCodePoint(te+=parseInt(tt,F)),Oe=String.fromCodePoint(te+=parseInt(Oe,F)),xe.set(tt,Oe),G&&ge.set(Oe,tt)}}),{map:xe,reverseMap:ge}}var x,y,S;function A(){if(!x){var we=_(v.pairs,!0),G=we.map,F=we.reverseMap;x=G,y=F,S=_(v.canonical,!1).map}}function M(we){return A(),x.get(we)||null}function C(we){return A(),y.get(we)||null}function T(we){return A(),S.get(we)||null}var R=r.L,I=r.R,P=r.EN,B=r.ES,O=r.ET,N=r.AN,ne=r.CS,z=r.B,j=r.S,q=r.ON,he=r.BN,H=r.NSM,X=r.AL,K=r.LRO,k=r.RLO,Z=r.LRE,Q=r.RLE,se=r.PDF,le=r.LRI,fe=r.RLI,ue=r.FSI,Se=r.PDI;function ke(we,G){for(var F=125,te=new Uint32Array(we.length),xe=0;xe<we.length;xe++)te[xe]=p(we[xe]);var ge=new Map;function ye(Gi,Cr){var hi=te[Gi];te[Gi]=Cr,ge.set(hi,ge.get(hi)-1),hi&l&&ge.set(l,ge.get(l)-1),ge.set(Cr,(ge.get(Cr)||0)+1),Cr&l&&ge.set(l,(ge.get(l)||0)+1)}for(var Fe=new Uint8Array(we.length),Ve=new Map,He=[],je=null,tt=0;tt<we.length;tt++)je||He.push(je={start:tt,end:we.length-1,level:G==="rtl"?1:G==="ltr"?0:bu(tt,!1)}),te[tt]&z&&(je.end=tt,je=null);for(var Oe=Q|Z|k|K|o|Se|se|z,yt=function(Gi){return Gi+(Gi&1?1:2)},Qe=function(Gi){return Gi+(Gi&1?2:1)},it=0;it<He.length;it++){je=He[it];var Ge=[{_level:je.level,_override:0,_isolate:0}],ze=void 0,Ze=0,ht=0,_t=0;ge.clear();for(var rt=je.start;rt<=je.end;rt++){var ve=te[rt];if(ze=Ge[Ge.length-1],ge.set(ve,(ge.get(ve)||0)+1),ve&l&&ge.set(l,(ge.get(l)||0)+1),ve&Oe)if(ve&(Q|Z)){Fe[rt]=ze._level;var ae=(ve===Q?Qe:yt)(ze._level);ae<=F&&!Ze&&!ht?Ge.push({_level:ae,_override:0,_isolate:0}):Ze||ht++}else if(ve&(k|K)){Fe[rt]=ze._level;var $e=(ve===k?Qe:yt)(ze._level);$e<=F&&!Ze&&!ht?Ge.push({_level:$e,_override:ve&k?I:R,_isolate:0}):Ze||ht++}else if(ve&o){ve&ue&&(ve=bu(rt+1,!0)===1?fe:le),Fe[rt]=ze._level,ze._override&&ye(rt,ze._override);var et=(ve===fe?Qe:yt)(ze._level);et<=F&&Ze===0&&ht===0?(_t++,Ge.push({_level:et,_override:0,_isolate:1,_isolInitIndex:rt})):Ze++}else if(ve&Se){if(Ze>0)Ze--;else if(_t>0){for(ht=0;!Ge[Ge.length-1]._isolate;)Ge.pop();var St=Ge[Ge.length-1]._isolInitIndex;St!=null&&(Ve.set(St,rt),Ve.set(rt,St)),Ge.pop(),_t--}ze=Ge[Ge.length-1],Fe[rt]=ze._level,ze._override&&ye(rt,ze._override)}else ve&se?(Ze===0&&(ht>0?ht--:!ze._isolate&&Ge.length>1&&(Ge.pop(),ze=Ge[Ge.length-1])),Fe[rt]=ze._level):ve&z&&(Fe[rt]=je.level);else Fe[rt]=ze._level,ze._override&&ve!==he&&ye(rt,ze._override)}for(var mt=[],kt=null,Tt=je.start;Tt<=je.end;Tt++){var An=te[Tt];if(!(An&c)){var Wt=Fe[Tt],Ct=An&o,vn=An===Se;kt&&Wt===kt._level?(kt._end=Tt,kt._endsWithIsolInit=Ct):mt.push(kt={_start:Tt,_end:Tt,_level:Wt,_startsWithPDI:vn,_endsWithIsolInit:Ct})}}for(var wn=[],nn=0;nn<mt.length;nn++){var On=mt[nn];if(!On._startsWithPDI||On._startsWithPDI&&!Ve.has(On._start)){for(var Nn=[kt=On],yn=void 0;kt&&kt._endsWithIsolInit&&(yn=Ve.get(kt._end))!=null;)for(var xt=nn+1;xt<mt.length;xt++)if(mt[xt]._start===yn){Nn.push(kt=mt[xt]);break}for(var Zn=[],Er=0;Er<Nn.length;Er++)for(var U=Nn[Er],V=U._start;V<=U._end;V++)Zn.push(V);for(var ce=Fe[Zn[0]],L=je.level,J=Zn[0]-1;J>=0;J--)if(!(te[J]&c)){L=Fe[J];break}var $=Zn[Zn.length-1],oe=Fe[$],re=je.level;if(!(te[$]&o)){for(var Te=$+1;Te<=je.end;Te++)if(!(te[Te]&c)){re=Fe[Te];break}}wn.push({_seqIndices:Zn,_sosType:Math.max(L,ce)%2?I:R,_eosType:Math.max(re,oe)%2?I:R})}}for(var Pe=0;Pe<wn.length;Pe++){var Le=wn[Pe],de=Le._seqIndices,lt=Le._sosType,Xe=Le._eosType,We=Fe[de[0]]&1?I:R;if(ge.get(H))for(var dt=0;dt<de.length;dt++){var At=de[dt];if(te[At]&H){for(var Mt=lt,Bt=dt-1;Bt>=0;Bt--)if(!(te[de[Bt]]&c)){Mt=te[de[Bt]];break}ye(At,Mt&(o|Se)?q:Mt)}}if(ge.get(P))for(var ct=0;ct<de.length;ct++){var nt=de[ct];if(te[nt]&P)for(var zt=ct-1;zt>=-1;zt--){var bt=zt===-1?lt:te[de[zt]];if(bt&a){bt===X&&ye(nt,N);break}}}if(ge.get(X))for(var Rt=0;Rt<de.length;Rt++){var fn=de[Rt];te[fn]&X&&ye(fn,I)}if(ge.get(B)||ge.get(ne))for(var Tn=1;Tn<de.length-1;Tn++){var Cn=de[Tn];if(te[Cn]&(B|ne)){for(var Jt=0,Xt=0,Pn=Tn-1;Pn>=0&&(Jt=te[de[Pn]],!!(Jt&c));Pn--);for(var Ot=Tn+1;Ot<de.length&&(Xt=te[de[Ot]],!!(Xt&c));Ot++);Jt===Xt&&(te[Cn]===B?Jt===P:Jt&(P|N))&&ye(Cn,Jt)}}if(ge.get(P))for(var Ut=0;Ut<de.length;Ut++){var bn=de[Ut];if(te[bn]&P){for(var $i=Ut-1;$i>=0&&te[de[$i]]&(O|c);$i--)ye(de[$i],P);for(Ut++;Ut<de.length&&te[de[Ut]]&(O|c|P);Ut++)te[de[Ut]]!==P&&ye(de[Ut],P)}}if(ge.get(O)||ge.get(B)||ge.get(ne))for(var ui=0;ui<de.length;ui++){var es=de[ui];if(te[es]&(O|B|ne)){ye(es,q);for(var Zo=ui-1;Zo>=0&&te[de[Zo]]&c;Zo--)ye(de[Zo],q);for(var Qo=ui+1;Qo<de.length&&te[de[Qo]]&c;Qo++)ye(de[Qo],q)}}if(ge.get(P))for(var qo=0,Yl=lt;qo<de.length;qo++){var Nm=de[qo],Df=te[Nm];Df&P?Yl===R&&ye(Nm,R):Df&a&&(Yl=Df)}if(ge.get(l)){var $o=I|P|N,wu=$o|R,xo=[];{for(var Fa=[],So=0;So<de.length;So++)if(te[de[So]]&l){var rn=we[de[So]],Lf=void 0;if(M(rn)!==null)if(Fa.length<63)Fa.push({char:rn,seqIndex:So});else break;else if((Lf=C(rn))!==null)for(var ea=Fa.length-1;ea>=0;ea--){var Tu=Fa[ea].char;if(Tu===Lf||Tu===C(T(rn))||M(T(Tu))===rn){xo.push([Fa[ea].seqIndex,So]),Fa.length=ea;break}}}xo.sort(function(Gi,Cr){return Gi[0]-Cr[0]})}for(var Uf=0;Uf<xo.length;Uf++){for(var km=xo[Uf],Qn=km[0],Jl=km[1],zm=!1,Mr=0,Ff=Qn+1;Ff<Jl;Ff++){var Kl=de[Ff];if(te[Kl]&wu){zm=!0;var ts=te[Kl]&$o?I:R;if(ts===We){Mr=ts;break}}}if(zm&&!Mr){Mr=lt;for(var Of=Qn-1;Of>=0;Of--){var Gm=de[Of];if(te[Gm]&wu){var ns=te[Gm]&$o?I:R;ns!==We?Mr=ns:Mr=We;break}}}if(Mr){if(te[de[Qn]]=te[de[Jl]]=Mr,Mr!==We){for(var wr=Qn+1;wr<de.length;wr++)if(!(te[de[wr]]&c)){p(we[de[wr]])&H&&(te[de[wr]]=Mr);break}}if(Mr!==We){for(var Ao=Jl+1;Ao<de.length;Ao++)if(!(te[de[Ao]]&c)){p(we[de[Ao]])&H&&(te[de[Ao]]=Mr);break}}}}for(var Ss=0;Ss<de.length;Ss++)if(te[de[Ss]]&l){for(var Nf=Ss,kf=Ss,zr=lt,Zl=Ss-1;Zl>=0;Zl--)if(te[de[Zl]]&c)Nf=Zl;else{zr=te[de[Zl]]&$o?I:R;break}for(var Ql=Xe,ql=Ss+1;ql<de.length;ql++)if(te[de[ql]]&(l|c))kf=ql;else{Ql=te[de[ql]]&$o?I:R;break}for(var Tr=Nf;Tr<=kf;Tr++)te[de[Tr]]=zr===Ql?zr:We;Ss=kf}}}for(var zi=je.start;zi<=je.end;zi++){var Cu=Fe[zi],Ks=te[zi];if(Cu&1?Ks&(R|P|N)&&Fe[zi]++:Ks&I?Fe[zi]++:Ks&(N|P)&&(Fe[zi]+=2),Ks&c&&(Fe[zi]=zi===0?je.level:Fe[zi-1]),zi===je.end||p(we[zi])&(j|z))for(var Oa=zi;Oa>=0&&p(we[Oa])&u;Oa--)Fe[Oa]=je.level}}return{levels:Fe,paragraphs:He};function bu(Gi,Cr){for(var hi=Gi;hi<we.length;hi++){var fi=te[hi];if(fi&(I|X))return 1;if(fi&(z|R)||Cr&&fi===Se)return 0;if(fi&o){var is=Hm(hi);hi=is===-1?we.length:is}}return 0}function Hm(Gi){for(var Cr=1,hi=Gi+1;hi<we.length;hi++){var fi=te[hi];if(fi&z)break;if(fi&Se){if(--Cr===0)return hi}else fi&o&&Cr++}return-1}}var Be="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ae;function W(){if(!Ae){var we=_(Be,!0),G=we.map,F=we.reverseMap;F.forEach(function(te,xe){G.set(xe,te)}),Ae=G}}function Re(we){return W(),Ae.get(we)||null}function Ee(we,G,F,te){var xe=we.length;F=Math.max(0,F==null?0:+F),te=Math.min(xe-1,te==null?xe-1:+te);for(var ge=new Map,ye=F;ye<=te;ye++)if(G[ye]&1){var Fe=Re(we[ye]);Fe!==null&&ge.set(ye,Fe)}return ge}function Ce(we,G,F,te){var xe=we.length;F=Math.max(0,F==null?0:+F),te=Math.min(xe-1,te==null?xe-1:+te);var ge=[];return G.paragraphs.forEach(function(ye){var Fe=Math.max(F,ye.start),Ve=Math.min(te,ye.end);if(Fe<Ve){for(var He=G.levels.slice(Fe,Ve+1),je=Ve;je>=Fe&&p(we[je])&u;je--)He[je]=ye.level;for(var tt=ye.level,Oe=1/0,yt=0;yt<He.length;yt++){var Qe=He[yt];Qe>tt&&(tt=Qe),Qe<Oe&&(Oe=Qe|1)}for(var it=tt;it>=Oe;it--)for(var Ge=0;Ge<He.length;Ge++)if(He[Ge]>=it){for(var ze=Ge;Ge+1<He.length&&He[Ge+1]>=it;)Ge++;Ge>ze&&ge.push([ze+Fe,Ge+Fe])}}}),ge}function _e(we,G,F,te){var xe=Ye(we,G,F,te),ge=[].concat(we);return xe.forEach(function(ye,Fe){ge[Fe]=(G.levels[ye]&1?Re(we[ye]):null)||we[ye]}),ge.join("")}function Ye(we,G,F,te){for(var xe=Ce(we,G,F,te),ge=[],ye=0;ye<we.length;ye++)ge[ye]=ye;return xe.forEach(function(Fe){for(var Ve=Fe[0],He=Fe[1],je=ge.slice(Ve,He+1),tt=je.length;tt--;)ge[He-tt]=je[tt]}),ge}return t.closingToOpeningBracket=C,t.getBidiCharType=p,t.getBidiCharTypeName=g,t.getCanonicalBracket=T,t.getEmbeddingLevels=ke,t.getMirroredCharacter=Re,t.getMirroredCharactersMap=Ee,t.getReorderSegments=Ce,t.getReorderedIndices=Ye,t.getReorderedString=_e,t.openingToClosingBracket=M,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return i}const eN=/\bvoid\s+main\s*\(\s*\)\s*{/g;function KE(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,s){let o=jt[s];return o?KE(o):r}return i.replace(t,n)}const tr=[];for(let i=0;i<256;i++)tr[i]=(i<16?"0":"")+i.toString(16);function rZ(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(tr[i&255]+tr[i>>8&255]+tr[i>>16&255]+tr[i>>24&255]+"-"+tr[t&255]+tr[t>>8&255]+"-"+tr[t>>16&15|64]+tr[t>>24&255]+"-"+tr[n&63|128]+tr[n>>8&255]+"-"+tr[n>>16&255]+tr[n>>24&255]+tr[r&255]+tr[r>>8&255]+tr[r>>16&255]+tr[r>>24&255]).toUpperCase()}const _c=Object.assign||function(){let i=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let r=arguments[t];if(r)for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},sZ=Date.now(),EB=new WeakMap,MB=new Map;let oZ=1e10;function ZE(i,t){const n=uZ(t);let r=EB.get(i);if(r||EB.set(i,r=Object.create(null)),r[n])return new r[n];const s=`_onBeforeCompile${n}`,o=function(u,h){i.onBeforeCompile.call(this,u,h);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let p=MB[f];if(!p){const g=aZ(this,u,t,n);p=MB[f]=g}u.vertexShader=p.vertexShader,u.fragmentShader=p.fragmentShader,_c(u.uniforms,this.uniforms),t.timeUniform&&(u.uniforms[t.timeUniform]={get value(){return Date.now()-sZ}}),this[s]&&this[s](u)},a=function(){return l(t.chained?i:i.clone())},l=function(u){const h=Object.create(u,c);return Object.defineProperty(h,"baseMaterial",{value:i}),Object.defineProperty(h,"id",{value:oZ++}),h.uuid=rZ(),h.uniforms=_c({},u.uniforms,t.uniforms),h.defines=_c({},u.defines,t.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",h.extensions=_c({},u.extensions,t.extensions),h._listeners=void 0,h},c={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return o},set(u){this[s]=u}},copy:{writable:!0,configurable:!0,value:function(u){return i.copy.call(this,u),!i.isShaderMaterial&&!i.isDerivedMaterial&&(_c(this.extensions,u.extensions),_c(this.defines,u.defines),_c(this.uniforms,Tw.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new i.constructor;return l(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=ZE(i.isDerivedMaterial?i.getDepthMaterial():new qy({depthPacking:xw}),t),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=ZE(i.isDerivedMaterial?i.getDistanceMaterial():new $y,t),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),i.dispose.call(this)}}};return r[n]=a,new a}function aZ(i,{vertexShader:t,fragmentShader:n},r,s){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:f,fragmentColorTransform:p,customRewriter:g,timeUniform:v}=r;if(o=o||"",a=a||"",l=l||"",u=u||"",h=h||"",f=f||"",(c||g)&&(t=KE(t)),(p||g)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=KE(n)),g){let _=g({vertexShader:t,fragmentShader:n});t=_.vertexShader,n=_.fragmentShader}if(p){let _=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(_.push(x),"")),f=`${p}
${_.join(`
`)}
${f}`}if(v){const _=`
uniform float ${v};
`;o=_+o,u=_+u}return c&&(t=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${t}
`,o=`${o}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,a=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${a}
`,t=t.replace(/\b(position|normal|uv)\b/g,(_,x,y,S)=>/\battribute\s+vec[23]\s+$/.test(S.substr(0,y))?x:`troika_${x}_${s}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),t=wB(t,s,o,a,l),n=wB(n,s,u,h,f),{vertexShader:t,fragmentShader:n}}function wB(i,t,n,r,s){return(r||s||n)&&(i=i.replace(eN,`
${n}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${r}
  troikaOrigMain${t}();
  ${s}
}`),i}function lZ(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let cZ=0;const TB=new Map;function uZ(i){const t=JSON.stringify(i,lZ);let n=TB.get(t);return n==null&&TB.set(t,n=++cZ),n}function hZ(i,t,n){const{defaultFontURL:r}=n,s=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,l="[^\\S\\u00A0]",c=new RegExp(`${l}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(S,A){function M(){const C=T=>{console.error(`Failure loading font ${S}${S===r?"":"; trying fallback"}`,T),S!==r&&(S=r,M())};try{const T=new XMLHttpRequest;T.open("get",S,!0),T.responseType="arraybuffer",T.onload=function(){if(T.status>=400)C(new Error(T.statusText));else if(T.status>0)try{const R=i(T.response);A(R)}catch(R){C(R)}},T.onerror=C,T.send()}catch(T){C(T)}}M()}function h(S,A){S||(S=r);let M=s[S];M?M.pending?M.pending.push(A):A(M):(s[S]={pending:[A]},u(S,C=>{let T=s[S].pending;s[S]=C,T.forEach(R=>R(C))}))}function f({text:S="",font:A=r,sdfGlyphSize:M=64,fontSize:C=1,letterSpacing:T=0,lineHeight:R="normal",maxWidth:I=o,direction:P,textAlign:B="left",textIndent:O=0,whiteSpace:N="normal",overflowWrap:ne="normal",anchorX:z=0,anchorY:j=0,includeCaretPositions:q=!1,chunkedBoundsSize:he=8192,colorRanges:H=null},X,K=!1){const k=_(),Z={fontLoad:0,typesetting:0};S.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),S=S.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),C=+C,T=+T,I=+I,R=R||"normal",O=+O,h(A,Q=>{const se=isFinite(I);let le=null,fe=null,ue=null,Se=null,ke=null,Be=null,Ae=null,W=0,Re=0,Ee=N!=="nowrap";const{ascender:Ce,descender:_e,unitsPerEm:Ye,lineGap:we,capHeight:G,xHeight:F}=Q;Z.fontLoad=_()-k;const te=_(),xe=C/Ye;R==="normal"&&(R=(Ce-_e+we)/Ye),R=R*C;const ge=(R-(Ce-_e)*xe)/2,ye=-(Ce*xe+ge),Fe=Math.min(R,(Ce-_e)*xe),Ve=(Ce+_e)/2*xe-Fe/2;let He=O,je=new x;const tt=[je];Q.forEachGlyph(S,C,T,(Qe,it,Ge)=>{const ze=S.charAt(Ge),Ze=Qe.advanceWidth*xe,ht=je.count;let _t;if("isEmpty"in Qe||(Qe.isWhitespace=!!ze&&new RegExp(l).test(ze),Qe.canBreakAfter=!!ze&&c.test(ze),Qe.isEmpty=Qe.xMin===Qe.xMax||Qe.yMin===Qe.yMax||a.test(ze)),!Qe.isWhitespace&&!Qe.isEmpty&&Re++,Ee&&se&&!Qe.isWhitespace&&it+Ze+He>I&&ht){if(je.glyphAt(ht-1).glyphObj.canBreakAfter)_t=new x,He=-it;else for(let ve=ht;ve--;)if(ve===0&&ne==="break-word"){_t=new x,He=-it;break}else if(je.glyphAt(ve).glyphObj.canBreakAfter){_t=je.splitAt(ve+1);const ae=_t.glyphAt(0).x;He-=ae;for(let $e=_t.count;$e--;)_t.glyphAt($e).x-=ae;break}_t&&(je.isSoftWrapped=!0,je=_t,tt.push(je),W=I)}let rt=je.glyphAt(je.count);rt.glyphObj=Qe,rt.x=it+He,rt.width=Ze,rt.charIndex=Ge,ze===`
`&&(je=new x,tt.push(je),He=-(it+Ze+T*C)+O)}),tt.forEach(Qe=>{for(let it=Qe.count;it--;){let{glyphObj:Ge,x:ze,width:Ze}=Qe.glyphAt(it);if(!Ge.isWhitespace){Qe.width=ze+Ze,Qe.width>W&&(W=Qe.width);return}}});let Oe=0,yt=0;if(z&&(typeof z=="number"?Oe=-z:typeof z=="string"&&(Oe=-W*(z==="left"?0:z==="center"?.5:z==="right"?1:g(z)))),j){if(typeof j=="number")yt=-j;else if(typeof j=="string"){let Qe=tt.length*R;yt=j==="top"?0:j==="top-baseline"?-ye:j==="top-cap"?-ye-G*xe:j==="top-ex"?-ye-F*xe:j==="middle"?Qe/2:j==="bottom"?Qe:j==="bottom-baseline"?Qe-ge+_e*xe:g(j)*Qe}}if(!K){const Qe=t.getEmbeddingLevels(S,P);le=new Uint16Array(Re),fe=new Float32Array(Re*2),ue={},Be=[o,o,-o,-o],Ae=[];let it=ye;q&&(ke=new Float32Array(S.length*3)),H&&(Se=new Uint8Array(Re*3));let Ge=0,ze=-1,Ze=-1,ht,_t;if(tt.forEach((rt,ve)=>{let{count:ae,width:$e}=rt;if(ae>0){let et=0;for(let Wt=ae;Wt--&&rt.glyphAt(Wt).glyphObj.isWhitespace;)et++;let St=0,mt=0;if(B==="center")St=(W-$e)/2;else if(B==="right")St=W-$e;else if(B==="justify"&&rt.isSoftWrapped){let Wt=0;for(let Ct=ae-et;Ct--;)rt.glyphAt(Ct).glyphObj.isWhitespace&&Wt++;mt=(W-$e)/Wt}if(mt||St){let Wt=0;for(let Ct=0;Ct<ae;Ct++){let vn=rt.glyphAt(Ct);const wn=vn.glyphObj;vn.x+=St+Wt,mt!==0&&wn.isWhitespace&&Ct<ae-et&&(Wt+=mt,vn.width+=mt)}}const kt=t.getReorderSegments(S,Qe,rt.glyphAt(0).charIndex,rt.glyphAt(rt.count-1).charIndex);for(let Wt=0;Wt<kt.length;Wt++){const[Ct,vn]=kt[Wt];let wn=1/0,nn=-1/0;for(let On=0;On<ae;On++)if(rt.glyphAt(On).charIndex>=Ct){let Nn=On,yn=On;for(;yn<ae;yn++){let xt=rt.glyphAt(yn);if(xt.charIndex>vn)break;yn<ae-et&&(wn=Math.min(wn,xt.x),nn=Math.max(nn,xt.x+xt.width))}for(let xt=Nn;xt<yn;xt++){const Zn=rt.glyphAt(xt);Zn.x=nn-(Zn.x+Zn.width-wn)}break}}let Tt;const An=Wt=>Tt=Wt;for(let Wt=0;Wt<ae;Wt++){let Ct=rt.glyphAt(Wt);Tt=Ct.glyphObj;const vn=Tt.index,wn=Qe.levels[Ct.charIndex]&1;if(wn){const nn=t.getMirroredCharacter(S[Ct.charIndex]);nn&&Q.forEachGlyph(nn,0,0,An)}if(q){const{charIndex:nn}=Ct,On=Ct.x+Oe,Nn=Ct.x+Ct.width+Oe;ke[nn*3]=wn?Nn:On,ke[nn*3+1]=wn?On:Nn,ke[nn*3+2]=it+Ve+yt;const yn=nn-ze;yn>1&&v(ke,ze,yn),ze=nn}if(H){const{charIndex:nn}=Ct;for(;nn>Ze;)Ze++,H.hasOwnProperty(Ze)&&(_t=H[Ze])}if(!Tt.isWhitespace&&!Tt.isEmpty){const nn=Ge++;ue[vn]||(ue[vn]={path:Tt.path,pathBounds:[Tt.xMin,Tt.yMin,Tt.xMax,Tt.yMax]});const On=Ct.x+Oe,Nn=it+yt;fe[nn*2]=On,fe[nn*2+1]=Nn;const yn=On+Tt.xMin*xe,xt=Nn+Tt.yMin*xe,Zn=On+Tt.xMax*xe,Er=Nn+Tt.yMax*xe;yn<Be[0]&&(Be[0]=yn),xt<Be[1]&&(Be[1]=xt),Zn>Be[2]&&(Be[2]=Zn),Er>Be[3]&&(Be[3]=Er),nn%he===0&&(ht={start:nn,end:nn,rect:[o,o,-o,-o]},Ae.push(ht)),ht.end++;const U=ht.rect;if(yn<U[0]&&(U[0]=yn),xt<U[1]&&(U[1]=xt),Zn>U[2]&&(U[2]=Zn),Er>U[3]&&(U[3]=Er),le[nn]=vn,H){const V=nn*3;Se[V]=_t>>16&255,Se[V+1]=_t>>8&255,Se[V+2]=_t&255}}}}it-=R}),ke){const rt=S.length-ze;rt>1&&v(ke,ze,rt)}}Z.typesetting=_()-te,X({glyphIds:le,glyphPositions:fe,glyphData:ue,caretPositions:ke,caretHeight:Fe,glyphColors:Se,chunkedBounds:Ae,fontSize:C,unitsPerEm:Ye,ascender:Ce*xe,descender:_e*xe,capHeight:G*xe,xHeight:F*xe,lineHeight:R,topBaseline:ye,blockBounds:[Oe,yt-tt.length*R,Oe+W,yt],visibleBounds:Be,timings:Z})})}function p(S,A){f(S,M=>{const[C,T,R,I]=M.blockBounds;A({width:R-C,height:I-T})},{metricsOnly:!0})}function g(S){let A=S.match(/^([\d.]+)%$/),M=A?parseFloat(A[1]):NaN;return isNaN(M)?0:M/100}function v(S,A,M){const C=S[A*3],T=S[A*3+1],R=S[A*3+2],I=(T-C)/M;for(let P=0;P<M;P++){const B=(A+P)*3;S[B]=C+I*P,S[B+1]=C+I*(P+1),S[B+2]=R}}function _(){return(self.performance||Date).now()}function x(){this.data=[]}const y=["glyphObj","x","width","charIndex"];return x.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(S){let A=x.flyweight;return A.data=this.data,A.index=S,A},splitAt(S){let A=new x;return A.data=this.data.splice(S*y.length),A}},x.flyweight=y.reduce((S,A,M,C)=>(Object.defineProperty(S,A,{get(){return this.data[this.index*y.length+M]},set(T){this.data[this.index*y.length+M]=T}}),S),{data:null,index:0}),{typeset:f,measure:p,loadFont:h}}const Qc=()=>(self.performance||Date).now(),P_=$O();let CB;function fZ(i,t,n,r,s,o,a,l,c,u,h=!0){return h?pZ(i,t,n,r,s,o,a,l,c,u).then(null,f=>(CB||(console.warn("WebGL SDF generation failed, falling back to JS",f),CB=!0),RB(i,t,n,r,s,o,a,l,c,u))):RB(i,t,n,r,s,o,a,l,c,u)}const T0=[],dZ=5;let QE=0;function tN(){const i=Qc();for(;T0.length&&Qc()-i<dZ;)T0.shift()();QE=T0.length?setTimeout(tN,0):0}const pZ=(...i)=>new Promise((t,n)=>{T0.push(()=>{const r=Qc();try{P_.webgl.generateIntoCanvas(...i),t({timing:Qc()-r})}catch(s){n(s)}}),QE||(QE=setTimeout(tN,0))}),mZ=4,gZ=2e3,bB={};let vZ=0;function RB(i,t,n,r,s,o,a,l,c,u){const h="TroikaTextSDFGenerator_JS_"+vZ++%mZ;let f=bB[h];return f||(f=bB[h]={workerModule:Im({name:h,workerId:h,dependencies:[$O,Qc],init(p,g){const v=p().javascript.generate;return function(..._){const x=g();return{textureData:v(..._),timing:g()-x}}},getTransferables(p){return[p.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(i,t,n,r,s,o).then(({textureData:p,timing:g})=>{const v=Qc(),_=new Uint8Array(p.length*4);for(let x=0;x<p.length;x++)_[x*4+u]=p[x];return P_.webglUtils.renderImageData(a,_,l,c,i,t,1<<3-u),g+=Qc()-v,--f.requests===0&&(f.idleTimer=setTimeout(()=>{tZ(h)},gZ)),{timing:g}})}function yZ(i){i._warm||(P_.webgl.isSupported(i),i._warm=!0)}const _Z=P_.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function xZ(){return typeof window>"u"&&(self.window=self),function(i){var t={parse:function(s){var o=t._bin,a=new Uint8Array(s);if(o.readASCII(a,0,4)=="ttcf"){var l=4;o.readUshort(a,l),l+=2,o.readUshort(a,l),l+=2;var c=o.readUint(a,l);l+=4;for(var u=[],h=0;h<c;h++){var f=o.readUint(a,l);l+=4,u.push(t._readFont(a,f))}return u}return[t._readFont(a,0)]},_readFont:function(s,o){var a=t._bin,l=o;a.readFixed(s,o),o+=4;var c=a.readUshort(s,o);o+=2,a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],h={_data:s,_offset:l},f={},p=0;p<c;p++){var g=a.readASCII(s,o,4);o+=4,a.readUint(s,o),o+=4;var v=a.readUint(s,o);o+=4;var _=a.readUint(s,o);o+=4,f[g]={offset:v,length:_}}for(p=0;p<u.length;p++){var x=u[p];f[x]&&(h[x.trim()]=t[x.trim()].parse(s,f[x].offset,f[x].length,h))}return h},_tabOffset:function(s,o,a){for(var l=t._bin,c=l.readUshort(s,a+4),u=a+12,h=0;h<c;h++){var f=l.readASCII(s,u,4);u+=4,l.readUint(s,u),u+=4;var p=l.readUint(s,u);if(u+=4,l.readUint(s,u),u+=4,f==o)return p}return 0}};t._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return t._bin.readShort(s,o)/16384},readInt:function(s,o){return t._bin._view(s).getInt32(o)},readInt8:function(s,o){return t._bin._view(s).getInt8(o)},readShort:function(s,o){return t._bin._view(s).getInt16(o)},readUshort:function(s,o){return t._bin._view(s).getUint16(o)},readUshorts:function(s,o,a){for(var l=[],c=0;c<a;c++)l.push(t._bin.readUshort(s,o+2*c));return l},readUint:function(s,o){return t._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*t._bin.readUint(s,o)+t._bin.readUint(s,o+4)},readASCII:function(s,o,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(s[o+c]);return l},readUnicode:function(s,o,a){for(var l="",c=0;c<a;c++){var u=s[o++]<<8|s[o++];l+=String.fromCharCode(u)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,a){var l=t._bin._tdec;return l&&o==0&&a==s.length?l.decode(s):t._bin.readASCII(s,o,a)},readBytes:function(s,o,a){for(var l=[],c=0;c<a;c++)l.push(s[o+c]);return l},readASCIIArray:function(s,o,a){for(var l=[],c=0;c<a;c++)l.push(String.fromCharCode(s[o+c]));return l},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},t._lctf={},t._lctf.parse=function(s,o,a,l,c){var u=t._bin,h={},f=o;u.readFixed(s,o),o+=4;var p=u.readUshort(s,o);o+=2;var g=u.readUshort(s,o);o+=2;var v=u.readUshort(s,o);return o+=2,h.scriptList=t._lctf.readScriptList(s,f+p),h.featureList=t._lctf.readFeatureList(s,f+g),h.lookupList=t._lctf.readLookupList(s,f+v,c),h},t._lctf.readLookupList=function(s,o,a){var l=t._bin,c=o,u=[],h=l.readUshort(s,o);o+=2;for(var f=0;f<h;f++){var p=l.readUshort(s,o);o+=2;var g=t._lctf.readLookupTable(s,c+p,a);u.push(g)}return u},t._lctf.readLookupTable=function(s,o,a){var l=t._bin,c=o,u={tabs:[]};u.ltype=l.readUshort(s,o),o+=2,u.flag=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;for(var f=u.ltype,p=0;p<h;p++){var g=l.readUshort(s,o);o+=2;var v=a(s,f,c+g,u);u.tabs.push(v)}return u},t._lctf.numOfOnes=function(s){for(var o=0,a=0;a<32;a++)s>>>a&1&&o++;return o},t._lctf.readClassDef=function(s,o){var a=t._bin,l=[],c=a.readUshort(s,o);if(o+=2,c==1){var u=a.readUshort(s,o);o+=2;var h=a.readUshort(s,o);o+=2;for(var f=0;f<h;f++)l.push(u+f),l.push(u+f),l.push(a.readUshort(s,o)),o+=2}if(c==2){var p=a.readUshort(s,o);for(o+=2,f=0;f<p;f++)l.push(a.readUshort(s,o)),o+=2,l.push(a.readUshort(s,o)),o+=2,l.push(a.readUshort(s,o)),o+=2}return l},t._lctf.getInterval=function(s,o){for(var a=0;a<s.length;a+=3){var l=s[a],c=s[a+1];if(s[a+2],l<=o&&o<=c)return a}return-1},t._lctf.readCoverage=function(s,o){var a=t._bin,l={};l.fmt=a.readUshort(s,o),o+=2;var c=a.readUshort(s,o);return o+=2,l.fmt==1&&(l.tab=a.readUshorts(s,o,c)),l.fmt==2&&(l.tab=a.readUshorts(s,o,3*c)),l},t._lctf.coverageIndex=function(s,o){var a=s.tab;if(s.fmt==1)return a.indexOf(o);if(s.fmt==2){var l=t._lctf.getInterval(a,o);if(l!=-1)return a[l+2]+(o-a[l])}return-1},t._lctf.readFeatureList=function(s,o){var a=t._bin,l=o,c=[],u=a.readUshort(s,o);o+=2;for(var h=0;h<u;h++){var f=a.readASCII(s,o,4);o+=4;var p=a.readUshort(s,o);o+=2;var g=t._lctf.readFeatureTable(s,l+p);g.tag=f.trim(),c.push(g)}return c},t._lctf.readFeatureTable=function(s,o){var a=t._bin,l=o,c={},u=a.readUshort(s,o);o+=2,u>0&&(c.featureParams=l+u);var h=a.readUshort(s,o);o+=2,c.tab=[];for(var f=0;f<h;f++)c.tab.push(a.readUshort(s,o+2*f));return c},t._lctf.readScriptList=function(s,o){var a=t._bin,l=o,c={},u=a.readUshort(s,o);o+=2;for(var h=0;h<u;h++){var f=a.readASCII(s,o,4);o+=4;var p=a.readUshort(s,o);o+=2,c[f.trim()]=t._lctf.readScriptTable(s,l+p)}return c},t._lctf.readScriptTable=function(s,o){var a=t._bin,l=o,c={},u=a.readUshort(s,o);o+=2,c.default=t._lctf.readLangSysTable(s,l+u);var h=a.readUshort(s,o);o+=2;for(var f=0;f<h;f++){var p=a.readASCII(s,o,4);o+=4;var g=a.readUshort(s,o);o+=2,c[p.trim()]=t._lctf.readLangSysTable(s,l+g)}return c},t._lctf.readLangSysTable=function(s,o){var a=t._bin,l={};a.readUshort(s,o),o+=2,l.reqFeature=a.readUshort(s,o),o+=2;var c=a.readUshort(s,o);return o+=2,l.features=a.readUshorts(s,o,c),l},t.CFF={},t.CFF.parse=function(s,o,a){var l=t._bin;(s=new Uint8Array(s.buffer,o,a))[o=0],s[++o],s[++o],s[++o],o++;var c=[];o=t.CFF.readIndex(s,o,c);for(var u=[],h=0;h<c.length-1;h++)u.push(l.readASCII(s,o+c[h],c[h+1]-c[h]));o+=c[c.length-1];var f=[];o=t.CFF.readIndex(s,o,f);var p=[];for(h=0;h<f.length-1;h++)p.push(t.CFF.readDict(s,o+f[h],o+f[h+1]));o+=f[f.length-1];var g=p[0],v=[];o=t.CFF.readIndex(s,o,v);var _=[];for(h=0;h<v.length-1;h++)_.push(l.readASCII(s,o+v[h],v[h+1]-v[h]));if(o+=v[v.length-1],t.CFF.readSubrs(s,o,g),g.CharStrings){o=g.CharStrings,v=[],o=t.CFF.readIndex(s,o,v);var x=[];for(h=0;h<v.length-1;h++)x.push(l.readBytes(s,o+v[h],v[h+1]-v[h]));g.CharStrings=x}if(g.ROS){o=g.FDArray;var y=[];for(o=t.CFF.readIndex(s,o,y),g.FDArray=[],h=0;h<y.length-1;h++){var S=t.CFF.readDict(s,o+y[h],o+y[h+1]);t.CFF._readFDict(s,S,_),g.FDArray.push(S)}o+=y[y.length-1],o=g.FDSelect,g.FDSelect=[];var A=s[o];if(o++,A!=3)throw A;var M=l.readUshort(s,o);for(o+=2,h=0;h<M+1;h++)g.FDSelect.push(l.readUshort(s,o),s[o+2]),o+=3}return g.Encoding&&(g.Encoding=t.CFF.readEncoding(s,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=t.CFF.readCharset(s,g.charset,g.CharStrings.length)),t.CFF._readFDict(s,g,_),g},t.CFF._readFDict=function(s,o,a){var l;for(var c in o.Private&&(l=o.Private[1],o.Private=t.CFF.readDict(s,l,l+o.Private[0]),o.Private.Subrs&&t.CFF.readSubrs(s,l+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(o[c]=a[o[c]-426+35])},t.CFF.readSubrs=function(s,o,a){var l=t._bin,c=[];o=t.CFF.readIndex(s,o,c);var u,h=c.length;u=h<1240?107:h<33900?1131:32768,a.Bias=u,a.Subrs=[];for(var f=0;f<c.length-1;f++)a.Subrs.push(l.readBytes(s,o+c[f],c[f+1]-c[f]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(s,o){for(var a=0;a<s.charset.length;a++)if(s.charset[a]==o)return a;return-1},t.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:t.CFF.glyphByUnicode(s,t.CFF.tableSE[o])},t.CFF.readEncoding=function(s,o,a){t._bin;var l=[".notdef"],c=s[o];if(o++,c!=0)throw"error: unknown encoding format: "+c;var u=s[o];o++;for(var h=0;h<u;h++)l.push(s[o+h]);return l},t.CFF.readCharset=function(s,o,a){var l=t._bin,c=[".notdef"],u=s[o];if(o++,u==0)for(var h=0;h<a;h++){var f=l.readUshort(s,o);o+=2,c.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;c.length<a;){f=l.readUshort(s,o),o+=2;var p=0;for(u==1?(p=s[o],o++):(p=l.readUshort(s,o),o+=2),h=0;h<=p;h++)c.push(f),f++}}return c},t.CFF.readIndex=function(s,o,a){var l=t._bin,c=l.readUshort(s,o)+1,u=s[o+=2];if(o++,u==1)for(var h=0;h<c;h++)a.push(s[o+h]);else if(u==2)for(h=0;h<c;h++)a.push(l.readUshort(s,o+2*h));else if(u==3)for(h=0;h<c;h++)a.push(16777215&l.readUint(s,o+3*h-1));else if(c!=1)throw"unsupported offset size: "+u+", count: "+c;return(o+=c*u)-1},t.CFF.getCharString=function(s,o,a){var l=t._bin,c=s[o],u=s[o+1];s[o+2],s[o+3],s[o+4];var h=1,f=null,p=null;c<=20&&(f=c,h=1),c==12&&(f=100*c+u,h=2),21<=c&&c<=27&&(f=c,h=1),c==28&&(p=l.readShort(s,o+1),h=3),29<=c&&c<=31&&(f=c,h=1),32<=c&&c<=246&&(p=c-139,h=1),247<=c&&c<=250&&(p=256*(c-247)+u+108,h=2),251<=c&&c<=254&&(p=256*-(c-251)-u-108,h=2),c==255&&(p=l.readInt(s,o+1)/65535,h=5),a.val=p??"o"+f,a.size=h},t.CFF.readCharString=function(s,o,a){for(var l=o+a,c=t._bin,u=[];o<l;){var h=s[o],f=s[o+1];s[o+2],s[o+3],s[o+4];var p=1,g=null,v=null;h<=20&&(g=h,p=1),h==12&&(g=100*h+f,p=2),h!=19&&h!=20||(g=h,p=2),21<=h&&h<=27&&(g=h,p=1),h==28&&(v=c.readShort(s,o+1),p=3),29<=h&&h<=31&&(g=h,p=1),32<=h&&h<=246&&(v=h-139,p=1),247<=h&&h<=250&&(v=256*(h-247)+f+108,p=2),251<=h&&h<=254&&(v=256*-(h-251)-f-108,p=2),h==255&&(v=c.readInt(s,o+1)/65535,p=5),u.push(v??"o"+g),o+=p}return u},t.CFF.readDict=function(s,o,a){for(var l=t._bin,c={},u=[];o<a;){var h=s[o],f=s[o+1];s[o+2],s[o+3],s[o+4];var p=1,g=null,v=null;if(h==28&&(v=l.readShort(s,o+1),p=3),h==29&&(v=l.readInt(s,o+1),p=5),32<=h&&h<=246&&(v=h-139,p=1),247<=h&&h<=250&&(v=256*(h-247)+f+108,p=2),251<=h&&h<=254&&(v=256*-(h-251)-f-108,p=2),h==255)throw v=l.readInt(s,o+1)/65535,p=5,"unknown number";if(h==30){var _=[];for(p=1;;){var x=s[o+p];p++;var y=x>>4,S=15&x;if(y!=15&&_.push(y),S!=15&&_.push(S),S==15)break}for(var A="",M=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],C=0;C<_.length;C++)A+=M[_[C]];v=parseFloat(A)}h<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],p=1,h==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],p=2)),g!=null?(c[g]=u.length==1?u[0]:u,u=[]):u.push(v),o+=p}return c},t.cmap={},t.cmap.parse=function(s,o,a){s=new Uint8Array(s.buffer,o,a),o=0;var l=t._bin,c={};l.readUshort(s,o),o+=2;var u=l.readUshort(s,o);o+=2;var h=[];c.tables=[];for(var f=0;f<u;f++){var p=l.readUshort(s,o);o+=2;var g=l.readUshort(s,o);o+=2;var v=l.readUint(s,o);o+=4;var _="p"+p+"e"+g,x=h.indexOf(v);if(x==-1){var y;x=c.tables.length,h.push(v);var S=l.readUshort(s,v);S==0?y=t.cmap.parse0(s,v):S==4?y=t.cmap.parse4(s,v):S==6?y=t.cmap.parse6(s,v):S==12?y=t.cmap.parse12(s,v):console.debug("unknown format: "+S,p,g,v),c.tables.push(y)}if(c[_]!=null)throw"multiple tables for one platform+encoding";c[_]=x}return c},t.cmap.parse0=function(s,o){var a=t._bin,l={};l.format=a.readUshort(s,o),o+=2;var c=a.readUshort(s,o);o+=2,a.readUshort(s,o),o+=2,l.map=[];for(var u=0;u<c-6;u++)l.map.push(s[o+u]);return l},t.cmap.parse4=function(s,o){var a=t._bin,l=o,c={};c.format=a.readUshort(s,o),o+=2;var u=a.readUshort(s,o);o+=2,a.readUshort(s,o),o+=2;var h=a.readUshort(s,o);o+=2;var f=h/2;c.searchRange=a.readUshort(s,o),o+=2,c.entrySelector=a.readUshort(s,o),o+=2,c.rangeShift=a.readUshort(s,o),o+=2,c.endCount=a.readUshorts(s,o,f),o+=2*f,o+=2,c.startCount=a.readUshorts(s,o,f),o+=2*f,c.idDelta=[];for(var p=0;p<f;p++)c.idDelta.push(a.readShort(s,o)),o+=2;for(c.idRangeOffset=a.readUshorts(s,o,f),o+=2*f,c.glyphIdArray=[];o<l+u;)c.glyphIdArray.push(a.readUshort(s,o)),o+=2;return c},t.cmap.parse6=function(s,o){var a=t._bin,l={};l.format=a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2,l.firstCode=a.readUshort(s,o),o+=2;var c=a.readUshort(s,o);o+=2,l.glyphIdArray=[];for(var u=0;u<c;u++)l.glyphIdArray.push(a.readUshort(s,o)),o+=2;return l},t.cmap.parse12=function(s,o){var a=t._bin,l={};l.format=a.readUshort(s,o),o+=2,o+=2,a.readUint(s,o),o+=4,a.readUint(s,o),o+=4;var c=a.readUint(s,o);o+=4,l.groups=[];for(var u=0;u<c;u++){var h=o+12*u,f=a.readUint(s,h+0),p=a.readUint(s,h+4),g=a.readUint(s,h+8);l.groups.push([f,p,g])}return l},t.glyf={},t.glyf.parse=function(s,o,a,l){for(var c=[],u=0;u<l.maxp.numGlyphs;u++)c.push(null);return c},t.glyf._parseGlyf=function(s,o){var a=t._bin,l=s._data,c=t._tabOffset(l,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var u={};if(u.noc=a.readShort(l,c),c+=2,u.xMin=a.readShort(l,c),c+=2,u.yMin=a.readShort(l,c),c+=2,u.xMax=a.readShort(l,c),c+=2,u.yMax=a.readShort(l,c),c+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(a.readUshort(l,c)),c+=2;var f=a.readUshort(l,c);if(c+=2,l.length-c<f)return null;u.instructions=a.readBytes(l,c,f),c+=f;var p=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<p;h++){var g=l[c];if(c++,u.flags.push(g),(8&g)!=0){var v=l[c];c++;for(var _=0;_<v;_++)u.flags.push(g),h++}}for(u.xs=[],h=0;h<p;h++){var x=(2&u.flags[h])!=0,y=(16&u.flags[h])!=0;x?(u.xs.push(y?l[c]:-l[c]),c++):y?u.xs.push(0):(u.xs.push(a.readShort(l,c)),c+=2)}for(u.ys=[],h=0;h<p;h++)x=(4&u.flags[h])!=0,y=(32&u.flags[h])!=0,x?(u.ys.push(y?l[c]:-l[c]),c++):y?u.ys.push(0):(u.ys.push(a.readShort(l,c)),c+=2);var S=0,A=0;for(h=0;h<p;h++)S+=u.xs[h],A+=u.ys[h],u.xs[h]=S,u.ys[h]=A}else{var M;u.parts=[];do{M=a.readUshort(l,c),c+=2;var C={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(C),C.glyphIndex=a.readUshort(l,c),c+=2,1&M){var T=a.readShort(l,c);c+=2;var R=a.readShort(l,c);c+=2}else T=a.readInt8(l,c),c++,R=a.readInt8(l,c),c++;2&M?(C.m.tx=T,C.m.ty=R):(C.p1=T,C.p2=R),8&M?(C.m.a=C.m.d=a.readF2dot14(l,c),c+=2):64&M?(C.m.a=a.readF2dot14(l,c),c+=2,C.m.d=a.readF2dot14(l,c),c+=2):128&M&&(C.m.a=a.readF2dot14(l,c),c+=2,C.m.b=a.readF2dot14(l,c),c+=2,C.m.c=a.readF2dot14(l,c),c+=2,C.m.d=a.readF2dot14(l,c),c+=2)}while(32&M);if(256&M){var I=a.readUshort(l,c);for(c+=2,u.instr=[],h=0;h<I;h++)u.instr.push(l[c]),c++}}return u},t.GPOS={},t.GPOS.parse=function(s,o,a,l){return t._lctf.parse(s,o,a,l,t.GPOS.subt)},t.GPOS.subt=function(s,o,a,l){var c=t._bin,u=a,h={};if(h.fmt=c.readUshort(s,a),a+=2,o==1||o==2||o==3||o==7||o==8&&h.fmt<=2){var f=c.readUshort(s,a);a+=2,h.coverage=t._lctf.readCoverage(s,f+u)}if(o==1&&h.fmt==1){var p=c.readUshort(s,a);a+=2;var g=t._lctf.numOfOnes(p);p!=0&&(h.pos=t.GPOS.readValueRecord(s,a,p))}else if(o==2&&h.fmt>=1&&h.fmt<=2){p=c.readUshort(s,a),a+=2;var v=c.readUshort(s,a);a+=2,g=t._lctf.numOfOnes(p);var _=t._lctf.numOfOnes(v);if(h.fmt==1){h.pairsets=[];var x=c.readUshort(s,a);a+=2;for(var y=0;y<x;y++){var S=u+c.readUshort(s,a);a+=2;var A=c.readUshort(s,S);S+=2;for(var M=[],C=0;C<A;C++){var T=c.readUshort(s,S);S+=2,p!=0&&(N=t.GPOS.readValueRecord(s,S,p),S+=2*g),v!=0&&(ne=t.GPOS.readValueRecord(s,S,v),S+=2*_),M.push({gid2:T,val1:N,val2:ne})}h.pairsets.push(M)}}if(h.fmt==2){var R=c.readUshort(s,a);a+=2;var I=c.readUshort(s,a);a+=2;var P=c.readUshort(s,a);a+=2;var B=c.readUshort(s,a);for(a+=2,h.classDef1=t._lctf.readClassDef(s,u+R),h.classDef2=t._lctf.readClassDef(s,u+I),h.matrix=[],y=0;y<P;y++){var O=[];for(C=0;C<B;C++){var N=null,ne=null;p!=0&&(N=t.GPOS.readValueRecord(s,a,p),a+=2*g),v!=0&&(ne=t.GPOS.readValueRecord(s,a,v),a+=2*_),O.push({val1:N,val2:ne})}h.matrix.push(O)}}}else{if(o==9&&h.fmt==1){var z=c.readUshort(s,a);a+=2;var j=c.readUint(s,a);if(a+=4,l.ltype==9)l.ltype=z;else if(l.ltype!=z)throw"invalid extension substitution";return t.GPOS.subt(s,l.ltype,u+j)}console.debug("unsupported GPOS table LookupType",o,"format",h.fmt)}return h},t.GPOS.readValueRecord=function(s,o,a){var l=t._bin,c=[];return c.push(1&a?l.readShort(s,o):0),o+=1&a?2:0,c.push(2&a?l.readShort(s,o):0),o+=2&a?2:0,c.push(4&a?l.readShort(s,o):0),o+=4&a?2:0,c.push(8&a?l.readShort(s,o):0),o+=8&a?2:0,c},t.GSUB={},t.GSUB.parse=function(s,o,a,l){return t._lctf.parse(s,o,a,l,t.GSUB.subt)},t.GSUB.subt=function(s,o,a,l){var c=t._bin,u=a,h={};if(h.fmt=c.readUshort(s,a),a+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&h.fmt<=2||o==6&&h.fmt<=2){var f=c.readUshort(s,a);a+=2,h.coverage=t._lctf.readCoverage(s,u+f)}if(o==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=c.readShort(s,a),a+=2;else if(h.fmt==2){var p=c.readUshort(s,a);a+=2,h.newg=c.readUshorts(s,a,p),a+=2*h.newg.length}}else if(o==4){h.vals=[],p=c.readUshort(s,a),a+=2;for(var g=0;g<p;g++){var v=c.readUshort(s,a);a+=2,h.vals.push(t.GSUB.readLigatureSet(s,u+v))}}else if(o==5&&h.fmt==2){if(h.fmt==2){var _=c.readUshort(s,a);a+=2,h.cDef=t._lctf.readClassDef(s,u+_),h.scset=[];var x=c.readUshort(s,a);for(a+=2,g=0;g<x;g++){var y=c.readUshort(s,a);a+=2,h.scset.push(y==0?null:t.GSUB.readSubClassSet(s,u+y))}}}else if(o==6&&h.fmt==3){if(h.fmt==3){for(g=0;g<3;g++){p=c.readUshort(s,a),a+=2;for(var S=[],A=0;A<p;A++)S.push(t._lctf.readCoverage(s,u+c.readUshort(s,a+2*A)));a+=2*p,g==0&&(h.backCvg=S),g==1&&(h.inptCvg=S),g==2&&(h.ahedCvg=S)}p=c.readUshort(s,a),a+=2,h.lookupRec=t.GSUB.readSubstLookupRecords(s,a,p)}}else{if(o==7&&h.fmt==1){var M=c.readUshort(s,a);a+=2;var C=c.readUint(s,a);if(a+=4,l.ltype==9)l.ltype=M;else if(l.ltype!=M)throw"invalid extension substitution";return t.GSUB.subt(s,l.ltype,u+C)}console.debug("unsupported GSUB table LookupType",o,"format",h.fmt)}return h},t.GSUB.readSubClassSet=function(s,o){var a=t._bin.readUshort,l=o,c=[],u=a(s,o);o+=2;for(var h=0;h<u;h++){var f=a(s,o);o+=2,c.push(t.GSUB.readSubClassRule(s,l+f))}return c},t.GSUB.readSubClassRule=function(s,o){var a=t._bin.readUshort,l={},c=a(s,o),u=a(s,o+=2);o+=2,l.input=[];for(var h=0;h<c-1;h++)l.input.push(a(s,o)),o+=2;return l.substLookupRecords=t.GSUB.readSubstLookupRecords(s,o,u),l},t.GSUB.readSubstLookupRecords=function(s,o,a){for(var l=t._bin.readUshort,c=[],u=0;u<a;u++)c.push(l(s,o),l(s,o+2)),o+=4;return c},t.GSUB.readChainSubClassSet=function(s,o){var a=t._bin,l=o,c=[],u=a.readUshort(s,o);o+=2;for(var h=0;h<u;h++){var f=a.readUshort(s,o);o+=2,c.push(t.GSUB.readChainSubClassRule(s,l+f))}return c},t.GSUB.readChainSubClassRule=function(s,o){for(var a=t._bin,l={},c=["backtrack","input","lookahead"],u=0;u<c.length;u++){var h=a.readUshort(s,o);o+=2,u==1&&h--,l[c[u]]=a.readUshorts(s,o,h),o+=2*l[c[u]].length}return h=a.readUshort(s,o),o+=2,l.subst=a.readUshorts(s,o,2*h),o+=2*l.subst.length,l},t.GSUB.readLigatureSet=function(s,o){var a=t._bin,l=o,c=[],u=a.readUshort(s,o);o+=2;for(var h=0;h<u;h++){var f=a.readUshort(s,o);o+=2,c.push(t.GSUB.readLigature(s,l+f))}return c},t.GSUB.readLigature=function(s,o){var a=t._bin,l={chain:[]};l.nglyph=a.readUshort(s,o),o+=2;var c=a.readUshort(s,o);o+=2;for(var u=0;u<c-1;u++)l.chain.push(a.readUshort(s,o)),o+=2;return l},t.head={},t.head.parse=function(s,o,a){var l=t._bin,c={};return l.readFixed(s,o),o+=4,c.fontRevision=l.readFixed(s,o),o+=4,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4,c.flags=l.readUshort(s,o),o+=2,c.unitsPerEm=l.readUshort(s,o),o+=2,c.created=l.readUint64(s,o),o+=8,c.modified=l.readUint64(s,o),o+=8,c.xMin=l.readShort(s,o),o+=2,c.yMin=l.readShort(s,o),o+=2,c.xMax=l.readShort(s,o),o+=2,c.yMax=l.readShort(s,o),o+=2,c.macStyle=l.readUshort(s,o),o+=2,c.lowestRecPPEM=l.readUshort(s,o),o+=2,c.fontDirectionHint=l.readShort(s,o),o+=2,c.indexToLocFormat=l.readShort(s,o),o+=2,c.glyphDataFormat=l.readShort(s,o),o+=2,c},t.hhea={},t.hhea.parse=function(s,o,a){var l=t._bin,c={};return l.readFixed(s,o),o+=4,c.ascender=l.readShort(s,o),o+=2,c.descender=l.readShort(s,o),o+=2,c.lineGap=l.readShort(s,o),o+=2,c.advanceWidthMax=l.readUshort(s,o),o+=2,c.minLeftSideBearing=l.readShort(s,o),o+=2,c.minRightSideBearing=l.readShort(s,o),o+=2,c.xMaxExtent=l.readShort(s,o),o+=2,c.caretSlopeRise=l.readShort(s,o),o+=2,c.caretSlopeRun=l.readShort(s,o),o+=2,c.caretOffset=l.readShort(s,o),o+=2,o+=8,c.metricDataFormat=l.readShort(s,o),o+=2,c.numberOfHMetrics=l.readUshort(s,o),o+=2,c},t.hmtx={},t.hmtx.parse=function(s,o,a,l){for(var c=t._bin,u={aWidth:[],lsBearing:[]},h=0,f=0,p=0;p<l.maxp.numGlyphs;p++)p<l.hhea.numberOfHMetrics&&(h=c.readUshort(s,o),o+=2,f=c.readShort(s,o),o+=2),u.aWidth.push(h),u.lsBearing.push(f);return u},t.kern={},t.kern.parse=function(s,o,a,l){var c=t._bin,u=c.readUshort(s,o);if(o+=2,u==1)return t.kern.parseV1(s,o-2,a,l);var h=c.readUshort(s,o);o+=2;for(var f={glyph1:[],rval:[]},p=0;p<h;p++){o+=2,a=c.readUshort(s,o),o+=2;var g=c.readUshort(s,o);o+=2;var v=g>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;o=t.kern.readFormat0(s,o,f)}return f},t.kern.parseV1=function(s,o,a,l){var c=t._bin;c.readFixed(s,o),o+=4;var u=c.readUint(s,o);o+=4;for(var h={glyph1:[],rval:[]},f=0;f<u;f++){c.readUint(s,o),o+=4;var p=c.readUshort(s,o);o+=2,c.readUshort(s,o),o+=2;var g=p>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;o=t.kern.readFormat0(s,o,h)}return h},t.kern.readFormat0=function(s,o,a){var l=t._bin,c=-1,u=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var h=0;h<u;h++){var f=l.readUshort(s,o);o+=2;var p=l.readUshort(s,o);o+=2;var g=l.readShort(s,o);o+=2,f!=c&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var v=a.rval[a.rval.length-1];v.glyph2.push(p),v.vals.push(g),c=f}return o},t.loca={},t.loca.parse=function(s,o,a,l){var c=t._bin,u=[],h=l.head.indexToLocFormat,f=l.maxp.numGlyphs+1;if(h==0)for(var p=0;p<f;p++)u.push(c.readUshort(s,o+(p<<1))<<1);if(h==1)for(p=0;p<f;p++)u.push(c.readUint(s,o+(p<<2)));return u},t.maxp={},t.maxp.parse=function(s,o,a){var l=t._bin,c={},u=l.readUint(s,o);return o+=4,c.numGlyphs=l.readUshort(s,o),o+=2,u==65536&&(c.maxPoints=l.readUshort(s,o),o+=2,c.maxContours=l.readUshort(s,o),o+=2,c.maxCompositePoints=l.readUshort(s,o),o+=2,c.maxCompositeContours=l.readUshort(s,o),o+=2,c.maxZones=l.readUshort(s,o),o+=2,c.maxTwilightPoints=l.readUshort(s,o),o+=2,c.maxStorage=l.readUshort(s,o),o+=2,c.maxFunctionDefs=l.readUshort(s,o),o+=2,c.maxInstructionDefs=l.readUshort(s,o),o+=2,c.maxStackElements=l.readUshort(s,o),o+=2,c.maxSizeOfInstructions=l.readUshort(s,o),o+=2,c.maxComponentElements=l.readUshort(s,o),o+=2,c.maxComponentDepth=l.readUshort(s,o),o+=2),c},t.name={},t.name.parse=function(s,o,a){var l=t._bin,c={};l.readUshort(s,o),o+=2;var u=l.readUshort(s,o);o+=2,l.readUshort(s,o);for(var h,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],p=o+=2,g=0;g<u;g++){var v=l.readUshort(s,o);o+=2;var _=l.readUshort(s,o);o+=2;var x=l.readUshort(s,o);o+=2;var y=l.readUshort(s,o);o+=2;var S=l.readUshort(s,o);o+=2;var A=l.readUshort(s,o);o+=2;var M,C=f[y],T=p+12*u+A;if(v==0)M=l.readUnicode(s,T,S/2);else if(v==3&&_==0)M=l.readUnicode(s,T,S/2);else if(_==0)M=l.readASCII(s,T,S);else if(_==1)M=l.readUnicode(s,T,S/2);else if(_==3)M=l.readUnicode(s,T,S/2);else{if(v!=1)throw"unknown encoding "+_+", platformID: "+v;M=l.readASCII(s,T,S),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var R="p"+v+","+x.toString(16);c[R]==null&&(c[R]={}),c[R][C!==void 0?C:y]=M,c[R]._lang=x}for(var I in c)if(c[I].postScriptName!=null&&c[I]._lang==1033)return c[I];for(var I in c)if(c[I].postScriptName!=null&&c[I]._lang==0)return c[I];for(var I in c)if(c[I].postScriptName!=null&&c[I]._lang==3084)return c[I];for(var I in c)if(c[I].postScriptName!=null)return c[I];for(var I in c){h=I;break}return console.debug("returning name table with languageID "+c[h]._lang),c[h]},t["OS/2"]={},t["OS/2"].parse=function(s,o,a){var l=t._bin.readUshort(s,o);o+=2;var c={};if(l==0)t["OS/2"].version0(s,o,c);else if(l==1)t["OS/2"].version1(s,o,c);else if(l==2||l==3||l==4)t["OS/2"].version2(s,o,c);else{if(l!=5)throw"unknown OS/2 table version: "+l;t["OS/2"].version5(s,o,c)}return c},t["OS/2"].version0=function(s,o,a){var l=t._bin;return a.xAvgCharWidth=l.readShort(s,o),o+=2,a.usWeightClass=l.readUshort(s,o),o+=2,a.usWidthClass=l.readUshort(s,o),o+=2,a.fsType=l.readUshort(s,o),o+=2,a.ySubscriptXSize=l.readShort(s,o),o+=2,a.ySubscriptYSize=l.readShort(s,o),o+=2,a.ySubscriptXOffset=l.readShort(s,o),o+=2,a.ySubscriptYOffset=l.readShort(s,o),o+=2,a.ySuperscriptXSize=l.readShort(s,o),o+=2,a.ySuperscriptYSize=l.readShort(s,o),o+=2,a.ySuperscriptXOffset=l.readShort(s,o),o+=2,a.ySuperscriptYOffset=l.readShort(s,o),o+=2,a.yStrikeoutSize=l.readShort(s,o),o+=2,a.yStrikeoutPosition=l.readShort(s,o),o+=2,a.sFamilyClass=l.readShort(s,o),o+=2,a.panose=l.readBytes(s,o,10),o+=10,a.ulUnicodeRange1=l.readUint(s,o),o+=4,a.ulUnicodeRange2=l.readUint(s,o),o+=4,a.ulUnicodeRange3=l.readUint(s,o),o+=4,a.ulUnicodeRange4=l.readUint(s,o),o+=4,a.achVendID=[l.readInt8(s,o),l.readInt8(s,o+1),l.readInt8(s,o+2),l.readInt8(s,o+3)],o+=4,a.fsSelection=l.readUshort(s,o),o+=2,a.usFirstCharIndex=l.readUshort(s,o),o+=2,a.usLastCharIndex=l.readUshort(s,o),o+=2,a.sTypoAscender=l.readShort(s,o),o+=2,a.sTypoDescender=l.readShort(s,o),o+=2,a.sTypoLineGap=l.readShort(s,o),o+=2,a.usWinAscent=l.readUshort(s,o),o+=2,a.usWinDescent=l.readUshort(s,o),o+=2},t["OS/2"].version1=function(s,o,a){var l=t._bin;return o=t["OS/2"].version0(s,o,a),a.ulCodePageRange1=l.readUint(s,o),o+=4,a.ulCodePageRange2=l.readUint(s,o),o+=4},t["OS/2"].version2=function(s,o,a){var l=t._bin;return o=t["OS/2"].version1(s,o,a),a.sxHeight=l.readShort(s,o),o+=2,a.sCapHeight=l.readShort(s,o),o+=2,a.usDefault=l.readUshort(s,o),o+=2,a.usBreak=l.readUshort(s,o),o+=2,a.usMaxContext=l.readUshort(s,o),o+=2},t["OS/2"].version5=function(s,o,a){var l=t._bin;return o=t["OS/2"].version2(s,o,a),a.usLowerOpticalPointSize=l.readUshort(s,o),o+=2,a.usUpperOpticalPointSize=l.readUshort(s,o),o+=2},t.post={},t.post.parse=function(s,o,a){var l=t._bin,c={};return c.version=l.readFixed(s,o),o+=4,c.italicAngle=l.readFixed(s,o),o+=4,c.underlinePosition=l.readShort(s,o),o+=2,c.underlineThickness=l.readShort(s,o),o+=2,c},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(s,o){var a=s.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var c=a.tables[l];if(c.format==0)return o>=c.map.length?0:c.map[o];if(c.format==4){for(var u=-1,h=0;h<c.endCount.length;h++)if(o<=c.endCount[h]){u=h;break}return u==-1||c.startCount[u]>o?0:65535&(c.idRangeOffset[u]!=0?c.glyphIdArray[o-c.startCount[u]+(c.idRangeOffset[u]>>1)-(c.idRangeOffset.length-u)]:o+c.idDelta[u])}if(c.format==12){if(o>c.groups[c.groups.length-1][1])return 0;for(h=0;h<c.groups.length;h++){var f=c.groups[h];if(f[0]<=o&&o<=f[1])return f[2]+(o-f[0])}return 0}throw"unknown cmap table format "+c.format},t.U.glyphToPath=function(s,o){var a={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var l=s.SVG.entries[o];return l==null?a:(typeof l=="string"&&(l=t.SVG.toPath(l),s.SVG.entries[o]=l),l)}if(s.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},u=s.CFF,h=s.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=o;)f+=2;h=u.FDArray[u.FDSelect[f+1]].Private}t.U._drawCFF(s.CFF.CharStrings[o],c,u,h,a)}else s.glyf&&t.U._drawGlyf(o,s,a);return a},t.U._drawGlyf=function(s,o,a){var l=o.glyf[s];l==null&&(l=o.glyf[s]=t.glyf._parseGlyf(o,s)),l!=null&&(l.noc>-1?t.U._simpleGlyph(l,a):t.U._compoGlyph(l,o,a))},t.U._simpleGlyph=function(s,o){for(var a=0;a<s.noc;a++){for(var l=a==0?0:s.endPts[a-1]+1,c=s.endPts[a],u=l;u<=c;u++){var h=u==l?c:u-1,f=u==c?l:u+1,p=1&s.flags[u],g=1&s.flags[h],v=1&s.flags[f],_=s.xs[u],x=s.ys[u];if(u==l)if(p){if(!g){t.U.P.moveTo(o,_,x);continue}t.U.P.moveTo(o,s.xs[h],s.ys[h])}else g?t.U.P.moveTo(o,s.xs[h],s.ys[h]):t.U.P.moveTo(o,(s.xs[h]+_)/2,(s.ys[h]+x)/2);p?g&&t.U.P.lineTo(o,_,x):v?t.U.P.qcurveTo(o,_,x,s.xs[f],s.ys[f]):t.U.P.qcurveTo(o,_,x,(_+s.xs[f])/2,(x+s.ys[f])/2)}t.U.P.closePath(o)}},t.U._compoGlyph=function(s,o,a){for(var l=0;l<s.parts.length;l++){var c={cmds:[],crds:[]},u=s.parts[l];t.U._drawGlyf(u.glyphIndex,o,c);for(var h=u.m,f=0;f<c.crds.length;f+=2){var p=c.crds[f],g=c.crds[f+1];a.crds.push(p*h.a+g*h.b+h.tx),a.crds.push(p*h.c+g*h.d+h.ty)}for(f=0;f<c.cmds.length;f++)a.cmds.push(c.cmds[f])}},t.U._getGlyphClass=function(s,o){var a=t._lctf.getInterval(o,s);return a==-1?0:o[a+2]},t.U.getPairAdjustment=function(s,o,a){var l=!1;if(s.GPOS)for(var c=s.GPOS,u=c.lookupList,h=c.featureList,f=[],p=0;p<h.length;p++){var g=h[p];if(g.tag=="kern"){l=!0;for(var v=0;v<g.tab.length;v++)if(!f[g.tab[v]]){f[g.tab[v]]=!0;for(var _=u[g.tab[v]],x=0;x<_.tabs.length;x++)if(_.tabs[x]!=null){var y,S=_.tabs[x];if((!S.coverage||(y=t._lctf.coverageIndex(S.coverage,o))!=-1)&&_.ltype!=1){if(_.ltype==2){var A=null;if(S.fmt==1){var M=S.pairsets[y];for(p=0;p<M.length;p++)M[p].gid2==a&&(A=M[p])}else if(S.fmt==2){var C=t.U._getGlyphClass(o,S.classDef1),T=t.U._getGlyphClass(a,S.classDef2);A=S.matrix[C][T]}if(A){var R=0;return A.val1&&A.val1[2]&&(R+=A.val1[2]),A.val2&&A.val2[0]&&(R+=A.val2[0]),R}}}}}}}if(s.kern&&!l){var I=s.kern.glyph1.indexOf(o);if(I!=-1){var P=s.kern.rval[I].glyph2.indexOf(a);if(P!=-1)return s.kern.rval[I].vals[P]}}return 0},t.U._applySubs=function(s,o,a,l){for(var c=s.length-o-1,u=0;u<a.tabs.length;u++)if(a.tabs[u]!=null){var h,f=a.tabs[u];if(!f.coverage||(h=t._lctf.coverageIndex(f.coverage,s[o]))!=-1){if(a.ltype==1)s[o],f.fmt==1?s[o]=s[o]+f.delta:s[o]=f.newg[h];else if(a.ltype==4)for(var p=f.vals[h],g=0;g<p.length;g++){var v=p[g],_=v.chain.length;if(!(_>c)){for(var x=!0,y=0,S=0;S<_;S++){for(;s[o+y+(1+S)]==-1;)y++;v.chain[S]!=s[o+y+(1+S)]&&(x=!1)}if(x){for(s[o]=v.nglyph,S=0;S<_+y;S++)s[o+S+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var A=t._lctf.getInterval(f.cDef,s[o]),M=f.cDef[A+2],C=f.scset[M],T=0;T<C.length;T++){var R=C[T],I=R.input;if(!(I.length>c)){for(x=!0,S=0;S<I.length;S++){var P=t._lctf.getInterval(f.cDef,s[o+1+S]);if(A==-1&&f.cDef[P+2]!=I[S]){x=!1;break}}if(x){var B=R.substLookupRecords;for(g=0;g<B.length;g+=2)B[g],B[g+1]}}}else if(a.ltype==6&&f.fmt==3){if(!t.U._glsCovered(s,f.backCvg,o-f.backCvg.length)||!t.U._glsCovered(s,f.inptCvg,o)||!t.U._glsCovered(s,f.ahedCvg,o+f.inptCvg.length))continue;var O=f.lookupRec;for(T=0;T<O.length;T+=2){A=O[T];var N=l[O[T+1]];t.U._applySubs(s,o+A,N,l)}}}}},t.U._glsCovered=function(s,o,a){for(var l=0;l<o.length;l++)if(t._lctf.coverageIndex(o[l],s[a+l])==-1)return!1;return!0},t.U.glyphsToPath=function(s,o,a){for(var l={cmds:[],crds:[]},c=0,u=0;u<o.length;u++){var h=o[u];if(h!=-1){for(var f=u<o.length-1&&o[u+1]!=-1?o[u+1]:0,p=t.U.glyphToPath(s,h),g=0;g<p.crds.length;g+=2)l.crds.push(p.crds[g]+c),l.crds.push(p.crds[g+1]);for(a&&l.cmds.push(a),g=0;g<p.cmds.length;g++)l.cmds.push(p.cmds[g]);a&&l.cmds.push("X"),c+=s.hmtx.aWidth[h],u<o.length-1&&(c+=t.U.getPairAdjustment(s,h,f))}}return l},t.U.P={},t.U.P.moveTo=function(s,o,a){s.cmds.push("M"),s.crds.push(o,a)},t.U.P.lineTo=function(s,o,a){s.cmds.push("L"),s.crds.push(o,a)},t.U.P.curveTo=function(s,o,a,l,c,u,h){s.cmds.push("C"),s.crds.push(o,a,l,c,u,h)},t.U.P.qcurveTo=function(s,o,a,l,c){s.cmds.push("Q"),s.crds.push(o,a,l,c)},t.U.P.closePath=function(s){s.cmds.push("Z")},t.U._drawCFF=function(s,o,a,l,c){for(var u=o.stack,h=o.nStems,f=o.haveWidth,p=o.width,g=o.open,v=0,_=o.x,x=o.y,y=0,S=0,A=0,M=0,C=0,T=0,R=0,I=0,P=0,B=0,O={val:0,size:0};v<s.length;){t.CFF.getCharString(s,v,O);var N=O.val;if(v+=O.size,N=="o1"||N=="o18")u.length%2!=0&&!f&&(p=u.shift()+l.nominalWidthX),h+=u.length>>1,u.length=0,f=!0;else if(N=="o3"||N=="o23")u.length%2!=0&&!f&&(p=u.shift()+l.nominalWidthX),h+=u.length>>1,u.length=0,f=!0;else if(N=="o4")u.length>1&&!f&&(p=u.shift()+l.nominalWidthX,f=!0),g&&t.U.P.closePath(c),x+=u.pop(),t.U.P.moveTo(c,_,x),g=!0;else if(N=="o5")for(;u.length>0;)_+=u.shift(),x+=u.shift(),t.U.P.lineTo(c,_,x);else if(N=="o6"||N=="o7")for(var ne=u.length,z=N=="o6",j=0;j<ne;j++){var q=u.shift();z?_+=q:x+=q,z=!z,t.U.P.lineTo(c,_,x)}else if(N=="o8"||N=="o24"){ne=u.length;for(var he=0;he+6<=ne;)y=_+u.shift(),S=x+u.shift(),A=y+u.shift(),M=S+u.shift(),_=A+u.shift(),x=M+u.shift(),t.U.P.curveTo(c,y,S,A,M,_,x),he+=6;N=="o24"&&(_+=u.shift(),x+=u.shift(),t.U.P.lineTo(c,_,x))}else{if(N=="o11")break;if(N=="o1234"||N=="o1235"||N=="o1236"||N=="o1237")N=="o1234"&&(S=x,A=(y=_+u.shift())+u.shift(),B=M=S+u.shift(),T=M,I=x,_=(R=(C=(P=A+u.shift())+u.shift())+u.shift())+u.shift(),t.U.P.curveTo(c,y,S,A,M,P,B),t.U.P.curveTo(c,C,T,R,I,_,x)),N=="o1235"&&(y=_+u.shift(),S=x+u.shift(),A=y+u.shift(),M=S+u.shift(),P=A+u.shift(),B=M+u.shift(),C=P+u.shift(),T=B+u.shift(),R=C+u.shift(),I=T+u.shift(),_=R+u.shift(),x=I+u.shift(),u.shift(),t.U.P.curveTo(c,y,S,A,M,P,B),t.U.P.curveTo(c,C,T,R,I,_,x)),N=="o1236"&&(y=_+u.shift(),S=x+u.shift(),A=y+u.shift(),B=M=S+u.shift(),T=M,R=(C=(P=A+u.shift())+u.shift())+u.shift(),I=T+u.shift(),_=R+u.shift(),t.U.P.curveTo(c,y,S,A,M,P,B),t.U.P.curveTo(c,C,T,R,I,_,x)),N=="o1237"&&(y=_+u.shift(),S=x+u.shift(),A=y+u.shift(),M=S+u.shift(),P=A+u.shift(),B=M+u.shift(),C=P+u.shift(),T=B+u.shift(),R=C+u.shift(),I=T+u.shift(),Math.abs(R-_)>Math.abs(I-x)?_=R+u.shift():x=I+u.shift(),t.U.P.curveTo(c,y,S,A,M,P,B),t.U.P.curveTo(c,C,T,R,I,_,x));else if(N=="o14"){if(u.length>0&&!f&&(p=u.shift()+a.nominalWidthX,f=!0),u.length==4){var H=u.shift(),X=u.shift(),K=u.shift(),k=u.shift(),Z=t.CFF.glyphBySE(a,K),Q=t.CFF.glyphBySE(a,k);t.U._drawCFF(a.CharStrings[Z],o,a,l,c),o.x=H,o.y=X,t.U._drawCFF(a.CharStrings[Q],o,a,l,c)}g&&(t.U.P.closePath(c),g=!1)}else if(N=="o19"||N=="o20")u.length%2!=0&&!f&&(p=u.shift()+l.nominalWidthX),h+=u.length>>1,u.length=0,f=!0,v+=h+7>>3;else if(N=="o21")u.length>2&&!f&&(p=u.shift()+l.nominalWidthX,f=!0),x+=u.pop(),_+=u.pop(),g&&t.U.P.closePath(c),t.U.P.moveTo(c,_,x),g=!0;else if(N=="o22")u.length>1&&!f&&(p=u.shift()+l.nominalWidthX,f=!0),_+=u.pop(),g&&t.U.P.closePath(c),t.U.P.moveTo(c,_,x),g=!0;else if(N=="o25"){for(;u.length>6;)_+=u.shift(),x+=u.shift(),t.U.P.lineTo(c,_,x);y=_+u.shift(),S=x+u.shift(),A=y+u.shift(),M=S+u.shift(),_=A+u.shift(),x=M+u.shift(),t.U.P.curveTo(c,y,S,A,M,_,x)}else if(N=="o26")for(u.length%2&&(_+=u.shift());u.length>0;)y=_,S=x+u.shift(),_=A=y+u.shift(),x=(M=S+u.shift())+u.shift(),t.U.P.curveTo(c,y,S,A,M,_,x);else if(N=="o27")for(u.length%2&&(x+=u.shift());u.length>0;)S=x,A=(y=_+u.shift())+u.shift(),M=S+u.shift(),_=A+u.shift(),x=M,t.U.P.curveTo(c,y,S,A,M,_,x);else if(N=="o10"||N=="o29"){var se=N=="o10"?l:a;if(u.length==0)console.debug("error: empty stack");else{var le=u.pop(),fe=se.Subrs[le+se.Bias];o.x=_,o.y=x,o.nStems=h,o.haveWidth=f,o.width=p,o.open=g,t.U._drawCFF(fe,o,a,l,c),_=o.x,x=o.y,h=o.nStems,f=o.haveWidth,p=o.width,g=o.open}}else if(N=="o30"||N=="o31"){var ue=u.length,Se=(he=0,N=="o31");for(he+=ue-(ne=-3&ue);he<ne;)Se?(S=x,A=(y=_+u.shift())+u.shift(),x=(M=S+u.shift())+u.shift(),ne-he==5?(_=A+u.shift(),he++):_=A,Se=!1):(y=_,S=x+u.shift(),A=y+u.shift(),M=S+u.shift(),_=A+u.shift(),ne-he==5?(x=M+u.shift(),he++):x=M,Se=!0),t.U.P.curveTo(c,y,S,A,M,_,x),he+=4}else{if((N+"").charAt(0)=="o")throw console.debug("Unknown operation: "+N,s),N;u.push(N)}}}o.x=_,o.y=x,o.nStems=h,o.haveWidth=f,o.width=p,o.open=g};var n=t,r={Typr:n};return i.Typr=n,i.default=r,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function SZ(){return function(i){var t=Uint8Array,n=Uint16Array,r=Uint32Array,s=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(N,ne){for(var z=new n(31),j=0;j<31;++j)z[j]=ne+=1<<N[j-1];var q=new r(z[30]);for(j=1;j<30;++j)for(var he=z[j];he<z[j+1];++he)q[he]=he-z[j]<<5|j;return[z,q]},c=l(s,2),u=c[0],h=c[1];u[28]=258,h[258]=28;for(var f=l(o,0)[0],p=new n(32768),g=0;g<32768;++g){var v=(43690&g)>>>1|(21845&g)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,p[g]=((65280&v)>>>8|(255&v)<<8)>>>1}var _=function(N,ne,z){for(var j=N.length,q=0,he=new n(ne);q<j;++q)++he[N[q]-1];var H,X=new n(ne);for(q=0;q<ne;++q)X[q]=X[q-1]+he[q-1]<<1;if(z){H=new n(1<<ne);var K=15-ne;for(q=0;q<j;++q)if(N[q])for(var k=q<<4|N[q],Z=ne-N[q],Q=X[N[q]-1]++<<Z,se=Q|(1<<Z)-1;Q<=se;++Q)H[p[Q]>>>K]=k}else for(H=new n(j),q=0;q<j;++q)N[q]&&(H[q]=p[X[N[q]-1]++]>>>15-N[q]);return H},x=new t(288);for(g=0;g<144;++g)x[g]=8;for(g=144;g<256;++g)x[g]=9;for(g=256;g<280;++g)x[g]=7;for(g=280;g<288;++g)x[g]=8;var y=new t(32);for(g=0;g<32;++g)y[g]=5;var S=_(x,9,1),A=_(y,5,1),M=function(N){for(var ne=N[0],z=1;z<N.length;++z)N[z]>ne&&(ne=N[z]);return ne},C=function(N,ne,z){var j=ne/8|0;return(N[j]|N[j+1]<<8)>>(7&ne)&z},T=function(N,ne){var z=ne/8|0;return(N[z]|N[z+1]<<8|N[z+2]<<16)>>(7&ne)},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(N,ne,z){var j=new Error(ne||R[N]);if(j.code=N,Error.captureStackTrace&&Error.captureStackTrace(j,I),!z)throw j;return j},P=function(N,ne,z){var j=N.length;if(!j||z&&!z.l&&j<5)return ne||new t(0);var q=!ne||z,he=!z||z.i;z||(z={}),ne||(ne=new t(3*j));var H,X=function(ze){var Ze=ne.length;if(ze>Ze){var ht=new t(Math.max(2*Ze,ze));ht.set(ne),ne=ht}},K=z.f||0,k=z.p||0,Z=z.b||0,Q=z.l,se=z.d,le=z.m,fe=z.n,ue=8*j;do{if(!Q){z.f=K=C(N,k,1);var Se=C(N,k+1,3);if(k+=3,!Se){var ke=N[(F=((H=k)/8|0)+(7&H&&1)+4)-4]|N[F-3]<<8,Be=F+ke;if(Be>j){he&&I(0);break}q&&X(Z+ke),ne.set(N.subarray(F,Be),Z),z.b=Z+=ke,z.p=k=8*Be;continue}if(Se==1)Q=S,se=A,le=9,fe=5;else if(Se==2){var Ae=C(N,k,31)+257,W=C(N,k+10,15)+4,Re=Ae+C(N,k+5,31)+1;k+=14;for(var Ee=new t(Re),Ce=new t(19),_e=0;_e<W;++_e)Ce[a[_e]]=C(N,k+3*_e,7);k+=3*W;var Ye=M(Ce),we=(1<<Ye)-1,G=_(Ce,Ye,1);for(_e=0;_e<Re;){var F,te=G[C(N,k,we)];if(k+=15&te,(F=te>>>4)<16)Ee[_e++]=F;else{var xe=0,ge=0;for(F==16?(ge=3+C(N,k,3),k+=2,xe=Ee[_e-1]):F==17?(ge=3+C(N,k,7),k+=3):F==18&&(ge=11+C(N,k,127),k+=7);ge--;)Ee[_e++]=xe}}var ye=Ee.subarray(0,Ae),Fe=Ee.subarray(Ae);le=M(ye),fe=M(Fe),Q=_(ye,le,1),se=_(Fe,fe,1)}else I(1);if(k>ue){he&&I(0);break}}q&&X(Z+131072);for(var Ve=(1<<le)-1,He=(1<<fe)-1,je=k;;je=k){var tt=(xe=Q[T(N,k)&Ve])>>>4;if((k+=15&xe)>ue){he&&I(0);break}if(xe||I(2),tt<256)ne[Z++]=tt;else{if(tt==256){je=k,Q=null;break}var Oe=tt-254;if(tt>264){var yt=s[_e=tt-257];Oe=C(N,k,(1<<yt)-1)+u[_e],k+=yt}var Qe=se[T(N,k)&He],it=Qe>>>4;if(Qe||I(3),k+=15&Qe,Fe=f[it],it>3&&(yt=o[it],Fe+=T(N,k)&(1<<yt)-1,k+=yt),k>ue){he&&I(0);break}q&&X(Z+131072);for(var Ge=Z+Oe;Z<Ge;Z+=4)ne[Z]=ne[Z-Fe],ne[Z+1]=ne[Z+1-Fe],ne[Z+2]=ne[Z+2-Fe],ne[Z+3]=ne[Z+3-Fe];Z=Ge}}z.l=Q,z.p=je,z.b=Z,Q&&(K=1,z.m=le,z.d=se,z.n=fe)}while(!K);return Z==ne.length?ne:function(ze,Ze,ht){(Ze==null||Ze<0)&&(Ze=0),(ht==null||ht>ze.length)&&(ht=ze.length);var _t=new(ze instanceof n?n:ze instanceof r?r:t)(ht-Ze);return _t.set(ze.subarray(Ze,ht)),_t}(ne,0,Z)},B=new t(0),O=typeof TextDecoder<"u"&&new TextDecoder;try{O.decode(B,{stream:!0})}catch{}return i.convert_streams=function(N){var ne=new DataView(N),z=0;function j(){var Ae=ne.getUint16(z);return z+=2,Ae}function q(){var Ae=ne.getUint32(z);return z+=4,Ae}function he(Ae){ke.setUint16(Be,Ae),Be+=2}function H(Ae){ke.setUint32(Be,Ae),Be+=4}for(var X={signature:q(),flavor:q(),length:q(),numTables:j(),reserved:j(),totalSfntSize:q(),majorVersion:j(),minorVersion:j(),metaOffset:q(),metaLength:q(),metaOrigLength:q(),privOffset:q(),privLength:q()},K=0;Math.pow(2,K)<=X.numTables;)K++;K--;for(var k=16*Math.pow(2,K),Z=16*X.numTables-k,Q=12,se=[],le=0;le<X.numTables;le++)se.push({tag:q(),offset:q(),compLength:q(),origLength:q(),origChecksum:q()}),Q+=16;var fe,ue=new Uint8Array(12+16*se.length+se.reduce(function(Ae,W){return Ae+W.origLength+4},0)),Se=ue.buffer,ke=new DataView(Se),Be=0;return H(X.flavor),he(X.numTables),he(k),he(K),he(Z),se.forEach(function(Ae){H(Ae.tag),H(Ae.origChecksum),H(Q),H(Ae.origLength),Ae.outOffset=Q,(Q+=Ae.origLength)%4!=0&&(Q+=4-Q%4)}),se.forEach(function(Ae){var W,Re=N.slice(Ae.offset,Ae.offset+Ae.compLength);if(Ae.compLength!=Ae.origLength){var Ee=new Uint8Array(Ae.origLength);W=new Uint8Array(Re,2),P(W,Ee)}else Ee=new Uint8Array(Re);ue.set(Ee,Ae.outOffset);var Ce=0;(Q=Ae.outOffset+Ae.origLength)%4!=0&&(Ce=4-Q%4),ue.set(new Uint8Array(Ce).buffer,Ae.outOffset+Ae.origLength),fe=Q+Ce}),Se.slice(0,fe)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function AZ(i,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,a=4,l=8,c=16,u=32;let h;function f(C){if(!h){const T={R:o,L:s,D:a,C:c,U:u,T:l};h=new Map;for(let R in r){let I=0;r[R].split(",").forEach(P=>{let[B,O]=P.split("+");B=parseInt(B,36),O=O?parseInt(O,36):0,h.set(I+=B,T[R]);for(let N=O;N--;)h.set(++I,T[R])})}}return h.get(C)||u}const p=1,g=2,v=3,_=4,x=[null,"isol","init","fina","medi"];function y(C){const T=new Uint8Array(C.length);let R=u,I=p,P=-1;for(let B=0;B<C.length;B++){const O=C.codePointAt(B);let N=f(O)|0,ne=p;N&l||(R&(s|a|c)?N&(o|a|c)?(ne=v,(I===p||I===v)&&T[P]++):N&(s|u)&&(I===g||I===_)&&T[P]--:R&(o|u)&&(I===g||I===_)&&T[P]--,I=T[B]=ne,R=N,P=B,O>65535&&B++)}return T}function S(C,T){const R=[];for(let P=0;P<T.length;P++){const B=T.codePointAt(P);B>65535&&P++,R.push(i.U.codeToGlyph(C,B))}const I=C.GSUB;if(I){const{lookupList:P,featureList:B}=I;let O;const N=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,ne=[];B.forEach(z=>{if(N.test(z.tag))for(let j=0;j<z.tab.length;j++){if(ne[z.tab[j]])continue;ne[z.tab[j]]=!0;const q=P[z.tab[j]],he=/^(isol|init|fina|medi)$/.test(z.tag);he&&!O&&(O=y(T));for(let H=0;H<R.length;H++)(!O||!he||x[O[H]]===z.tag)&&i.U._applySubs(R,H,q,P)}})}return R}function A(...C){for(let T=0;T<C.length;T++)if(typeof C[T]=="number")return C[T]}function M(C){const T=Object.create(null),R=C["OS/2"],I=C.hhea,P=C.head.unitsPerEm,B=A(R&&R.sTypoAscender,I&&I.ascender,P),O={unitsPerEm:P,ascender:B,descender:A(R&&R.sTypoDescender,I&&I.descender,0),capHeight:A(R&&R.sCapHeight,B),xHeight:A(R&&R.sxHeight,B),lineGap:A(R&&R.sTypoLineGap,I&&I.lineGap),forEachGlyph(N,ne,z,j){let q=0;const he=1/O.unitsPerEm*ne,H=S(C,N);let X=0,K=-1;return H.forEach((k,Z)=>{if(k!==-1){let Q=T[k];if(!Q){const{cmds:se,crds:le}=i.U.glyphToPath(C,k);let fe="",ue=0;for(let W=0,Re=se.length;W<Re;W++){const Ee=n[se[W]];fe+=se[W];for(let Ce=1;Ce<=Ee;Ce++)fe+=(Ce>1?",":"")+le[ue++]}let Se,ke,Be,Ae;if(le.length){Se=ke=1/0,Be=Ae=-1/0;for(let W=0,Re=le.length;W<Re;W+=2){let Ee=le[W],Ce=le[W+1];Ee<Se&&(Se=Ee),Ce<ke&&(ke=Ce),Ee>Be&&(Be=Ee),Ce>Ae&&(Ae=Ce)}}else Se=Be=ke=Ae=0;Q=T[k]={index:k,advanceWidth:C.hmtx.aWidth[k],xMin:Se,yMin:ke,xMax:Be,yMax:Ae,path:fe,pathCommandCount:se.length}}K!==-1&&(q+=i.U.getPairAdjustment(C,K,k)*he),j.call(null,Q,q,X),Q.advanceWidth&&(q+=Q.advanceWidth*he),z&&(q+=z*ne),K=k}X+=N.codePointAt(X)>65535?2:1}),q}};return O}return function(T){const R=new Uint8Array(T,0,4),I=i._bin.readASCII(R,0,4);if(I==="wOFF")T=t(T);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return M(i.parse(T)[0])}}const EZ=Im({name:"Typr Font Parser",dependencies:[xZ,SZ,AZ],init(i,t,n){const r=i(),s=t();return n(r,s)}}),Oh={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},MZ=new Ke;function fh(){return(self.performance||Date).now()}const PB=Object.create(null);function nN(i,t){i=CZ({},i);const n=fh();if(i.font=bZ(i.font||Oh.defaultFontURL),i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Oh.sdfGlyphSize,i.colorRanges!=null){let f={};for(let p in i.colorRanges)if(i.colorRanges.hasOwnProperty(p)){let g=i.colorRanges[p];typeof g!="number"&&(g=MZ.set(g).getHex()),f[p]=g}i.colorRanges=f}Object.freeze(i);const{textureWidth:r,sdfExponent:s}=Oh,{sdfGlyphSize:o}=i,a=r/o*4;let l=PB[o];if(!l){const f=document.createElement("canvas");f.width=r,f.height=o*256/a,l=PB[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:f,sdfTexture:new Sn(f,void 0,void 0,void 0,ln,ln),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,wZ(l)}const{sdfTexture:c,sdfCanvas:u}=l;let h=l.glyphsByFont.get(i.font);h||l.glyphsByFont.set(i.font,h=new Map),PZ(i).then(f=>{const{glyphIds:p,glyphPositions:g,fontSize:v,unitsPerEm:_,timings:x}=f,y=[],S=new Float32Array(p.length*4),A=v/_;let M=0,C=0;const T=fh();p.forEach((O,N)=>{let ne=h.get(O);if(!ne){const{path:he,pathBounds:H}=f.glyphData[O],X=Math.max(H[2]-H[0],H[3]-H[1])/o*(Oh.sdfMargin*o+.5),K=l.glyphCount++,k=[H[0]-X,H[1]-X,H[2]+X,H[3]+X];h.set(O,ne={path:he,atlasIndex:K,sdfViewBox:k}),y.push(ne)}const{sdfViewBox:z}=ne,j=g[C++],q=g[C++];S[M++]=j+z[0]*A,S[M++]=q+z[1]*A,S[M++]=j+z[2]*A,S[M++]=q+z[3]*A,p[N]=ne.atlasIndex}),x.quads=(x.quads||0)+(fh()-T);const R=fh();x.sdf={};const I=u.height,P=Math.ceil(l.glyphCount/a),B=Math.pow(2,Math.ceil(Math.log2(P*o)));B>I&&(console.info(`Increasing SDF texture size ${I}->${B}`),_Z(u,r,B),c.dispose()),Promise.all(y.map(O=>iN(O,l,i.gpuAccelerateSDF).then(({timing:N})=>{x.sdf[O.atlasIndex]=N}))).then(()=>{y.length&&!l.contextLost&&(rN(l),c.needsUpdate=!0),x.sdfTotal=fh()-R,x.total=fh()-n,t(Object.freeze({parameters:i,sdfTexture:c,sdfGlyphSize:o,sdfExponent:s,glyphBounds:S,glyphAtlasIndices:p,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{l.contextLost||yZ(u)})}function iN({path:i,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:s,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:c}=Oh,u=Math.max(n[2]-n[0],n[3]-n[1]),h=Math.floor(t/4),f=h%(l/r)*r,p=Math.floor(h/(l/r))*r,g=t%4;return fZ(r,r,i,n,u,c,s,f,p,g,a)}function wZ(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),i.contextLost=!1;const r=[];i.glyphsByFont.forEach(s=>{s.forEach(o=>{r.push(iN(o,i,!0))})}),Promise.all(r).then(()=>{rN(i),i.sdfTexture.needsUpdate=!0})})}function TZ({font:i,characters:t,sdfGlyphSize:n},r){let s=Array.isArray(t)?t.join(`
`):""+t;nN({font:i,sdfGlyphSize:n,text:s},r)}function CZ(i,t){for(let n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}let Vv;function bZ(i){return Vv||(Vv=typeof document>"u"?{}:document.createElement("a")),Vv.href=i,Vv.href}function rN(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=i,{width:r,height:s}=t,o=i.sdfCanvas.getContext("webgl");let a=n.image.data;(!a||a.length!==r*s*4)&&(a=new Uint8Array(r*s*4),n.image={width:r,height:s,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,s,o.RGBA,o.UNSIGNED_BYTE,a)}}const RZ=Im({name:"Typesetter",dependencies:[Oh,EZ,hZ,iZ],init(i,t,n,r){const{defaultFontURL:s}=i;return n(t,r(),{defaultFontURL:s})}}),PZ=Im({name:"Typesetter",dependencies:[RZ],init(i){return function(t){return new Promise(n=>{i.typeset(t,n)})}},getTransferables(i){const t=[i.glyphPositions.buffer,i.glyphIds.buffer];return i.caretPositions&&t.push(i.caretPositions.buffer),i.glyphColors&&t.push(i.glyphColors.buffer),t}}),BB={};function BZ(i){let t=BB[i];if(!t){const n=new Vl(1,1,i,i),r=n.clone(),s=n.attributes,o=r.attributes,a=new It,l=s.uv.count;for(let c=0;c<l;c++)o.position.array[c*3]*=-1,o.normal.array[c*3+2]*=-1;["position","normal","uv"].forEach(c=>{a.setAttribute(c,new pt([...s[c].array,...o[c].array],s[c].itemSize))}),a.setIndex([...n.index.array,...r.index.array.map(c=>c+l)]),a.translate(.5,.5,0),t=BB[i]=a}return t}const IZ="aTroikaGlyphBounds",IB="aTroikaGlyphIndex",DZ="aTroikaGlyphColor";class LZ extends Kw{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Oi,this.boundingBox=new Qi}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const n=this.getIndex().count;this.setDrawRange(t===Ci?n/2:0,t===Li?n:n/2)}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let n=BZ(t);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,n,r,s,o){hS(this,IZ,t,4),hS(this,IB,n,1),hS(this,DZ,o,3),this._blockBounds=r,this._chunkedBounds=s,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:s,floor:o,min:a,max:l,sin:c,cos:u}=Math,h=s/2,f=s*2,p=Math.abs(n),g=t[0]/p,v=t[2]/p,_=o((g+h)/f)!==o((v+h)/f)?-p:a(c(g)*p,c(v)*p),x=o((g-h)/f)!==o((v-h)/f)?p:l(c(g)*p,c(v)*p),y=o((g+s)/f)!==o((v+s)/f)?p*2:l(p-u(g)*p,p-u(v)*p);r.min.set(_,t[1],n<0?-y:0),r.max.set(x,t[3],n<0?0:y)}else r.min.set(t[0],t[1],0),r.max.set(t[2],t[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let n=this.getAttribute(IB).count,r=this._chunkedBounds;if(r)for(let s=r.length;s--;){n=r[s].end;let o=r[s].rect;if(o[1]<t.w&&o[3]>t.y&&o[0]<t.z&&o[2]>t.x)break}this.instanceCount=n}}function hS(i,t,n,r){const s=i.getAttribute(t);n?s&&s.array.length===n.length?(s.array.set(n),s.needsUpdate=!0):(i.setAttribute(t,new ou(n,r)),delete i._maxInstanceCount,i.dispose()):s&&i.deleteAttribute(t)}const UZ=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,FZ=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,OZ=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,NZ=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function kZ(i){const t=ZE(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new De},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new qt(0,0,0,0)},uTroikaClipRect:{value:new qt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new De},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ke},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Yt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:UZ,vertexTransform:FZ,fragmentDefs:OZ,fragmentColorTransform:NZ,customRewriter({vertexShader:n,fragmentShader:r}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(r)&&(r=r.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(n)||(n=n.replace(eN,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const bT=new Ur({color:16777215,side:Li,transparent:!0}),DB=8421504,LB=new at,Wv=new Y,fS=new Y,Bd=[],zZ=new Y,dS="+x+y";function UB(i){return Array.isArray(i)?i[0]:i}let sN=()=>{const i=new In(new Vl(1,1),bT);return sN=()=>i,i},oN=()=>{const i=new In(new Vl(1,1,32,1),bT);return oN=()=>i,i};const GZ={type:"syncstart"},HZ={type:"synccomplete"},aN=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],VZ=aN.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let lN=class extends In{constructor(){const t=new LZ;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=DB,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=dS,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(GZ),nN({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(s=>s&&s())})),this.dispatchEvent(HZ),t&&t()})))}onBeforeRender(t,n,r,s,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=Xs}onAfterRender(t,n,r,s,o,a){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=bT.clone());if((!t||t.baseMaterial!==n)&&(t=this._derivedMaterial=kZ(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),t.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=t._outlineMtl;return r||(r=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,t.addEventListener("dispose",function s(){t.removeEventListener("dispose",s),r.dispose()})),[r,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return UB(this.material).getDepthMaterial()}get customDistanceMaterial(){return UB(this.material).getDistanceMaterial()}_prepareForRender(t){const n=t.isTextOutlineMaterial,r=t.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:l,blockBounds:c}=s;r.uTroikaSDFTexture.value=l,r.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),r.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,r.uTroikaSDFExponent.value=s.sdfExponent,r.uTroikaTotalBounds.value.fromArray(c),r.uTroikaUseGlyphColors.value=!n&&!!s.glyphColors;let u=0,h=0,f=0,p,g,v,_=0,x=0;if(n){let{outlineWidth:S,outlineOffsetX:A,outlineOffsetY:M,outlineBlur:C,outlineOpacity:T}=this;u=this._parsePercent(S)||0,h=Math.max(0,this._parsePercent(C)||0),p=T,_=this._parsePercent(A)||0,x=this._parsePercent(M)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(v=this.strokeColor,r.uTroikaStrokeColor.value.set(v??DB),g=this.strokeOpacity,g==null&&(g=1)),p=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(_,x),r.uTroikaBlurRadius.value=h,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=g,r.uTroikaFillOpacity.value=p??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let y=this.clipRect;if(y&&Array.isArray(y)&&y.length===4)r.uTroikaClipRect.value.fromArray(y);else{const S=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(c[0]-S,c[1]-S,c[2]+S,c[3]+S)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const o=n?this.outlineColor||0:this.color;if(o==null)delete t.color;else{const l=t.hasOwnProperty("color")?t.color:t.color=new Ke;(o!==l._input||typeof o=="object")&&l.set(l._input=o)}let a=this.orientation||dS;if(a!==t._orientation){let l=r.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let c=a!==dS&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,u,h,f,p]=c;Wv.set(0,0,0)[h]=u==="-"?1:-1,fS.set(0,0,0)[p]=f==="-"?-1:1,LB.lookAt(zZ,Wv.cross(fS),fS),l.setFromMatrix4(LB)}else l.identity();t._orientation=a}}_parsePercent(t){if(typeof t=="string"){let n=t.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;t=(isNaN(r)?0:r/100)*this.fontSize}return t}localPositionToTextCoords(t,n=new De){n.copy(t);const r=this.curveRadius;return r&&(n.x=Math.atan2(t.x,Math.abs(r)-Math.abs(t.z))*Math.abs(r)),n}worldPositionToTextCoords(t,n=new De){return Wv.copy(t),this.localPositionToTextCoords(this.worldToLocal(Wv),n)}raycast(t,n){const{textRenderInfo:r,curveRadius:s}=this;if(r){const o=r.blockBounds,a=s?oN():sN(),l=a.geometry,{position:c,uv:u}=l.attributes;for(let h=0;h<u.count;h++){let f=o[0]+u.getX(h)*(o[2]-o[0]);const p=o[1]+u.getY(h)*(o[3]-o[1]);let g=0;s&&(g=s-Math.cos(f/s)*s,f=Math.sin(f/s)*s),c.setXYZ(h,f,p,g)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Bd.length=0,a.raycast(t,Bd);for(let h=0;h<Bd.length;h++)Bd[h].object=this,n.push(Bd[h])}}copy(t){const n=this.geometry;return super.copy(t),this.geometry=n,VZ.forEach(r=>{this[r]=t[r]}),this}clone(){return new this.constructor().copy(this)}};aN.forEach(i=>{const t="_private_"+i;Object.defineProperty(lN.prototype,i,{get(){return this[t]},set(n){n!==this[t]&&(this[t]=n,this._needsSync=!0)}})});const pS=ee.forwardRef(({sdfGlyphSize:i=64,anchorX:t="center",anchorY:n="middle",font:r,fontSize:s=1,children:o,characters:a,onSync:l,...c},u)=>{const h=jn(({invalidate:v})=>v),[f]=ee.useState(()=>new lN),[p,g]=ee.useMemo(()=>{const v=[];let _="";return ee.Children.forEach(o,x=>{typeof x=="string"||typeof x=="number"?_+=x:v.push(x)}),[v,_]},[o]);return tT(()=>new Promise(v=>TZ({font:r,characters:a},v)),["troika-text",r,a]),ee.useLayoutEffect(()=>void f.sync(()=>{h(),l&&l(f)})),ee.useEffect(()=>()=>f.dispose(),[f]),ee.createElement("primitive",jo({object:f,ref:u,font:r,text:g,anchorX:t,anchorY:n,fontSize:s,sdfGlyphSize:i},c),p)});let mS=null;async function cN(i){mS||(mS=new WK);let t=typeof i=="string"?await(await fetch(i)).json():i;return mS.parse(t)}function RT(i){return tT(cN,[i])}RT.preload=i=>UF(cN,[i]);RT.clear=i=>FF([i]);const FB=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function PT(i,t){const n=jn(s=>s.gl),r=Js(Rf,FB(i)?Object.values(i):i);if(ee.useLayoutEffect(()=>{t==null||t(r)},[t]),ee.useEffect(()=>{"initTexture"in n&&(Array.isArray(r)?r:[r]).forEach(n.initTexture)},[n,r]),FB(i)){const s={};let o=0;for(const a in i)s[a]=r[o++];return s}else return r}PT.preload=i=>Js.preload(Rf,i);PT.clear=i=>Js.clear(Rf,i);const WZ=()=>parseInt(Jo.replace(/\D+/g,"")),XZ=WZ();let Xv=null,uN="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function hN(i,t,n){return r=>{n&&n(r),i&&(Xv||(Xv=new KK),Xv.setDecoderPath(typeof i=="string"?i:uN),r.setDRACOLoader(Xv)),t&&r.setMeshoptDecoder(typeof cS=="function"?cS():cS)}}function Au(i,t=!0,n=!0,r){return Js(MT,i,hN(t,n,r))}Au.preload=(i,t=!0,n=!0,r)=>Js.preload(MT,i,hN(t,n,r));Au.clear=i=>Js.clear(MT,i);Au.setDecoderPath=i=>{uN=i};/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Ft={LEFT:1,RIGHT:2,MIDDLE:4},Ne=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),dh={NONE:0,IN:1,OUT:-1};function xc(i){return i.isPerspectiveCamera}function sl(i){return i.isOrthographicCamera}const ph=Math.PI*2,OB=Math.PI/2,fN=1e-5,Id=Math.PI/180;function no(i,t,n){return Math.max(t,Math.min(n,i))}function Dn(i,t=fN){return Math.abs(i)<t}function _n(i,t,n=fN){return Dn(i-t,n)}function NB(i,t){return Math.round(i/t)*t}function Dd(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Ld(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function jv(i,t,n,r,s=1/0,o){r=Math.max(1e-4,r);const a=2/r,l=a*o,c=1/(1+l+.48*l*l+.235*l*l*l);let u=i-t;const h=t,f=s*r;u=no(u,-f,f),t=i-u;const p=(n.value+a*u)*o;n.value=(n.value-a*p)*c;let g=t+(u+p)*c;return h-i>0==g>h&&(g=h,n.value=(g-h)/o),g}function kB(i,t,n,r,s=1/0,o,a){r=Math.max(1e-4,r);const l=2/r,c=l*o,u=1/(1+c+.48*c*c+.235*c*c*c);let h=t.x,f=t.y,p=t.z,g=i.x-h,v=i.y-f,_=i.z-p;const x=h,y=f,S=p,A=s*r,M=A*A,C=g*g+v*v+_*_;if(C>M){const j=Math.sqrt(C);g=g/j*A,v=v/j*A,_=_/j*A}h=i.x-g,f=i.y-v,p=i.z-_;const T=(n.x+l*g)*o,R=(n.y+l*v)*o,I=(n.z+l*_)*o;n.x=(n.x-l*T)*u,n.y=(n.y-l*R)*u,n.z=(n.z-l*I)*u,a.x=h+(g+T)*u,a.y=f+(v+R)*u,a.z=p+(_+I)*u;const P=x-i.x,B=y-i.y,O=S-i.z,N=a.x-x,ne=a.y-y,z=a.z-S;return P*N+B*ne+O*z>0&&(a.x=x,a.y=y,a.z=S,n.x=(a.x-x)/o,n.y=(a.y-y)/o,n.z=(a.z-S)/o),a}function gS(i,t){t.set(0,0),i.forEach(n=>{t.x+=n.clientX,t.y+=n.clientY}),t.x/=i.length,t.y/=i.length}function vS(i,t){return sl(i)?(console.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class jZ{constructor(){this._listeners={}}addEventListener(t,n){const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){const s=this._listeners[t];if(s!==void 0){const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const r=this._listeners[t.type];if(r!==void 0){t.target=this;const s=r.slice(0);for(let o=0,a=s.length;o<a;o++)s[o].call(this,t)}}}const YZ="2.7.3",Yv=1/8,dN=typeof window<"u",JZ=dN&&/Mac/.test(navigator.platform),KZ=!(dN&&"PointerEvent"in window);let Dt,zB,Jv,yS,Wr,Kt,mn,mh,Ud,Co,bo,Sc,GB,HB,Ps,Fd,gh,VB,_S,WB,xS,SS,Kv,AS=class qE extends jZ{static install(t){Dt=t.THREE,zB=Object.freeze(new Dt.Vector3(0,0,0)),Jv=Object.freeze(new Dt.Vector3(0,1,0)),yS=Object.freeze(new Dt.Vector3(0,0,1)),Wr=new Dt.Vector2,Kt=new Dt.Vector3,mn=new Dt.Vector3,mh=new Dt.Vector3,Ud=new Dt.Vector3,Co=new Dt.Vector3,bo=new Dt.Vector3,Sc=new Dt.Vector3,GB=new Dt.Vector3,HB=new Dt.Vector3,Ps=new Dt.Spherical,Fd=new Dt.Spherical,gh=new Dt.Box3,VB=new Dt.Box3,_S=new Dt.Sphere,WB=new Dt.Quaternion,xS=new Dt.Quaternion,SS=new Dt.Matrix4,Kv=new Dt.Raycaster}static get ACTION(){return Ne}constructor(t,n){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Ne.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=dh.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Dt.Vector3,this._focalOffsetVelocity=new Dt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(M,C,T)=>{let R,I;if(xc(this._camera)){const P=Kt.copy(this._camera.position).sub(this._target),B=this._camera.getEffectiveFOV()*Id,O=P.length()*Math.tan(B*.5);R=this.truckSpeed*M*O/this._elementRect.height,I=this.truckSpeed*C*O/this._elementRect.height}else if(sl(this._camera)){const P=this._camera;R=M*(P.right-P.left)/P.zoom/this._elementRect.width,I=C*(P.top-P.bottom)/P.zoom/this._elementRect.height}else return;this.verticalDragToForward?(T?this.setFocalOffset(this._focalOffsetEnd.x+R,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(R,0,!0),this.forward(-I,!0)):T?this.setFocalOffset(this._focalOffsetEnd.x+R,this._focalOffsetEnd.y+I,this._focalOffsetEnd.z,!0):this.truck(R,I,!0)},this._rotateInternal=(M,C)=>{const T=ph*this.azimuthRotateSpeed*M/this._elementRect.height,R=ph*this.polarRotateSpeed*C/this._elementRect.height;this.rotate(T,R,!0)},this._dollyInternal=(M,C,T)=>{const R=Math.pow(.95,-M*this.dollySpeed),I=this._sphericalEnd.radius,P=this._sphericalEnd.radius*R,B=no(P,this.minDistance,this.maxDistance),O=B-P;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(P,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(O,!0),this._dollyToNoClamp(B,!0)):this._dollyToNoClamp(B,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?P:B)-I,this._dollyControlCoord.set(C,T)),this._lastDollyDirection=Math.sign(-M)},this._zoomInternal=(M,C,T)=>{const R=Math.pow(.95,M*this.dollySpeed),I=this._zoom,P=this._zoom*R;this.zoomTo(P,!0),this.dollyToCursor&&(this._changedZoom+=P-I,this._dollyControlCoord.set(C,T))},typeof Dt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new Dt.Quaternion().setFromUnitVectors(this._camera.up,Jv),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Ne.NONE,this._target=new Dt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Dt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Dt.Spherical().setFromVector3(Kt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Dt.Vector3,new Dt.Vector3,new Dt.Vector3,new Dt.Vector3],this._updateNearPlaneCorners(),this._boundary=new Dt.Box3(new Dt.Vector3(-1/0,-1/0,-1/0),new Dt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Dt.Vector2,this.mouseButtons={left:Ne.ROTATE,middle:Ne.DOLLY,right:Ne.TRUCK,wheel:xc(this._camera)?Ne.DOLLY:sl(this._camera)?Ne.ZOOM:Ne.NONE},this.touches={one:Ne.TOUCH_ROTATE,two:xc(this._camera)?Ne.TOUCH_DOLLY_TRUCK:sl(this._camera)?Ne.TOUCH_ZOOM_TRUCK:Ne.NONE,three:Ne.TOUCH_TRUCK};const r=new Dt.Vector2,s=new Dt.Vector2,o=new Dt.Vector2,a=M=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const R=this._domElement.getBoundingClientRect(),I=M.clientX/R.width,P=M.clientY/R.height;if(I<this._interactiveArea.left||I>this._interactiveArea.right||P<this._interactiveArea.top||P>this._interactiveArea.bottom)return}const C=M.pointerType!=="mouse"?null:(M.buttons&Ft.LEFT)===Ft.LEFT?Ft.LEFT:(M.buttons&Ft.MIDDLE)===Ft.MIDDLE?Ft.MIDDLE:(M.buttons&Ft.RIGHT)===Ft.RIGHT?Ft.RIGHT:null;if(C!==null){const R=this._findPointerByMouseButton(C);R&&this._disposePointer(R)}if((M.buttons&Ft.LEFT)===Ft.LEFT&&this._lockedPointer)return;const T={pointerId:M.pointerId,clientX:M.clientX,clientY:M.clientY,deltaX:0,deltaY:0,mouseButton:C};this._activePointers.push(T),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",h),this._isDragging=!0,_(M)},l=M=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const R=this._domElement.getBoundingClientRect(),I=M.clientX/R.width,P=M.clientY/R.height;if(I<this._interactiveArea.left||I>this._interactiveArea.right||P<this._interactiveArea.top||P>this._interactiveArea.bottom)return}const C=(M.buttons&Ft.LEFT)===Ft.LEFT?Ft.LEFT:(M.buttons&Ft.MIDDLE)===Ft.MIDDLE?Ft.MIDDLE:(M.buttons&Ft.RIGHT)===Ft.RIGHT?Ft.RIGHT:null;if(C!==null){const R=this._findPointerByMouseButton(C);R&&this._disposePointer(R)}const T={pointerId:1,clientX:M.clientX,clientY:M.clientY,deltaX:0,deltaY:0,mouseButton:(M.buttons&Ft.LEFT)===Ft.LEFT?Ft.LEFT:(M.buttons&Ft.MIDDLE)===Ft.LEFT?Ft.MIDDLE:(M.buttons&Ft.RIGHT)===Ft.LEFT?Ft.RIGHT:null};this._activePointers.push(T),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("mouseup",f),this._domElement.ownerDocument.addEventListener("mousemove",u),this._domElement.ownerDocument.addEventListener("mouseup",f),this._isDragging=!0,_(M)},c=M=>{M.cancelable&&M.preventDefault();const C=M.pointerId,T=this._lockedPointer||this._findPointerById(C);if(T){if(T.clientX=M.clientX,T.clientY=M.clientY,T.deltaX=M.movementX,T.deltaY=M.movementY,this._state=0,M.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(M.buttons&Ft.LEFT)===Ft.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(M.buttons&Ft.MIDDLE)===Ft.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(M.buttons&Ft.RIGHT)===Ft.RIGHT&&(this._state=this._state|this.mouseButtons.right);x()}},u=M=>{const C=this._lockedPointer||this._findPointerById(1);C&&(C.clientX=M.clientX,C.clientY=M.clientY,C.deltaX=M.movementX,C.deltaY=M.movementY,this._state=0,(this._lockedPointer||(M.buttons&Ft.LEFT)===Ft.LEFT)&&(this._state=this._state|this.mouseButtons.left),(M.buttons&Ft.MIDDLE)===Ft.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(M.buttons&Ft.RIGHT)===Ft.RIGHT&&(this._state=this._state|this.mouseButtons.right),x())},h=M=>{const C=this._findPointerById(M.pointerId);if(!(C&&C===this._lockedPointer)){if(C&&this._disposePointer(C),M.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Ne.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Ne.NONE;y()}},f=()=>{const M=this._findPointerById(1);M&&M===this._lockedPointer||(M&&this._disposePointer(M),this._state=Ne.NONE,y())};let p=-1;const g=M=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Ne.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const P=this._domElement.getBoundingClientRect(),B=M.clientX/P.width,O=M.clientY/P.height;if(B<this._interactiveArea.left||B>this._interactiveArea.right||O<this._interactiveArea.top||O>this._interactiveArea.bottom)return}if(M.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Ne.ROTATE||this.mouseButtons.wheel===Ne.TRUCK){const P=performance.now();p-P<1e3&&this._getClientRect(this._elementRect),p=P}const C=JZ?-1:-3,T=M.deltaMode===1?M.deltaY/C:M.deltaY/(C*10),R=this.dollyToCursor?(M.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,I=this.dollyToCursor?(M.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Ne.ROTATE:{this._rotateInternal(M.deltaX,M.deltaY),this._isUserControllingRotate=!0;break}case Ne.TRUCK:{this._truckInternal(M.deltaX,M.deltaY,!1),this._isUserControllingTruck=!0;break}case Ne.OFFSET:{this._truckInternal(M.deltaX,M.deltaY,!0),this._isUserControllingOffset=!0;break}case Ne.DOLLY:{this._dollyInternal(-T,R,I),this._isUserControllingDolly=!0;break}case Ne.ZOOM:{this._zoomInternal(-T,R,I),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},v=M=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===qE.ACTION.NONE){const C=M instanceof PointerEvent?M.pointerId:(M instanceof MouseEvent,0),T=this._findPointerById(C);T&&this._disposePointer(T),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("mouseup",f);return}M.preventDefault()}},_=M=>{if(!this._enabled)return;if(gS(this._activePointers,Wr),this._getClientRect(this._elementRect),r.copy(Wr),s.copy(Wr),this._activePointers.length>=2){const T=Wr.x-this._activePointers[1].clientX,R=Wr.y-this._activePointers[1].clientY,I=Math.sqrt(T*T+R*R);o.set(0,I);const P=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,B=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;s.set(P,B)}if(this._state=0,!M)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in M&&M.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(M.buttons&Ft.LEFT)===Ft.LEFT&&(this._state=this._state|this.mouseButtons.left),(M.buttons&Ft.MIDDLE)===Ft.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(M.buttons&Ft.RIGHT)===Ft.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Ne.ROTATE)===Ne.ROTATE||(this._state&Ne.TOUCH_ROTATE)===Ne.TOUCH_ROTATE||(this._state&Ne.TOUCH_DOLLY_ROTATE)===Ne.TOUCH_DOLLY_ROTATE||(this._state&Ne.TOUCH_ZOOM_ROTATE)===Ne.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Ne.TRUCK)===Ne.TRUCK||(this._state&Ne.TOUCH_TRUCK)===Ne.TOUCH_TRUCK||(this._state&Ne.TOUCH_DOLLY_TRUCK)===Ne.TOUCH_DOLLY_TRUCK||(this._state&Ne.TOUCH_ZOOM_TRUCK)===Ne.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Ne.DOLLY)===Ne.DOLLY||(this._state&Ne.TOUCH_DOLLY)===Ne.TOUCH_DOLLY||(this._state&Ne.TOUCH_DOLLY_TRUCK)===Ne.TOUCH_DOLLY_TRUCK||(this._state&Ne.TOUCH_DOLLY_OFFSET)===Ne.TOUCH_DOLLY_OFFSET||(this._state&Ne.TOUCH_DOLLY_ROTATE)===Ne.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Ne.ZOOM)===Ne.ZOOM||(this._state&Ne.TOUCH_ZOOM)===Ne.TOUCH_ZOOM||(this._state&Ne.TOUCH_ZOOM_TRUCK)===Ne.TOUCH_ZOOM_TRUCK||(this._state&Ne.TOUCH_ZOOM_OFFSET)===Ne.TOUCH_ZOOM_OFFSET||(this._state&Ne.TOUCH_ZOOM_ROTATE)===Ne.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Ne.OFFSET)===Ne.OFFSET||(this._state&Ne.TOUCH_OFFSET)===Ne.TOUCH_OFFSET||(this._state&Ne.TOUCH_DOLLY_OFFSET)===Ne.TOUCH_DOLLY_OFFSET||(this._state&Ne.TOUCH_ZOOM_OFFSET)===Ne.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},x=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,gS(this._activePointers,Wr);const C=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,T=C?-C.deltaX:s.x-Wr.x,R=C?-C.deltaY:s.y-Wr.y;if(s.copy(Wr),((this._state&Ne.ROTATE)===Ne.ROTATE||(this._state&Ne.TOUCH_ROTATE)===Ne.TOUCH_ROTATE||(this._state&Ne.TOUCH_DOLLY_ROTATE)===Ne.TOUCH_DOLLY_ROTATE||(this._state&Ne.TOUCH_ZOOM_ROTATE)===Ne.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(T,R),this._isUserControllingRotate=!0),(this._state&Ne.DOLLY)===Ne.DOLLY||(this._state&Ne.ZOOM)===Ne.ZOOM){const I=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,P=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,B=this.dollyDragInverted?-1:1;(this._state&Ne.DOLLY)===Ne.DOLLY?(this._dollyInternal(B*R*Yv,I,P),this._isUserControllingDolly=!0):(this._zoomInternal(B*R*Yv,I,P),this._isUserControllingZoom=!0)}if((this._state&Ne.TOUCH_DOLLY)===Ne.TOUCH_DOLLY||(this._state&Ne.TOUCH_ZOOM)===Ne.TOUCH_ZOOM||(this._state&Ne.TOUCH_DOLLY_TRUCK)===Ne.TOUCH_DOLLY_TRUCK||(this._state&Ne.TOUCH_ZOOM_TRUCK)===Ne.TOUCH_ZOOM_TRUCK||(this._state&Ne.TOUCH_DOLLY_OFFSET)===Ne.TOUCH_DOLLY_OFFSET||(this._state&Ne.TOUCH_ZOOM_OFFSET)===Ne.TOUCH_ZOOM_OFFSET||(this._state&Ne.TOUCH_DOLLY_ROTATE)===Ne.TOUCH_DOLLY_ROTATE||(this._state&Ne.TOUCH_ZOOM_ROTATE)===Ne.TOUCH_ZOOM_ROTATE){const I=Wr.x-this._activePointers[1].clientX,P=Wr.y-this._activePointers[1].clientY,B=Math.sqrt(I*I+P*P),O=o.y-B;o.set(0,B);const N=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,ne=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Ne.TOUCH_DOLLY)===Ne.TOUCH_DOLLY||(this._state&Ne.TOUCH_DOLLY_ROTATE)===Ne.TOUCH_DOLLY_ROTATE||(this._state&Ne.TOUCH_DOLLY_TRUCK)===Ne.TOUCH_DOLLY_TRUCK||(this._state&Ne.TOUCH_DOLLY_OFFSET)===Ne.TOUCH_DOLLY_OFFSET?(this._dollyInternal(O*Yv,N,ne),this._isUserControllingDolly=!0):(this._zoomInternal(O*Yv,N,ne),this._isUserControllingZoom=!0)}((this._state&Ne.TRUCK)===Ne.TRUCK||(this._state&Ne.TOUCH_TRUCK)===Ne.TOUCH_TRUCK||(this._state&Ne.TOUCH_DOLLY_TRUCK)===Ne.TOUCH_DOLLY_TRUCK||(this._state&Ne.TOUCH_ZOOM_TRUCK)===Ne.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(T,R,!1),this._isUserControllingTruck=!0),((this._state&Ne.OFFSET)===Ne.OFFSET||(this._state&Ne.TOUCH_OFFSET)===Ne.TOUCH_OFFSET||(this._state&Ne.TOUCH_DOLLY_OFFSET)===Ne.TOUCH_DOLLY_OFFSET||(this._state&Ne.TOUCH_ZOOM_OFFSET)===Ne.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(T,R,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},y=()=>{gS(this._activePointers,Wr),s.copy(Wr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.removeEventListener("mouseup",f),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",S),this._domElement.ownerDocument.addEventListener("pointerlockerror",A),this._domElement.ownerDocument.addEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",h),_())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",A))};const S=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},A=()=>{this.unlockPointer()};this._addAllEventListeners=M=>{this._domElement=M,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),KZ&&this._domElement.addEventListener("mousedown",l),this._domElement.addEventListener("pointercancel",h),this._domElement.addEventListener("wheel",g,{passive:!1}),this._domElement.addEventListener("contextmenu",v)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("mousedown",l),this._domElement.removeEventListener("pointercancel",h),this._domElement.removeEventListener("wheel",g,{passive:!1}),this._domElement.removeEventListener("contextmenu",v),this._domElement.ownerDocument.removeEventListener("pointermove",c,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",u),this._domElement.ownerDocument.removeEventListener("pointerup",h),this._domElement.ownerDocument.removeEventListener("mouseup",f),this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",A))},this.cancel=()=>{this._state!==Ne.NONE&&(this._state=Ne.NONE,this._activePointers.length=0,y())},n&&this.connect(n),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=no(t.width,0,1),this._interactiveArea.height=no(t.height,0,1),this._interactiveArea.x=no(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=no(t.y,0,1-this._interactiveArea.height)}addEventListener(t,n){super.addEventListener(t,n)}removeEventListener(t,n){super.removeEventListener(t,n)}rotate(t,n,r=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+n,r)}rotateAzimuthTo(t,n=!1){return this.rotateTo(t,this._sphericalEnd.phi,n)}rotatePolarTo(t,n=!1){return this.rotateTo(this._sphericalEnd.theta,t,n)}rotateTo(t,n,r=!1){this._isUserControllingRotate=!1;const s=no(t,this.minAzimuthAngle,this.maxAzimuthAngle),o=no(n,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=s,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!r||_n(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_n(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(t,n=!1){return this.dollyTo(this._sphericalEnd.radius-t,n)}dollyTo(t,n=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=dh.NONE,this._changedDolly=0,this._dollyToNoClamp(no(t,this.minDistance,this.maxDistance),n)}_dollyToNoClamp(t,n=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),l=_n(a,this._spherical.radius);if(!(r>t)&&l)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,a)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,n||(this._spherical.radius=this._sphericalEnd.radius);const o=!n||_n(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(o)}dollyInFixed(t,n=!1){this._targetEnd.add(this._getCameraDirection(Ud).multiplyScalar(t)),n||this._target.copy(this._targetEnd);const r=!n||_n(this._target.x,this._targetEnd.x,this.restThreshold)&&_n(this._target.y,this._targetEnd.y,this.restThreshold)&&_n(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(t,n=!1){return this.zoomTo(this._zoomEnd+t,n)}zoomTo(t,n=!1){this._isUserControllingZoom=!1,this._zoomEnd=no(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,n||(this._zoom=this._zoomEnd);const r=!n||_n(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(t,n,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,n,r)}truck(t,n,r=!1){this._camera.updateMatrix(),Co.setFromMatrixColumn(this._camera.matrix,0),bo.setFromMatrixColumn(this._camera.matrix,1),Co.multiplyScalar(t),bo.multiplyScalar(-n);const s=Kt.copy(Co).add(bo),o=mn.copy(this._targetEnd).add(s);return this.moveTo(o.x,o.y,o.z,r)}forward(t,n=!1){Kt.setFromMatrixColumn(this._camera.matrix,0),Kt.crossVectors(this._camera.up,Kt),Kt.multiplyScalar(t);const r=mn.copy(this._targetEnd).add(Kt);return this.moveTo(r.x,r.y,r.z,n)}elevate(t,n=!1){return Kt.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+Kt.x,this._targetEnd.y+Kt.y,this._targetEnd.z+Kt.z,n)}moveTo(t,n,r,s=!1){this._isUserControllingTruck=!1;const o=Kt.set(t,n,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,o,this.boundaryFriction),this._needsUpdate=!0,s||this._target.copy(this._targetEnd);const a=!s||_n(this._target.x,this._targetEnd.x,this.restThreshold)&&_n(this._target.y,this._targetEnd.y,this.restThreshold)&&_n(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(t,n,r,s=!1){const l=Kt.set(t,n,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(l.x,l.y,l.z,s)}fitToBox(t,n,{cover:r=!1,paddingLeft:s=0,paddingRight:o=0,paddingBottom:a=0,paddingTop:l=0}={}){const c=[],u=t.isBox3?gh.copy(t):gh.setFromObject(t);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const h=NB(this._sphericalEnd.theta,OB),f=NB(this._sphericalEnd.phi,OB);c.push(this.rotateTo(h,f,n));const p=Kt.setFromSpherical(this._sphericalEnd).normalize(),g=WB.setFromUnitVectors(p,yS),v=_n(Math.abs(p.y),1);v&&g.multiply(xS.setFromAxisAngle(Jv,h)),g.multiply(this._yAxisUpSpaceInverse);const _=VB.makeEmpty();mn.copy(u.min).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.min).setX(u.max.x).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.min).setY(u.max.y).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.max).setZ(u.min.z).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.min).setZ(u.max.z).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.max).setY(u.min.y).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.max).setX(u.min.x).applyQuaternion(g),_.expandByPoint(mn),mn.copy(u.max).applyQuaternion(g),_.expandByPoint(mn),_.min.x-=s,_.min.y-=a,_.max.x+=o,_.max.y+=l,g.setFromUnitVectors(yS,p),v&&g.premultiply(xS.invert()),g.premultiply(this._yAxisUpSpace);const x=_.getSize(Kt),y=_.getCenter(mn).applyQuaternion(g);if(xc(this._camera)){const S=this.getDistanceToFitBox(x.x,x.y,x.z,r);c.push(this.moveTo(y.x,y.y,y.z,n)),c.push(this.dollyTo(S,n)),c.push(this.setFocalOffset(0,0,0,n))}else if(sl(this._camera)){const S=this._camera,A=S.right-S.left,M=S.top-S.bottom,C=r?Math.max(A/x.x,M/x.y):Math.min(A/x.x,M/x.y);c.push(this.moveTo(y.x,y.y,y.z,n)),c.push(this.zoomTo(C,n)),c.push(this.setFocalOffset(0,0,0,n))}return Promise.all(c)}fitToSphere(t,n){const r=[],o=t instanceof Dt.Sphere?_S.copy(t):qE.createBoundingSphere(t,_S);if(r.push(this.moveTo(o.center.x,o.center.y,o.center.z,n)),xc(this._camera)){const a=this.getDistanceToFitSphere(o.radius);r.push(this.dollyTo(a,n))}else if(sl(this._camera)){const a=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,c=2*o.radius,u=Math.min(a/c,l/c);r.push(this.zoomTo(u,n))}return r.push(this.setFocalOffset(0,0,0,n)),Promise.all(r)}setLookAt(t,n,r,s,o,a,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dh.NONE,this._changedDolly=0;const c=mn.set(s,o,a),u=Kt.set(t,n,r);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(u.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const h=!l||_n(this._target.x,this._targetEnd.x,this.restThreshold)&&_n(this._target.y,this._targetEnd.y,this.restThreshold)&&_n(this._target.z,this._targetEnd.z,this.restThreshold)&&_n(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_n(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&_n(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(h)}lerpLookAt(t,n,r,s,o,a,l,c,u,h,f,p,g,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dh.NONE,this._changedDolly=0;const _=Kt.set(s,o,a),x=mn.set(t,n,r);Ps.setFromVector3(x.sub(_).applyQuaternion(this._yAxisUpSpace));const y=mh.set(h,f,p),S=mn.set(l,c,u);Fd.setFromVector3(S.sub(y).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(_.lerp(y,g));const A=Fd.theta-Ps.theta,M=Fd.phi-Ps.phi,C=Fd.radius-Ps.radius;this._sphericalEnd.set(Ps.radius+C*g,Ps.phi+M*g,Ps.theta+A*g),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const T=!v||_n(this._target.x,this._targetEnd.x,this.restThreshold)&&_n(this._target.y,this._targetEnd.y,this.restThreshold)&&_n(this._target.z,this._targetEnd.z,this.restThreshold)&&_n(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&_n(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&_n(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(T)}setPosition(t,n,r,s=!1){return this.setLookAt(t,n,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,s)}setTarget(t,n,r,s=!1){const o=this.getPosition(Kt),a=this.setLookAt(o.x,o.y,o.z,t,n,r,s);return this._sphericalEnd.phi=no(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(t,n,r,s=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,n,r),this._needsUpdate=!0,s||this._focalOffset.copy(this._focalOffsetEnd);const o=!s||_n(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&_n(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&_n(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}setOrbitPoint(t,n,r){this._camera.updateMatrixWorld(),Co.setFromMatrixColumn(this._camera.matrixWorldInverse,0),bo.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Sc.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const s=Kt.set(t,n,r),o=s.distanceTo(this._camera.position),a=s.sub(this._camera.position);Co.multiplyScalar(a.x),bo.multiplyScalar(a.y),Sc.multiplyScalar(a.z),Kt.copy(Co).add(bo).add(Sc),Kt.z=Kt.z+o,this.dollyTo(o,!1),this.setFocalOffset(-Kt.x,Kt.y,-Kt.z,!1),this.moveTo(t,n,r,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,n,r,s){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Dt.Vector4,typeof t=="number"?this._viewport.set(t,n,r,s):this._viewport.copy(t)}getDistanceToFitBox(t,n,r,s=!1){if(vS(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const o=t/n,a=this._camera.getEffectiveFOV()*Id,l=this._camera.aspect;return((s?o>l:o<l)?n:t/l)*.5/Math.tan(a*.5)+r*.5}getDistanceToFitSphere(t){if(vS(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const n=this._camera.getEffectiveFOV()*Id,r=Math.atan(Math.tan(n*.5)*this._camera.aspect)*2,s=1<this._camera.aspect?n:r;return t/Math.sin(s*.5)}getTarget(t,n=!0){return(t&&t.isVector3?t:new Dt.Vector3).copy(n?this._targetEnd:this._target)}getPosition(t,n=!0){return(t&&t.isVector3?t:new Dt.Vector3).setFromSpherical(n?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(n?this._targetEnd:this._target)}getSpherical(t,n=!0){return(t&&t instanceof Dt.Spherical?t:new Dt.Spherical).copy(n?this._sphericalEnd:this._spherical)}getFocalOffset(t,n=!0){return(t&&t.isVector3?t:new Dt.Vector3).copy(n?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%ph,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=ph),this._spherical.theta+=ph*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ph)}reset(t=!1){if(!_n(this._camera.up.x,this._cameraUp0.x)||!_n(this._camera.up.y,this._cameraUp0.y)||!_n(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(Kt);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const n=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(n)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Jv),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=Kt.subVectors(this._target,this._camera.position).normalize(),n=mn.crossVectors(t,this._camera.up);this._camera.up.crossVectors(n,t).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(Kt);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(t){const n=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,s=this._sphericalEnd.radius-this._spherical.radius,o=GB.subVectors(this._targetEnd,this._target),a=HB.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(Dn(n))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=jv(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,t),this._needsUpdate=!0}if(Dn(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=jv(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,t),this._needsUpdate=!0}if(Dn(s))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=jv(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,t),this._needsUpdate=!0}if(Dn(o.x)&&Dn(o.y)&&Dn(o.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;kB(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(Dn(a.x)&&Dn(a.y)&&Dn(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;kB(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(Dn(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=jv(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,t)}if(this.dollyToCursor){if(xc(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,p=this._camera,g=this._getCameraDirection(Ud),v=Kt.copy(g).cross(p.up).normalize();v.lengthSq()===0&&(v.x=1);const _=mn.crossVectors(v,g),x=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*Id*.5),S=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,A=mh.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*x*p.aspect)).add(_.multiplyScalar(this._dollyControlCoord.y*x)),M=Kt.copy(this._targetEnd).lerp(A,S),C=this._lastDollyDirection===dh.IN&&this._spherical.radius<=this.minDistance,T=this._lastDollyDirection===dh.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(C||T)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const I=mn.copy(g).multiplyScalar(-f);M.add(I)}this._boundary.clampPoint(M,M);const R=mn.subVectors(M,this._targetEnd);this._targetEnd.copy(M),this._target.add(R),this._changedDolly-=f,Dn(this._changedDolly)&&(this._changedDolly=0)}else if(sl(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,p=this._camera,g=Kt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(p.near+p.far)/(p.near-p.far)).unproject(p),v=mn.set(0,0,-1).applyQuaternion(p.quaternion),_=mh.copy(g).add(v.multiplyScalar(-g.dot(p.up))),y=-(this._zoom-f-this._zoom)/this._zoom,S=this._getCameraDirection(Ud),A=this._targetEnd.dot(S),M=Kt.copy(this._targetEnd).lerp(_,y),C=M.dot(S),T=S.multiplyScalar(C-A);M.sub(T),this._boundary.clampPoint(M,M);const R=mn.subVectors(M,this._targetEnd);this._targetEnd.copy(M),this._target.add(R),this._changedZoom-=f,Dn(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Dn(this._focalOffset.x)||!Dn(this._focalOffset.y)||!Dn(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Co.setFromMatrixColumn(this._camera.matrix,0),bo.setFromMatrixColumn(this._camera.matrix,1),Sc.setFromMatrixColumn(this._camera.matrix,2),Co.multiplyScalar(this._focalOffset.x),bo.multiplyScalar(-this._focalOffset.y),Sc.multiplyScalar(this._focalOffset.z),Kt.copy(Co).add(bo).add(Sc),this._camera.position.add(Kt)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Kt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const h=this._needsUpdate;return h&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):h?(this.dispatchEvent({type:"update"}),Dn(n,this.restThreshold)&&Dn(r,this.restThreshold)&&Dn(s,this.restThreshold)&&Dn(o.x,this.restThreshold)&&Dn(o.y,this.restThreshold)&&Dn(o.z,this.restThreshold)&&Dn(a.x,this.restThreshold)&&Dn(a.y,this.restThreshold)&&Dn(a.z,this.restThreshold)&&Dn(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!h&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=h,this._needsUpdate=!1,h}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Dd(this.maxDistance),minZoom:this.minZoom,maxZoom:Dd(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Dd(this.maxPolarAngle),minAzimuthAngle:Dd(this.minAzimuthAngle),maxAzimuthAngle:Dd(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Kt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,n=!1){const r=JSON.parse(t);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=Ld(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=Ld(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=Ld(r.maxPolarAngle),this.minAzimuthAngle=Ld(r.minAzimuthAngle),this.maxAzimuthAngle=Ld(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this.verticalDragToForward=r.verticalDragToForward,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],n),Ps.setFromVector3(Kt.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ps.theta,Ps.phi,n),this.dollyTo(Ps.radius,n),this.zoomTo(r.zoom,n),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],n),this._needsUpdate=!0}connect(t){if(this._domElement){console.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",YZ),this._addAllEventListeners(t),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(n=>n.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(n=>n.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,n,r){const s=n.lengthSq();if(s===0)return t;const o=mn.copy(n).add(t),l=this._boundary.clampPoint(o,mh).sub(o),c=l.lengthSq();if(c===0)return t.add(n);if(c===s)return t;if(r===0)return t.add(n).add(l);{const u=1+r*c/n.dot(l);return t.add(mn.copy(n).multiplyScalar(u)).add(l.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(xc(this._camera)){const t=this._camera,n=t.near,r=t.getEffectiveFOV()*Id,s=Math.tan(r*.5)*n,o=s*t.aspect;this._nearPlaneCorners[0].set(-o,-s,0),this._nearPlaneCorners[1].set(o,-s,0),this._nearPlaneCorners[2].set(o,s,0),this._nearPlaneCorners[3].set(-o,s,0)}else if(sl(this._camera)){const t=this._camera,n=1/t.zoom,r=t.left*n,s=t.right*n,o=t.top*n,a=t.bottom*n;this._nearPlaneCorners[0].set(r,o,0),this._nearPlaneCorners[1].set(s,o,0),this._nearPlaneCorners[2].set(s,a,0),this._nearPlaneCorners[3].set(r,a,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||vS(this._camera,"_collisionTest"))return t;const r=this._getTargetDirection(Ud);SS.lookAt(zB,r,this._camera.up);for(let s=0;s<4;s++){const o=mn.copy(this._nearPlaneCorners[s]);o.applyMatrix4(SS);const a=mh.addVectors(this._target,o);Kv.set(a,r),Kv.far=this._spherical.radius+1;const l=Kv.intersectObjects(this.colliderMeshes);l.length!==0&&l[0].distance<t&&(t=l[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const n=this._domElement.getBoundingClientRect();return t.x=n.left,t.y=n.top,this._viewport?(t.x+=this._viewport.x,t.y+=n.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=n.width,t.height=n.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(n=>{const r=()=>{this.removeEventListener("rest",r),n()};this.addEventListener("rest",r)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,n=new Dt.Sphere){const r=n,s=r.center;gh.makeEmpty(),t.traverseVisible(a=>{a.isMesh&&gh.expandByObject(a)}),gh.getCenter(s);let o=0;return t.traverseVisible(a=>{if(!a.isMesh)return;const l=a,c=l.geometry.clone();c.applyMatrix4(l.matrixWorld);const h=c.attributes.position;for(let f=0,p=h.count;f<p;f++)Kt.fromBufferAttribute(h,f),o=Math.max(o,s.distanceToSquared(Kt))}),r.radius=Math.sqrt(o),r}};const ZZ=ee.forwardRef((i,t)=>{ee.useMemo(()=>{const C={Box3:Qi,MathUtils:{clamp:ir.clamp},Matrix4:at,Quaternion:xi,Raycaster:S_,Sphere:Oi,Spherical:wF,Vector2:De,Vector3:Y,Vector4:qt};AS.install({THREE:C}),Mm({CameraControlsImpl:AS})},[]);const{camera:n,domElement:r,makeDefault:s,onStart:o,onEnd:a,onChange:l,regress:c,...u}=i,h=jn(C=>C.camera),f=jn(C=>C.gl),p=jn(C=>C.invalidate),g=jn(C=>C.events),v=jn(C=>C.setEvents),_=jn(C=>C.set),x=jn(C=>C.get),y=jn(C=>C.performance),S=n||h,A=r||g.connected||f.domElement,M=ee.useMemo(()=>new AS(S),[S]);return Bf((C,T)=>{M.enabled&&M.update(T)},-1),ee.useEffect(()=>(M.connect(A),()=>void M.disconnect()),[A,M]),ee.useEffect(()=>{const C=I=>{p(),c&&y.regress(),l&&l(I)},T=I=>{o&&o(I)},R=I=>{a&&a(I)};return M.addEventListener("update",C),M.addEventListener("controlstart",T),M.addEventListener("controlend",R),M.addEventListener("control",C),M.addEventListener("transitionstart",C),M.addEventListener("wake",C),()=>{M.removeEventListener("update",C),M.removeEventListener("controlstart",T),M.removeEventListener("controlend",R),M.removeEventListener("control",C),M.removeEventListener("transitionstart",C),M.removeEventListener("wake",C)}},[M,o,a,p,v,c,l]),ee.useEffect(()=>{if(s){const C=x().controls;return _({controls:M}),()=>_({controls:C})}},[s,M]),ee.createElement("primitive",jo({ref:t,object:M},u))});function Lo(i){return Js(wT,i)}Lo.preload=i=>Js.preload(wT,i);Lo.clear=i=>Js.clear(wT,i);function pN(i,t){const n=ee.useRef(),[r]=ee.useState(()=>t?t instanceof tn?{current:t}:t:n),[s]=ee.useState(()=>new MF(void 0));ee.useLayoutEffect(()=>{t&&(r.current=t instanceof tn?t:t.current),s._root=r.current});const o=ee.useRef({}),a=ee.useMemo(()=>{const l={};return i.forEach(c=>Object.defineProperty(l,c.name,{enumerable:!0,get(){if(r.current)return o.current[c.name]||(o.current[c.name]=s.clipAction(c,r.current))},configurable:!0})),{ref:r,clips:i,actions:l,names:i.map(c=>c.name),mixer:s}},[i]);return Bf((l,c)=>s.update(c)),ee.useEffect(()=>{const l=r.current;return()=>{o.current={},s.stopAllAction(),Object.values(a.actions).forEach(c=>{l&&s.uncacheAction(c,l)})}},[i]),a}var mN={exports:{}},QZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qZ=QZ,$Z=qZ;function gN(){}function vN(){}vN.resetWarningCache=gN;var eQ=function(){function i(r,s,o,a,l,c){if(c!==$Z){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}i.isRequired=i;function t(){return i}var n={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:t,element:i,elementType:i,instanceOf:t,node:i,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vN,resetWarningCache:gN};return n.PropTypes=n,n};mN.exports=eQ();var tQ=mN.exports;const mi=Cy(tQ);class nQ extends Ri{constructor(t=new De){super({uniforms:{inputBuffer:new Nt(null),depthBuffer:new Nt(null),resolution:new Nt(new De),texelSize:new Nt(new De),halfTexelSize:new Nt(new De),kernel:new Nt(0),scale:new Nt(1),cameraNear:new Nt(0),cameraFar:new Nt(1),minDepthThreshold:new Nt(0),maxDepthThreshold:new Nt(1),depthScale:new Nt(0),depthToBlurRatioBias:new Nt(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${XZ>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:sr,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(t,n){this.uniforms.texelSize.value.set(t,n),this.uniforms.halfTexelSize.value.set(t,n).multiplyScalar(.5)}setResolution(t){this.uniforms.resolution.value.copy(t)}}class iQ{constructor({gl:t,resolution:n,width:r=500,height:s=500,minDepthThreshold:o=0,maxDepthThreshold:a=1,depthScale:l=0,depthToBlurRatioBias:c=.25}){this.renderToScreen=!1,this.renderTargetA=new Kn(n,n,{minFilter:ln,magFilter:ln,stencilBuffer:!1,depthBuffer:!1,type:Ji}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new nQ,this.convolutionMaterial.setTexelSize(1/r,1/s),this.convolutionMaterial.setResolution(new De(r,s)),this.scene=new Ll,this.camera=new gu,this.convolutionMaterial.uniforms.minDepthThreshold.value=o,this.convolutionMaterial.uniforms.maxDepthThreshold.value=a,this.convolutionMaterial.uniforms.depthScale.value=l,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=c,this.convolutionMaterial.defines.USE_DEPTH=l>0;const u=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),h=new Float32Array([0,0,2,0,0,2]),f=new It;f.setAttribute("position",new $t(u,3)),f.setAttribute("uv",new $t(h,2)),this.screen=new In(f,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(t,n,r){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB;let c=this.convolutionMaterial,u=c.uniforms;u.depthBuffer.value=n.depthTexture;const h=c.kernel;let f=n,p,g,v;for(g=0,v=h.length-1;g<v;++g)p=g&1?l:a,u.kernel.value=h[g],u.inputBuffer.value=f.texture,t.setRenderTarget(p),t.render(s,o),f=p;u.kernel.value=h[g],u.inputBuffer.value=f.texture,t.setRenderTarget(this.renderToScreen?null:r),t.render(s,o)}}let rQ=class extends vu{constructor(t={}){super(t),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(t)}onBeforeCompile(t){var n;(n=t.defines)!=null&&n.USE_UV||(t.defines.USE_UV=""),t.uniforms.hasBlur=this._hasBlur,t.uniforms.tDiffuse=this._tDiffuse,t.uniforms.tDepth=this._tDepth,t.uniforms.distortionMap=this._distortionMap,t.uniforms.tDiffuseBlur=this._tDiffuseBlur,t.uniforms.textureMatrix=this._textureMatrix,t.uniforms.mirror=this._mirror,t.uniforms.mixBlur=this._mixBlur,t.uniforms.mixStrength=this._blurStrength,t.uniforms.minDepthThreshold=this._minDepthThreshold,t.uniforms.maxDepthThreshold=this._maxDepthThreshold,t.uniforms.depthScale=this._depthScale,t.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,t.uniforms.distortion=this._distortion,t.uniforms.mixContrast=this._mixContrast,t.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${t.vertexShader}`,t.vertexShader=t.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),t.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${t.fragmentShader}`,t.fragmentShader=t.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(t){this._tDiffuse.value=t}get tDepth(){return this._tDepth.value}set tDepth(t){this._tDepth.value=t}get distortionMap(){return this._distortionMap.value}set distortionMap(t){this._distortionMap.value=t}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(t){this._tDiffuseBlur.value=t}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(t){this._textureMatrix.value=t}get hasBlur(){return this._hasBlur.value}set hasBlur(t){this._hasBlur.value=t}get mirror(){return this._mirror.value}set mirror(t){this._mirror.value=t}get mixBlur(){return this._mixBlur.value}set mixBlur(t){this._mixBlur.value=t}get mixStrength(){return this._blurStrength.value}set mixStrength(t){this._blurStrength.value=t}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(t){this._minDepthThreshold.value=t}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(t){this._maxDepthThreshold.value=t}get depthScale(){return this._depthScale.value}set depthScale(t){this._depthScale.value=t}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(t){this._depthToBlurRatioBias.value=t}get distortion(){return this._distortion.value}set distortion(t){this._distortion.value=t}get mixContrast(){return this._mixContrast.value}set mixContrast(t){this._mixContrast.value=t}};const sQ=ee.forwardRef(({mixBlur:i=0,mixStrength:t=1,resolution:n=256,blur:r=[0,0],minDepthThreshold:s=.9,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25,mirror:c=0,distortion:u=1,mixContrast:h=1,distortionMap:f,reflectorOffset:p=0,...g},v)=>{Mm({MeshReflectorMaterialImpl:rQ});const _=jn(({gl:k})=>k),x=jn(({camera:k})=>k),y=jn(({scene:k})=>k);r=Array.isArray(r)?r:[r,r];const S=r[0]+r[1]>0,A=ee.useRef(null),[M]=ee.useState(()=>new ma),[C]=ee.useState(()=>new Y),[T]=ee.useState(()=>new Y),[R]=ee.useState(()=>new Y),[I]=ee.useState(()=>new at),[P]=ee.useState(()=>new Y(0,0,-1)),[B]=ee.useState(()=>new qt),[O]=ee.useState(()=>new Y),[N]=ee.useState(()=>new Y),[ne]=ee.useState(()=>new qt),[z]=ee.useState(()=>new at),[j]=ee.useState(()=>new Jn),q=ee.useCallback(()=>{var k;const Z=A.current.parent||((k=A.current)==null?void 0:k.__r3f.parent);if(!Z||(T.setFromMatrixPosition(Z.matrixWorld),R.setFromMatrixPosition(x.matrixWorld),I.extractRotation(Z.matrixWorld),C.set(0,0,1),C.applyMatrix4(I),T.addScaledVector(C,p),O.subVectors(T,R),O.dot(C)>0))return;O.reflect(C).negate(),O.add(T),I.extractRotation(x.matrixWorld),P.set(0,0,-1),P.applyMatrix4(I),P.add(R),N.subVectors(T,P),N.reflect(C).negate(),N.add(T),j.position.copy(O),j.up.set(0,1,0),j.up.applyMatrix4(I),j.up.reflect(C),j.lookAt(N),j.far=x.far,j.updateMatrixWorld(),j.projectionMatrix.copy(x.projectionMatrix),z.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),z.multiply(j.projectionMatrix),z.multiply(j.matrixWorldInverse),z.multiply(Z.matrixWorld),M.setFromNormalAndCoplanarPoint(C,T),M.applyMatrix4(j.matrixWorldInverse),B.set(M.normal.x,M.normal.y,M.normal.z,M.constant);const Q=j.projectionMatrix;ne.x=(Math.sign(B.x)+Q.elements[8])/Q.elements[0],ne.y=(Math.sign(B.y)+Q.elements[9])/Q.elements[5],ne.z=-1,ne.w=(1+Q.elements[10])/Q.elements[14],B.multiplyScalar(2/B.dot(ne)),Q.elements[2]=B.x,Q.elements[6]=B.y,Q.elements[10]=B.z+1,Q.elements[14]=B.w},[x,p]),[he,H,X,K]=ee.useMemo(()=>{const k={minFilter:ln,magFilter:ln,type:Ji},Z=new Kn(n,n,k);Z.depthBuffer=!0,Z.depthTexture=new ym(n,n),Z.depthTexture.format=Ea,Z.depthTexture.type=dm;const Q=new Kn(n,n,k),se=new iQ({gl:_,resolution:n,width:r[0],height:r[1],minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l}),le={mirror:c,textureMatrix:z,mixBlur:i,tDiffuse:Z.texture,tDepth:Z.depthTexture,tDiffuseBlur:Q.texture,hasBlur:S,mixStrength:t,minDepthThreshold:s,maxDepthThreshold:o,depthScale:a,depthToBlurRatioBias:l,distortion:u,distortionMap:f,mixContrast:h,"defines-USE_BLUR":S?"":void 0,"defines-USE_DEPTH":a>0?"":void 0,"defines-USE_DISTORTION":f?"":void 0};return[Z,Q,se,le]},[_,r,z,n,c,S,i,t,s,o,a,l,u,f,h]);return Bf(()=>{var k;const Z=A.current.parent||((k=A.current)==null?void 0:k.__r3f.parent);if(!Z)return;Z.visible=!1;const Q=_.xr.enabled,se=_.shadowMap.autoUpdate;q(),_.xr.enabled=!1,_.shadowMap.autoUpdate=!1,_.setRenderTarget(he),_.state.buffers.depth.setMask(!0),_.autoClear||_.clear(),_.render(y,j),S&&X.render(_,he,H),_.xr.enabled=Q,_.shadowMap.autoUpdate=se,Z.visible=!0,_.setRenderTarget(null)}),ee.createElement("meshReflectorMaterialImpl",jo({attach:"material",key:"key"+K["defines-USE_BLUR"]+K["defines-USE_DEPTH"]+K["defines-USE_DISTORTION"],ref:qX([A,v])},K,g))}),ES={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},oQ="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",XB=i=>Array.isArray(i);function yN({files:i=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:n=void 0,encoding:r=void 0,extensions:s}={}){var o;let a=null,l=!1,c;if(n){if(!(n in ES))throw new Error("Preset must be one of: "+Object.keys(ES).join(", "));i=ES[n],t=oQ}if(l=XB(i),c=XB(i)?"cube":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":(o=i.split(".").pop())==null||(o=o.split("?"))==null||(o=o.shift())==null?void 0:o.toLowerCase(),a=l?pF:c==="hdr"?YK:c==="exr"?JK:null,!a)throw new Error("useEnvironment: Unrecognized file extension: "+i);const u=Js(a,l?[i]:i,g=>{g.setPath==null||g.setPath(t),s&&s(g)}),h=l?u[0]:u;h.mapping=l?Go:ru;const f=3001,p=3e3;return"colorSpace"in h?h.colorSpace=r??l?"srgb":"srgb-linear":h.encoding=r??l?f:p,h}const aQ=i=>i.current&&i.current.isScene,lQ=i=>aQ(i)?i.current:i;function BT(i,t,n,r,s=0){const o=lQ(t||n),a=o.background,l=o.environment,c=o.backgroundBlurriness||0;return i!=="only"&&(o.environment=r),i&&(o.background=r),i&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=s),()=>{i!=="only"&&(o.environment=l),i&&(o.background=a),i&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=c)}}function IT({scene:i,background:t=!1,blur:n,map:r}){const s=jn(o=>o.scene);return ee.useLayoutEffect(()=>{if(r)return BT(t,i,s,r,n)},[s,i,r,t,n]),null}function _N({background:i=!1,scene:t,blur:n,...r}){const s=yN(r),o=jn(a=>a.scene);return ee.useLayoutEffect(()=>BT(i,t,o,s,n),[s,i,t,o,n]),null}function cQ({children:i,near:t=1,far:n=1e3,resolution:r=256,frames:s=1,map:o,background:a=!1,blur:l,scene:c,files:u,path:h,preset:f=void 0,extensions:p}){const g=jn(A=>A.gl),v=jn(A=>A.scene),_=ee.useRef(null),[x]=ee.useState(()=>new Ll),y=ee.useMemo(()=>{const A=new Cw(r);return A.texture.type=Ji,A},[r]);ee.useLayoutEffect(()=>(s===1&&_.current.update(g,x),BT(a,c,v,y.texture,l)),[i,x,y.texture,c,v,a,s,g]);let S=1;return Bf(()=>{(s===1/0||S<s)&&(_.current.update(g,x),S++)}),ee.createElement(ee.Fragment,null,SX(ee.createElement(ee.Fragment,null,i,ee.createElement("cubeCamera",{ref:_,args:[t,n,y]}),u||f?ee.createElement(_N,{background:!0,files:u,preset:f,path:h,extensions:p}):o?ee.createElement(IT,{background:!0,map:o,extensions:p}):null),x))}function uQ(i){var t,n,r,s;const o=yN(i),a=i.map||o;ee.useMemo(()=>Mm({GroundProjectedEnvImpl:XJ}),[]);const l=ee.useMemo(()=>[a],[a]),c=(t=i.ground)==null?void 0:t.height,u=(n=i.ground)==null?void 0:n.radius,h=(r=(s=i.ground)==null?void 0:s.scale)!==null&&r!==void 0?r:1e3;return ee.createElement(ee.Fragment,null,ee.createElement(IT,jo({},i,{map:a})),ee.createElement("groundProjectedEnvImpl",{args:l,scale:h,height:c,radius:u}))}function hQ(i){return i.ground?ee.createElement(uQ,i):i.map?ee.createElement(IT,i):i.children?ee.createElement(cQ,i):ee.createElement(_N,i)}function fQ(i){const{animation:t}=i,n=ee.useRef(),{nodes:r,materials:s}=Au("models/avatar.glb"),{animations:o}=Lo("animation/Typing.fbx"),{animations:a}=Lo("animation/Running.fbx"),{animations:l}=Lo("animation/Standing.fbx"),{animations:c}=Lo("animation/Falling.fbx");o[0].name="Typing",l[0].name="Standing",a[0].name="Running",c[0].name="Falling";const{actions:u}=pN([o[0],l[0],a[0],c[0]],n);return ee.useEffect(()=>(u[t].reset().play(),()=>{u[t].reset()}),[u]),Me.jsxs("group",{...i,ref:n,dispose:null,children:[Me.jsx("primitive",{object:r.Hips}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Body.geometry,material:s["Wolf3D_Body.003"],skeleton:r.Wolf3D_Body.skeleton}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Hair.geometry,material:s["Wolf3D_Hair.003"],skeleton:r.Wolf3D_Hair.skeleton}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Outfit_Bottom.geometry,material:s["Wolf3D_Outfit_Bottom.003"],skeleton:r.Wolf3D_Outfit_Bottom.skeleton}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Outfit_Footwear.geometry,material:s["Wolf3D_Outfit_Footwear.003"],skeleton:r.Wolf3D_Outfit_Footwear.skeleton}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Outfit_Top.geometry,material:s["Wolf3D_Outfit_Top.003"],skeleton:r.Wolf3D_Outfit_Top.skeleton}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.EyeLeft.geometry,material:s["Wolf3D_Eye.003"],skeleton:r.EyeLeft.skeleton,morphTargetDictionary:r.EyeLeft.morphTargetDictionary,morphTargetInfluences:r.EyeLeft.morphTargetInfluences}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.EyeRight.geometry,material:s["Wolf3D_Eye.003"],skeleton:r.EyeRight.skeleton,morphTargetDictionary:r.EyeRight.morphTargetDictionary,morphTargetInfluences:r.EyeRight.morphTargetInfluences}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Beard.geometry,material:s["Wolf3D_Beard.001"],skeleton:r.Wolf3D_Beard.skeleton,morphTargetDictionary:r.Wolf3D_Beard.morphTargetDictionary,morphTargetInfluences:r.Wolf3D_Beard.morphTargetInfluences}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Head.geometry,material:s["Wolf3D_Skin.003"],skeleton:r.Wolf3D_Head.skeleton,morphTargetDictionary:r.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:r.Wolf3D_Head.morphTargetInfluences}),Me.jsx("skinnedMesh",{frustumCulled:!1,geometry:r.Wolf3D_Teeth.geometry,material:s["Wolf3D_Teeth.003"],skeleton:r.Wolf3D_Teeth.skeleton,morphTargetDictionary:r.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:r.Wolf3D_Teeth.morphTargetInfluences})]})}Au.preload("models/avatar.glb");Lo.preload("animations/Typing.fbx");Lo.preload("animations/Standing.fbx");Lo.preload("animations/Falling.fbx");Lo.preload("animations/Running.fbx");const vy=ee.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"}),B_=ee.createContext({}),DT=ee.createContext(null),I_=typeof document<"u",dQ=I_?ee.useLayoutEffect:ee.useEffect,xN=ee.createContext({strict:!1}),LT=i=>i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),pQ="framerAppearId",SN="data-"+LT(pQ);function mQ(i,t,n,r){const{visualElement:s}=ee.useContext(B_),o=ee.useContext(xN),a=ee.useContext(DT),l=ee.useContext(vy).reducedMotion,c=ee.useRef();r=r||o.renderer,!c.current&&r&&(c.current=r(i,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;ee.useInsertionEffect(()=>{u&&u.update(n,a)});const h=ee.useRef(!!(n[SN]&&!window.HandoffComplete));return dQ(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),ee.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Nh(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function gQ(i,t,n){return ee.useCallback(r=>{r&&i.mount&&i.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Nh(n)&&(n.current=r))},[t])}function rm(i){return typeof i=="string"||Array.isArray(i)}function D_(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}const UT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],FT=["initial",...UT];function L_(i){return D_(i.animate)||FT.some(t=>rm(i[t]))}function AN(i){return!!(L_(i)||i.variants)}function vQ(i,t){if(L_(i)){const{initial:n,animate:r}=i;return{initial:n===!1||rm(n)?n:void 0,animate:rm(r)?r:void 0}}return i.inherit!==!1?t:{}}function yQ(i){const{initial:t,animate:n}=vQ(i,ee.useContext(B_));return ee.useMemo(()=>({initial:t,animate:n}),[jB(t),jB(n)])}function jB(i){return Array.isArray(i)?i.join(" "):i}const YB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sm={};for(const i in YB)sm[i]={isEnabled:t=>YB[i].some(n=>!!t[n])};function _Q(i){for(const t in i)sm[t]={...sm[t],...i[t]}}const EN=ee.createContext({}),MN=ee.createContext({}),xQ=Symbol.for("motionComponentSymbol");function wN({preloadedFeatures:i,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){i&&_Q(i);function o(l,c){let u;const h={...ee.useContext(vy),...l,layoutId:SQ(l)},{isStatic:f}=h,p=yQ(l),g=r(l,f);if(!f&&I_){p.visualElement=mQ(s,g,h,t);const v=ee.useContext(MN),_=ee.useContext(xN).strict;p.visualElement&&(u=p.visualElement.loadFeatures(h,_,i,v))}return ee.createElement(B_.Provider,{value:p},u&&p.visualElement?ee.createElement(u,{visualElement:p.visualElement,...h}):null,n(s,l,gQ(g,p.visualElement,c),g,f,p.visualElement))}const a=ee.forwardRef(o);return a[xQ]=s,a}function SQ({layoutId:i}){const t=ee.useContext(EN).id;return t&&i!==void 0?t+"-"+i:i}function AQ(i){function t(r,s={}){return wN(i(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const EQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OT(i){return typeof i!="string"||i.includes("-")?!1:!!(EQ.indexOf(i)>-1||/[A-Z]/.test(i))}const yy={};function MQ(i){Object.assign(yy,i)}const Dm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eu=new Set(Dm);function TN(i,{layout:t,layoutId:n}){return Eu.has(i)||i.startsWith("origin")||(t||n!==void 0)&&(!!yy[i]||i==="opacity")}const bi=i=>!!(i&&i.getVelocity),wQ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TQ=Dm.length;function CQ(i,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let o="";for(let a=0;a<TQ;a++){const l=Dm[a];if(i[l]!==void 0){const c=wQ[l]||l;o+=`${c}(${i[l]}) `}}return t&&!i.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(i,r?"":o):n&&r&&(o="none"),o}const CN=i=>t=>typeof t=="string"&&t.startsWith(i),bN=CN("--"),$E=CN("var(--"),bQ=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,RQ=(i,t)=>t&&typeof i=="number"?t.transform(i):i,Fl=(i,t,n)=>Math.min(Math.max(n,i),t),Mu={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},mp={...Mu,transform:i=>Fl(0,1,i)},Zv={...Mu,default:1},gp=i=>Math.round(i*1e5)/1e5,U_=/(-)?([\d]*\.?[\d])+/g,RN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,PQ=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Lm(i){return typeof i=="string"}const Um=i=>({test:t=>Lm(t)&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),ol=Um("deg"),zo=Um("%"),Lt=Um("px"),BQ=Um("vh"),IQ=Um("vw"),JB={...zo,parse:i=>zo.parse(i)/100,transform:i=>zo.transform(i*100)},KB={...Mu,transform:Math.round},PN={borderWidth:Lt,borderTopWidth:Lt,borderRightWidth:Lt,borderBottomWidth:Lt,borderLeftWidth:Lt,borderRadius:Lt,radius:Lt,borderTopLeftRadius:Lt,borderTopRightRadius:Lt,borderBottomRightRadius:Lt,borderBottomLeftRadius:Lt,width:Lt,maxWidth:Lt,height:Lt,maxHeight:Lt,size:Lt,top:Lt,right:Lt,bottom:Lt,left:Lt,padding:Lt,paddingTop:Lt,paddingRight:Lt,paddingBottom:Lt,paddingLeft:Lt,margin:Lt,marginTop:Lt,marginRight:Lt,marginBottom:Lt,marginLeft:Lt,rotate:ol,rotateX:ol,rotateY:ol,rotateZ:ol,scale:Zv,scaleX:Zv,scaleY:Zv,scaleZ:Zv,skew:ol,skewX:ol,skewY:ol,distance:Lt,translateX:Lt,translateY:Lt,translateZ:Lt,x:Lt,y:Lt,z:Lt,perspective:Lt,transformPerspective:Lt,opacity:mp,originX:JB,originY:JB,originZ:Lt,zIndex:KB,fillOpacity:mp,strokeOpacity:mp,numOctaves:KB};function NT(i,t,n,r){const{style:s,vars:o,transform:a,transformOrigin:l}=i;let c=!1,u=!1,h=!0;for(const f in t){const p=t[f];if(bN(f)){o[f]=p;continue}const g=PN[f],v=RQ(p,g);if(Eu.has(f)){if(c=!0,a[f]=v,!h)continue;p!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(u=!0,l[f]=v):s[f]=v}if(t.transform||(c||r?s.transform=CQ(i.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:f="50%",originY:p="50%",originZ:g=0}=l;s.transformOrigin=`${f} ${p} ${g}`}}const kT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function BN(i,t,n){for(const r in t)!bi(t[r])&&!TN(r,n)&&(i[r]=t[r])}function DQ({transformTemplate:i},t,n){return ee.useMemo(()=>{const r=kT();return NT(r,t,{enableHardwareAcceleration:!n},i),Object.assign({},r.vars,r.style)},[t])}function LQ(i,t,n){const r=i.style||{},s={};return BN(s,r,i),Object.assign(s,DQ(i,t,n)),i.transformValues?i.transformValues(s):s}function UQ(i,t,n){const r={},s=LQ(i,t,n);return i.drag&&i.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(r.tabIndex=0),r.style=s,r}const FQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _y(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||FQ.has(i)}let IN=i=>!_y(i);function DN(i){i&&(IN=t=>t.startsWith("on")?!_y(t):i(t))}try{DN(require("@emotion/is-prop-valid").default)}catch{}function LN(i,t,n){const r={};for(const s in i)s==="values"&&typeof i.values=="object"||(IN(s)||n===!0&&_y(s)||!t&&!_y(s)||i.draggable&&s.startsWith("onDrag"))&&(r[s]=i[s]);return r}function ZB(i,t,n){return typeof i=="string"?i:Lt.transform(t+n*i)}function OQ(i,t,n){const r=ZB(t,i.x,i.width),s=ZB(n,i.y,i.height);return`${r} ${s}`}const NQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},kQ={offset:"strokeDashoffset",array:"strokeDasharray"};function zQ(i,t,n=1,r=0,s=!0){i.pathLength=1;const o=s?NQ:kQ;i[o.offset]=Lt.transform(-r);const a=Lt.transform(t),l=Lt.transform(n);i[o.array]=`${a} ${l}`}function zT(i,{attrX:t,attrY:n,attrScale:r,originX:s,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},h,f,p){if(NT(i,u,h,p),f){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:g,style:v,dimensions:_}=i;g.transform&&(_&&(v.transform=g.transform),delete g.transform),_&&(s!==void 0||o!==void 0||v.transform)&&(v.transformOrigin=OQ(_,s!==void 0?s:.5,o!==void 0?o:.5)),t!==void 0&&(g.x=t),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),a!==void 0&&zQ(g,a,l,c,!1)}const UN=()=>({...kT(),attrs:{}}),GT=i=>typeof i=="string"&&i.toLowerCase()==="svg";function GQ(i,t,n,r){const s=ee.useMemo(()=>{const o=UN();return zT(o,t,{enableHardwareAcceleration:!1},GT(r),i.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(i.style){const o={};BN(o,i.style,i),s.style={...o,...s.style}}return s}function HQ(i=!1){return(n,r,s,{latestValues:o},a)=>{const c=(OT(n)?GQ:UQ)(r,o,a,n),h={...LN(r,typeof n=="string",i),...c,ref:s},{children:f}=r,p=ee.useMemo(()=>bi(f)?f.get():f,[f]);return ee.createElement(n,{...h,children:p})}}function FN(i,{style:t,vars:n},r,s){Object.assign(i.style,t,s&&s.getProjectionStyles(r));for(const o in n)i.style.setProperty(o,n[o])}const ON=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NN(i,t,n,r){FN(i,t,void 0,r);for(const s in t.attrs)i.setAttribute(ON.has(s)?s:LT(s),t.attrs[s])}function HT(i,t){const{style:n}=i,r={};for(const s in n)(bi(n[s])||t.style&&bi(t.style[s])||TN(s,i))&&(r[s]=n[s]);return r}function kN(i,t){const n=HT(i,t);for(const r in i)if(bi(i[r])||bi(t[r])){const s=Dm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=i[r]}return n}function VT(i,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:i.custom,r,s)),typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:i.custom,r,s)),t}function zN(i){const t=ee.useRef(null);return t.current===null&&(t.current=i()),t.current}const xy=i=>Array.isArray(i),VQ=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),WQ=i=>xy(i)?i[i.length-1]||0:i;function vp(i){const t=bi(i)?i.get():i;return VQ(t)?t.toValue():t}function XQ({scrapeMotionValuesFromProps:i,createRenderState:t,onMount:n},r,s,o){const a={latestValues:jQ(r,s,o,i),renderState:t()};return n&&(a.mount=l=>n(r,l,a)),a}const WT=i=>(t,n)=>{const r=ee.useContext(B_),s=ee.useContext(DT),o=()=>XQ(i,t,r,s);return n?o():zN(o)};function jQ(i,t,n,r){const s={},o=r(i,{});for(const p in o)s[p]=vp(o[p]);let{initial:a,animate:l}=i;const c=L_(i),u=AN(i);t&&u&&!c&&i.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const f=h?l:a;return f&&typeof f!="boolean"&&!D_(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const v=VT(i,g);if(!v)return;const{transitionEnd:_,transition:x,...y}=v;for(const S in y){let A=y[S];if(Array.isArray(A)){const M=h?A.length-1:0;A=A[M]}A!==null&&(s[S]=A)}for(const S in _)s[S]=_[S]}),s}const _i=i=>i;class QB{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function YQ(i){let t=new QB,n=new QB,r=0,s=!1,o=!1;const a=new WeakSet,l={schedule:(c,u=!1,h=!1)=>{const f=h&&s,p=f?t:n;return u&&a.add(c),p.add(c)&&f&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(s){o=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),a.has(h)&&(l.schedule(h),i())}s=!1,o&&(o=!1,l.process(c))}};return l}const Qv=["prepare","read","update","preRender","render","postRender"],JQ=40;function KQ(i,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=Qv.reduce((f,p)=>(f[p]=YQ(()=>n=!0),f),{}),a=f=>o[f].process(s),l=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,JQ),1),s.timestamp=f,s.isProcessing=!0,Qv.forEach(a),s.isProcessing=!1,n&&t&&(r=!1,i(l))},c=()=>{n=!0,r=!0,s.isProcessing||i(l)};return{schedule:Qv.reduce((f,p)=>{const g=o[p];return f[p]=(v,_=!1,x=!1)=>(n||c(),g.schedule(v,_,x)),f},{}),cancel:f=>Qv.forEach(p=>o[p].cancel(f)),state:s,steps:o}}const{schedule:Wn,cancel:Da,state:yr,steps:MS}=KQ(typeof requestAnimationFrame<"u"?requestAnimationFrame:_i,!0),ZQ={useVisualState:WT({scrapeMotionValuesFromProps:kN,createRenderState:UN,onMount:(i,t,{renderState:n,latestValues:r})=>{Wn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Wn.render(()=>{zT(n,r,{enableHardwareAcceleration:!1},GT(t.tagName),i.transformTemplate),NN(t,n)})}})},QQ={useVisualState:WT({scrapeMotionValuesFromProps:HT,createRenderState:kT})};function qQ(i,{forwardMotionProps:t=!1},n,r){return{...OT(i)?ZQ:QQ,preloadedFeatures:n,useRender:HQ(t),createVisualElement:r,Component:i}}function xa(i,t,n,r={passive:!0}){return i.addEventListener(t,n,r),()=>i.removeEventListener(t,n)}const GN=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1;function F_(i,t="page"){return{point:{x:i[t+"X"],y:i[t+"Y"]}}}const HN=i=>t=>GN(t)&&i(t,F_(t));function go(i,t,n,r){return xa(i,t,HN(n),r)}const $Q=(i,t)=>n=>t(i(n)),Ma=(...i)=>i.reduce($Q);function VN(i){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=i,n):!1}}const qB=VN("dragHorizontal"),$B=VN("dragVertical");function WN(i){let t=!1;if(i==="y")t=$B();else if(i==="x")t=qB();else{const n=qB(),r=$B();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function XT(){const i=WN(!0);return i?(i(),!1):!0}class jl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function eI(i,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(o,a)=>{if(o.pointerType==="touch"||XT())return;const l=i.getProps();i.animationState&&l.whileHover&&i.animationState.setActive("whileHover",t),l[r]&&Wn.update(()=>l[r](o,a))};return go(i.current,n,s,{passive:!i.getProps()[r]})}class eq extends jl{mount(){this.unmount=Ma(eI(this.node,!0),eI(this.node,!1))}unmount(){}}class tq extends jl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ma(xa(this.node.current,"focus",()=>this.onFocus()),xa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const XN=(i,t)=>t?i===t?!0:XN(i,t.parentElement):!1;function wS(i,t){if(!t)return;const n=new PointerEvent("pointer"+i);t(n,F_(n))}class nq extends jl{constructor(){super(...arguments),this.removeStartListeners=_i,this.removeEndListeners=_i,this.removeAccessibleListeners=_i,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=go(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Wn.update(()=>{!f&&!XN(this.node.current,l.target)?h&&h(l,c):u&&u(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),a=go(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ma(o,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||wS("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&Wn.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=xa(this.node.current,"keyup",a),wS("down",(l,c)=>{this.startPress(l,c)})},n=xa(this.node.current,"keydown",t),r=()=>{this.isPressing&&wS("cancel",(o,a)=>this.cancelPress(o,a))},s=xa(this.node.current,"blur",r);this.removeAccessibleListeners=Ma(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Wn.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!XT()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Wn.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=go(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=xa(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ma(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const eM=new WeakMap,TS=new WeakMap,iq=i=>{const t=eM.get(i.target);t&&t(i)},rq=i=>{i.forEach(iq)};function sq({root:i,...t}){const n=i||document;TS.has(n)||TS.set(n,{});const r=TS.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(rq,{root:i,...t})),r[s]}function oq(i,t,n){const r=sq(t);return eM.set(i,n),r.observe(i),()=>{eM.delete(i),r.unobserve(i)}}const aq={some:0,all:1};class lq extends jl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:aq[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=u?h:f;p&&p(c)};return oq(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(cq(t,n))&&this.startObserver()}unmount(){}}function cq({viewport:i={}},{viewport:t={}}={}){return n=>i[n]!==t[n]}const uq={inView:{Feature:lq},tap:{Feature:nq},focus:{Feature:tq},hover:{Feature:eq}};function jN(i,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==i.length)return!1;for(let r=0;r<n;r++)if(t[r]!==i[r])return!1;return!0}function hq(i){const t={};return i.values.forEach((n,r)=>t[r]=n.get()),t}function fq(i){const t={};return i.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function O_(i,t,n){const r=i.getProps();return VT(r,t,n!==void 0?n:r.custom,hq(i),fq(i))}let jT=_i;const qc=i=>i*1e3,wa=i=>i/1e3,dq={current:!1},YN=i=>Array.isArray(i)&&typeof i[0]=="number";function JN(i){return!!(!i||typeof i=="string"&&KN[i]||YN(i)||Array.isArray(i)&&i.every(JN))}const jd=([i,t,n,r])=>`cubic-bezier(${i}, ${t}, ${n}, ${r})`,KN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jd([0,.65,.55,1]),circOut:jd([.55,0,1,.45]),backIn:jd([.31,.01,.66,-.59]),backOut:jd([.33,1.53,.69,.99])};function ZN(i){if(i)return YN(i)?jd(i):Array.isArray(i)?i.map(ZN):KN[i]}function pq(i,t,n,{delay:r=0,duration:s,repeat:o=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=ZN(l);return Array.isArray(h)&&(u.easing=h),i.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function mq(i,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[r]}const QN=(i,t,n)=>(((1-3*n+3*t)*i+(3*n-6*t))*i+3*t)*i,gq=1e-7,vq=12;function yq(i,t,n,r,s){let o,a,l=0;do a=t+(n-t)/2,o=QN(a,r,s)-i,o>0?n=a:t=a;while(Math.abs(o)>gq&&++l<vq);return a}function Fm(i,t,n,r){if(i===t&&n===r)return _i;const s=o=>yq(o,0,1,i,n);return o=>o===0||o===1?o:QN(s(o),t,r)}const _q=Fm(.42,0,1,1),xq=Fm(0,0,.58,1),qN=Fm(.42,0,.58,1),Sq=i=>Array.isArray(i)&&typeof i[0]!="number",$N=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,ek=i=>t=>1-i(1-t),YT=i=>1-Math.sin(Math.acos(i)),tk=ek(YT),Aq=$N(YT),nk=Fm(.33,1.53,.69,.99),JT=ek(nk),Eq=$N(JT),Mq=i=>(i*=2)<1?.5*JT(i):.5*(2-Math.pow(2,-10*(i-1))),wq={linear:_i,easeIn:_q,easeInOut:qN,easeOut:xq,circIn:YT,circInOut:Aq,circOut:tk,backIn:JT,backInOut:Eq,backOut:nk,anticipate:Mq},tI=i=>{if(Array.isArray(i)){jT(i.length===4);const[t,n,r,s]=i;return Fm(t,n,r,s)}else if(typeof i=="string")return wq[i];return i},KT=(i,t)=>n=>!!(Lm(n)&&PQ.test(n)&&n.startsWith(i)||t&&Object.prototype.hasOwnProperty.call(n,t)),ik=(i,t,n)=>r=>{if(!Lm(r))return r;const[s,o,a,l]=r.match(U_);return{[i]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Tq=i=>Fl(0,255,i),CS={...Mu,transform:i=>Math.round(Tq(i))},Vc={test:KT("rgb","red"),parse:ik("red","green","blue"),transform:({red:i,green:t,blue:n,alpha:r=1})=>"rgba("+CS.transform(i)+", "+CS.transform(t)+", "+CS.transform(n)+", "+gp(mp.transform(r))+")"};function Cq(i){let t="",n="",r="",s="";return i.length>5?(t=i.substring(1,3),n=i.substring(3,5),r=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),n=i.substring(2,3),r=i.substring(3,4),s=i.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const tM={test:KT("#"),parse:Cq,transform:Vc.transform},kh={test:KT("hsl","hue"),parse:ik("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(i)+", "+zo.transform(gp(t))+", "+zo.transform(gp(n))+", "+gp(mp.transform(r))+")"},Dr={test:i=>Vc.test(i)||tM.test(i)||kh.test(i),parse:i=>Vc.test(i)?Vc.parse(i):kh.test(i)?kh.parse(i):tM.parse(i),transform:i=>Lm(i)?i:i.hasOwnProperty("red")?Vc.transform(i):kh.transform(i)},ti=(i,t,n)=>-n*i+n*t+i;function bS(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(t-i)*6*n:n<1/2?t:n<2/3?i+(t-i)*(2/3-n)*6:i}function bq({hue:i,saturation:t,lightness:n,alpha:r}){i/=360,t/=100,n/=100;let s=0,o=0,a=0;if(!t)s=o=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=bS(c,l,i+1/3),o=bS(c,l,i),a=bS(c,l,i-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}const RS=(i,t,n)=>{const r=i*i;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Rq=[tM,Vc,kh],Pq=i=>Rq.find(t=>t.test(i));function nI(i){const t=Pq(i);let n=t.parse(i);return t===kh&&(n=bq(n)),n}const rk=(i,t)=>{const n=nI(i),r=nI(t),s={...n};return o=>(s.red=RS(n.red,r.red,o),s.green=RS(n.green,r.green,o),s.blue=RS(n.blue,r.blue,o),s.alpha=ti(n.alpha,r.alpha,o),Vc.transform(s))};function Bq(i){var t,n;return isNaN(i)&&Lm(i)&&(((t=i.match(U_))===null||t===void 0?void 0:t.length)||0)+(((n=i.match(RN))===null||n===void 0?void 0:n.length)||0)>0}const sk={regex:bQ,countKey:"Vars",token:"${v}",parse:_i},ok={regex:RN,countKey:"Colors",token:"${c}",parse:Dr.parse},ak={regex:U_,countKey:"Numbers",token:"${n}",parse:Mu.parse};function PS(i,{regex:t,countKey:n,token:r,parse:s}){const o=i.tokenised.match(t);o&&(i["num"+n]=o.length,i.tokenised=i.tokenised.replace(t,r),i.values.push(...o.map(s)))}function Sy(i){const t=i.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&PS(n,sk),PS(n,ok),PS(n,ak),n}function lk(i){return Sy(i).values}function ck(i){const{values:t,numColors:n,numVars:r,tokenised:s}=Sy(i),o=t.length;return a=>{let l=s;for(let c=0;c<o;c++)c<r?l=l.replace(sk.token,a[c]):c<r+n?l=l.replace(ok.token,Dr.transform(a[c])):l=l.replace(ak.token,gp(a[c]));return l}}const Iq=i=>typeof i=="number"?0:i;function Dq(i){const t=lk(i);return ck(i)(t.map(Iq))}const Ol={test:Bq,parse:lk,createTransformer:ck,getAnimatableNone:Dq},uk=(i,t)=>n=>`${n>0?t:i}`;function hk(i,t){return typeof i=="number"?n=>ti(i,t,n):Dr.test(i)?rk(i,t):i.startsWith("var(")?uk(i,t):dk(i,t)}const fk=(i,t)=>{const n=[...i],r=n.length,s=i.map((o,a)=>hk(o,t[a]));return o=>{for(let a=0;a<r;a++)n[a]=s[a](o);return n}},Lq=(i,t)=>{const n={...i,...t},r={};for(const s in n)i[s]!==void 0&&t[s]!==void 0&&(r[s]=hk(i[s],t[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}},dk=(i,t)=>{const n=Ol.createTransformer(t),r=Sy(i),s=Sy(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Ma(fk(r.values,s.values),n):uk(i,t)},om=(i,t,n)=>{const r=t-i;return r===0?1:(n-i)/r},iI=(i,t)=>n=>ti(i,t,n);function Uq(i){return typeof i=="number"?iI:typeof i=="string"?Dr.test(i)?rk:dk:Array.isArray(i)?fk:typeof i=="object"?Lq:iI}function Fq(i,t,n){const r=[],s=n||Uq(i[0]),o=i.length-1;for(let a=0;a<o;a++){let l=s(i[a],i[a+1]);if(t){const c=Array.isArray(t)?t[a]||_i:t;l=Ma(c,l)}r.push(l)}return r}function pk(i,t,{clamp:n=!0,ease:r,mixer:s}={}){const o=i.length;if(jT(o===t.length),o===1)return()=>t[0];i[0]>i[o-1]&&(i=[...i].reverse(),t=[...t].reverse());const a=Fq(t,r,s),l=a.length,c=u=>{let h=0;if(l>1)for(;h<i.length-2&&!(u<i[h+1]);h++);const f=om(i[h],i[h+1],u);return a[h](f)};return n?u=>c(Fl(i[0],i[o-1],u)):c}function Oq(i,t){const n=i[i.length-1];for(let r=1;r<=t;r++){const s=om(0,t,r);i.push(ti(n,1,s))}}function Nq(i){const t=[0];return Oq(t,i.length-1),t}function kq(i,t){return i.map(n=>n*t)}function zq(i,t){return i.map(()=>t||qN).splice(0,i.length-1)}function Ay({duration:i=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Sq(r)?r.map(tI):tI(r),o={done:!1,value:t[0]},a=kq(n&&n.length===t.length?n:Nq(t),i),l=pk(a,t,{ease:Array.isArray(s)?s:zq(t,s)});return{calculatedDuration:i,next:c=>(o.value=l(c),o.done=c>=i,o)}}function mk(i,t){return t?i*(1e3/t):0}const Gq=5;function gk(i,t,n){const r=Math.max(t-Gq,0);return mk(n-i(r),t-r)}const BS=.001,Hq=.01,Vq=10,Wq=.05,Xq=1;function jq({duration:i=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,o,a=1-t;a=Fl(Wq,Xq,a),i=Fl(Hq,Vq,wa(i)),a<1?(s=u=>{const h=u*a,f=h*i,p=h-n,g=nM(u,a),v=Math.exp(-f);return BS-p/g*v},o=u=>{const f=u*a*i,p=f*n+n,g=Math.pow(a,2)*Math.pow(u,2)*i,v=Math.exp(-f),_=nM(Math.pow(u,2),a);return(-s(u)+BS>0?-1:1)*((p-g)*v)/_}):(s=u=>{const h=Math.exp(-u*i),f=(u-n)*i+1;return-BS+h*f},o=u=>{const h=Math.exp(-u*i),f=(n-u)*(i*i);return h*f});const l=5/i,c=Jq(s,o,l);if(i=qc(i),isNaN(c))return{stiffness:100,damping:10,duration:i};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:i}}}const Yq=12;function Jq(i,t,n){let r=n;for(let s=1;s<Yq;s++)r=r-i(r)/t(r);return r}function nM(i,t){return i*Math.sqrt(1-t*t)}const Kq=["duration","bounce"],Zq=["stiffness","damping","mass"];function rI(i,t){return t.some(n=>i[n]!==void 0)}function Qq(i){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...i};if(!rI(i,Zq)&&rI(i,Kq)){const n=jq(i);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function vk({keyframes:i,restDelta:t,restSpeed:n,...r}){const s=i[0],o=i[i.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=Qq({...r,velocity:-wa(r.velocity||0)}),g=f||0,v=c/(2*Math.sqrt(l*u)),_=o-s,x=wa(Math.sqrt(l/u)),y=Math.abs(_)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let S;if(v<1){const A=nM(x,v);S=M=>{const C=Math.exp(-v*x*M);return o-C*((g+v*x*_)/A*Math.sin(A*M)+_*Math.cos(A*M))}}else if(v===1)S=A=>o-Math.exp(-x*A)*(_+(g+x*_)*A);else{const A=x*Math.sqrt(v*v-1);S=M=>{const C=Math.exp(-v*x*M),T=Math.min(A*M,300);return o-C*((g+v*x*_)*Math.sinh(T)+A*_*Math.cosh(T))/A}}return{calculatedDuration:p&&h||null,next:A=>{const M=S(A);if(p)a.done=A>=h;else{let C=g;A!==0&&(v<1?C=gk(S,A,M):C=0);const T=Math.abs(C)<=n,R=Math.abs(o-M)<=t;a.done=T&&R}return a.value=a.done?o:M,a}}}function sI({keyframes:i,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:h}){const f=i[0],p={done:!1,value:f},g=I=>l!==void 0&&I<l||c!==void 0&&I>c,v=I=>l===void 0?c:c===void 0||Math.abs(l-I)<Math.abs(c-I)?l:c;let _=n*t;const x=f+_,y=a===void 0?x:a(x);y!==x&&(_=y-f);const S=I=>-_*Math.exp(-I/r),A=I=>y+S(I),M=I=>{const P=S(I),B=A(I);p.done=Math.abs(P)<=u,p.value=p.done?y:B};let C,T;const R=I=>{g(p.value)&&(C=I,T=vk({keyframes:[p.value,v(p.value)],velocity:gk(A,I,p.value),damping:s,stiffness:o,restDelta:u,restSpeed:h}))};return R(0),{calculatedDuration:null,next:I=>{let P=!1;return!T&&C===void 0&&(P=!0,M(I),R(I)),C!==void 0&&I>C?T.next(I-C):(!P&&M(I),p)}}}const qq=i=>{const t=({timestamp:n})=>i(n);return{start:()=>Wn.update(t,!0),stop:()=>Da(t),now:()=>yr.isProcessing?yr.timestamp:performance.now()}},oI=2e4;function aI(i){let t=0;const n=50;let r=i.next(t);for(;!r.done&&t<oI;)t+=n,r=i.next(t);return t>=oI?1/0:t}const $q={decay:sI,inertia:sI,tween:Ay,keyframes:Ay,spring:vk};function Ey({autoplay:i=!0,delay:t=0,driver:n=qq,keyframes:r,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:f,...p}){let g=1,v=!1,_,x;const y=()=>{x=new Promise(k=>{_=k})};y();let S;const A=$q[s]||Ay;let M;A!==Ay&&typeof r[0]!="number"&&(M=pk([0,100],r,{clamp:!1}),r=[0,100]);const C=A({...p,keyframes:r});let T;l==="mirror"&&(T=A({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let R="idle",I=null,P=null,B=null;C.calculatedDuration===null&&o&&(C.calculatedDuration=aI(C));const{calculatedDuration:O}=C;let N=1/0,ne=1/0;O!==null&&(N=O+a,ne=N*(o+1)-a);let z=0;const j=k=>{if(P===null)return;g>0&&(P=Math.min(P,k)),g<0&&(P=Math.min(k-ne/g,P)),I!==null?z=I:z=Math.round(k-P)*g;const Z=z-t*(g>=0?1:-1),Q=g>=0?Z<0:Z>ne;z=Math.max(Z,0),R==="finished"&&I===null&&(z=ne);let se=z,le=C;if(o){const ke=Math.min(z,ne)/N;let Be=Math.floor(ke),Ae=ke%1;!Ae&&ke>=1&&(Ae=1),Ae===1&&Be--,Be=Math.min(Be,o+1),!!(Be%2)&&(l==="reverse"?(Ae=1-Ae,a&&(Ae-=a/N)):l==="mirror"&&(le=T)),se=Fl(0,1,Ae)*N}const fe=Q?{done:!1,value:r[0]}:le.next(se);M&&(fe.value=M(fe.value));let{done:ue}=fe;!Q&&O!==null&&(ue=g>=0?z>=ne:z<=0);const Se=I===null&&(R==="finished"||R==="running"&&ue);return f&&f(fe.value),Se&&H(),fe},q=()=>{S&&S.stop(),S=void 0},he=()=>{R="idle",q(),_(),y(),P=B=null},H=()=>{R="finished",h&&h(),q(),_()},X=()=>{if(v)return;S||(S=n(j));const k=S.now();c&&c(),I!==null?P=k-I:(!P||R==="finished")&&(P=k),R==="finished"&&y(),B=P,I=null,R="running",S.start()};i&&X();const K={then(k,Z){return x.then(k,Z)},get time(){return wa(z)},set time(k){k=qc(k),z=k,I!==null||!S||g===0?I=k:P=S.now()-k/g},get duration(){const k=C.calculatedDuration===null?aI(C):C.calculatedDuration;return wa(k)},get speed(){return g},set speed(k){k===g||!S||(g=k,K.time=wa(z))},get state(){return R},play:X,pause:()=>{R="paused",I=z},stop:()=>{v=!0,R!=="idle"&&(R="idle",u&&u(),he())},cancel:()=>{B!==null&&j(B),he()},complete:()=>{R="finished"},sample:k=>(P=0,j(k))};return K}function e$(i){let t;return()=>(t===void 0&&(t=i()),t)}const t$=e$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),n$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),qv=10,i$=2e4,r$=(i,t)=>t.type==="spring"||i==="backgroundColor"||!JN(t.ease);function s$(i,t,{onUpdate:n,onComplete:r,...s}){if(!(t$()&&n$.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const h=()=>{c=new Promise(A=>{l=A})};h();let{keyframes:f,duration:p=300,ease:g,times:v}=s;if(r$(t,s)){const A=Ey({...s,repeat:0,delay:0});let M={done:!1,value:f[0]};const C=[];let T=0;for(;!M.done&&T<i$;)M=A.sample(T),C.push(M.value),T+=qv;v=void 0,f=C,p=T-qv,g="linear"}const _=pq(i.owner.current,t,f,{...s,duration:p,ease:g,times:v}),x=()=>{u=!1,_.cancel()},y=()=>{u=!0,Wn.update(x),l(),h()};return _.onfinish=()=>{u||(i.set(mq(f,s)),r&&r(),y())},{then(A,M){return c.then(A,M)},attachTimeline(A){return _.timeline=A,_.onfinish=null,_i},get time(){return wa(_.currentTime||0)},set time(A){_.currentTime=qc(A)},get speed(){return _.playbackRate},set speed(A){_.playbackRate=A},get duration(){return wa(p)},play:()=>{a||(_.play(),Da(x))},pause:()=>_.pause(),stop:()=>{if(a=!0,_.playState==="idle")return;const{currentTime:A}=_;if(A){const M=Ey({...s,autoplay:!1});i.setWithVelocity(M.sample(A-qv).value,M.sample(A).value,qv)}y()},complete:()=>{u||_.finish()},cancel:y}}function o$({keyframes:i,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(i[i.length-1]),r&&r(),{time:0,speed:1,duration:0,play:_i,pause:_i,stop:_i,then:o=>(o(),Promise.resolve()),cancel:_i,complete:_i});return t?Ey({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const a$={type:"spring",stiffness:500,damping:25,restSpeed:10},l$=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),c$={type:"keyframes",duration:.8},u$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h$=(i,{keyframes:t})=>t.length>2?c$:Eu.has(i)?i.startsWith("scale")?l$(t[1]):a$:u$,iM=(i,t)=>i==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ol.test(t)||t==="0")&&!t.startsWith("url(")),f$=new Set(["brightness","contrast","saturate","opacity"]);function d$(i){const[t,n]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[r]=n.match(U_)||[];if(!r)return i;const s=n.replace(r,"");let o=f$.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+s+")"}const p$=/([a-z-]*)\(.*?\)/g,rM={...Ol,getAnimatableNone:i=>{const t=i.match(p$);return t?t.map(d$).join(" "):i}},m$={...PN,color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,filter:rM,WebkitFilter:rM},ZT=i=>m$[i];function yk(i,t){let n=ZT(i);return n!==rM&&(n=Ol),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const _k=i=>/^0[^.\s]+$/.test(i);function g$(i){if(typeof i=="number")return i===0;if(i!==null)return i==="none"||i==="0"||_k(i)}function v$(i,t,n,r){const s=iM(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=r.from!==void 0?r.from:i.get();let l;const c=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?a:o[u-1]),g$(o[u])&&c.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(l=o[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const h=c[u];o[h]=yk(t,l)}return o}function y$({when:i,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function QT(i,t){return i[t]||i.default||i}const _$={skipAnimations:!1},qT=(i,t,n,r={})=>s=>{const o=QT(r,i)||{},a=o.delay||r.delay||0;let{elapsed:l=0}=r;l=l-qc(a);const c=v$(t,i,n,o),u=c[0],h=c[c.length-1],f=iM(i,u),p=iM(i,h);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:v=>{t.set(v),o.onUpdate&&o.onUpdate(v)},onComplete:()=>{s(),o.onComplete&&o.onComplete()}};if(y$(o)||(g={...g,...h$(i,g)}),g.duration&&(g.duration=qc(g.duration)),g.repeatDelay&&(g.repeatDelay=qc(g.repeatDelay)),!f||!p||dq.current||o.type===!1||_$.skipAnimations)return o$(g);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const v=s$(t,i,g);if(v)return v}return Ey(g)};function My(i){return!!(bi(i)&&i.add)}const xk=i=>/^\-?\d*\.?\d+$/.test(i);function $T(i,t){i.indexOf(t)===-1&&i.push(t)}function eC(i,t){const n=i.indexOf(t);n>-1&&i.splice(n,1)}class tC{constructor(){this.subscriptions=[]}add(t){return $T(this.subscriptions,t),()=>eC(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const x$=i=>!isNaN(parseFloat(i));class S${constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:a}=yr;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Wn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Wn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=x$(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new tC);const r=this.events[t].add(n);return t==="change"?()=>{r(),Wn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?mk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vf(i,t){return new S$(i,t)}const Sk=i=>t=>t.test(i),A$={test:i=>i==="auto",parse:i=>i},Ak=[Mu,Lt,zo,ol,IQ,BQ,A$],Od=i=>Ak.find(Sk(i)),E$=[...Ak,Dr,Ol],M$=i=>E$.find(Sk(i));function w$(i,t,n){i.hasValue(t)?i.getValue(t).set(n):i.addValue(t,vf(n))}function T$(i,t){const n=O_(i,t);let{transitionEnd:r={},transition:s={},...o}=n?i.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const a in o){const l=WQ(o[a]);w$(i,a,l)}}function Ek(i,t,n){var r,s;const o=Object.keys(t).filter(l=>!i.hasValue(l)),a=o.length;if(a)for(let l=0;l<a;l++){const c=o[l],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:i.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(xk(h)||_k(h))?h=parseFloat(h):!M$(h)&&Ol.test(u)&&(h=yk(c,u)),i.addValue(c,vf(h,{owner:i})),n[c]===void 0&&(n[c]=h),h!==null&&i.setBaseTarget(c,h))}}function C$(i,t){return t?(t[i]||t.default||t).from:void 0}function b$(i,t,n){const r={};for(const s in i){const o=C$(s,t);if(o!==void 0)r[s]=o;else{const a=n.getValue(s);a&&(r[s]=a.get())}}return r}function R$({protectedKeys:i,needsAnimating:t},n){const r=i.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function P$(i,t){const n=i.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Mk(i,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=i.getDefaultTransition(),transitionEnd:a,...l}=i.makeTargetAnimatable(t);const c=i.getValue("willChange");r&&(o=r);const u=[],h=s&&i.animationState&&i.animationState.getState()[s];for(const f in l){const p=i.getValue(f),g=l[f];if(!p||g===void 0||h&&R$(h,f))continue;const v={delay:n,elapsed:0,...QT(o||{},f)};if(window.HandoffAppearAnimations){const y=i.getProps()[SN];if(y){const S=window.HandoffAppearAnimations(y,f,p,Wn);S!==null&&(v.elapsed=S,v.isHandoff=!0)}}let _=!v.isHandoff&&!P$(p,g);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(_=!1),p.animation&&(_=!1),_)continue;p.start(qT(f,p,g,i.shouldReduceMotion&&Eu.has(f)?{type:!1}:v));const x=p.animation;My(c)&&(c.add(f),x.then(()=>c.remove(f))),u.push(x)}return a&&Promise.all(u).then(()=>{a&&T$(i,a)}),u}function sM(i,t,n={}){const r=O_(i,t,n.custom);let{transition:s=i.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(Mk(i,r,n)):()=>Promise.resolve(),a=i.variantChildren&&i.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return B$(i,t,u+c,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function B$(i,t,n=0,r=0,s=1,o){const a=[],l=(i.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(i.variantChildren).sort(I$).forEach((u,h)=>{u.notify("AnimationStart",t),a.push(sM(u,t,{...o,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function I$(i,t){return i.sortNodePosition(t)}function D$(i,t,n={}){i.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(o=>sM(i,o,n));r=Promise.all(s)}else if(typeof t=="string")r=sM(i,t,n);else{const s=typeof t=="function"?O_(i,t,n.custom):t;r=Promise.all(Mk(i,s,n))}return r.then(()=>i.notify("AnimationComplete",t))}const L$=[...UT].reverse(),U$=UT.length;function F$(i){return t=>Promise.all(t.map(({animation:n,options:r})=>D$(i,n,r)))}function O$(i){let t=F$(i);const n=k$();let r=!0;const s=(c,u)=>{const h=O_(i,u);if(h){const{transition:f,transitionEnd:p,...g}=h;c={...c,...g,...p}}return c};function o(c){t=c(i)}function a(c,u){const h=i.getProps(),f=i.getVariantContext(!0)||{},p=[],g=new Set;let v={},_=1/0;for(let y=0;y<U$;y++){const S=L$[y],A=n[S],M=h[S]!==void 0?h[S]:f[S],C=rm(M),T=S===u?A.isActive:null;T===!1&&(_=y);let R=M===f[S]&&M!==h[S]&&C;if(R&&r&&i.manuallyAnimateOnMount&&(R=!1),A.protectedKeys={...v},!A.isActive&&T===null||!M&&!A.prevProp||D_(M)||typeof M=="boolean")continue;let P=N$(A.prevProp,M)||S===u&&A.isActive&&!R&&C||y>_&&C,B=!1;const O=Array.isArray(M)?M:[M];let N=O.reduce(s,{});T===!1&&(N={});const{prevResolvedValues:ne={}}=A,z={...ne,...N},j=q=>{P=!0,g.has(q)&&(B=!0,g.delete(q)),A.needsAnimating[q]=!0};for(const q in z){const he=N[q],H=ne[q];if(v.hasOwnProperty(q))continue;let X=!1;xy(he)&&xy(H)?X=!jN(he,H):X=he!==H,X?he!==void 0?j(q):g.add(q):he!==void 0&&g.has(q)?j(q):A.protectedKeys[q]=!0}A.prevProp=M,A.prevResolvedValues=N,A.isActive&&(v={...v,...N}),r&&i.blockInitialAnimation&&(P=!1),P&&(!R||B)&&p.push(...O.map(q=>({animation:q,options:{type:S,...c}})))}if(g.size){const y={};g.forEach(S=>{const A=i.getBaseTarget(S);A!==void 0&&(y[S]=A)}),p.push({animation:y})}let x=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!i.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(p):Promise.resolve()}function l(c,u,h){var f;if(n[c].isActive===u)return Promise.resolve();(f=i.variantChildren)===null||f===void 0||f.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(c,u)}),n[c].isActive=u;const p=a(h,c);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n}}function N$(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!jN(t,i):!1}function Ac(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function k$(){return{animate:Ac(!0),whileInView:Ac(),whileHover:Ac(),whileTap:Ac(),whileDrag:Ac(),whileFocus:Ac(),exit:Ac()}}class z$ extends jl{constructor(t){super(t),t.animationState||(t.animationState=O$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),D_(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let G$=0;class H$ extends jl{constructor(){super(...arguments),this.id=G$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const wk={animation:{Feature:z$},exit:{Feature:H$}},lI=(i,t)=>Math.abs(i-t);function V$(i,t){const n=lI(i.x,t.x),r=lI(i.y,t.y);return Math.sqrt(n**2+r**2)}class Tk{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=DS(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=V$(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:v}=f,{timestamp:_}=yr;this.history.push({...v,timestamp:_});const{onStart:x,onMove:y}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=IS(p,this.transformPagePoint),Wn.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=DS(f.type==="pointercancel"?this.lastMoveEventInfo:IS(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,x),v&&v(f,x)},!GN(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=F_(t),l=IS(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=yr;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,DS(l,this.history)),this.removeListeners=Ma(go(this.contextWindow,"pointermove",this.handlePointerMove),go(this.contextWindow,"pointerup",this.handlePointerUp),go(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Da(this.updatePoint)}}function IS(i,t){return t?{point:t(i.point)}:i}function cI(i,t){return{x:i.x-t.x,y:i.y-t.y}}function DS({point:i},t){return{point:i,delta:cI(i,Ck(t)),offset:cI(i,W$(t)),velocity:X$(t,.1)}}function W$(i){return i[0]}function Ck(i){return i[i.length-1]}function X$(i,t){if(i.length<2)return{x:0,y:0};let n=i.length-1,r=null;const s=Ck(i);for(;n>=0&&(r=i[n],!(s.timestamp-r.timestamp>qc(t)));)n--;if(!r)return{x:0,y:0};const o=wa(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function vs(i){return i.max-i.min}function oM(i,t=0,n=.01){return Math.abs(i-t)<=n}function uI(i,t,n,r=.5){i.origin=r,i.originPoint=ti(t.min,t.max,i.origin),i.scale=vs(n)/vs(t),(oM(i.scale,1,1e-4)||isNaN(i.scale))&&(i.scale=1),i.translate=ti(n.min,n.max,i.origin)-i.originPoint,(oM(i.translate)||isNaN(i.translate))&&(i.translate=0)}function yp(i,t,n,r){uI(i.x,t.x,n.x,r?r.originX:void 0),uI(i.y,t.y,n.y,r?r.originY:void 0)}function hI(i,t,n){i.min=n.min+t.min,i.max=i.min+vs(t)}function j$(i,t,n){hI(i.x,t.x,n.x),hI(i.y,t.y,n.y)}function fI(i,t,n){i.min=t.min-n.min,i.max=i.min+vs(t)}function _p(i,t,n){fI(i.x,t.x,n.x),fI(i.y,t.y,n.y)}function Y$(i,{min:t,max:n},r){return t!==void 0&&i<t?i=r?ti(t,i,r.min):Math.max(i,t):n!==void 0&&i>n&&(i=r?ti(n,i,r.max):Math.min(i,n)),i}function dI(i,t,n){return{min:t!==void 0?i.min+t:void 0,max:n!==void 0?i.max+n-(i.max-i.min):void 0}}function J$(i,{top:t,left:n,bottom:r,right:s}){return{x:dI(i.x,n,s),y:dI(i.y,t,r)}}function pI(i,t){let n=t.min-i.min,r=t.max-i.max;return t.max-t.min<i.max-i.min&&([n,r]=[r,n]),{min:n,max:r}}function K$(i,t){return{x:pI(i.x,t.x),y:pI(i.y,t.y)}}function Z$(i,t){let n=.5;const r=vs(i),s=vs(t);return s>r?n=om(t.min,t.max-r,i.min):r>s&&(n=om(i.min,i.max-s,t.min)),Fl(0,1,n)}function Q$(i,t){const n={};return t.min!==void 0&&(n.min=t.min-i.min),t.max!==void 0&&(n.max=t.max-i.min),n}const aM=.35;function q$(i=aM){return i===!1?i=0:i===!0&&(i=aM),{x:mI(i,"left","right"),y:mI(i,"top","bottom")}}function mI(i,t,n){return{min:gI(i,t),max:gI(i,n)}}function gI(i,t){return typeof i=="number"?i:i[t]||0}const vI=()=>({translate:0,scale:1,origin:0,originPoint:0}),zh=()=>({x:vI(),y:vI()}),yI=()=>({min:0,max:0}),gi=()=>({x:yI(),y:yI()});function Is(i){return[i("x"),i("y")]}function bk({top:i,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:i,max:r}}}function $$({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function eee(i,t){if(!t)return i;const n=t({x:i.left,y:i.top}),r=t({x:i.right,y:i.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function LS(i){return i===void 0||i===1}function lM({scale:i,scaleX:t,scaleY:n}){return!LS(i)||!LS(t)||!LS(n)}function Rc(i){return lM(i)||Rk(i)||i.z||i.rotate||i.rotateX||i.rotateY}function Rk(i){return _I(i.x)||_I(i.y)}function _I(i){return i&&i!=="0%"}function wy(i,t,n){const r=i-n,s=t*r;return n+s}function xI(i,t,n,r,s){return s!==void 0&&(i=wy(i,s,r)),wy(i,n,r)+t}function cM(i,t=0,n=1,r,s){i.min=xI(i.min,t,n,r,s),i.max=xI(i.max,t,n,r,s)}function Pk(i,{x:t,y:n}){cM(i.x,t.translate,t.scale,t.originPoint),cM(i.y,n.translate,n.scale,n.originPoint)}function tee(i,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let o,a;for(let l=0;l<s;l++){o=n[l],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Gh(i,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Pk(i,a)),r&&Rc(o.latestValues)&&Gh(i,o.latestValues))}t.x=SI(t.x),t.y=SI(t.y)}function SI(i){return Number.isInteger(i)||i>1.0000000000001||i<.999999999999?i:1}function ul(i,t){i.min=i.min+t,i.max=i.max+t}function AI(i,t,[n,r,s]){const o=t[s]!==void 0?t[s]:.5,a=ti(i.min,i.max,o);cM(i,t[n],t[r],a,t.scale)}const nee=["x","scaleX","originX"],iee=["y","scaleY","originY"];function Gh(i,t){AI(i.x,t,nee),AI(i.y,t,iee)}function Bk(i,t){return bk(eee(i.getBoundingClientRect(),t))}function ree(i,t,n){const r=Bk(i,n),{scroll:s}=t;return s&&(ul(r.x,s.offset.x),ul(r.y,s.offset.y)),r}const Ik=({current:i})=>i?i.ownerDocument.defaultView:null,see=new WeakMap;class oee{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gi(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(F_(h,"page").point)},o=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:v}=this.getProps();if(p&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=WN(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Is(x=>{let y=this.getAxisMotionValue(x).get()||0;if(zo.test(y)){const{projection:S}=this.visualElement;if(S&&S.layout){const A=S.layout.layoutBox[x];A&&(y=vs(A)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&Wn.update(()=>v(h,f),!1,!0);const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:v,onDrag:_}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:x}=f;if(g&&this.currentDirection===null){this.currentDirection=aee(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),_&&_(h,f)},l=(h,f)=>this.stop(h,f),c=()=>Is(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Tk(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Ik(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Wn.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!$v(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=Y$(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&Nh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=J$(s.layoutBox,n):this.constraints=!1,this.elastic=q$(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Is(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Q$(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Nh(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=ree(r,s.root,this.visualElement.getTransformPagePoint());let a=K$(s.layout.layoutBox,o);if(n){const l=n($$(a));this.hasMutatedConstraints=!!l,l&&(a=bk(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Is(h=>{if(!$v(h,n,this.currentDirection))return;let f=c&&c[h]||{};a&&(f={min:0,max:0});const p=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:r?t[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(qT(t,r,0,n))}stopAnimation(){Is(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Is(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Is(n=>{const{drag:r}=this.getProps();if(!$v(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];o.set(t[n]-ti(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Nh(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Is(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=Z$({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Is(a=>{if(!$v(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(ti(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;see.set(this.visualElement,this);const t=this.visualElement.current,n=go(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Nh(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const a=xa(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Is(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=aM,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function $v(i,t,n){return(t===!0||t===i)&&(n===null||n===i)}function aee(i,t=10){let n=null;return Math.abs(i.y)>t?n="y":Math.abs(i.x)>t&&(n="x"),n}class lee extends jl{constructor(t){super(t),this.removeGroupControls=_i,this.removeListeners=_i,this.controls=new oee(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_i}unmount(){this.removeGroupControls(),this.removeListeners()}}const EI=i=>(t,n)=>{i&&Wn.update(()=>i(t,n))};class cee extends jl{constructor(){super(...arguments),this.removePointerDownListener=_i}onPointerDown(t){this.session=new Tk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ik(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:EI(t),onStart:EI(n),onMove:r,onEnd:(o,a)=>{delete this.session,s&&Wn.update(()=>s(o,a))}}}mount(){this.removePointerDownListener=go(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function uee(){const i=ee.useContext(DT);if(i===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=i,s=ee.useId();return ee.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const C0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function MI(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Nd={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(Lt.test(i))i=parseFloat(i);else return i;const n=MI(i,t.target.x),r=MI(i,t.target.y);return`${n}% ${r}%`}},hee={correct:(i,{treeScale:t,projectionDelta:n})=>{const r=i,s=Ol.parse(i);if(s.length>5)return r;const o=Ol.createTransformer(i),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=ti(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}};class fee extends Rn.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=t;MQ(dee),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),C0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,s||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||Wn.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Dk(i){const[t,n]=uee(),r=ee.useContext(EN);return Rn.createElement(fee,{...i,layoutGroup:r,switchLayoutGroup:ee.useContext(MN),isPresent:t,safeToRemove:n})}const dee={borderRadius:{...Nd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nd,borderTopRightRadius:Nd,borderBottomLeftRadius:Nd,borderBottomRightRadius:Nd,boxShadow:hee},Lk=["TopLeft","TopRight","BottomLeft","BottomRight"],pee=Lk.length,wI=i=>typeof i=="string"?parseFloat(i):i,TI=i=>typeof i=="number"||Lt.test(i);function mee(i,t,n,r,s,o){s?(i.opacity=ti(0,n.opacity!==void 0?n.opacity:1,gee(r)),i.opacityExit=ti(t.opacity!==void 0?t.opacity:1,0,vee(r))):o&&(i.opacity=ti(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<pee;a++){const l=`border${Lk[a]}Radius`;let c=CI(t,l),u=CI(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||TI(c)===TI(u)?(i[l]=Math.max(ti(wI(c),wI(u),r),0),(zo.test(u)||zo.test(c))&&(i[l]+="%")):i[l]=u}(t.rotate||n.rotate)&&(i.rotate=ti(t.rotate||0,n.rotate||0,r))}function CI(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const gee=Uk(0,.5,tk),vee=Uk(.5,.95,_i);function Uk(i,t,n){return r=>r<i?0:r>t?1:n(om(i,t,r))}function bI(i,t){i.min=t.min,i.max=t.max}function Bs(i,t){bI(i.x,t.x),bI(i.y,t.y)}function RI(i,t,n,r,s){return i-=t,i=wy(i,1/n,r),s!==void 0&&(i=wy(i,1/s,r)),i}function yee(i,t=0,n=1,r=.5,s,o=i,a=i){if(zo.test(t)&&(t=parseFloat(t),t=ti(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=ti(o.min,o.max,r);i===o&&(l-=t),i.min=RI(i.min,t,n,l,s),i.max=RI(i.max,t,n,l,s)}function PI(i,t,[n,r,s],o,a){yee(i,t[n],t[r],t[s],t.scale,o,a)}const _ee=["x","scaleX","originX"],xee=["y","scaleY","originY"];function BI(i,t,n,r){PI(i.x,t,_ee,n?n.x:void 0,r?r.x:void 0),PI(i.y,t,xee,n?n.y:void 0,r?r.y:void 0)}function II(i){return i.translate===0&&i.scale===1}function Fk(i){return II(i.x)&&II(i.y)}function See(i,t){return i.x.min===t.x.min&&i.x.max===t.x.max&&i.y.min===t.y.min&&i.y.max===t.y.max}function Ok(i,t){return Math.round(i.x.min)===Math.round(t.x.min)&&Math.round(i.x.max)===Math.round(t.x.max)&&Math.round(i.y.min)===Math.round(t.y.min)&&Math.round(i.y.max)===Math.round(t.y.max)}function DI(i){return vs(i.x)/vs(i.y)}class Aee{constructor(){this.members=[]}add(t){$T(this.members,t),t.scheduleRender()}remove(t){if(eC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LI(i,t,n){let r="";const s=i.x.translate/t.x,o=i.y.translate/t.y;if((s||o)&&(r=`translate3d(${s}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const a=i.x.scale*t.x,l=i.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Eee=(i,t)=>i.depth-t.depth;class Mee{constructor(){this.children=[],this.isDirty=!1}add(t){$T(this.children,t),this.isDirty=!0}remove(t){eC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Eee),this.isDirty=!1,this.children.forEach(t)}}function wee(i,t){const n=performance.now(),r=({timestamp:s})=>{const o=s-n;o>=t&&(Da(r),i(o-t))};return Wn.read(r,!0),()=>Da(r)}function Tee(i){window.MotionDebug&&window.MotionDebug.record(i)}function Cee(i){return i instanceof SVGElement&&i.tagName!=="svg"}function bee(i,t,n){const r=bi(i)?i:vf(i);return r.start(qT("",r,t,n)),r.animation}const UI=["","X","Y","Z"],Ree={visibility:"hidden"},FI=1e3;let Pee=0;const Pc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Nk({attachResizeListener:i,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=Pee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Pc.totalNodes=Pc.resolvedTargetDeltas=Pc.recalculatedProjection=0,this.nodes.forEach(Dee),this.nodes.forEach(Nee),this.nodes.forEach(kee),this.nodes.forEach(Lee),Tee(Pc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mee)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new tC),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Cee(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),i){let f;const p=()=>this.root.updateBlockedByResize=!1;i(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=wee(p,250),C0.hasAnimatedSinceResize&&(C0.hasAnimatedSinceResize=!1,this.nodes.forEach(NI))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||Wee,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=h.getProps(),S=!this.targetLayout||!Ok(this.targetLayout,v)||g,A=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,A);const M={...QT(_,"layout"),onPlay:x,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else p||NI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zee),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(OI);return}this.isUpdating||this.nodes.forEach(Fee),this.isUpdating=!1,this.nodes.forEach(Oee),this.nodes.forEach(Bee),this.nodes.forEach(Iee),this.clearAllSnapshots();const l=performance.now();yr.delta=Fl(0,1e3/60,l-yr.timestamp),yr.timestamp=l,yr.isProcessing=!0,MS.update.process(yr),MS.preRender.process(yr),MS.render.process(yr),yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Uee),this.sharedNodes.forEach(Gee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Fk(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(l||Rc(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),Xee(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return gi();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(ul(l.x,c.offset.x),ul(l.y,c.offset.y)),l}removeElementScroll(a){const l=gi();Bs(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;if(u!==this.root&&h&&f.layoutScroll){if(h.isRoot){Bs(l,a);const{scroll:p}=this.root;p&&(ul(l.x,-p.offset.x),ul(l.y,-p.offset.y))}ul(l.x,h.offset.x),ul(l.y,h.offset.y)}}return l}applyTransform(a,l=!1){const c=gi();Bs(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Gh(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rc(h.latestValues)&&Gh(c,h.latestValues)}return Rc(this.latestValues)&&Gh(c,this.latestValues),c}removeTransform(a){const l=gi();Bs(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Rc(u.latestValues))continue;lM(u.latestValues)&&u.updateSnapshot();const h=gi(),f=u.measurePageBox();Bs(h,f),BI(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Rc(this.latestValues)&&BI(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=yr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gi(),this.relativeTargetOrigin=gi(),_p(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gi(),this.targetWithTransforms=gi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),j$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bs(this.target,this.layout.layoutBox),Pk(this.target,this.targetDelta)):Bs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gi(),this.relativeTargetOrigin=gi(),_p(this.relativeTargetOrigin,this.target,g.target),Bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Pc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lM(this.parent.latestValues)||Rk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===yr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Bs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;tee(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:v}=l;if(!v){this.projectionTransform&&(this.projectionDelta=zh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=zh(),this.projectionDeltaWithTransform=zh());const _=this.projectionTransform;yp(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=LI(this.projectionDelta,this.treeScale),(this.projectionTransform!==_||this.treeScale.x!==p||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Pc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},f=zh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=gi(),g=c?c.source:void 0,v=this.layout?this.layout.source:void 0,_=g!==v,x=this.getStack(),y=!x||x.members.length<=1,S=!!(_&&!y&&this.options.crossfade===!0&&!this.path.some(Vee));this.animationProgress=0;let A;this.mixTargetDelta=M=>{const C=M/1e3;kI(f.x,a.x,C),kI(f.y,a.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_p(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Hee(this.relativeTarget,this.relativeTargetOrigin,p,C),A&&See(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=gi()),Bs(A,this.relativeTarget)),_&&(this.animationValues=h,mee(h,u,this.latestValues,C,S,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wn.update(()=>{C0.hasAnimatedSinceResize=!0,this.currentAnimation=bee(0,FI,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(FI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&kk(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||gi();const f=vs(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const p=vs(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+p}Bs(l,c),Gh(l,h),yp(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Aee),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let h=0;h<UI.length;h++){const f="rotate"+UI[h];c[f]&&(u[f]=c[f],a.setStaticValue(f,0))}a.render();for(const h in u)a.setStaticValue(h,u[h]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ree;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=vp(a==null?void 0:a.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=vp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Rc(this.latestValues)&&(_.transform=h?h({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=LI(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:g,y:v}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in yy){if(p[_]===void 0)continue;const{correct:x,applyTo:y}=yy[_],S=u.transform==="none"?p[_]:x(p[_],f);if(y){const A=y.length;for(let M=0;M<A;M++)u[y[M]]=S}else u[_]=S}return this.options.layoutId&&(u.pointerEvents=f===this?vp(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(OI),this.root.sharedNodes.clear()}}}function Bee(i){i.updateLayout()}function Iee(i){var t;const n=((t=i.resumeFrom)===null||t===void 0?void 0:t.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&n&&i.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=i.layout,{animationType:o}=i.options,a=n.source!==i.layout.source;o==="size"?Is(f=>{const p=a?n.measuredBox[f]:n.layoutBox[f],g=vs(p);p.min=r[f].min,p.max=p.min+g}):kk(o,n.layoutBox,r)&&Is(f=>{const p=a?n.measuredBox[f]:n.layoutBox[f],g=vs(r[f]);p.max=p.min+g,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[f].max=i.relativeTarget[f].min+g)});const l=zh();yp(l,r,n.layoutBox);const c=zh();a?yp(c,i.applyTransform(s,!0),n.measuredBox):yp(c,r,n.layoutBox);const u=!Fk(l);let h=!1;if(!i.resumeFrom){const f=i.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const v=gi();_p(v,n.layoutBox,p.layoutBox);const _=gi();_p(_,r,g.layoutBox),Ok(v,_)||(h=!0),f.options.layoutRoot&&(i.relativeTarget=_,i.relativeTargetOrigin=v,i.relativeParent=f)}}}i.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(i.isLead()){const{onExitComplete:r}=i.options;r&&r()}i.options.transition=void 0}function Dee(i){Pc.totalNodes++,i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function Lee(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function Uee(i){i.clearSnapshot()}function OI(i){i.clearMeasurements()}function Fee(i){i.isLayoutDirty=!1}function Oee(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function NI(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function Nee(i){i.resolveTargetDelta()}function kee(i){i.calcProjection()}function zee(i){i.resetRotation()}function Gee(i){i.removeLeadSnapshot()}function kI(i,t,n){i.translate=ti(t.translate,0,n),i.scale=ti(t.scale,1,n),i.origin=t.origin,i.originPoint=t.originPoint}function zI(i,t,n,r){i.min=ti(t.min,n.min,r),i.max=ti(t.max,n.max,r)}function Hee(i,t,n,r){zI(i.x,t.x,n.x,r),zI(i.y,t.y,n.y,r)}function Vee(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const Wee={duration:.45,ease:[.4,0,.1,1]},GI=i=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(i),HI=GI("applewebkit/")&&!GI("chrome/")?Math.round:_i;function VI(i){i.min=HI(i.min),i.max=HI(i.max)}function Xee(i){VI(i.x),VI(i.y)}function kk(i,t,n){return i==="position"||i==="preserve-aspect"&&!oM(DI(t),DI(n),.2)}const jee=Nk({attachResizeListener:(i,t)=>xa(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),US={current:void 0},zk=Nk({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!US.current){const i=new jee({});i.mount(window),i.setOptions({layoutScroll:!0}),US.current=i}return US.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),Yee={pan:{Feature:cee},drag:{Feature:lee,ProjectionNode:zk,MeasureLayout:Dk}},Jee=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Kee(i){const t=Jee.exec(i);if(!t)return[,];const[,n,r]=t;return[n,r]}function uM(i,t,n=1){const[r,s]=Kee(i);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const a=o.trim();return xk(a)?parseFloat(a):a}else return $E(s)?uM(s,t,n+1):s}function Zee(i,{...t},n){const r=i.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),i.values.forEach(s=>{const o=s.get();if(!$E(o))return;const a=uM(o,r);a&&s.set(a)});for(const s in t){const o=t[s];if(!$E(o))continue;const a=uM(o,r);a&&(t[s]=a,n||(n={}),n[s]===void 0&&(n[s]=o))}return{target:t,transitionEnd:n}}const Qee=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Gk=i=>Qee.has(i),qee=i=>Object.keys(i).some(Gk),WI=i=>i===Mu||i===Lt,XI=(i,t)=>parseFloat(i.split(", ")[t]),jI=(i,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return XI(s[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?XI(o[1],i):0}},$ee=new Set(["x","y","z"]),ete=Dm.filter(i=>!$ee.has(i));function tte(i){const t=[];return ete.forEach(n=>{const r=i.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&i.render(),t}const yf={width:({x:i},{paddingLeft:t="0",paddingRight:n="0"})=>i.max-i.min-parseFloat(t)-parseFloat(n),height:({y:i},{paddingTop:t="0",paddingBottom:n="0"})=>i.max-i.min-parseFloat(t)-parseFloat(n),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:jI(4,13),y:jI(5,14)};yf.translateX=yf.x;yf.translateY=yf.y;const nte=(i,t,n)=>{const r=t.measureViewportBox(),s=t.current,o=getComputedStyle(s),{display:a}=o,l={};a==="none"&&t.setStaticValue("display",i.display||"block"),n.forEach(u=>{l[u]=yf[u](r,o)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(l[u]),i[u]=yf[u](c,o)}),i},ite=(i,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(Gk);let o=[],a=!1;const l=[];if(s.forEach(c=>{const u=i.getValue(c);if(!i.hasValue(c))return;let h=n[c],f=Od(h);const p=t[c];let g;if(xy(p)){const v=p.length,_=p[0]===null?1:0;h=p[_],f=Od(h);for(let x=_;x<v&&p[x]!==null;x++)g?jT(Od(p[x])===g):g=Od(p[x])}else g=Od(p);if(f!==g)if(WI(f)&&WI(g)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof p=="string"?t[c]=parseFloat(p):Array.isArray(p)&&g===Lt&&(t[c]=p.map(parseFloat))}else f!=null&&f.transform&&(g!=null&&g.transform)&&(h===0||p===0)?h===0?u.set(g.transform(h)):t[c]=f.transform(p):(a||(o=tte(i),a=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(p))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=nte(t,i,l);return o.length&&o.forEach(([h,f])=>{i.getValue(h).set(f)}),i.render(),I_&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function rte(i,t,n,r){return qee(t)?ite(i,t,n,r):{target:t,transitionEnd:r}}const ste=(i,t,n,r)=>{const s=Zee(i,t,r);return t=s.target,r=s.transitionEnd,rte(i,t,n,r)},hM={current:null},Hk={current:!1};function ote(){if(Hk.current=!0,!!I_)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>hM.current=i.matches;i.addListener(t),t()}else hM.current=!1}function ate(i,t,n){const{willChange:r}=t;for(const s in t){const o=t[s],a=n[s];if(bi(o))i.addValue(s,o),My(r)&&r.add(s);else if(bi(a))i.addValue(s,vf(o,{owner:i})),My(r)&&r.remove(s);else if(a!==o)if(i.hasValue(s)){const l=i.getValue(s);!l.hasAnimated&&l.set(o)}else{const l=i.getStaticValue(s);i.addValue(s,vf(l!==void 0?l:o,{owner:i}))}}for(const s in n)t[s]===void 0&&i.removeValue(s);return t}const YI=new WeakMap,Vk=Object.keys(sm),lte=Vk.length,JI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cte=FT.length;class Wk{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Wn.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=L_(n),this.isVariantNode=AN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const p=h[f];l[f]!==void 0&&bi(p)&&(p.set(l[f],!1),My(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,YI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Hk.current||ote(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){YI.delete(this.current),this.projection&&this.projection.unmount(),Da(this.notifyUpdate),Da(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Eu.has(t),s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Wn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,o){let a,l;for(let c=0;c<lte;c++){const u=Vk[c],{isEnabled:h,Feature:f,ProjectionNode:p,MeasureLayout:g}=sm[u];p&&(a=p),h(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:f,layoutScroll:p,layoutRoot:g}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||f&&Nh(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:p,layoutRoot:g})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<JI.length;r++){const s=JI[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o=t["on"+s];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=ate(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<cte;r++){const s=FT[r],o=this.props[s];(rm(o)||o===!1)&&(n[s]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=vf(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=VT(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!bi(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new tC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Xk extends Wk{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},o){let a=b$(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),a&&(a=s(a))),o){Ek(this,r,a);const l=ste(this,r,a,n);n=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:n,...r}}}function ute(i){return window.getComputedStyle(i)}class hte extends Xk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Eu.has(n)){const r=ZT(n);return r&&r.default||0}else{const r=ute(t),s=(bN(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Bk(t,n)}build(t,n,r,s){NT(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return HT(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;bi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){FN(t,n,r,s)}}class fte extends Xk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Eu.has(n)){const r=ZT(n);return r&&r.default||0}return n=ON.has(n)?n:LT(n),t.getAttribute(n)}measureInstanceViewportBox(){return gi()}scrapeMotionValuesFromProps(t,n){return kN(t,n)}build(t,n,r,s){zT(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){NN(t,n,r,s)}mount(t){this.isSVGTag=GT(t.tagName),super.mount(t)}}const dte=(i,t)=>OT(i)?new fte(t,{enableHardwareAcceleration:!1}):new hte(t,{enableHardwareAcceleration:!0}),pte={layout:{ProjectionNode:zk,MeasureLayout:Dk}},mte={...wk,...uq,...Yee,...pte},Ec=AQ((i,t)=>qQ(i,t,mte,dte));function gte({children:i,isValidProp:t,...n}){t&&DN(t),n={...ee.useContext(vy),...n},n.isStatic=zN(()=>n.isStatic);const r=ee.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return ee.createElement(vy.Provider,{value:r},i)}function vte(i,{whileHover:t,onHoverStart:n,onHoverEnd:r,onPointerOver:s,onPointerOut:o},a){return i||!a||!(t||n||r)?{}:{onPointerOver:c=>{var u;(u=a.animationState)===null||u===void 0||u.setActive("whileHover",!0),s&&s(c)},onPointerOut:c=>{var u;(u=a.animationState)===null||u===void 0||u.setActive("whileHover",!1),o&&o(c)}}}function yte(i,{whileTap:t,onTapStart:n,onTap:r,onTapCancel:s,onPointerDown:o},a){const l=r||n||s||t,c=ee.useRef(!1),u=ee.useRef(null);if(i||!a||!l)return{};function h(){var v;(v=u.current)===null||v===void 0||v.call(u),u.current=null}function f(){var v;return h(),c.current=!1,(v=a.animationState)===null||v===void 0||v.setActive("whileTap",!1),!XT()}function p(v,_){f()&&(r==null||r(v,_))}function g(v,_){f()&&(s==null||s(v,_))}return{onPointerDown:HN((v,_)=>{var x;if(h(),c.current)return;c.current=!0;const y={passive:!(n||r||s||o)};u.current=Ma(go(window,"pointerup",p,y),go(window,"pointercancel",g,y)),(x=a.animationState)===null||x===void 0||x.setActive("whileTap",!0),o==null||o(v),n==null||n(v,_)})}}const _te=(i,t,n,r,s,o)=>{const a=xte(t);return ee.createElement(i,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:n},LN(t,!1,!1)),a),{onUpdate:t.onInstanceUpdate}),vte(s,t,o)),yte(s,t,o)))};function xte(i){return ee.useMemo(()=>{const t={};for(const n in i){const r=i[n];bi(r)?t[n]=r.get():Array.isArray(r)&&r.includes(bi)&&(t[n]=r.map(vp))}return t},[])}function Ste(i,t){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(n[r[s]]=i[r[s]]);return n}const jk=(i,t)=>n=>(r,s)=>{r[i]===void 0&&(r[i]=new Y(t)),r[i].setComponent(n,s)},Ate=(i,t)=>n=>(r,s)=>{r[i]===void 0&&(r[i]=new uo(t));const o=r[i];o[n]=s},KI=i=>(t,n)=>{t[i]===void 0&&(t[i]=new Ke(n)),t[i].set(n)},FS=jk("scale",1),OS=jk("position",0),NS=Ate("rotation",0),ZI={x:OS(0),y:OS(1),z:OS(2),scale:(i,t)=>{i.scale===void 0&&(i.scale=new Y(1)),i.scale.set(t,t,t)},scaleX:FS(0),scaleY:FS(1),scaleZ:FS(2),rotateX:NS("x"),rotateY:NS("y"),rotateZ:NS("z"),color:KI("color"),specular:KI("specular")};function Ete(i,t,n){ZI[t]?ZI[t](i,n[t]):(t==="opacity"&&!i.transparent&&(i.transparent=!0),i[t]=n[t])}const nC=(i,t)=>n=>r=>{const s=r[i];return s?s[n]:t},kS=nC("position",0),e0=nC("scale",1),zS=nC("rotation",0),QI={x:kS("x"),y:kS("y"),z:kS("z"),scale:e0("x"),scaleX:e0("x"),scaleY:e0("y"),scaleZ:e0("z"),rotateX:zS("x"),rotateY:zS("y"),rotateZ:zS("z")};function Mte(i){if(i!==void 0)return i instanceof Ke?i.getStyle():i}function wte(i,t){return QI[t]?QI[t](i):Mte(i[t])||0}const Tte=["x","y","z"],qI={"position-x":"x","position-y":"y","position-z":"z","rotation-x":"rotateX","rotation-y":"rotateY","rotation-z":"rotateZ","scale-x":"scaleX","scale-y":"scaleY","scale-z":"scaleZ"},Yk=(i,t)=>{const n={};for(const r in i){const s=i[r];if(bi(s)||bi(t[r]))n[qI[r]||r]=s;else if(Array.isArray(s))for(let o=0;o<s.length;o++){const a=s[o];if(bi(a)||Array.isArray(t[r])&&bi(t[r][o])){const l=qI[r+"-"+Tte[o]];n[l]=a}}}return n},Cte=()=>({});class bte extends Wk{constructor(){super(...arguments),this.type="three"}readValueFromInstance(t,n){return wte(t,n)}getBaseTargetFromProps(){}sortInstanceNodePosition(t,n){return t.id-n.id}makeTargetAnimatableFromInstance(t){var{transition:n,transitionEnd:r}=t,s=Ste(t,["transition","transitionEnd"]);return Ek(this,s,{}),Object.assign(Object.assign({},s),{transition:n,transitionEnd:r})}removeValueFromRenderState(){}measureInstanceViewportBox(){return gi()}scrapeMotionValuesFromProps(t,n){return Yk(t,n)}build(t,n){for(const r in n)t[r]=n[r]}renderInstance(t,n){for(const r in n)Ete(t,r,n)}}const Rte=(i,t)=>new bte(t,{}),Pte=WT({scrapeMotionValuesFromProps:Yk,createRenderState:Cte}),Bte=Object.assign({},wk);function $I(i){return wN({Component:i,preloadedFeatures:Bte,useRender:_te,useVisualState:Pte,createVisualElement:Rte})}const GS=new Map,Yd=new Proxy($I,{get:(i,t)=>(!GS.has(t)&&GS.set(t,$I(t)),GS.get(t))});/**
 * postprocessing v6.34.1 build Wed Dec 27 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var Jk="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",on={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Kk="",ji="srgb",N_="srgb-linear",Ta={NONE:0,DEPTH:1,CONVOLUTION:2},gn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},iC={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Zk=Number(Jo.replace(/\D+/g,"")),Qk=Zk>=152,Ite=new Map([[pm,N_],[No,ji]]),Dte=new Map([[N_,pm],[ji,No]]);function _f(i){return i===null?null:Qk?i.outputColorSpace:Ite.get(i.outputEncoding)}function Rl(i,t){i!==null&&(Qk?i.colorSpace=t:i.encoding=Dte.get(t))}function Om(i){return Zk<154?i.replace("colorspace_fragment","encodings_fragment"):i}var Lte=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Ute="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Fte=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ote=class extends Ri{constructor(i=new qt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Nt(null),texelSize:new Nt(new qt),scale:new Nt(1),kernel:new Nt(0)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Lte,vertexShader:Ute}),this.fragmentShader=Om(this.fragmentShader),this.setTexelSize(i.x,i.y),this.kernelSize=iC.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return Fte[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t,i*.5,t*.5)}setSize(i,t){const n=1/i,r=1/t;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},Nte=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,qk=class extends Ri{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Nt(null),opacity:new Nt(1)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Nte,vertexShader:Jk}),this.fragmentShader=Om(this.fragmentShader)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},kte=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,zte="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Gte=class extends Ri{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Nt(null),normalBuffer:new Nt(null),texelSize:new Nt(new De)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kte,vertexShader:zte})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=Gl){this.depthBuffer=i,this.depthPacking=t}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,t){this.uniforms.texelSize.value.set(i,t)}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},Hte=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Vte="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Wte=class extends Ri{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Nt(null),texelSize:new Nt(new De)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Hte,vertexShader:Vte}),this.fragmentShader=Om(this.fragmentShader)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},Xte=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,jte="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Yte=class extends Ri{constructor(i,t,n,r,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Jo.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Nt(null),depthBuffer:new Nt(null),resolution:new Nt(new De),texelSize:new Nt(new De),cameraNear:new Nt(.3),cameraFar:new Nt(1e3),aspect:new Nt(1),time:new Nt(0)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,t=Gl){this.depthBuffer=i,this.depthPacking=t}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=Xte.replace(gn.FRAGMENT_HEAD,i.get(gn.FRAGMENT_HEAD)||"").replace(gn.FRAGMENT_MAIN_UV,i.get(gn.FRAGMENT_MAIN_UV)||"").replace(gn.FRAGMENT_MAIN_IMAGE,i.get(gn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=jte.replace(gn.VERTEX_HEAD,i.get(gn.VERTEX_HEAD)||"").replace(gn.VERTEX_MAIN_SUPPORT,i.get(gn.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Om(this.fragmentShader),this.needsUpdate=!0,this}setDefines(i){for(const t of i.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(i){for(const t of i.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(i){this.extensions={};for(const t of i)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof Jn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,t){const n=this.uniforms;n.resolution.value.set(i,t),n.texelSize.value.set(1/i,1/t),n.aspect.value=i/t}static get Section(){return gn}},Jte=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Kte=class extends Ri{constructor(i=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Jo.replace(/\D+/g,"")},uniforms:{inputBuffer:new Nt(null),threshold:new Nt(0),smoothing:new Nt(1),range:new Nt(null)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Jte,vertexShader:Jk}),this.colorOutput=i,this.luminanceRange=t}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},Zte=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Qte="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",qte=class extends Ri{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Nt(null),supportBuffer:new Nt(null),texelSize:new Nt(new De),radius:new Nt(.85)},blending:sr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Zte,vertexShader:Qte}),this.fragmentShader=Om(this.fragmentShader)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,t){this.uniforms.texelSize.value.set(1/i,1/t)}},$te=new gu,il=null;function ene(){if(il===null){const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);il=new It,il.setAttribute!==void 0?(il.setAttribute("position",new $t(i,3)),il.setAttribute("uv",new $t(t,2))):(il.addAttribute("position",new $t(i,3)),il.addAttribute("uv",new $t(t,2)))}return il}var xs=class $k{constructor(t="Pass",n=new Ll,r=$te){this.name=t,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let n=this.screen;n!==null?n.material=t:(n=new In(ene(),t),n.frustumCulled=!1,this.scene===null&&(this.scene=new Ll),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,n=Gl){}render(t,n,r,s,o){throw new Error("Render method not implemented!")}setSize(t,n){}initialize(t,n,r){}dispose(){for(const t of Object.keys(this)){const n=this[t];(n instanceof Kn||n instanceof ci||n instanceof Sn||n instanceof $k)&&this[t].dispose()}}},tne=class extends xs{constructor(i,t=!0){super("CopyPass"),this.fullscreenMaterial=new qk,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new Kn(1,1,{minFilter:ln,magFilter:ln,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,t,n,r,s){this.fullscreenMaterial.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){this.autoResize&&this.renderTarget.setSize(i,t)}initialize(i,t,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==or?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":_f(i)===ji&&Rl(this.renderTarget.texture,ji))}},nne=class extends xs{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,t,n,r,s){const o=i.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},eD=new Ke,e4=class extends xs{constructor(i=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,t,n){this.color=i,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,t,n,r,s){const o=this.overrideClearColor,a=this.overrideClearAlpha,l=i.getClearAlpha(),c=o!==null,u=a>=0;c?(i.getClearColor(eD),i.setClearColor(o,u?a:l)):u&&i.setClearAlpha(a),i.setRenderTarget(this.renderToScreen?null:t),i.clear(this.color,this.depth,this.stencil),c?i.setClearColor(eD,l):u&&i.setClearAlpha(l)}},t4=class extends xs{constructor(i,t,n=null){super("RenderPass",i,t),this.needsSwap=!1,this.clearPass=new e4,this.overrideMaterialManager=n===null?null:new nD(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const t=this.overrideMaterialManager;i!==null?t!==null?t.setMaterial(i):this.overrideMaterialManager=new nD(i):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,t,n,r,s){const o=this.scene,a=this.camera,l=this.selection,c=a.layers.mask,u=o.background,h=i.shadowMap.autoUpdate,f=this.renderToScreen?null:t;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(i,t),i.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,o,a):i.render(o,a),a.layers.mask=c,o.background=u,i.shadowMap.autoUpdate=h}},ine=class extends xs{constructor({normalBuffer:i=null,resolutionScale:t=.5,width:n=Sr.AUTO_SIZE,height:r=Sr.AUTO_SIZE,resolutionX:s=n,resolutionY:o=r}={}){super("DepthDownsamplingPass");const a=new Gte;a.normalBuffer=i,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Kn(1,1,{minFilter:Un,magFilter:Un,depthBuffer:!1,type:Yi}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new Sr(this,s,o,t);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,t=Gl){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t}render(i,t,n,r,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const n=this.resolution;n.setBaseSize(i,t),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(i,t)}initialize(i,t,n){const r=i.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function tD(i,t,n){for(const r of t){const s="$1"+i+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const a of n.entries())a[1]!==null&&n.set(a[0],a[1].replace(o,s))}}function rne(i,t,n){let r=t.getFragmentShader(),s=t.getVertexShader();const o=r!==void 0&&/mainImage/.test(r),a=r!==void 0&&/mainUv/.test(r);if(n.attributes|=t.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${t.name})`);if(a&&n.attributes&Ta.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!o&&!a)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=n.shaderParts;let u=c.get(gn.FRAGMENT_HEAD)||"",h=c.get(gn.FRAGMENT_MAIN_UV)||"",f=c.get(gn.FRAGMENT_MAIN_IMAGE)||"",p=c.get(gn.VERTEX_HEAD)||"",g=c.get(gn.VERTEX_MAIN_SUPPORT)||"";const v=new Set,_=new Set;if(a&&(h+=`	${i}MainUv(UV);
`,n.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const S=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);g+=`	${i}MainSupport(`,g+=S?`vUv);
`:`);
`;for(const A of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const M of A[1].split(/\s*,\s*/))n.varyings.add(M),v.add(M),_.add(M);for(const A of s.matchAll(l))_.add(A[1])}for(const S of r.matchAll(l))_.add(S[1]);for(const S of t.defines.keys())_.add(S.replace(/\([\w\s,]*\)/g,""));for(const S of t.uniforms.keys())_.add(S);_.delete("while"),_.delete("for"),_.delete("if"),t.uniforms.forEach((S,A)=>n.uniforms.set(i+A.charAt(0).toUpperCase()+A.slice(1),S)),t.defines.forEach((S,A)=>n.defines.set(i+A.charAt(0).toUpperCase()+A.slice(1),S));const x=new Map([["fragment",r],["vertex",s]]);tD(i,_,n.defines),tD(i,_,x),r=x.get("fragment"),s=x.get("vertex");const y=t.blendMode;if(n.blendModes.set(y.blendFunction,y),o){t.inputColorSpace!==null&&t.inputColorSpace!==n.colorSpace&&(f+=t.inputColorSpace===ji?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),t.outputColorSpace!==Kk?n.colorSpace=t.outputColorSpace:t.inputColorSpace!==null&&(n.colorSpace=t.inputColorSpace);const S=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;f+=`${i}MainImage(color0, UV, `,n.attributes&Ta.DEPTH&&S.test(r)&&(f+="depth, ",n.readDepth=!0),f+=`color1);
	`;const A=i+"BlendOpacity";n.uniforms.set(A,y.opacity),f+=`color0 = blend${y.blendFunction}(color0, color1, ${A});

	`,u+=`uniform float ${A};

`}if(u+=r+`
`,s!==null&&(p+=s+`
`),c.set(gn.FRAGMENT_HEAD,u),c.set(gn.FRAGMENT_MAIN_UV,h),c.set(gn.FRAGMENT_MAIN_IMAGE,f),c.set(gn.VERTEX_HEAD,p),c.set(gn.VERTEX_MAIN_SUPPORT,g),t.extensions!==null)for(const S of t.extensions)n.extensions.add(S)}}var sne=class extends xs{constructor(i,...t){super("EffectPass"),this.fullscreenMaterial=new Yte(null,null,null,i),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const t of this.effects)t.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const t of this.effects)t.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const t=this.fullscreenMaterial;t.dithering=i,t.needsUpdate=!0}setEffects(i){for(const t of this.effects)t.removeEventListener("change",this.listener);this.effects=i.sort((t,n)=>n.attributes-t.attributes);for(const t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){const i=new pne;let t=0;for(const a of this.effects)if(a.blendMode.blendFunction===on.DST)i.attributes|=a.getAttributes()&Ta.DEPTH;else{if(i.attributes&a.getAttributes()&Ta.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);rne("e"+t++,a,i)}let n=i.shaderParts.get(gn.FRAGMENT_HEAD),r=i.shaderParts.get(gn.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(gn.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const a of i.blendModes.values())n+=a.getShaderCode().replace(o,`blend${a.blendFunction}`)+`
`;i.attributes&Ta.DEPTH?(i.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===ji&&(r+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(gn.FRAGMENT_HEAD,n),i.shaderParts.set(gn.FRAGMENT_MAIN_IMAGE,r),i.shaderParts.set(gn.FRAGMENT_MAIN_UV,s);for(const[a,l]of i.shaderParts)l!==null&&i.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=t===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,t=Gl){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(i,t)}render(i,t,n,r,s){for(const o of this.effects)o.update(i,t,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=t.texture,o.time+=r*this.timeScale,i.setRenderTarget(this.renderToScreen?null:n),i.render(this.scene,this.camera)}}setSize(i,t){this.fullscreenMaterial.setSize(i,t);for(const n of this.effects)n.setSize(i,t)}initialize(i,t,n){this.renderer=i;for(const r of this.effects)r.initialize(i,t,n);this.updateMaterial(),n!==void 0&&n!==or&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},one=class extends xs{constructor({kernelSize:i=iC.MEDIUM,resolutionScale:t=.5,width:n=Sr.AUTO_SIZE,height:r=Sr.AUTO_SIZE,resolutionX:s=n,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Kn(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Sr(this,s,o,t);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new Ote,this._blurMaterial.kernelSize=i,this.copyMaterial=new qk}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,n,r,s){const o=this.scene,a=this.camera,l=this.renderTargetA,c=this.renderTargetB,u=this.blurMaterial,h=u.kernelSequence;let f=t;this.fullscreenMaterial=u;for(let p=0,g=h.length;p<g;++p){const v=p&1?c:l;u.kernel=h[p],u.inputBuffer=f.texture,i.setRenderTarget(v),i.render(o,a),f=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,i.setRenderTarget(this.renderToScreen?null:n),i.render(o,a)}setSize(i,t){const n=this.resolution;n.setBaseSize(i,t);const r=n.width,s=n.height;this.renderTargetA.setSize(r,s),this.renderTargetB.setSize(r,s),this.blurMaterial.setSize(i,t)}initialize(i,t,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==or?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):_f(i)===ji&&(Rl(this.renderTargetA.texture,ji),Rl(this.renderTargetB.texture,ji)))}static get AUTO_SIZE(){return Sr.AUTO_SIZE}},ane=class extends xs{constructor({renderTarget:i,luminanceRange:t,colorOutput:n,resolutionScale:r=1,width:s=Sr.AUTO_SIZE,height:o=Sr.AUTO_SIZE,resolutionX:a=s,resolutionY:l=o}={}){super("LuminancePass"),this.fullscreenMaterial=new Kte(n,t),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Kn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new Sr(this,a,l,r);c.addEventListener("change",u=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,t,n,r,s){const o=this.fullscreenMaterial;o.inputBuffer=t.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,t){const n=this.resolution;n.setBaseSize(i,t),this.renderTarget.setSize(n.width,n.height)}initialize(i,t,n){n!==void 0&&n!==or&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},lne=class extends xs{constructor(i,t){super("MaskPass",i,t),this.needsSwap=!1,this.clearPass=new e4(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,t,n,r,s){const o=i.getContext(),a=i.state.buffers,l=this.scene,c=this.camera,u=this.clearPass,h=this.inverted?0:1,f=1-h;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,h,4294967295),a.stencil.setClear(f),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(i,null):(u.render(i,t),u.render(i,n))),this.renderToScreen?(i.setRenderTarget(null),i.render(l,c)):(i.setRenderTarget(t),i.render(l,c),i.setRenderTarget(n),i.render(l,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},cne=class extends xs{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Kn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Wte,this.upsamplingMaterial=new qte,this.resolution=new De}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<i;++n){const r=t.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(t);for(let n=1,r=i-1;n<r;++n){const s=t.clone();s.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,t,n,r,s){const{scene:o,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:c}=this,{downsamplingMipmaps:u,upsamplingMipmaps:h}=this;let f=t;this.fullscreenMaterial=l;for(let p=0,g=u.length;p<g;++p){const v=u[p];l.setSize(f.width,f.height),l.inputBuffer=f.texture,i.setRenderTarget(v),i.render(o,a),f=v}this.fullscreenMaterial=c;for(let p=h.length-1;p>=0;--p){const g=h[p];c.setSize(f.width,f.height),c.inputBuffer=f.texture,c.supportBuffer=u[p].texture,i.setRenderTarget(g),i.render(o,a),f=g}}setSize(i,t){const n=this.resolution;n.set(i,t);let r=n.width,s=n.height;for(let o=0,a=this.downsamplingMipmaps.length;o<a;++o)r=Math.round(r*.5),s=Math.round(s*.5),this.downsamplingMipmaps[o].setSize(r,s),o<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[o].setSize(r,s)}initialize(i,t,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of r)s.texture.type=n;if(n!==or)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(_f(i)===ji)for(const s of r)Rl(s.texture,ji)}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},une=class extends xs{constructor(i,t,{renderTarget:n,resolutionScale:r=1,width:s=Sr.AUTO_SIZE,height:o=Sr.AUTO_SIZE,resolutionX:a=s,resolutionY:l=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new t4(i,t,new zw);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const u=c.getClearPass();u.overrideClearColor=new Ke(7829503),u.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Kn(1,1,{minFilter:Un,magFilter:Un}),this.renderTarget.texture.name="NormalPass.Target");const h=this.resolution=new Sr(this,a,l,r);h.addEventListener("change",f=>this.setSize(h.baseWidth,h.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,t,n,r,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,o,o)}setSize(i,t){const n=this.resolution;n.setBaseSize(i,t),this.renderTarget.setSize(n.width,n.height)}},HS=1/1e3,hne=1e3,fne=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*HS}get fixedDelta(){return this._fixedDelta*HS}set fixedDelta(i){this._fixedDelta=i*hne}get elapsed(){return this._elapsed*HS}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},dne=class{constructor(t=null,{depthBuffer:n=!0,stencilBuffer:r=!1,multisampling:s=0,frameBufferType:o}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,r,o,s),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new tne,this.depthTexture=null,this.passes=[],this.timer=new fne,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const n=this.inputBuffer,r=this.multisampling;r>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const n=t.getSize(new De),r=t.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;s===or&&_f(t)===ji&&(Rl(this.inputBuffer.texture,ji),Rl(this.outputBuffer.texture,ji),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(n.width,n.height);for(const o of this.passes)o.initialize(t,r,s)}}replaceRenderer(t,n=!0){const r=this.renderer,s=r.domElement.parentNode;return this.setRenderer(t),n&&s!==null&&(s.removeChild(r.domElement),s.appendChild(t.domElement)),r}createDepthTexture(){const t=this.depthTexture=new ym;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=Dl,t.type=Aa):t.type=Do,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,n,r,s){const o=this.renderer,a=o===null?new De:o.getDrawingBufferSize(new De),l={minFilter:ln,magFilter:ln,stencilBuffer:n,depthBuffer:t,type:r},c=new Kn(a.width,a.height,l);return s>0&&(c.ignoreDepthForMultisampleCopy=!1,c.samples=s),r===or&&_f(o)===ji&&Rl(c.texture,ji),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(t){for(const n of this.passes)n.mainScene=t}setMainCamera(t){for(const n of this.passes)n.mainCamera=t}addPass(t,n){const r=this.passes,s=this.renderer,o=s.getDrawingBufferSize(new De),a=s.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(t.setRenderer(s),t.setSize(o.width,o.height),t.initialize(s,a,l),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?r.splice(n,0,t):r.push(t),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(t of r)t.setDepthTexture(c)}else t.setDepthTexture(this.depthTexture)}removePass(t){const n=this.passes,r=n.indexOf(t);if(r!==-1&&n.splice(r,1).length>0){if(this.depthTexture!==null){const a=(c,u)=>c||u.needsDepthTexture;n.reduce(a,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===n.length&&(t.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const n=this.renderer,r=this.copyPass;let s=this.inputBuffer,o=this.outputBuffer,a=!1,l,c,u;t===void 0&&(this.timer.update(),t=this.timer.delta);for(const h of this.passes)h.enabled&&(h.render(n,s,o,t,a),h.needsSwap&&(a&&(r.renderToScreen=h.renderToScreen,l=n.getContext(),c=n.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),r.render(n,s,o,t,a),c.setFunc(l.EQUAL,1,4294967295)),u=s,s=o,o=u),h instanceof lne?a=!0:h instanceof nne&&(a=!1))}setSize(t,n,r){const s=this.renderer,o=s.getSize(new De);(t===void 0||n===void 0)&&(t=o.width,n=o.height),(o.width!==t||o.height!==n)&&s.setSize(t,n,r);const a=s.getDrawingBufferSize(new De);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const l of this.passes)l.setSize(a.width,a.height)}reset(){const t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},pne=class{constructor(){this.shaderParts=new Map([[gn.FRAGMENT_HEAD,null],[gn.FRAGMENT_MAIN_UV,null],[gn.FRAGMENT_MAIN_IMAGE,null],[gn.VERTEX_HEAD,null],[gn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Ta.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=N_}},VS=!1,nD=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let n;if(t.material.flatShading)switch(t.material.side){case Li:n=this.materialsFlatShadedDoubleSide;break;case Ci:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(t.material.side){case Li:n=this.materialsDoubleSide;break;case Ci:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=n[2]:t.isInstancedMesh?t.material=n[1]:t.material=n[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof Ri))return i.clone();const t=i.uniforms,n=new Map;for(const s in t){const o=t[s].value;o.isRenderTargetTexture&&(t[s].value=null,n.set(s,o))}const r=i.clone();for(const s of n)t[s[0]].value=s[1],r.uniforms[s[0]].value=s[1];return r}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const t=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const n of t)n.uniforms=Object.assign({},i.uniforms),n.side=Xs;t[2].skinning=!0,this.materialsBackSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},i.uniforms),r.side=Ci,r}),this.materialsDoubleSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},i.uniforms),r.side=Li,r}),this.materialsFlatShaded=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},i.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},i.uniforms),r.flatShading=!0,r.side=Ci,r}),this.materialsFlatShadedDoubleSide=t.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},i.uniforms),r.flatShading=!0,r.side=Li,r})}}render(i,t,n){const r=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,VS){const s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),i.render(t,n);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=t.overrideMaterial;t.overrideMaterial=this.material,i.render(t,n),t.overrideMaterial=s}i.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of i)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return VS}static set workaroundEnabled(i){VS=i}},rl=-1,Sr=class extends js{constructor(i,t=rl,n=rl,r=1){super(),this.resizable=i,this.baseSize=new De(1,1),this.preferredSize=new De(t,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new De,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,t=this.preferredSize,n=this.effectiveSize,r=this.scale;t.width!==rl?n.width=t.width:t.height!==rl?n.width=Math.round(t.height*(i.width/Math.max(i.height,1))):n.width=Math.round(i.width*r),t.height!==rl?n.height=t.height:t.width!==rl?n.height=Math.round(t.width/Math.max(i.width/Math.max(i.height,1),1)):n.height=Math.round(i.height*r)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(rl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,t){(this.baseSize.width!==i||this.baseSize.height!==t)&&(this.baseSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,t){(this.preferredSize.width!==i||this.preferredSize.height!==t)&&(this.preferredSize.set(i,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return rl}},mne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",gne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",vne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",yne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",_ne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",xne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Sne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Ane="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Ene="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Mne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",wne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Tne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Cne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",bne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Rne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Pne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Bne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Ine="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Dne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Lne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Une="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Fne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",One="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Nne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",kne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",zne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Gne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Hne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",Vne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Wne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Xne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",jne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Yne=new Map([[on.ADD,mne],[on.ALPHA,gne],[on.AVERAGE,vne],[on.COLOR,yne],[on.COLOR_BURN,_ne],[on.COLOR_DODGE,xne],[on.DARKEN,Sne],[on.DIFFERENCE,Ane],[on.DIVIDE,Ene],[on.DST,null],[on.EXCLUSION,Mne],[on.HARD_LIGHT,wne],[on.HARD_MIX,Tne],[on.HUE,Cne],[on.INVERT,bne],[on.INVERT_RGB,Rne],[on.LIGHTEN,Pne],[on.LINEAR_BURN,Bne],[on.LINEAR_DODGE,Ine],[on.LINEAR_LIGHT,Dne],[on.LUMINOSITY,Lne],[on.MULTIPLY,Une],[on.NEGATION,Fne],[on.NORMAL,One],[on.OVERLAY,Nne],[on.PIN_LIGHT,kne],[on.REFLECT,zne],[on.SATURATION,Gne],[on.SCREEN,Hne],[on.SOFT_LIGHT,Vne],[on.SRC,Wne],[on.SUBTRACT,Xne],[on.VIVID_LIGHT,jne]]),Jne=class extends js{constructor(i,t=1){super(),this._blendFunction=i,this.opacity=new Nt(t)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return Yne.get(this.blendFunction)}},fM=class extends js{constructor(i,t,{attributes:n=Ta.NONE,blendFunction:r=on.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=i,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=l,this.defines=s,this.uniforms=o,this.extensions=a,this.blendMode=new Jne(r),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=N_,this._outputColorSpace=Kk}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,t=Gl){}update(i,t,n){}setSize(i,t){}initialize(i,t,n){}dispose(){for(const i of Object.keys(this)){const t=this[i];(t instanceof Kn||t instanceof ci||t instanceof Sn||t instanceof xs)&&this[i].dispose()}}},Kne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Zne=class extends fM{constructor({blendFunction:i=on.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:s=1,radius:o=.85,levels:a=8,kernelSize:l=iC.LARGE,resolutionScale:c=.5,width:u=Sr.AUTO_SIZE,height:h=Sr.AUTO_SIZE,resolutionX:f=u,resolutionY:p=h}={}){super("BloomEffect",Kne,{blendFunction:i,uniforms:new Map([["map",new Nt(null)],["intensity",new Nt(s)]])}),this.renderTarget=new Kn(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new one({kernelSize:l}),this.luminancePass=new ane({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new cne,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=o,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const g=this.resolution=new Sr(this,f,p,c);g.addEventListener("change",v=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,t,n){const r=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,t):this.blurPass.render(i,t,r)}setSize(i,t){const n=this.resolution;n.setBaseSize(i,t),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(i,t),this.mipmapBlurPass.setSize(i,t)}initialize(i,t,n){this.blurPass.initialize(i,t,n),this.luminancePass.initialize(i,t,n),this.mipmapBlurPass.initialize(i,t,n),n!==void 0&&(this.renderTarget.texture.type=n,_f(i)===ji&&Rl(this.renderTarget.texture,ji))}};const Qne=ee.createContext(null),iD=i=>(i.getAttributes()&Ta.CONVOLUTION)===Ta.CONVOLUTION,qne=Rn.memo(ee.forwardRef(({children:i,camera:t,scene:n,resolutionScale:r,enabled:s=!0,renderPriority:o=1,autoClear:a=!0,depthBuffer:l,disableNormalPass:c,stencilBuffer:u,multisampling:h=8,frameBufferType:f=Ji},p)=>{const{gl:g,scene:v,camera:_,size:x}=jn(),y=n||v,S=t||_,[A,M,C]=ee.useMemo(()=>{const P=RJ(),B=new dne(g,{depthBuffer:l,stencilBuffer:u,multisampling:h>0&&P?h:0,frameBufferType:f});B.addPass(new t4(y,S));let O=null,N=null;return c||(N=new une(y,S),N.enabled=!1,B.addPass(N),r!==void 0&&P&&(O=new ine({normalBuffer:N.texture,resolutionScale:r}),O.enabled=!1,B.addPass(O))),[B,N,O]},[S,g,l,u,h,f,y,c,r]);ee.useEffect(()=>A==null?void 0:A.setSize(x.width,x.height),[A,x]),Bf((P,B)=>{if(s){const O=g.autoClear;g.autoClear=a,u&&!a&&g.clearStencil(),A.render(B),g.autoClear=O}},s?o:0);const T=ee.useRef(null),R=gX(T);ee.useLayoutEffect(()=>{const P=[];if(T.current&&R.current&&A){const B=R.current.objects;for(let O=0;O<B.length;O++){const N=B[O];if(N instanceof fM){const ne=[N];if(!iD(N)){let j=null;for(;(j=B[O+1])instanceof fM&&!iD(j);)ne.push(j),O++}const z=new sne(S,...ne);P.push(z)}else N instanceof xs&&P.push(N)}for(const O of P)A==null||A.addPass(O);M&&(M.enabled=!0),C&&(C.enabled=!0)}return()=>{for(const B of P)A==null||A.removePass(B);M&&(M.enabled=!1),C&&(C.enabled=!1)}},[A,i,S,M,C,R]);const I=ee.useMemo(()=>({composer:A,normalPass:M,downSamplingPass:C,resolutionScale:r,camera:S,scene:y}),[A,M,C,r,S,y]);return ee.useImperativeHandle(p,()=>A,[A]),Me.jsx(Qne.Provider,{value:I,children:Me.jsx("group",{ref:T,children:i})})}));let $ne=0;const rD=new WeakMap,eie=(i,t)=>Rn.forwardRef(function({blendFunction:r=t==null?void 0:t.blendFunction,opacity:s=t==null?void 0:t.opacity,...o},a){let l=rD.get(i);if(!l){const h=`@react-three/postprocessing/${i.name}-${$ne++}`;Mm({[h]:i}),rD.set(i,l=h)}const c=jn(h=>h.camera),u=Rn.useMemo(()=>{var h,f;return[...(h=t==null?void 0:t.args)!=null?h:[],...(f=o.args)!=null?f:[{...t,...o}]]},[JSON.stringify(o)]);return Me.jsx(l,{camera:c,"blendMode-blendFunction":r,"blendMode-opacity-value":s,...o,ref:a,args:u})}),tie=eie(Zne,{blendFunction:on.ADD});function nie(i){const t=ee.useRef(),{nodes:n,materials:r,animations:s}=Au("models/room.glb");pN(s,t);const o=new Ur({color:"#007FFF"}),a=PT("textures/Baked.jpg");a.flipY=!1,a.colorSpace=wi;const l=new vu({map:a});return Me.jsxs("group",{...i,dispose:null,children:[Me.jsxs(Yd.group,{name:"Bonsai",position:[-1.226,1.043,.917],whileHover:{scale:1.1},children:[Me.jsx("mesh",{name:"mesh430673059",geometry:n.mesh430673059.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_1",geometry:n.mesh430673059_1.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_2",geometry:n.mesh430673059_2.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_3",geometry:n.mesh430673059_3.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_4",geometry:n.mesh430673059_4.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_5",geometry:n.mesh430673059_5.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_6",geometry:n.mesh430673059_6.geometry,material:l}),Me.jsx("mesh",{name:"mesh430673059_7",geometry:n.mesh430673059_7.geometry,material:l})]}),Me.jsxs("group",{name:"Chair",position:[1.148,.522,-2.031],rotation:[-Math.PI,.052,-Math.PI],children:[Me.jsx("mesh",{name:"Node-Mesh",geometry:n["Node-Mesh"].geometry,material:l}),Me.jsx("mesh",{name:"Node-Mesh_1",geometry:n["Node-Mesh_1"].geometry,material:l}),Me.jsx("mesh",{name:"Node-Mesh_2",geometry:n["Node-Mesh_2"].geometry,material:l}),Me.jsx("mesh",{name:"Node-Mesh_3",geometry:n["Node-Mesh_3"].geometry,material:l})]}),Me.jsx("mesh",{name:"ComputerMouse_mesh",geometry:n.ComputerMouse_mesh.geometry,material:l,position:[1.743,1.52,-3.101],rotation:[-3.14,-.029,-3.132],scale:.057}),Me.jsxs("group",{name:"FlatTv",position:[-1.508,2.427,-3.88],children:[Me.jsx("mesh",{name:"mesh1257628551",geometry:n.mesh1257628551.geometry,material:l}),Me.jsx("mesh",{name:"mesh1257628551_1",geometry:n.mesh1257628551_1.geometry,material:l}),Me.jsx("mesh",{name:"mesh1257628551_2",geometry:n.mesh1257628551_2.geometry,material:l}),Me.jsx("mesh",{name:"mesh1257628551_3",geometry:n.mesh1257628551_3.geometry,material:l}),Me.jsx("mesh",{name:"mesh1257628551_4",geometry:n.mesh1257628551_4.geometry,material:l})]}),Me.jsxs("group",{name:"FlowerPot1",position:[-3.388,2.821,-2.499],children:[Me.jsx("mesh",{name:"FlowerPot2_1",geometry:n.FlowerPot2_1.geometry,material:l}),Me.jsx("mesh",{name:"FlowerPot2_2",geometry:n.FlowerPot2_2.geometry,material:l}),Me.jsx("mesh",{name:"FlowerPot2_3",geometry:n.FlowerPot2_3.geometry,material:l}),Me.jsx("mesh",{name:"FlowerPot2_4",geometry:n.FlowerPot2_4.geometry,material:l})]}),Me.jsxs("group",{name:"FlowerPot2",position:[-3.461,2.821,2.348],children:[Me.jsx("mesh",{name:"FlowerPot2001",geometry:n.FlowerPot2001.geometry,material:l}),Me.jsx("mesh",{name:"FlowerPot2001_1",geometry:n.FlowerPot2001_1.geometry,material:l}),Me.jsx("mesh",{name:"FlowerPot2001_2",geometry:n.FlowerPot2001_2.geometry,material:l}),Me.jsx("mesh",{name:"FlowerPot2001_3",geometry:n.FlowerPot2001_3.geometry,material:l})]}),Me.jsxs("group",{name:"Keyboard",position:[1.036,1.589,-3.081],rotation:[0,.374,0],children:[Me.jsx("mesh",{name:"mesh2146178072",geometry:n.mesh2146178072.geometry,material:l}),Me.jsx("mesh",{name:"mesh2146178072_1",geometry:n.mesh2146178072_1.geometry,material:l}),Me.jsx("mesh",{name:"mesh2146178072_2",geometry:n.mesh2146178072_2.geometry,material:l}),Me.jsx("mesh",{name:"mesh2146178072_3",geometry:n.mesh2146178072_3.geometry,material:l})]}),Me.jsxs("group",{name:"MacBook",position:[2.34,1.591,-3.148],children:[Me.jsx("mesh",{name:"mesh256948792",geometry:n.mesh256948792.geometry,material:l}),Me.jsx("mesh",{name:"mesh256948792_1",geometry:n.mesh256948792_1.geometry,material:l}),Me.jsx("mesh",{name:"mesh256948792_2",geometry:n.mesh256948792_2.geometry,material:l}),Me.jsx("mesh",{name:"mesh256948792_3",geometry:n.mesh256948792_3.geometry,material:l}),Me.jsx("mesh",{name:"mesh256948792_4",geometry:n.mesh256948792_4.geometry,material:l})]}),Me.jsxs("group",{name:"Monitor1",position:[.368,1.76,-3.586],rotation:[0,-1.115,0],children:[Me.jsx("mesh",{name:"mesh941242678",geometry:n.mesh941242678.geometry,material:o}),Me.jsx("mesh",{name:"mesh941242678_1",geometry:n.mesh941242678_1.geometry,material:l})]}),Me.jsxs("group",{name:"Monitor2",position:[1.609,1.76,-3.712],rotation:[Math.PI,-1.325,Math.PI],children:[Me.jsx("mesh",{name:"mesh941242678001",geometry:n.mesh941242678001.geometry,material:l}),Me.jsx("mesh",{name:"mesh941242678001_1",geometry:n.mesh941242678001_1.geometry,material:o})]}),Me.jsxs("group",{name:"Plant",position:[3.409,.313,-3.244],rotation:[-Math.PI/2,0,0],children:[Me.jsx("mesh",{name:"Plant2",geometry:n.Plant2.geometry,material:l}),Me.jsx("mesh",{name:"Plant2_1",geometry:n.Plant2_1.geometry,material:l}),Me.jsx("mesh",{name:"Plant2_2",geometry:n.Plant2_2.geometry,material:l})]}),Me.jsxs("group",{name:"Sofa",position:[-1.843,.022,3.081],rotation:[-Math.PI/2,0,-3.14],children:[Me.jsx("mesh",{name:"Sofa3",geometry:n.Sofa3.geometry,material:l}),Me.jsx("mesh",{name:"Sofa3_1",geometry:n.Sofa3_1.geometry,material:l})]}),Me.jsxs("group",{name:"Table",position:[1.183,.051,-3.147],rotation:[-Math.PI/2,0,0],children:[Me.jsx("mesh",{name:"Desk",geometry:n.Desk.geometry,material:l}),Me.jsx("mesh",{name:"Desk_1",geometry:n.Desk_1.geometry,material:l})]}),Me.jsx("mesh",{name:"Table_large_circular",geometry:n.Table_large_circular.geometry,material:l,position:[-1.235,0,.917],scale:148.865}),Me.jsx("mesh",{name:"Plane_1",geometry:n.Plane_1.geometry,material:l}),Me.jsx("mesh",{name:"Plane_2",geometry:n.Plane_2.geometry,material:l}),Me.jsx("mesh",{name:"Plane_3",geometry:n.Plane_3.geometry,material:l}),Me.jsx("mesh",{name:"Plane_4",geometry:n.Plane_4.geometry,material:l})]})}Au.preload("models/room.glb");const iie=Math.PI/180;function t0(i){return i*iie}function sD(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function oD(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sD(Object(n),!0).forEach(function(r){n4(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function b0(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b0=function(t){return typeof t}:b0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b0(i)}function n4(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function rie(i,t){return sie(i)||oie(i,t)||aie(i,t)||lie()}function sie(i){if(Array.isArray(i))return i}function oie(i,t){var n=i&&(typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"]);if(n!=null){var r=[],s=!0,o=!1,a,l;try{for(n=n.call(i);!(s=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));s=!0);}catch(c){o=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function aie(i,t){if(i){if(typeof i=="string")return aD(i,t);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aD(i,t)}}function aD(i,t){(t==null||t>i.length)&&(t=i.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=i[n];return r}function lie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cie=function(t){var n=Rn.useRef(t);return Rn.useEffect(function(){n.current=t},[t]),n.current},Ty=function(t){return t!==null&&b0(t)==="object"},lD="[object Object]",uie=function i(t,n){if(!Ty(t)||!Ty(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var o=Object.prototype.toString.call(t)===lD,a=Object.prototype.toString.call(n)===lD;if(o!==a)return!1;if(!o&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},h=0;h<l.length;h+=1)u[l[h]]=!0;for(var f=0;f<c.length;f+=1)u[c[f]]=!0;var p=Object.keys(u);if(p.length!==l.length)return!1;var g=t,v=n,_=function(y){return i(g[y],v[y])};return p.every(_)},hie=function(t,n,r){return Ty(t)?Object.keys(t).reduce(function(s,o){var a=!Ty(n)||!uie(t[o],n[o]);return r.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):a?oD(oD({},s||{}),{},n4({},o,t[o])):s},null):null},i4=Rn.createContext(null);i4.displayName="ElementsContext";var fie=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},r4=Rn.createContext(null);r4.displayName="CartElementContext";var die=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t};mi.any,mi.object;var cD=function(t){var n=Rn.useContext(i4);return fie(n,t)},uD=function(t){var n=Rn.useContext(r4);return die(n,t)};mi.func.isRequired;var Br=function(t,n,r){var s=!!r,o=Rn.useRef(r);Rn.useEffect(function(){o.current=r},[r]),Rn.useEffect(function(){if(!s||!t)return function(){};var a=function(){o.current&&o.current.apply(o,arguments)};return t.on(n,a),function(){t.off(n,a)}},[s,n,t,o])},pie=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Pi=function(t,n){var r="".concat(pie(t),"Element"),s=function(c){var u=c.id,h=c.className,f=c.options,p=f===void 0?{}:f,g=c.onBlur,v=c.onFocus,_=c.onReady,x=c.onChange,y=c.onEscape,S=c.onClick,A=c.onLoadError,M=c.onLoaderStart,C=c.onNetworksChange,T=c.onCheckout,R=c.onLineItemClick,I=c.onConfirm,P=c.onCancel,B=c.onShippingAddressChange,O=c.onShippingRateChange,N=cD("mounts <".concat(r,">")),ne=N.elements,z=Rn.useState(null),j=rie(z,2),q=j[0],he=j[1],H=Rn.useRef(null),X=Rn.useRef(null),K=uD("mounts <".concat(r,">")),k=K.setCart,Z=K.setCartState;Br(q,"blur",g),Br(q,"focus",v),Br(q,"escape",y),Br(q,"click",S),Br(q,"loaderror",A),Br(q,"loaderstart",M),Br(q,"networkschange",C),Br(q,"lineitemclick",R),Br(q,"confirm",I),Br(q,"cancel",P),Br(q,"shippingaddresschange",B),Br(q,"shippingratechange",O);var Q;t==="cart"?Q=function(Se){Z(Se),_&&_(Se)}:_&&(t==="payButton"?Q=_:Q=function(){_(q)}),Br(q,"ready",Q);var se=t==="cart"?function(ue){Z(ue),x&&x(ue)}:x;Br(q,"change",se);var le=t==="cart"?function(ue){Z(ue),T&&T(ue)}:T;Br(q,"checkout",le),Rn.useLayoutEffect(function(){if(H.current===null&&ne&&X.current!==null){var ue=ne.create(t,p);t==="cart"&&k&&k(ue),H.current=ue,he(ue),ue.mount(X.current)}},[ne,p,k]);var fe=cie(p);return Rn.useEffect(function(){if(H.current){var ue=hie(p,fe,["paymentRequest"]);ue&&H.current.update(ue)}},[p,fe]),Rn.useLayoutEffect(function(){return function(){H.current&&(H.current.destroy(),H.current=null)}},[]),Rn.createElement("div",{id:u,className:h,ref:X})},o=function(c){cD("mounts <".concat(r,">")),uD("mounts <".concat(r,">"));var u=c.id,h=c.className;return Rn.createElement("div",{id:u,className:h})},a=n?o:s;return a.propTypes={id:mi.string,className:mi.string,onChange:mi.func,onBlur:mi.func,onFocus:mi.func,onReady:mi.func,onEscape:mi.func,onClick:mi.func,onLoadError:mi.func,onLoaderStart:mi.func,onNetworksChange:mi.func,onCheckout:mi.func,onLineItemClick:mi.func,onConfirm:mi.func,onCancel:mi.func,onShippingAddressChange:mi.func,onShippingRateChange:mi.func,options:mi.object},a.displayName=r,a.__elementType=t,a},Bi=typeof window>"u";Pi("auBankAccount",Bi);var mie=Pi("card",Bi);Pi("cardNumber",Bi);Pi("cardExpiry",Bi);Pi("cardCvc",Bi);Pi("fpxBank",Bi);Pi("iban",Bi);Pi("idealBank",Bi);Pi("p24Bank",Bi);Pi("epsBank",Bi);Pi("payment",Bi);Pi("payButton",Bi);Pi("paymentRequestButton",Bi);Pi("linkAuthentication",Bi);Pi("address",Bi);Pi("shippingAddress",Bi);Pi("cart",Bi);Pi("paymentMethodMessaging",Bi);Pi("affirmMessage",Bi);Pi("afterpayClearpayMessage",Bi);var rC=Object.defineProperty,gie=Object.getOwnPropertyDescriptor,vie=Object.getOwnPropertyNames,yie=Object.prototype.hasOwnProperty,_ie=(i,t)=>{for(var n in t)rC(i,n,{get:t[n],enumerable:!0})},xie=(i,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of vie(t))!yie.call(i,s)&&s!==n&&rC(i,s,{get:()=>t[s],enumerable:!(r=gie(t,s))||r.enumerable});return i},Sie=i=>xie(rC({},"__esModule",{value:!0}),i),hD=(i,t,n)=>new Promise((r,s)=>{var o=c=>{try{l(n.next(c))}catch(u){s(u)}},a=c=>{try{l(n.throw(c))}catch(u){s(u)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,a);l((n=n.apply(i,t)).next())}),s4={};_ie(s4,{SubmissionError:()=>Bc,appendExtraData:()=>R0,createClient:()=>o4,getDefaultClient:()=>Hie,isSubmissionError:()=>Bie});var dM=Sie(s4),_l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Aie=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;function Eie(i){i=String(i);for(var t,n,r,s,o="",a=0,l=i.length%3;a<i.length;){if((n=i.charCodeAt(a++))>255||(r=i.charCodeAt(a++))>255||(s=i.charCodeAt(a++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");t=n<<16|r<<8|s,o+=_l.charAt(t>>18&63)+_l.charAt(t>>12&63)+_l.charAt(t>>6&63)+_l.charAt(t&63)}return l?o.slice(0,l-3)+"===".substring(l):o}function Mie(i){if(i=String(i).replace(/[\t\n\f\r ]+/g,""),!Aie.test(i))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");i+="==".slice(2-(i.length&3));for(var t,n="",r,s,o=0;o<i.length;)t=_l.indexOf(i.charAt(o++))<<18|_l.indexOf(i.charAt(o++))<<12|(r=_l.indexOf(i.charAt(o++)))<<6|(s=_l.indexOf(i.charAt(o++))),n+=r===64?String.fromCharCode(t>>16&255):s===64?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,t&255);return n}var wie=()=>navigator.webdriver||!!document.documentElement.getAttribute(Mie("d2ViZHJpdmVy"))||!!window.callPhantom||!!window._phantom,Tie=class{constructor(){this.loadedAt=Date.now(),this.webdriver=wie()}data(){return{loadedAt:this.loadedAt,webdriver:this.webdriver}}},Cie=class{constructor(i){this.kind="success",this.next=i.next}};function bie(i){return"next"in i&&typeof i.next=="string"}var Rie=class{constructor(i,t){this.paymentIntentClientSecret=i,this.resubmitKey=t,this.kind="stripePluginPending"}};function Pie(i){if("stripe"in i&&"resubmitKey"in i&&typeof i.resubmitKey=="string"){let{stripe:t}=i;return typeof t=="object"&&t!=null&&"paymentIntentClientSecret"in t&&typeof t.paymentIntentClientSecret=="string"}return!1}function Bie(i){return i.kind==="error"}var Bc=class{constructor(...i){this.kind="error",this.formErrors=[],this.fieldErrors=new Map;var t;for(let n of i){if(!n.field){this.formErrors.push({code:n.code&&Iie(n.code)?n.code:"UNSPECIFIED",message:n.message});continue}let r=(t=this.fieldErrors.get(n.field))!=null?t:[];r.push({code:n.code&&Lie(n.code)?n.code:"UNSPECIFIED",message:n.message}),this.fieldErrors.set(n.field,r)}}getFormErrors(){return[...this.formErrors]}getFieldErrors(i){var t;return(t=this.fieldErrors.get(i))!=null?t:[]}getAllFieldErrors(){return Array.from(this.fieldErrors)}};function Iie(i){return i in Die}var Die={BLOCKED:"BLOCKED",EMPTY:"EMPTY",FILES_TOO_BIG:"FILES_TOO_BIG",FORM_NOT_FOUND:"FORM_NOT_FOUND",INACTIVE:"INACTIVE",NO_FILE_UPLOADS:"NO_FILE_UPLOADS",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",TOO_MANY_FILES:"TOO_MANY_FILES"};function Lie(i){return i in Uie}var Uie={REQUIRED_FIELD_EMPTY:"REQUIRED_FIELD_EMPTY",REQUIRED_FIELD_MISSING:"REQUIRED_FIELD_MISSING",STRIPE_CLIENT_ERROR:"STRIPE_CLIENT_ERROR",STRIPE_SCA_ERROR:"STRIPE_SCA_ERROR",TYPE_EMAIL:"TYPE_EMAIL",TYPE_NUMERIC:"TYPE_NUMERIC",TYPE_TEXT:"TYPE_TEXT"};function Fie(i){return"errors"in i&&Array.isArray(i.errors)&&i.errors.every(t=>typeof t.message=="string")||"error"in i&&typeof i.error=="string"}var Oie="3.0.1",Nie=i=>Eie(JSON.stringify(i)),kie=i=>{let t=`@formspree/core@${Oie}`;return i?`${i} ${t}`:t};function R0(i,t,n){i instanceof FormData?i.append(t,n):i[t]=n}function zie(i){return i!==null&&typeof i=="object"}var Gie=class{constructor(i={}){this.project=i.project,this.stripe=i.stripe,typeof window<"u"&&(this.session=new Tie)}submitForm(i,t){return hD(this,arguments,function*(n,r,s={}){let o=s.endpoint||"https://formspree.io",a=this.project?`${o}/p/${this.project}/f/${n}`:`${o}/f/${n}`,l={Accept:"application/json","Formspree-Client":kie(s.clientName)};this.session&&(l["Formspree-Session-Data"]=Nie(this.session.data())),r instanceof FormData||(l["Content-Type"]="application/json");function c(h){return hD(this,null,function*(){try{let f=yield(yield fetch(a,{method:"POST",mode:"cors",body:h instanceof FormData?h:JSON.stringify(h),headers:l})).json();if(zie(f)){if(Fie(f))return Array.isArray(f.errors)?new Bc(...f.errors):new Bc({message:f.error});if(Pie(f))return new Rie(f.stripe.paymentIntentClientSecret,f.resubmitKey);if(bie(f))return new Cie({next:f.next})}return new Bc({message:"Unexpected response format"})}catch(f){let p=f instanceof Error?f.message:`Unknown error while posting to Formspree: ${JSON.stringify(f)}`;return new Bc({message:p})}})}if(this.stripe&&s.createPaymentMethod){let h=yield s.createPaymentMethod();if(h.error)return new Bc({code:"STRIPE_CLIENT_ERROR",field:"paymentMethod",message:"Error creating payment method"});R0(r,"paymentMethod",h.paymentMethod.id);let f=yield c(r);if(f.kind==="error")return f;if(f.kind==="stripePluginPending"){let p=yield this.stripe.handleCardAction(f.paymentIntentClientSecret);if(p.error)return new Bc({code:"STRIPE_CLIENT_ERROR",field:"paymentMethod",message:"Stripe SCA error"});r instanceof FormData?r.delete("paymentMethod"):delete r.paymentMethod,R0(r,"paymentIntent",p.paymentIntent.id),R0(r,"resubmitKey",f.resubmitKey);let g=yield c(r);return fD(g),g}return f}let u=yield c(r);return fD(u),u})}};function fD(i){let{kind:t}=i;if(t!=="success"&&t!=="error")throw new Error(`Unexpected submission result (kind: ${t})`)}var o4=i=>new Gie(i),Hie=()=>(WS||(WS=o4()),WS),WS,a4={};Object.defineProperty(a4,"__esModule",{value:!0});function P0(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P0=function(t){return typeof t}:P0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P0(i)}var l4="https://js.stripe.com/v3",Vie=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,dD="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Wie=function(){for(var t=document.querySelectorAll('script[src^="'.concat(l4,'"]')),n=0;n<t.length;n++){var r=t[n];if(Vie.test(r.src))return r}return null},Xie=function(t){var n=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(l4).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},jie=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:n})},n0=null,Yie=function(t){return n0!==null||(n0=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(dD),window.Stripe){n(window.Stripe);return}try{var s=Wie();s&&t?console.warn(dD):s||(s=Xie(t)),s.addEventListener("load",function(){window.Stripe?n(window.Stripe):r(new Error("Stripe.js not available"))}),s.addEventListener("error",function(){r(new Error("Failed to load Stripe.js"))})}catch(o){r(o);return}})),n0},Jie=function(t,n,r){if(t===null)return null;var s=t.apply(void 0,n);return jie(s,r),s},pD=function(t){var n=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(t),`
`);if(t===null||P0(t)!=="object")throw new Error(n);if(Object.keys(t).length===1&&typeof t.advancedFraudSignals=="boolean")return t;throw new Error(n)},B0,pM=!1,c4=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];pM=!0;var s=Date.now();return Yie(B0).then(function(o){return Jie(o,n,s)})};c4.setLoadParameters=function(i){if(pM&&B0){var t=pD(i),n=Object.keys(t),r=n.reduce(function(s,o){var a;return s&&i[o]===((a=B0)===null||a===void 0?void 0:a[o])},!0);if(r)return}if(pM)throw new Error("You cannot change load parameters after calling loadStripe");B0=pD(i)};a4.loadStripe=c4;function mD(i){let{prefix:t,field:n,errors:r,...s}=i;if(r==null)return null;let o=n?r.getFieldErrors(n):r.getFormErrors();return o.length===0?null:Rn.createElement("div",{...s},t?`${t} `:null,o.map(a=>a.message).join(", "))}var Kie=Rn.createContext(null);function Zie(){return ee.useContext(Kie)??{client:dM.getDefaultClient()}}var Qie="2.5.1",qie=`@formspree/react@${Qie}`;function $ie(i,t={}){let n=Zie(),{client:r=n.client,extraData:s,onError:o,onSuccess:a,origin:l}=t,{stripe:c}=r,u=ee.useMemo(()=>c==null?void 0:c.elements().getElement(mie),[c]);return async function(h){let f=ere(h)?tre(h):h;if(typeof s=="object")for(let[g,v]of Object.entries(s)){let _;typeof v=="function"?_=await v():_=v,_!==void 0&&dM.appendExtraData(f,g,_)}let p=await r.submitForm(i,f,{endpoint:l,clientName:qie,createPaymentMethod:c&&u?()=>c.createPaymentMethod({type:"card",card:u,billing_details:nre(f)}):void 0});dM.isSubmissionError(p)?o==null||o(p):a==null||a(p)}}function ere(i){return"preventDefault"in i&&typeof i.preventDefault=="function"}function tre(i){i.preventDefault();let t=i.currentTarget;if(t.tagName!="FORM")throw new Error("submit was triggered for a non-form element");return new FormData(t)}function nre(i){let t={address:ire(i)};for(let n of["name","email","phone"]){let r=i instanceof FormData?i.get(n):i[n];r&&typeof r=="string"&&(t[n]=r)}return t}function ire(i){let t={};for(let[n,r]of[["address_line1","line1"],["address_line2","line2"],["address_city","city"],["address_country","country"],["address_state","state"],["address_postal_code","postal_code"]]){let s=i instanceof FormData?i.get(n):i[n];s&&typeof s=="string"&&(t[r]=s)}return t}function rre(i,t={}){let[n,r]=ee.useState(null),[s,o]=ee.useState(null),[a,l]=ee.useState(!1),[c,u]=ee.useState(!1);if(!i)throw new Error('You must provide a form key or hashid (e.g. useForm("myForm") or useForm("123xyz")');let h=$ie(i,{client:t.client,extraData:t.data,onError(f){r(f),l(!1),u(!1)},onSuccess(f){r(null),o(f),l(!1),u(!0)},origin:t.endpoint});return[{errors:n,result:s,submitting:a,succeeded:c},async function(f){l(!0),await h(f)},function(){r(null),o(null),l(!1),u(!1)}]}function sre(i){const{navigate:t,setNavigate:n,onMobile:r}=i,[s,o]=rre("xjvnyvlv"),a=u=>{const{children:h,mobileTop:f}=u;return Me.jsx(Ec.section,{className:`
  h-screen 
  flex flex-col items-start 
  ${f?"justify-start md:justify-center":"justify-center"}
  `,initial:{opacity:0,y:50,x:r?15:100,scale:r?1.2:1},whileInView:{opacity:1,y:0,transition:{duration:1,delay:.6}},children:h})},l=[{title:"JavaScript",level:90},{title:"Threejs / React Three Fiber",level:50},{title:"React / React Native",level:90},{title:"Nodejs",level:90},{title:"Typescript",level:60},{title:"Express",level:80},{title:"Sequalize-CLI",level:80}],c=[{title:" Russian",level:100},{title:" English",level:80}];return Me.jsx(a,{children:t===1?Me.jsxs(Ec.div,{whileInView:"visible",animate:{duration:.1,scaleX:r?.6:1.2,scaleY:r?.6:.9},children:[Me.jsx("h2",{className:"text-5xl font-bold text-white",children:"Skills"}),Me.jsx("div",{className:" mt-8 space-y-4",children:l.map((u,h)=>Me.jsxs("div",{className:"w-64",children:[Me.jsx(Ec.h3,{className:"text-xl font-bold text-gray-100",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:1+h*.2}}},children:u.title}),Me.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-full mt-2",children:Me.jsx(Ec.div,{className:"h-full bg-red-600 rounded-full ",style:{width:`${u.level}%`},initial:{scaleX:0,originX:0},variants:{visible:{scaleX:1,transition:{duration:1,delay:1+h*.2}}}})})]},h))}),Me.jsxs("div",{children:[Me.jsx("h2",{className:"text-5xl font-bold mt-10 text-white",children:"Languages"}),Me.jsxs("div",{className:" mt-8 space-y-4",children:[c.map((u,h)=>Me.jsxs("div",{className:"w-64",children:[Me.jsx(Ec.h3,{className:"text-xl font-bold text-gray-100",initial:{opacity:0},variants:{visible:{opacity:1,transition:{duration:1,delay:2+h*.2}}},children:u.title}),Me.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-full mt-2",children:Me.jsx(Ec.div,{className:"h-full bg-red-600 rounded-full ",style:{width:`${u.level}%`},initial:{scaleX:0,originX:0},variants:{visible:{scaleX:1,transition:{duration:1,delay:2+h*.2}}}})})]},h)),Me.jsx("button",{onClick:()=>{e.preventDefault(),n(0)},className:"bg-indigo-600 text-white py-4 px-8 rounded-lg font-bold text-lg mt-16 ml-20 ",children:"Home"})]})]})]}):t===2?Me.jsx(a,{children:Me.jsxs(Ec.div,{whileInView:"visible",animate:{duration:.1,scaleX:r?.6:1.2,scaleY:r?.6:1.1,scaleZ:r?.6:1},children:[Me.jsx("h2",{className:"text-3xl md:text-5xl font-bold ml-16",children:"Contact me"}),Me.jsx("div",{className:"mt-8 p-8 rounded-md bg-white bg-opacity-50 w-96 max-w-full",children:s.succeeded?Me.jsxs(Me.Fragment,{children:[Me.jsx("p",{className:"text-gray-900 text-center",children:"Thanks for your message !"}),Me.jsx("button",{onClick:()=>n(0),className:"bg-indigo-600 text-white py-4 px-20 rounded-lg font-bold text-lg ml-14  ",children:"Home"})]}):Me.jsxs(Me.Fragment,{children:[Me.jsx("button",{onClick:()=>n(0),className:"bg-indigo-600 text-white py-0 px-1 rounded-lg font-bold text-xl ml-80    ",children:"X"}),Me.jsxs("form",{onSubmit:o,autoComplete:"off",children:[Me.jsx("label",{htmlFor:"name",className:"font-medium text-gray-900 block mb-1",children:"Name"}),Me.jsx("input",{type:"text",name:"name",id:"name",className:"block w-full rounded-md border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 p-3"}),Me.jsx("label",{htmlFor:"email",className:"font-medium text-gray-900 block mb-1 mt-8",children:"Email"}),Me.jsx("input",{type:"email",name:"email",id:"email",className:"block w-full rounded-md border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 p-3"}),Me.jsx(mD,{className:"mt-1 text-red-500",prefix:"Email",field:"email",errors:s.errors}),Me.jsx("label",{htmlFor:"email",className:"font-medium text-gray-900 block mb-1 mt-8",children:"Message"}),Me.jsx("textarea",{name:"message",id:"message",className:"h-32 block w-full rounded-md border-0 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 p-3"}),Me.jsx(mD,{className:"mt-1 text-red-500",errors:s.errors}),Me.jsx("button",{disabled:s.submitting,className:"bg-indigo-600 text-white py-4 px-8 rounded-lg font-bold text-lg ml-24 ",children:"Submit"})]})]})})]})}):null})}function ore(i){const{navigate:t,setNavigate:n}=i;ee.useState(!0);const[r,s]=ee.useState("Typing"),o=ee.useRef(),{viewport:a}=jn(),l=window.innerWidth<768;a.width/12;const c=new Ke("#007FFF");c.multiplyScalar(1.1),ee.useEffect(()=>{s("Falling"),setTimeout(()=>{s(t===0?"Typing":t===1?"Running":"Standing")},600)},[t]);const u=async()=>{o.current.dolly(-22),o.current.smoothTime=.5,o.current.dolly(22,!0)},h=async()=>{o.current.dolly(-8),o.current.smoothTime=.1,o.current.dolly(8,!0),n(1)},f=async()=>{o.current.dolly(-8),o.current.smoothTime=.1,o.current.dolly(8,!0),n(2)};return ee.useEffect(()=>{u()},[]),Me.jsxs(Me.Fragment,{children:[Me.jsxs(Yd.group,{"rotation-x":6.3,"rotation-y":-Math.PI/7,scale:l?.3:1,animate:{x:t===0?0:t===1?l?-.7:-2.3:t===2?l?-.2:-.4:0,y:t===0?0:t===1?l?2.62:1.8:t===2?l?2.61:1.83:0,z:t===0?0:t===1?l?8.75:10.6:t===2?l?9.06:11.65:0,rotateY:t===0?-Math.PI/7:t===1?.4:t===2?l?1.05:1.1:0},children:[Me.jsx("group",{"position-x":-1.5,"position-y":1,"position-z":2,children:Me.jsxs(pS,{font:"fonts/Poppins-Medium.ttf",fontSize:.35,lineHeight:1.2,textAlign:"center","rotation-y":t0(75),children:["Hi everyone!!!",`
`,"My name is Oleg, and I am ",`
`,"a FullStack developer.",`
`,"This is my Portfolio page.",`
`,Me.jsx("meshBasicMaterial",{color:"#007aa5"})]})}),Me.jsx(Yd.group,{"position-x":-2,"position-y":0,"position-z":3.5,scale:.25,animate:{scale:[.3,.25,.3]},transition:{duration:2,smoothTime:1,ease:"easeIn",repeat:1/0},onClick:()=>{h()},children:Me.jsx(pS,{font:"fonts/Poppins-Medium.ttf",fontSize:1.5,"rotation-y":t0(75),color:c,children:"AboutMe"})}),Me.jsx(Yd.group,{name:"ContactMe","position-x":-1.3,"position-y":0,"position-z":1,scale:.25,animate:{scale:[.3,.25,.3]},transition:{duration:2,smoothTime:1,ease:"easeIn",repeat:1/0},onClick:()=>{f()},children:Me.jsxs(pS,{font:"fonts/Poppins-Medium.ttf",fontSize:1.5,"rotation-y":t0(75),color:c,children:["ContactMe",Me.jsx("meshBasicMaterial",{})]})}),Me.jsx(bJ,{global:!0,config:{mass:2,tension:500},snap:{mass:2,tension:1500},rotation:[0,.3,0],polar:[-Math.PI/3,Math.PI/3],azimuth:[-Math.PI/1.4,Math.PI/2],children:Me.jsxs("group",{scale:.5,"rotation-y":t0(-60),"position-x":2,"position-y":0,"position-z":0,children:[Me.jsx(nie,{setNavigate:n}),Me.jsx(Yd.group,{name:"Avatar",rotation:[-Math.PI,.06,-Math.PI],"rotation-x":-Math.PI/2,animate:{x:t===0?1:t===1?l?.48:.52:t===2?l?1.62:1.25:1,y:t===0?.1:t===1?1.98:t===2?l?1.9:1.8:.1,z:t===0?-1.8:t===1?l?-3.55:-3.5:t===2?l?-3.6:-3.5:-1.8,scale:t===0?2.018:t===1?.15:t===2?.2:2.018,rotateZ:t===0?-Math.PI:t===1?.1:t===2?l?0:.1:-1.1},children:Me.jsx(fQ,{animation:r})})]})})]}),Me.jsxs("mesh",{name:"Floor","position-y":-.48,"rotation-x":-Math.PI/2,children:[Me.jsx("planeGeometry",{args:[100,100]}),Me.jsx(sQ,{blur:[50,50],resolution:512,mixBlur:1,mixStrength:10,roughness:1,depthScale:1,opacity:.5,transparent:!0,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#333",metalness:1})]}),Me.jsx(ZZ,{ref:o,smoothTime:1,enableZoom:!1,maxAzimuthAngle:0,minAzimuthAngle:0,maxPolarAngle:1.5,enabled:!1}),Me.jsx(ZX,{"position-x":l?-1.5:-2,"position-y":3,children:Me.jsx(sre,{navigate:t,setNavigate:n,onMobile:l})}),Me.jsx(qne,{multisampling:0,children:Me.jsx(tie,{intensity:1,luminanceThreshold:.6,luminanceSmoothing:.5})}),Me.jsx(hQ,{preset:"forest"})]})}RT.preload("fonts/Poppins-Medium.ttf");function are(i){const{load:t,setLoad:n}=i,{progress:r,total:s,loaded:o,item:a}=QX();return ee.useEffect(()=>{r===100&&n(!0)},[r,s,o,a]),Me.jsx("div",{className:`fixed top-0 left-0 w-full h-full z-50 transition-opacity duration-1000 pointer-events-none
  flex items-center justify-center bg-slate-950
  ${t?"opacity-0":"opacity-100"}`,children:Me.jsxs("div",{className:"text-4xl md:text-9xl font-bold text-indigo-900 relative",children:[Me.jsx("div",{className:"absolute left-0 top-0  overflow-hidden truncate text-clip transition-all duration-500",style:{width:`${r}%`},children:"Loading..."}),Me.jsx("div",{className:"opacity-40",children:"Loading..."})]})})}function lre(){const[i,t]=ee.useState(0),[n,r]=ee.useState(!1),[s,o]=ee.useState(!1);return Me.jsxs(Me.Fragment,{children:[Me.jsx(are,{load:s,setLoad:o}),Me.jsx(gte,{transition:{type:"spring",mass:5,stiffness:500,damping:100,restDelta:1e-4},children:Me.jsxs(zX,{camera:{position:[0,3,8],fov:40},shadows:!0,children:[Me.jsx("color",{attach:"background",args:["#171720"]}),Me.jsx("fog",{attach:"fog",args:["#171720",10,30]}),Me.jsx("ambientLight",{intensity:1}),Me.jsx(ore,{onMonitor:n,setOnMonitor:r,navigate:i,setNavigate:t})]})})]})}XS.createRoot(document.getElementById("root")).render(Me.jsx(Rn.StrictMode,{children:Me.jsx(lre,{})}));
